var fL=Object.defineProperty;var Wx=o=>{throw TypeError(o)};var pL=(o,t,e)=>t in o?fL(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var W=(o,t,e)=>pL(o,typeof t!="symbol"?t+"":t,e),ub=(o,t,e)=>t.has(o)||Wx("Cannot "+e);var u=(o,t,e)=>(ub(o,t,"read from private field"),e?e.call(o):t.get(o)),x=(o,t,e)=>t.has(o)?Wx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(o):t.set(o,e),T=(o,t,e,n)=>(ub(o,t,"write to private field"),n?n.call(o,e):t.set(o,e),e),N=(o,t,e)=>(ub(o,t,"access private method"),e);var an=(o,t,e,n)=>({set _(s){T(o,t,s,e)},get _(){return u(o,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();function gR(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var db={exports:{}},Xf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qx;function mL(){if(Qx)return Xf;Qx=1;var o=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var d in s)d!=="key"&&(a[d]=s[d])}else a=s;return s=a.ref,{$$typeof:o,type:n,key:l,ref:s!==void 0?s:null,props:a}}return Xf.Fragment=t,Xf.jsx=e,Xf.jsxs=e,Xf}var Zx;function gL(){return Zx||(Zx=1,db.exports=mL()),db.exports}var k=gL(),hb={exports:{}},Nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jx;function yL(){if(jx)return Nt;jx=1;var o=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),A=Symbol.iterator;function E(H){return H===null||typeof H!="object"?null:(H=A&&H[A]||H["@@iterator"],typeof H=="function"?H:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,M={};function R(H,K,st){this.props=H,this.context=K,this.refs=M,this.updater=st||_}R.prototype.isReactComponent={},R.prototype.setState=function(H,K){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,K,"setState")},R.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function L(){}L.prototype=R.prototype;function I(H,K,st){this.props=H,this.context=K,this.refs=M,this.updater=st||_}var U=I.prototype=new L;U.constructor=I,C(U,R.prototype),U.isPureReactComponent=!0;var P=Array.isArray;function O(){}var F={H:null,A:null,T:null,S:null},Z=Object.prototype.hasOwnProperty;function X(H,K,st){var at=st.ref;return{$$typeof:o,type:H,key:K,ref:at!==void 0?at:null,props:st}}function nt(H,K){return X(H.type,K,H.props)}function it(H){return typeof H=="object"&&H!==null&&H.$$typeof===o}function dt(H){var K={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(st){return K[st]})}var gt=/\/+/g;function ct(H,K){return typeof H=="object"&&H!==null&&H.key!=null?dt(""+H.key):K.toString(36)}function At(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(O,O):(H.status="pending",H.then(function(K){H.status==="pending"&&(H.status="fulfilled",H.value=K)},function(K){H.status==="pending"&&(H.status="rejected",H.reason=K)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function z(H,K,st,at,pt){var bt=typeof H;(bt==="undefined"||bt==="boolean")&&(H=null);var Et=!1;if(H===null)Et=!0;else switch(bt){case"bigint":case"string":case"number":Et=!0;break;case"object":switch(H.$$typeof){case o:case t:Et=!0;break;case m:return Et=H._init,z(Et(H._payload),K,st,at,pt)}}if(Et)return pt=pt(H),Et=at===""?"."+ct(H,0):at,P(pt)?(st="",Et!=null&&(st=Et.replace(gt,"$&/")+"/"),z(pt,K,st,"",function(Ps){return Ps})):pt!=null&&(it(pt)&&(pt=nt(pt,st+(pt.key==null||H&&H.key===pt.key?"":(""+pt.key).replace(gt,"$&/")+"/")+Et)),K.push(pt)),1;Et=0;var on=at===""?".":at+":";if(P(H))for(var we=0;we<H.length;we++)at=H[we],bt=on+ct(at,we),Et+=z(at,K,st,bt,pt);else if(we=E(H),typeof we=="function")for(H=we.call(H),we=0;!(at=H.next()).done;)at=at.value,bt=on+ct(at,we++),Et+=z(at,K,st,bt,pt);else if(bt==="object"){if(typeof H.then=="function")return z(At(H),K,st,at,pt);throw K=String(H),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Et}function Q(H,K,st){if(H==null)return H;var at=[],pt=0;return z(H,at,"","",function(bt){return K.call(st,bt,pt++)}),at}function ot(H){if(H._status===-1){var K=H._result;K=K(),K.then(function(st){(H._status===0||H._status===-1)&&(H._status=1,H._result=st)},function(st){(H._status===0||H._status===-1)&&(H._status=2,H._result=st)}),H._status===-1&&(H._status=0,H._result=K)}if(H._status===1)return H._result.default;throw H._result}var Ct=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Rt={map:Q,forEach:function(H,K,st){Q(H,function(){K.apply(this,arguments)},st)},count:function(H){var K=0;return Q(H,function(){K++}),K},toArray:function(H){return Q(H,function(K){return K})||[]},only:function(H){if(!it(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Nt.Activity=v,Nt.Children=Rt,Nt.Component=R,Nt.Fragment=e,Nt.Profiler=s,Nt.PureComponent=I,Nt.StrictMode=n,Nt.Suspense=h,Nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Nt.__COMPILER_RUNTIME={__proto__:null,c:function(H){return F.H.useMemoCache(H)}},Nt.cache=function(H){return function(){return H.apply(null,arguments)}},Nt.cacheSignal=function(){return null},Nt.cloneElement=function(H,K,st){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var at=C({},H.props),pt=H.key;if(K!=null)for(bt in K.key!==void 0&&(pt=""+K.key),K)!Z.call(K,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&K.ref===void 0||(at[bt]=K[bt]);var bt=arguments.length-2;if(bt===1)at.children=st;else if(1<bt){for(var Et=Array(bt),on=0;on<bt;on++)Et[on]=arguments[on+2];at.children=Et}return X(H.type,pt,at)},Nt.createContext=function(H){return H={$$typeof:l,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:a,_context:H},H},Nt.createElement=function(H,K,st){var at,pt={},bt=null;if(K!=null)for(at in K.key!==void 0&&(bt=""+K.key),K)Z.call(K,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(pt[at]=K[at]);var Et=arguments.length-2;if(Et===1)pt.children=st;else if(1<Et){for(var on=Array(Et),we=0;we<Et;we++)on[we]=arguments[we+2];pt.children=on}if(H&&H.defaultProps)for(at in Et=H.defaultProps,Et)pt[at]===void 0&&(pt[at]=Et[at]);return X(H,bt,pt)},Nt.createRef=function(){return{current:null}},Nt.forwardRef=function(H){return{$$typeof:d,render:H}},Nt.isValidElement=it,Nt.lazy=function(H){return{$$typeof:m,_payload:{_status:-1,_result:H},_init:ot}},Nt.memo=function(H,K){return{$$typeof:f,type:H,compare:K===void 0?null:K}},Nt.startTransition=function(H){var K=F.T,st={};F.T=st;try{var at=H(),pt=F.S;pt!==null&&pt(st,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(O,Ct)}catch(bt){Ct(bt)}finally{K!==null&&st.types!==null&&(K.types=st.types),F.T=K}},Nt.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Nt.use=function(H){return F.H.use(H)},Nt.useActionState=function(H,K,st){return F.H.useActionState(H,K,st)},Nt.useCallback=function(H,K){return F.H.useCallback(H,K)},Nt.useContext=function(H){return F.H.useContext(H)},Nt.useDebugValue=function(){},Nt.useDeferredValue=function(H,K){return F.H.useDeferredValue(H,K)},Nt.useEffect=function(H,K){return F.H.useEffect(H,K)},Nt.useEffectEvent=function(H){return F.H.useEffectEvent(H)},Nt.useId=function(){return F.H.useId()},Nt.useImperativeHandle=function(H,K,st){return F.H.useImperativeHandle(H,K,st)},Nt.useInsertionEffect=function(H,K){return F.H.useInsertionEffect(H,K)},Nt.useLayoutEffect=function(H,K){return F.H.useLayoutEffect(H,K)},Nt.useMemo=function(H,K){return F.H.useMemo(H,K)},Nt.useOptimistic=function(H,K){return F.H.useOptimistic(H,K)},Nt.useReducer=function(H,K,st){return F.H.useReducer(H,K,st)},Nt.useRef=function(H){return F.H.useRef(H)},Nt.useState=function(H){return F.H.useState(H)},Nt.useSyncExternalStore=function(H,K,st){return F.H.useSyncExternalStore(H,K,st)},Nt.useTransition=function(){return F.H.useTransition()},Nt.version="19.2.4",Nt}var t1;function ET(){return t1||(t1=1,hb.exports=yL()),hb.exports}var jt=ET();const vL=gR(jt);var fb={exports:{}},Jf={},pb={exports:{}},mb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e1;function AL(){return e1||(e1=1,(function(o){function t(z,Q){var ot=z.length;z.push(Q);t:for(;0<ot;){var Ct=ot-1>>>1,Rt=z[Ct];if(0<s(Rt,Q))z[Ct]=Q,z[ot]=Rt,ot=Ct;else break t}}function e(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var Q=z[0],ot=z.pop();if(ot!==Q){z[0]=ot;t:for(var Ct=0,Rt=z.length,H=Rt>>>1;Ct<H;){var K=2*(Ct+1)-1,st=z[K],at=K+1,pt=z[at];if(0>s(st,ot))at<Rt&&0>s(pt,st)?(z[Ct]=pt,z[at]=ot,Ct=at):(z[Ct]=st,z[K]=ot,Ct=K);else if(at<Rt&&0>s(pt,ot))z[Ct]=pt,z[at]=ot,Ct=at;else break t}}return Q}function s(z,Q){var ot=z.sortIndex-Q.sortIndex;return ot!==0?ot:z.id-Q.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;o.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();o.unstable_now=function(){return l.now()-d}}var h=[],f=[],m=1,v=null,A=3,E=!1,_=!1,C=!1,M=!1,R=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function U(z){for(var Q=e(f);Q!==null;){if(Q.callback===null)n(f);else if(Q.startTime<=z)n(f),Q.sortIndex=Q.expirationTime,t(h,Q);else break;Q=e(f)}}function P(z){if(C=!1,U(z),!_)if(e(h)!==null)_=!0,O||(O=!0,dt());else{var Q=e(f);Q!==null&&At(P,Q.startTime-z)}}var O=!1,F=-1,Z=5,X=-1;function nt(){return M?!0:!(o.unstable_now()-X<Z)}function it(){if(M=!1,O){var z=o.unstable_now();X=z;var Q=!0;try{t:{_=!1,C&&(C=!1,L(F),F=-1),E=!0;var ot=A;try{e:{for(U(z),v=e(h);v!==null&&!(v.expirationTime>z&&nt());){var Ct=v.callback;if(typeof Ct=="function"){v.callback=null,A=v.priorityLevel;var Rt=Ct(v.expirationTime<=z);if(z=o.unstable_now(),typeof Rt=="function"){v.callback=Rt,U(z),Q=!0;break e}v===e(h)&&n(h),U(z)}else n(h);v=e(h)}if(v!==null)Q=!0;else{var H=e(f);H!==null&&At(P,H.startTime-z),Q=!1}}break t}finally{v=null,A=ot,E=!1}Q=void 0}}finally{Q?dt():O=!1}}}var dt;if(typeof I=="function")dt=function(){I(it)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,ct=gt.port2;gt.port1.onmessage=it,dt=function(){ct.postMessage(null)}}else dt=function(){R(it,0)};function At(z,Q){F=R(function(){z(o.unstable_now())},Q)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(z){z.callback=null},o.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<z?Math.floor(1e3/z):5},o.unstable_getCurrentPriorityLevel=function(){return A},o.unstable_next=function(z){switch(A){case 1:case 2:case 3:var Q=3;break;default:Q=A}var ot=A;A=Q;try{return z()}finally{A=ot}},o.unstable_requestPaint=function(){M=!0},o.unstable_runWithPriority=function(z,Q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ot=A;A=z;try{return Q()}finally{A=ot}},o.unstable_scheduleCallback=function(z,Q,ot){var Ct=o.unstable_now();switch(typeof ot=="object"&&ot!==null?(ot=ot.delay,ot=typeof ot=="number"&&0<ot?Ct+ot:Ct):ot=Ct,z){case 1:var Rt=-1;break;case 2:Rt=250;break;case 5:Rt=1073741823;break;case 4:Rt=1e4;break;default:Rt=5e3}return Rt=ot+Rt,z={id:m++,callback:Q,priorityLevel:z,startTime:ot,expirationTime:Rt,sortIndex:-1},ot>Ct?(z.sortIndex=ot,t(f,z),e(h)===null&&z===e(f)&&(C?(L(F),F=-1):C=!0,At(P,ot-Ct))):(z.sortIndex=Rt,t(h,z),_||E||(_=!0,O||(O=!0,dt()))),z},o.unstable_shouldYield=nt,o.unstable_wrapCallback=function(z){var Q=A;return function(){var ot=A;A=Q;try{return z.apply(this,arguments)}finally{A=ot}}}})(mb)),mb}var n1;function SL(){return n1||(n1=1,pb.exports=AL()),pb.exports}var gb={exports:{}},Bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i1;function bL(){if(i1)return Bn;i1=1;var o=ET();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(h,f,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:h,containerInfo:f,implementation:m}}var l=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Bn.createPortal=function(h,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(h,f,null,m)},Bn.flushSync=function(h){var f=l.T,m=n.p;try{if(l.T=null,n.p=2,h)return h()}finally{l.T=f,n.p=m,n.d.f()}},Bn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(h,f))},Bn.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},Bn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var m=f.as,v=d(m,f.crossOrigin),A=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?n.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:A,fetchPriority:E}):m==="script"&&n.d.X(h,{crossOrigin:v,integrity:A,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Bn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=d(f.as,f.crossOrigin);n.d.M(h,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(h)},Bn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,v=d(m,f.crossOrigin);n.d.L(h,m,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Bn.preloadModule=function(h,f){if(typeof h=="string")if(f){var m=d(f.as,f.crossOrigin);n.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(h)},Bn.requestFormReset=function(h){n.d.r(h)},Bn.unstable_batchedUpdates=function(h,f){return h(f)},Bn.useFormState=function(h,f,m){return l.H.useFormState(h,f,m)},Bn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Bn.version="19.2.4",Bn}var s1;function EL(){if(s1)return gb.exports;s1=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(t){console.error(t)}}return o(),gb.exports=bL(),gb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o1;function TL(){if(o1)return Jf;o1=1;var o=SL(),t=ET(),e=EL();function n(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var r=i,c=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(c=r.return),i=r.return;while(i)}return r.tag===3?c:null}function l(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(a(i)!==i)throw Error(n(188))}function f(i){var r=i.alternate;if(!r){if(r=a(i),r===null)throw Error(n(188));return r!==i?null:i}for(var c=i,p=r;;){var S=c.return;if(S===null)break;var b=S.alternate;if(b===null){if(p=S.return,p!==null){c=p;continue}break}if(S.child===b.child){for(b=S.child;b;){if(b===c)return h(S),i;if(b===p)return h(S),r;b=b.sibling}throw Error(n(188))}if(c.return!==p.return)c=S,p=b;else{for(var w=!1,D=S.child;D;){if(D===c){w=!0,c=S,p=b;break}if(D===p){w=!0,p=S,c=b;break}D=D.sibling}if(!w){for(D=b.child;D;){if(D===c){w=!0,c=b,p=S;break}if(D===p){w=!0,p=b,c=S;break}D=D.sibling}if(!w)throw Error(n(189))}}if(c.alternate!==p)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?i:r}function m(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=m(i),r!==null)return r;i=i.sibling}return null}var v=Object.assign,A=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),I=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),nt=Symbol.for("react.memo_cache_sentinel"),it=Symbol.iterator;function dt(i){return i===null||typeof i!="object"?null:(i=it&&i[it]||i["@@iterator"],typeof i=="function"?i:null)}var gt=Symbol.for("react.client.reference");function ct(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===gt?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case C:return"Fragment";case R:return"Profiler";case M:return"StrictMode";case P:return"Suspense";case O:return"SuspenseList";case X:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case _:return"Portal";case I:return i.displayName||"Context";case L:return(i._context.displayName||"Context")+".Consumer";case U:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case F:return r=i.displayName||null,r!==null?r:ct(i.type)||"Memo";case Z:r=i._payload,i=i._init;try{return ct(i(r))}catch{}}return null}var At=Array.isArray,z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot={pending:!1,data:null,method:null,action:null},Ct=[],Rt=-1;function H(i){return{current:i}}function K(i){0>Rt||(i.current=Ct[Rt],Ct[Rt]=null,Rt--)}function st(i,r){Rt++,Ct[Rt]=i.current,i.current=r}var at=H(null),pt=H(null),bt=H(null),Et=H(null);function on(i,r){switch(st(bt,r),st(pt,i),st(at,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?Ax(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=Ax(r),i=Sx(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}K(at),st(at,i)}function we(){K(at),K(pt),K(bt)}function Ps(i){i.memoizedState!==null&&st(Et,i);var r=at.current,c=Sx(r,i.type);r!==c&&(st(pt,i),st(at,c))}function is(i){pt.current===i&&(K(at),K(pt)),Et.current===i&&(K(Et),Vf._currentValue=ot)}var xl,jh;function Fo(i){if(xl===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);xl=r&&r[1]||"",jh=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xl+i+jh}var Xv=!1;function Jv(i,r){if(!i||Xv)return"";Xv=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(r){var et=function(){throw Error()};if(Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(J){var $=J}Reflect.construct(i,[],et)}else{try{et.call()}catch(J){$=J}i.call(et.prototype)}}else{try{throw Error()}catch(J){$=J}(et=i())&&typeof et.catch=="function"&&et.catch(function(){})}}catch(J){if(J&&$&&typeof J.stack=="string")return[J.stack,$.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=p.DetermineComponentFrameRoot(),w=b[0],D=b[1];if(w&&D){var B=w.split(`
`),Y=D.split(`
`);for(S=p=0;p<B.length&&!B[p].includes("DetermineComponentFrameRoot");)p++;for(;S<Y.length&&!Y[S].includes("DetermineComponentFrameRoot");)S++;if(p===B.length||S===Y.length)for(p=B.length-1,S=Y.length-1;1<=p&&0<=S&&B[p]!==Y[S];)S--;for(;1<=p&&0<=S;p--,S--)if(B[p]!==Y[S]){if(p!==1||S!==1)do if(p--,S--,0>S||B[p]!==Y[S]){var j=`
`+B[p].replace(" at new "," at ");return i.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",i.displayName)),j}while(1<=p&&0<=S);break}}}finally{Xv=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Fo(c):""}function qD(i,r){switch(i.tag){case 26:case 27:case 5:return Fo(i.type);case 16:return Fo("Lazy");case 13:return i.child!==r&&r!==null?Fo("Suspense Fallback"):Fo("Suspense");case 19:return Fo("SuspenseList");case 0:case 15:return Jv(i.type,!1);case 11:return Jv(i.type.render,!1);case 1:return Jv(i.type,!0);case 31:return Fo("Activity");default:return""}}function WT(i){try{var r="",c=null;do r+=qD(i,c),c=i,i=i.return;while(i);return r}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var Kv=Object.prototype.hasOwnProperty,Wv=o.unstable_scheduleCallback,Qv=o.unstable_cancelCallback,YD=o.unstable_shouldYield,$D=o.unstable_requestPaint,Ei=o.unstable_now,XD=o.unstable_getCurrentPriorityLevel,QT=o.unstable_ImmediatePriority,ZT=o.unstable_UserBlockingPriority,Ig=o.unstable_NormalPriority,JD=o.unstable_LowPriority,jT=o.unstable_IdlePriority,KD=o.log,WD=o.unstable_setDisableYieldValue,tf=null,Ti=null;function ea(i){if(typeof KD=="function"&&WD(i),Ti&&typeof Ti.setStrictMode=="function")try{Ti.setStrictMode(tf,i)}catch{}}var _i=Math.clz32?Math.clz32:jD,QD=Math.log,ZD=Math.LN2;function jD(i){return i>>>=0,i===0?32:31-(QD(i)/ZD|0)|0}var Dg=256,kg=262144,Lg=4194304;function Ml(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Pg(i,r,c){var p=i.pendingLanes;if(p===0)return 0;var S=0,b=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var D=p&134217727;return D!==0?(p=D&~b,p!==0?S=Ml(p):(w&=D,w!==0?S=Ml(w):c||(c=D&~i,c!==0&&(S=Ml(c))))):(D=p&~b,D!==0?S=Ml(D):w!==0?S=Ml(w):c||(c=p&~i,c!==0&&(S=Ml(c)))),S===0?0:r!==0&&r!==S&&(r&b)===0&&(b=S&-S,c=r&-r,b>=c||b===32&&(c&4194048)!==0)?r:S}function ef(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function t2(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function t_(){var i=Lg;return Lg<<=1,(Lg&62914560)===0&&(Lg=4194304),i}function Zv(i){for(var r=[],c=0;31>c;c++)r.push(i);return r}function nf(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function e2(i,r,c,p,S,b){var w=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var D=i.entanglements,B=i.expirationTimes,Y=i.hiddenUpdates;for(c=w&~c;0<c;){var j=31-_i(c),et=1<<j;D[j]=0,B[j]=-1;var $=Y[j];if($!==null)for(Y[j]=null,j=0;j<$.length;j++){var J=$[j];J!==null&&(J.lane&=-536870913)}c&=~et}p!==0&&e_(i,p,0),b!==0&&S===0&&i.tag!==0&&(i.suspendedLanes|=b&~(w&~r))}function e_(i,r,c){i.pendingLanes|=r,i.suspendedLanes&=~r;var p=31-_i(r);i.entangledLanes|=r,i.entanglements[p]=i.entanglements[p]|1073741824|c&261930}function n_(i,r){var c=i.entangledLanes|=r;for(i=i.entanglements;c;){var p=31-_i(c),S=1<<p;S&r|i[p]&r&&(i[p]|=r),c&=~S}}function i_(i,r){var c=r&-r;return c=(c&42)!==0?1:jv(c),(c&(i.suspendedLanes|r))!==0?0:c}function jv(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function tA(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function s_(){var i=Q.p;return i!==0?i:(i=window.event,i===void 0?32:Vx(i.type))}function o_(i,r){var c=Q.p;try{return Q.p=i,r()}finally{Q.p=c}}var na=Math.random().toString(36).slice(2),Tn="__reactFiber$"+na,si="__reactProps$"+na,yu="__reactContainer$"+na,eA="__reactEvents$"+na,n2="__reactListeners$"+na,i2="__reactHandles$"+na,r_="__reactResources$"+na,sf="__reactMarker$"+na;function nA(i){delete i[Tn],delete i[si],delete i[eA],delete i[n2],delete i[i2]}function vu(i){var r=i[Tn];if(r)return r;for(var c=i.parentNode;c;){if(r=c[yu]||c[Tn]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(i=xx(i);i!==null;){if(c=i[Tn])return c;i=xx(i)}return r}i=c,c=i.parentNode}return null}function Au(i){if(i=i[Tn]||i[yu]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function of(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(n(33))}function Su(i){var r=i[r_];return r||(r=i[r_]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function fn(i){i[sf]=!0}var a_=new Set,l_={};function Rl(i,r){bu(i,r),bu(i+"Capture",r)}function bu(i,r){for(l_[i]=r,i=0;i<r.length;i++)a_.add(r[i])}var s2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),c_={},u_={};function o2(i){return Kv.call(u_,i)?!0:Kv.call(c_,i)?!1:s2.test(i)?u_[i]=!0:(c_[i]=!0,!1)}function Ug(i,r,c){if(o2(r))if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var p=r.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+c)}}function Og(i,r,c){if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+c)}}function Ho(i,r,c,p){if(p===null)i.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(r,c,""+p)}}function ss(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function d_(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function r2(i,r,c){var p=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var S=p.get,b=p.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return S.call(this)},set:function(w){c=""+w,b.call(this,w)}}),Object.defineProperty(i,r,{enumerable:p.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function iA(i){if(!i._valueTracker){var r=d_(i)?"checked":"value";i._valueTracker=r2(i,r,""+i[r])}}function h_(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var c=r.getValue(),p="";return i&&(p=d_(i)?i.checked?"true":"false":i.value),i=p,i!==c?(r.setValue(i),!0):!1}function Bg(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var a2=/[\n"\\]/g;function os(i){return i.replace(a2,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function sA(i,r,c,p,S,b,w,D){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),r!=null?w==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+ss(r)):i.value!==""+ss(r)&&(i.value=""+ss(r)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),r!=null?oA(i,w,ss(r)):c!=null?oA(i,w,ss(c)):p!=null&&i.removeAttribute("value"),S==null&&b!=null&&(i.defaultChecked=!!b),S!=null&&(i.checked=S&&typeof S!="function"&&typeof S!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.name=""+ss(D):i.removeAttribute("name")}function f_(i,r,c,p,S,b,w,D){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),r!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||r!=null)){iA(i);return}c=c!=null?""+ss(c):"",r=r!=null?""+ss(r):c,D||r===i.value||(i.value=r),i.defaultValue=r}p=p??S,p=typeof p!="function"&&typeof p!="symbol"&&!!p,i.checked=D?i.checked:!!p,i.defaultChecked=!!p,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w),iA(i)}function oA(i,r,c){r==="number"&&Bg(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Eu(i,r,c,p){if(i=i.options,r){r={};for(var S=0;S<c.length;S++)r["$"+c[S]]=!0;for(c=0;c<i.length;c++)S=r.hasOwnProperty("$"+i[c].value),i[c].selected!==S&&(i[c].selected=S),S&&p&&(i[c].defaultSelected=!0)}else{for(c=""+ss(c),r=null,S=0;S<i.length;S++){if(i[S].value===c){i[S].selected=!0,p&&(i[S].defaultSelected=!0);return}r!==null||i[S].disabled||(r=i[S])}r!==null&&(r.selected=!0)}}function p_(i,r,c){if(r!=null&&(r=""+ss(r),r!==i.value&&(i.value=r),c==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=c!=null?""+ss(c):""}function m_(i,r,c,p){if(r==null){if(p!=null){if(c!=null)throw Error(n(92));if(At(p)){if(1<p.length)throw Error(n(93));p=p[0]}c=p}c==null&&(c=""),r=c}c=ss(r),i.defaultValue=c,p=i.textContent,p===c&&p!==""&&p!==null&&(i.value=p),iA(i)}function Tu(i,r){if(r){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=r;return}}i.textContent=r}var l2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function g_(i,r,c){var p=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?p?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":p?i.setProperty(r,c):typeof c!="number"||c===0||l2.has(r)?r==="float"?i.cssFloat=c:i[r]=(""+c).trim():i[r]=c+"px"}function y_(i,r,c){if(r!=null&&typeof r!="object")throw Error(n(62));if(i=i.style,c!=null){for(var p in c)!c.hasOwnProperty(p)||r!=null&&r.hasOwnProperty(p)||(p.indexOf("--")===0?i.setProperty(p,""):p==="float"?i.cssFloat="":i[p]="");for(var S in r)p=r[S],r.hasOwnProperty(S)&&c[S]!==p&&g_(i,S,p)}else for(var b in r)r.hasOwnProperty(b)&&g_(i,b,r[b])}function rA(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var c2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),u2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fg(i){return u2.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Go(){}var aA=null;function lA(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var _u=null,Cu=null;function v_(i){var r=Au(i);if(r&&(i=r.stateNode)){var c=i[si]||null;t:switch(i=r.stateNode,r.type){case"input":if(sA(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+os(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var p=c[r];if(p!==i&&p.form===i.form){var S=p[si]||null;if(!S)throw Error(n(90));sA(p,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(r=0;r<c.length;r++)p=c[r],p.form===i.form&&h_(p)}break t;case"textarea":p_(i,c.value,c.defaultValue);break t;case"select":r=c.value,r!=null&&Eu(i,!!c.multiple,r,!1)}}}var cA=!1;function A_(i,r,c){if(cA)return i(r,c);cA=!0;try{var p=i(r);return p}finally{if(cA=!1,(_u!==null||Cu!==null)&&(wy(),_u&&(r=_u,i=Cu,Cu=_u=null,v_(r),i)))for(r=0;r<i.length;r++)v_(i[r])}}function rf(i,r){var c=i.stateNode;if(c===null)return null;var p=c[si]||null;if(p===null)return null;c=p[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break t;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(n(231,r,typeof c));return c}var zo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uA=!1;if(zo)try{var af={};Object.defineProperty(af,"passive",{get:function(){uA=!0}}),window.addEventListener("test",af,af),window.removeEventListener("test",af,af)}catch{uA=!1}var ia=null,dA=null,Hg=null;function S_(){if(Hg)return Hg;var i,r=dA,c=r.length,p,S="value"in ia?ia.value:ia.textContent,b=S.length;for(i=0;i<c&&r[i]===S[i];i++);var w=c-i;for(p=1;p<=w&&r[c-p]===S[b-p];p++);return Hg=S.slice(i,1<p?1-p:void 0)}function Gg(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function zg(){return!0}function b_(){return!1}function oi(i){function r(c,p,S,b,w){this._reactName=c,this._targetInst=S,this.type=p,this.nativeEvent=b,this.target=w,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(c=i[D],this[D]=c?c(b):b[D]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?zg:b_,this.isPropagationStopped=b_,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=zg)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=zg)},persist:function(){},isPersistent:zg}),r}var Nl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vg=oi(Nl),lf=v({},Nl,{view:0,detail:0}),d2=oi(lf),hA,fA,cf,qg=v({},lf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mA,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==cf&&(cf&&i.type==="mousemove"?(hA=i.screenX-cf.screenX,fA=i.screenY-cf.screenY):fA=hA=0,cf=i),hA)},movementY:function(i){return"movementY"in i?i.movementY:fA}}),E_=oi(qg),h2=v({},qg,{dataTransfer:0}),f2=oi(h2),p2=v({},lf,{relatedTarget:0}),pA=oi(p2),m2=v({},Nl,{animationName:0,elapsedTime:0,pseudoElement:0}),g2=oi(m2),y2=v({},Nl,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),v2=oi(y2),A2=v({},Nl,{data:0}),T_=oi(A2),S2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T2(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=E2[i])?!!r[i]:!1}function mA(){return T2}var _2=v({},lf,{key:function(i){if(i.key){var r=S2[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Gg(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?b2[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mA,charCode:function(i){return i.type==="keypress"?Gg(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Gg(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),C2=oi(_2),w2=v({},qg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),__=oi(w2),x2=v({},lf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mA}),M2=oi(x2),R2=v({},Nl,{propertyName:0,elapsedTime:0,pseudoElement:0}),N2=oi(R2),I2=v({},qg,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),D2=oi(I2),k2=v({},Nl,{newState:0,oldState:0}),L2=oi(k2),P2=[9,13,27,32],gA=zo&&"CompositionEvent"in window,uf=null;zo&&"documentMode"in document&&(uf=document.documentMode);var U2=zo&&"TextEvent"in window&&!uf,C_=zo&&(!gA||uf&&8<uf&&11>=uf),w_=" ",x_=!1;function M_(i,r){switch(i){case"keyup":return P2.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R_(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var wu=!1;function O2(i,r){switch(i){case"compositionend":return R_(r);case"keypress":return r.which!==32?null:(x_=!0,w_);case"textInput":return i=r.data,i===w_&&x_?null:i;default:return null}}function B2(i,r){if(wu)return i==="compositionend"||!gA&&M_(i,r)?(i=S_(),Hg=dA=ia=null,wu=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return C_&&r.locale!=="ko"?null:r.data;default:return null}}var F2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N_(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!F2[i.type]:r==="textarea"}function I_(i,r,c,p){_u?Cu?Cu.push(p):Cu=[p]:_u=p,r=ky(r,"onChange"),0<r.length&&(c=new Vg("onChange","change",null,c,p),i.push({event:c,listeners:r}))}var df=null,hf=null;function H2(i){fx(i,0)}function Yg(i){var r=of(i);if(h_(r))return i}function D_(i,r){if(i==="change")return r}var k_=!1;if(zo){var yA;if(zo){var vA="oninput"in document;if(!vA){var L_=document.createElement("div");L_.setAttribute("oninput","return;"),vA=typeof L_.oninput=="function"}yA=vA}else yA=!1;k_=yA&&(!document.documentMode||9<document.documentMode)}function P_(){df&&(df.detachEvent("onpropertychange",U_),hf=df=null)}function U_(i){if(i.propertyName==="value"&&Yg(hf)){var r=[];I_(r,hf,i,lA(i)),A_(H2,r)}}function G2(i,r,c){i==="focusin"?(P_(),df=r,hf=c,df.attachEvent("onpropertychange",U_)):i==="focusout"&&P_()}function z2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Yg(hf)}function V2(i,r){if(i==="click")return Yg(r)}function q2(i,r){if(i==="input"||i==="change")return Yg(r)}function Y2(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Ci=typeof Object.is=="function"?Object.is:Y2;function ff(i,r){if(Ci(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var c=Object.keys(i),p=Object.keys(r);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var S=c[p];if(!Kv.call(r,S)||!Ci(i[S],r[S]))return!1}return!0}function O_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function B_(i,r){var c=O_(i);i=0;for(var p;c;){if(c.nodeType===3){if(p=i+c.textContent.length,i<=r&&p>=r)return{node:c,offset:r-i};i=p}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=O_(c)}}function F_(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?F_(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function H_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Bg(i.document);r instanceof i.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)i=r.contentWindow;else break;r=Bg(i.document)}return r}function AA(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var $2=zo&&"documentMode"in document&&11>=document.documentMode,xu=null,SA=null,pf=null,bA=!1;function G_(i,r,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;bA||xu==null||xu!==Bg(p)||(p=xu,"selectionStart"in p&&AA(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),pf&&ff(pf,p)||(pf=p,p=ky(SA,"onSelect"),0<p.length&&(r=new Vg("onSelect","select",null,r,c),i.push({event:r,listeners:p}),r.target=xu)))}function Il(i,r){var c={};return c[i.toLowerCase()]=r.toLowerCase(),c["Webkit"+i]="webkit"+r,c["Moz"+i]="moz"+r,c}var Mu={animationend:Il("Animation","AnimationEnd"),animationiteration:Il("Animation","AnimationIteration"),animationstart:Il("Animation","AnimationStart"),transitionrun:Il("Transition","TransitionRun"),transitionstart:Il("Transition","TransitionStart"),transitioncancel:Il("Transition","TransitionCancel"),transitionend:Il("Transition","TransitionEnd")},EA={},z_={};zo&&(z_=document.createElement("div").style,"AnimationEvent"in window||(delete Mu.animationend.animation,delete Mu.animationiteration.animation,delete Mu.animationstart.animation),"TransitionEvent"in window||delete Mu.transitionend.transition);function Dl(i){if(EA[i])return EA[i];if(!Mu[i])return i;var r=Mu[i],c;for(c in r)if(r.hasOwnProperty(c)&&c in z_)return EA[i]=r[c];return i}var V_=Dl("animationend"),q_=Dl("animationiteration"),Y_=Dl("animationstart"),X2=Dl("transitionrun"),J2=Dl("transitionstart"),K2=Dl("transitioncancel"),$_=Dl("transitionend"),X_=new Map,TA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");TA.push("scrollEnd");function Us(i,r){X_.set(i,r),Rl(r,[i])}var $g=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},rs=[],Ru=0,_A=0;function Xg(){for(var i=Ru,r=_A=Ru=0;r<i;){var c=rs[r];rs[r++]=null;var p=rs[r];rs[r++]=null;var S=rs[r];rs[r++]=null;var b=rs[r];if(rs[r++]=null,p!==null&&S!==null){var w=p.pending;w===null?S.next=S:(S.next=w.next,w.next=S),p.pending=S}b!==0&&J_(c,S,b)}}function Jg(i,r,c,p){rs[Ru++]=i,rs[Ru++]=r,rs[Ru++]=c,rs[Ru++]=p,_A|=p,i.lanes|=p,i=i.alternate,i!==null&&(i.lanes|=p)}function CA(i,r,c,p){return Jg(i,r,c,p),Kg(i)}function kl(i,r){return Jg(i,null,null,r),Kg(i)}function J_(i,r,c){i.lanes|=c;var p=i.alternate;p!==null&&(p.lanes|=c);for(var S=!1,b=i.return;b!==null;)b.childLanes|=c,p=b.alternate,p!==null&&(p.childLanes|=c),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(S=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,S&&r!==null&&(S=31-_i(c),i=b.hiddenUpdates,p=i[S],p===null?i[S]=[r]:p.push(r),r.lane=c|536870912),b):null}function Kg(i){if(50<Uf)throw Uf=0,LS=null,Error(n(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Nu={};function W2(i,r,c,p){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wi(i,r,c,p){return new W2(i,r,c,p)}function wA(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Vo(i,r){var c=i.alternate;return c===null?(c=wi(i.tag,r,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=r,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,r=i.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function K_(i,r){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,r=c.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Wg(i,r,c,p,S,b){var w=0;if(p=i,typeof i=="function")wA(i)&&(w=1);else if(typeof i=="string")w=eL(i,c,at.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case X:return i=wi(31,c,r,S),i.elementType=X,i.lanes=b,i;case C:return Ll(c.children,S,b,r);case M:w=8,S|=24;break;case R:return i=wi(12,c,r,S|2),i.elementType=R,i.lanes=b,i;case P:return i=wi(13,c,r,S),i.elementType=P,i.lanes=b,i;case O:return i=wi(19,c,r,S),i.elementType=O,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case I:w=10;break t;case L:w=9;break t;case U:w=11;break t;case F:w=14;break t;case Z:w=16,p=null;break t}w=29,c=Error(n(130,i===null?"null":typeof i,"")),p=null}return r=wi(w,c,r,S),r.elementType=i,r.type=p,r.lanes=b,r}function Ll(i,r,c,p){return i=wi(7,i,p,r),i.lanes=c,i}function xA(i,r,c){return i=wi(6,i,null,r),i.lanes=c,i}function W_(i){var r=wi(18,null,null,0);return r.stateNode=i,r}function MA(i,r,c){return r=wi(4,i.children!==null?i.children:[],i.key,r),r.lanes=c,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Q_=new WeakMap;function as(i,r){if(typeof i=="object"&&i!==null){var c=Q_.get(i);return c!==void 0?c:(r={value:i,source:r,stack:WT(r)},Q_.set(i,r),r)}return{value:i,source:r,stack:WT(r)}}var Iu=[],Du=0,Qg=null,mf=0,ls=[],cs=0,sa=null,so=1,oo="";function qo(i,r){Iu[Du++]=mf,Iu[Du++]=Qg,Qg=i,mf=r}function Z_(i,r,c){ls[cs++]=so,ls[cs++]=oo,ls[cs++]=sa,sa=i;var p=so;i=oo;var S=32-_i(p)-1;p&=~(1<<S),c+=1;var b=32-_i(r)+S;if(30<b){var w=S-S%5;b=(p&(1<<w)-1).toString(32),p>>=w,S-=w,so=1<<32-_i(r)+S|c<<S|p,oo=b+i}else so=1<<b|c<<S|p,oo=i}function RA(i){i.return!==null&&(qo(i,1),Z_(i,1,0))}function NA(i){for(;i===Qg;)Qg=Iu[--Du],Iu[Du]=null,mf=Iu[--Du],Iu[Du]=null;for(;i===sa;)sa=ls[--cs],ls[cs]=null,oo=ls[--cs],ls[cs]=null,so=ls[--cs],ls[cs]=null}function j_(i,r){ls[cs++]=so,ls[cs++]=oo,ls[cs++]=sa,so=r.id,oo=r.overflow,sa=i}var _n=null,xe=null,qt=!1,oa=null,us=!1,IA=Error(n(519));function ra(i){var r=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gf(as(r,i)),IA}function tC(i){var r=i.stateNode,c=i.type,p=i.memoizedProps;switch(r[Tn]=i,r[si]=p,c){case"dialog":Ht("cancel",r),Ht("close",r);break;case"iframe":case"object":case"embed":Ht("load",r);break;case"video":case"audio":for(c=0;c<Bf.length;c++)Ht(Bf[c],r);break;case"source":Ht("error",r);break;case"img":case"image":case"link":Ht("error",r),Ht("load",r);break;case"details":Ht("toggle",r);break;case"input":Ht("invalid",r),f_(r,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":Ht("invalid",r);break;case"textarea":Ht("invalid",r),m_(r,p.value,p.defaultValue,p.children)}c=p.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||p.suppressHydrationWarning===!0||yx(r.textContent,c)?(p.popover!=null&&(Ht("beforetoggle",r),Ht("toggle",r)),p.onScroll!=null&&Ht("scroll",r),p.onScrollEnd!=null&&Ht("scrollend",r),p.onClick!=null&&(r.onclick=Go),r=!0):r=!1,r||ra(i,!0)}function eC(i){for(_n=i.return;_n;)switch(_n.tag){case 5:case 31:case 13:us=!1;return;case 27:case 3:us=!0;return;default:_n=_n.return}}function ku(i){if(i!==_n)return!1;if(!qt)return eC(i),qt=!0,!1;var r=i.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||KS(i.type,i.memoizedProps)),c=!c),c&&xe&&ra(i),eC(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));xe=wx(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));xe=wx(i)}else r===27?(r=xe,Sa(i.type)?(i=tb,tb=null,xe=i):xe=r):xe=_n?hs(i.stateNode.nextSibling):null;return!0}function Pl(){xe=_n=null,qt=!1}function DA(){var i=oa;return i!==null&&(ci===null?ci=i:ci.push.apply(ci,i),oa=null),i}function gf(i){oa===null?oa=[i]:oa.push(i)}var kA=H(null),Ul=null,Yo=null;function aa(i,r,c){st(kA,r._currentValue),r._currentValue=c}function $o(i){i._currentValue=kA.current,K(kA)}function LA(i,r,c){for(;i!==null;){var p=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,p!==null&&(p.childLanes|=r)):p!==null&&(p.childLanes&r)!==r&&(p.childLanes|=r),i===c)break;i=i.return}}function PA(i,r,c,p){var S=i.child;for(S!==null&&(S.return=i);S!==null;){var b=S.dependencies;if(b!==null){var w=S.child;b=b.firstContext;t:for(;b!==null;){var D=b;b=S;for(var B=0;B<r.length;B++)if(D.context===r[B]){b.lanes|=c,D=b.alternate,D!==null&&(D.lanes|=c),LA(b.return,c,i),p||(w=null);break t}b=D.next}}else if(S.tag===18){if(w=S.return,w===null)throw Error(n(341));w.lanes|=c,b=w.alternate,b!==null&&(b.lanes|=c),LA(w,c,i),w=null}else w=S.child;if(w!==null)w.return=S;else for(w=S;w!==null;){if(w===i){w=null;break}if(S=w.sibling,S!==null){S.return=w.return,w=S;break}w=w.return}S=w}}function Lu(i,r,c,p){i=null;for(var S=r,b=!1;S!==null;){if(!b){if((S.flags&524288)!==0)b=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var w=S.alternate;if(w===null)throw Error(n(387));if(w=w.memoizedProps,w!==null){var D=S.type;Ci(S.pendingProps.value,w.value)||(i!==null?i.push(D):i=[D])}}else if(S===Et.current){if(w=S.alternate,w===null)throw Error(n(387));w.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(i!==null?i.push(Vf):i=[Vf])}S=S.return}i!==null&&PA(r,i,c,p),r.flags|=262144}function Zg(i){for(i=i.firstContext;i!==null;){if(!Ci(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ol(i){Ul=i,Yo=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Cn(i){return nC(Ul,i)}function jg(i,r){return Ul===null&&Ol(i),nC(i,r)}function nC(i,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},Yo===null){if(i===null)throw Error(n(308));Yo=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Yo=Yo.next=r;return c}var Q2=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(c,p){i.push(p)}};this.abort=function(){r.aborted=!0,i.forEach(function(c){return c()})}},Z2=o.unstable_scheduleCallback,j2=o.unstable_NormalPriority,We={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function UA(){return{controller:new Q2,data:new Map,refCount:0}}function yf(i){i.refCount--,i.refCount===0&&Z2(j2,function(){i.controller.abort()})}var vf=null,OA=0,Pu=0,Uu=null;function tk(i,r){if(vf===null){var c=vf=[];OA=0,Pu=HS(),Uu={status:"pending",value:void 0,then:function(p){c.push(p)}}}return OA++,r.then(iC,iC),r}function iC(){if(--OA===0&&vf!==null){Uu!==null&&(Uu.status="fulfilled");var i=vf;vf=null,Pu=0,Uu=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function ek(i,r){var c=[],p={status:"pending",value:null,reason:null,then:function(S){c.push(S)}};return i.then(function(){p.status="fulfilled",p.value=r;for(var S=0;S<c.length;S++)(0,c[S])(r)},function(S){for(p.status="rejected",p.reason=S,S=0;S<c.length;S++)(0,c[S])(void 0)}),p}var sC=z.S;z.S=function(i,r){Gw=Ei(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&tk(i,r),sC!==null&&sC(i,r)};var Bl=H(null);function BA(){var i=Bl.current;return i!==null?i:Se.pooledCache}function ty(i,r){r===null?st(Bl,Bl.current):st(Bl,r.pool)}function oC(){var i=BA();return i===null?null:{parent:We._currentValue,pool:i}}var Ou=Error(n(460)),FA=Error(n(474)),ey=Error(n(542)),ny={then:function(){}};function rC(i){return i=i.status,i==="fulfilled"||i==="rejected"}function aC(i,r,c){switch(c=i[c],c===void 0?i.push(r):c!==r&&(r.then(Go,Go),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,cC(i),i;default:if(typeof r.status=="string")r.then(Go,Go);else{if(i=Se,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=r,i.status="pending",i.then(function(p){if(r.status==="pending"){var S=r;S.status="fulfilled",S.value=p}},function(p){if(r.status==="pending"){var S=r;S.status="rejected",S.reason=p}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,cC(i),i}throw Hl=r,Ou}}function Fl(i){try{var r=i._init;return r(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Hl=c,Ou):c}}var Hl=null;function lC(){if(Hl===null)throw Error(n(459));var i=Hl;return Hl=null,i}function cC(i){if(i===Ou||i===ey)throw Error(n(483))}var Bu=null,Af=0;function iy(i){var r=Af;return Af+=1,Bu===null&&(Bu=[]),aC(Bu,i,r)}function Sf(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function sy(i,r){throw r.$$typeof===A?Error(n(525)):(i=Object.prototype.toString.call(r),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function uC(i){function r(V,G){if(i){var q=V.deletions;q===null?(V.deletions=[G],V.flags|=16):q.push(G)}}function c(V,G){if(!i)return null;for(;G!==null;)r(V,G),G=G.sibling;return null}function p(V){for(var G=new Map;V!==null;)V.key!==null?G.set(V.key,V):G.set(V.index,V),V=V.sibling;return G}function S(V,G){return V=Vo(V,G),V.index=0,V.sibling=null,V}function b(V,G,q){return V.index=q,i?(q=V.alternate,q!==null?(q=q.index,q<G?(V.flags|=67108866,G):q):(V.flags|=67108866,G)):(V.flags|=1048576,G)}function w(V){return i&&V.alternate===null&&(V.flags|=67108866),V}function D(V,G,q,tt){return G===null||G.tag!==6?(G=xA(q,V.mode,tt),G.return=V,G):(G=S(G,q),G.return=V,G)}function B(V,G,q,tt){var St=q.type;return St===C?j(V,G,q.props.children,tt,q.key):G!==null&&(G.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===Z&&Fl(St)===G.type)?(G=S(G,q.props),Sf(G,q),G.return=V,G):(G=Wg(q.type,q.key,q.props,null,V.mode,tt),Sf(G,q),G.return=V,G)}function Y(V,G,q,tt){return G===null||G.tag!==4||G.stateNode.containerInfo!==q.containerInfo||G.stateNode.implementation!==q.implementation?(G=MA(q,V.mode,tt),G.return=V,G):(G=S(G,q.children||[]),G.return=V,G)}function j(V,G,q,tt,St){return G===null||G.tag!==7?(G=Ll(q,V.mode,tt,St),G.return=V,G):(G=S(G,q),G.return=V,G)}function et(V,G,q){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=xA(""+G,V.mode,q),G.return=V,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case E:return q=Wg(G.type,G.key,G.props,null,V.mode,q),Sf(q,G),q.return=V,q;case _:return G=MA(G,V.mode,q),G.return=V,G;case Z:return G=Fl(G),et(V,G,q)}if(At(G)||dt(G))return G=Ll(G,V.mode,q,null),G.return=V,G;if(typeof G.then=="function")return et(V,iy(G),q);if(G.$$typeof===I)return et(V,jg(V,G),q);sy(V,G)}return null}function $(V,G,q,tt){var St=G!==null?G.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return St!==null?null:D(V,G,""+q,tt);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case E:return q.key===St?B(V,G,q,tt):null;case _:return q.key===St?Y(V,G,q,tt):null;case Z:return q=Fl(q),$(V,G,q,tt)}if(At(q)||dt(q))return St!==null?null:j(V,G,q,tt,null);if(typeof q.then=="function")return $(V,G,iy(q),tt);if(q.$$typeof===I)return $(V,G,jg(V,q),tt);sy(V,q)}return null}function J(V,G,q,tt,St){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return V=V.get(q)||null,D(G,V,""+tt,St);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case E:return V=V.get(tt.key===null?q:tt.key)||null,B(G,V,tt,St);case _:return V=V.get(tt.key===null?q:tt.key)||null,Y(G,V,tt,St);case Z:return tt=Fl(tt),J(V,G,q,tt,St)}if(At(tt)||dt(tt))return V=V.get(q)||null,j(G,V,tt,St,null);if(typeof tt.then=="function")return J(V,G,q,iy(tt),St);if(tt.$$typeof===I)return J(V,G,q,jg(G,tt),St);sy(G,tt)}return null}function mt(V,G,q,tt){for(var St=null,Qt=null,yt=G,Pt=G=0,zt=null;yt!==null&&Pt<q.length;Pt++){yt.index>Pt?(zt=yt,yt=null):zt=yt.sibling;var Zt=$(V,yt,q[Pt],tt);if(Zt===null){yt===null&&(yt=zt);break}i&&yt&&Zt.alternate===null&&r(V,yt),G=b(Zt,G,Pt),Qt===null?St=Zt:Qt.sibling=Zt,Qt=Zt,yt=zt}if(Pt===q.length)return c(V,yt),qt&&qo(V,Pt),St;if(yt===null){for(;Pt<q.length;Pt++)yt=et(V,q[Pt],tt),yt!==null&&(G=b(yt,G,Pt),Qt===null?St=yt:Qt.sibling=yt,Qt=yt);return qt&&qo(V,Pt),St}for(yt=p(yt);Pt<q.length;Pt++)zt=J(yt,V,Pt,q[Pt],tt),zt!==null&&(i&&zt.alternate!==null&&yt.delete(zt.key===null?Pt:zt.key),G=b(zt,G,Pt),Qt===null?St=zt:Qt.sibling=zt,Qt=zt);return i&&yt.forEach(function(Ca){return r(V,Ca)}),qt&&qo(V,Pt),St}function Tt(V,G,q,tt){if(q==null)throw Error(n(151));for(var St=null,Qt=null,yt=G,Pt=G=0,zt=null,Zt=q.next();yt!==null&&!Zt.done;Pt++,Zt=q.next()){yt.index>Pt?(zt=yt,yt=null):zt=yt.sibling;var Ca=$(V,yt,Zt.value,tt);if(Ca===null){yt===null&&(yt=zt);break}i&&yt&&Ca.alternate===null&&r(V,yt),G=b(Ca,G,Pt),Qt===null?St=Ca:Qt.sibling=Ca,Qt=Ca,yt=zt}if(Zt.done)return c(V,yt),qt&&qo(V,Pt),St;if(yt===null){for(;!Zt.done;Pt++,Zt=q.next())Zt=et(V,Zt.value,tt),Zt!==null&&(G=b(Zt,G,Pt),Qt===null?St=Zt:Qt.sibling=Zt,Qt=Zt);return qt&&qo(V,Pt),St}for(yt=p(yt);!Zt.done;Pt++,Zt=q.next())Zt=J(yt,V,Pt,Zt.value,tt),Zt!==null&&(i&&Zt.alternate!==null&&yt.delete(Zt.key===null?Pt:Zt.key),G=b(Zt,G,Pt),Qt===null?St=Zt:Qt.sibling=Zt,Qt=Zt);return i&&yt.forEach(function(hL){return r(V,hL)}),qt&&qo(V,Pt),St}function fe(V,G,q,tt){if(typeof q=="object"&&q!==null&&q.type===C&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case E:t:{for(var St=q.key;G!==null;){if(G.key===St){if(St=q.type,St===C){if(G.tag===7){c(V,G.sibling),tt=S(G,q.props.children),tt.return=V,V=tt;break t}}else if(G.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===Z&&Fl(St)===G.type){c(V,G.sibling),tt=S(G,q.props),Sf(tt,q),tt.return=V,V=tt;break t}c(V,G);break}else r(V,G);G=G.sibling}q.type===C?(tt=Ll(q.props.children,V.mode,tt,q.key),tt.return=V,V=tt):(tt=Wg(q.type,q.key,q.props,null,V.mode,tt),Sf(tt,q),tt.return=V,V=tt)}return w(V);case _:t:{for(St=q.key;G!==null;){if(G.key===St)if(G.tag===4&&G.stateNode.containerInfo===q.containerInfo&&G.stateNode.implementation===q.implementation){c(V,G.sibling),tt=S(G,q.children||[]),tt.return=V,V=tt;break t}else{c(V,G);break}else r(V,G);G=G.sibling}tt=MA(q,V.mode,tt),tt.return=V,V=tt}return w(V);case Z:return q=Fl(q),fe(V,G,q,tt)}if(At(q))return mt(V,G,q,tt);if(dt(q)){if(St=dt(q),typeof St!="function")throw Error(n(150));return q=St.call(q),Tt(V,G,q,tt)}if(typeof q.then=="function")return fe(V,G,iy(q),tt);if(q.$$typeof===I)return fe(V,G,jg(V,q),tt);sy(V,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,G!==null&&G.tag===6?(c(V,G.sibling),tt=S(G,q),tt.return=V,V=tt):(c(V,G),tt=xA(q,V.mode,tt),tt.return=V,V=tt),w(V)):c(V,G)}return function(V,G,q,tt){try{Af=0;var St=fe(V,G,q,tt);return Bu=null,St}catch(yt){if(yt===Ou||yt===ey)throw yt;var Qt=wi(29,yt,null,V.mode);return Qt.lanes=tt,Qt.return=V,Qt}finally{}}}var Gl=uC(!0),dC=uC(!1),la=!1;function HA(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function GA(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ca(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ua(i,r,c){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(ee&2)!==0){var S=p.pending;return S===null?r.next=r:(r.next=S.next,S.next=r),p.pending=r,r=Kg(i),J_(i,null,c),r}return Jg(i,p,r,c),Kg(i)}function bf(i,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var p=r.lanes;p&=i.pendingLanes,c|=p,r.lanes=c,n_(i,c)}}function zA(i,r){var c=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var S=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?S=b=w:b=b.next=w,c=c.next}while(c!==null);b===null?S=b=r:b=b.next=r}else S=b=r;c={baseState:p.baseState,firstBaseUpdate:S,lastBaseUpdate:b,shared:p.shared,callbacks:p.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=r:i.next=r,c.lastBaseUpdate=r}var VA=!1;function Ef(){if(VA){var i=Uu;if(i!==null)throw i}}function Tf(i,r,c,p){VA=!1;var S=i.updateQueue;la=!1;var b=S.firstBaseUpdate,w=S.lastBaseUpdate,D=S.shared.pending;if(D!==null){S.shared.pending=null;var B=D,Y=B.next;B.next=null,w===null?b=Y:w.next=Y,w=B;var j=i.alternate;j!==null&&(j=j.updateQueue,D=j.lastBaseUpdate,D!==w&&(D===null?j.firstBaseUpdate=Y:D.next=Y,j.lastBaseUpdate=B))}if(b!==null){var et=S.baseState;w=0,j=Y=B=null,D=b;do{var $=D.lane&-536870913,J=$!==D.lane;if(J?(Gt&$)===$:(p&$)===$){$!==0&&$===Pu&&(VA=!0),j!==null&&(j=j.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});t:{var mt=i,Tt=D;$=r;var fe=c;switch(Tt.tag){case 1:if(mt=Tt.payload,typeof mt=="function"){et=mt.call(fe,et,$);break t}et=mt;break t;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=Tt.payload,$=typeof mt=="function"?mt.call(fe,et,$):mt,$==null)break t;et=v({},et,$);break t;case 2:la=!0}}$=D.callback,$!==null&&(i.flags|=64,J&&(i.flags|=8192),J=S.callbacks,J===null?S.callbacks=[$]:J.push($))}else J={lane:$,tag:D.tag,payload:D.payload,callback:D.callback,next:null},j===null?(Y=j=J,B=et):j=j.next=J,w|=$;if(D=D.next,D===null){if(D=S.shared.pending,D===null)break;J=D,D=J.next,J.next=null,S.lastBaseUpdate=J,S.shared.pending=null}}while(!0);j===null&&(B=et),S.baseState=B,S.firstBaseUpdate=Y,S.lastBaseUpdate=j,b===null&&(S.shared.lanes=0),ma|=w,i.lanes=w,i.memoizedState=et}}function hC(i,r){if(typeof i!="function")throw Error(n(191,i));i.call(r)}function fC(i,r){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)hC(c[i],r)}var Fu=H(null),oy=H(0);function pC(i,r){i=er,st(oy,i),st(Fu,r),er=i|r.baseLanes}function qA(){st(oy,er),st(Fu,Fu.current)}function YA(){er=oy.current,K(Fu),K(oy)}var xi=H(null),ds=null;function da(i){var r=i.alternate;st(Ye,Ye.current&1),st(xi,i),ds===null&&(r===null||Fu.current!==null||r.memoizedState!==null)&&(ds=i)}function $A(i){st(Ye,Ye.current),st(xi,i),ds===null&&(ds=i)}function mC(i){i.tag===22?(st(Ye,Ye.current),st(xi,i),ds===null&&(ds=i)):ha()}function ha(){st(Ye,Ye.current),st(xi,xi.current)}function Mi(i){K(xi),ds===i&&(ds=null),K(Ye)}var Ye=H(0);function ry(i){for(var r=i;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||ZS(c)||jS(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Xo=0,kt=null,de=null,Qe=null,ay=!1,Hu=!1,zl=!1,ly=0,_f=0,Gu=null,nk=0;function Be(){throw Error(n(321))}function XA(i,r){if(r===null)return!1;for(var c=0;c<r.length&&c<i.length;c++)if(!Ci(i[c],r[c]))return!1;return!0}function JA(i,r,c,p,S,b){return Xo=b,kt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,z.H=i===null||i.memoizedState===null?ZC:cS,zl=!1,b=c(p,S),zl=!1,Hu&&(b=yC(r,c,p,S)),gC(i),b}function gC(i){z.H=xf;var r=de!==null&&de.next!==null;if(Xo=0,Qe=de=kt=null,ay=!1,_f=0,Gu=null,r)throw Error(n(300));i===null||Ze||(i=i.dependencies,i!==null&&Zg(i)&&(Ze=!0))}function yC(i,r,c,p){kt=i;var S=0;do{if(Hu&&(Gu=null),_f=0,Hu=!1,25<=S)throw Error(n(301));if(S+=1,Qe=de=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}z.H=jC,b=r(c,p)}while(Hu);return b}function ik(){var i=z.H,r=i.useState()[0];return r=typeof r.then=="function"?Cf(r):r,i=i.useState()[0],(de!==null?de.memoizedState:null)!==i&&(kt.flags|=1024),r}function KA(){var i=ly!==0;return ly=0,i}function WA(i,r,c){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~c}function QA(i){if(ay){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ay=!1}Xo=0,Qe=de=kt=null,Hu=!1,_f=ly=0,Gu=null}function Xn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?kt.memoizedState=Qe=i:Qe=Qe.next=i,Qe}function $e(){if(de===null){var i=kt.alternate;i=i!==null?i.memoizedState:null}else i=de.next;var r=Qe===null?kt.memoizedState:Qe.next;if(r!==null)Qe=r,de=i;else{if(i===null)throw kt.alternate===null?Error(n(467)):Error(n(310));de=i,i={memoizedState:de.memoizedState,baseState:de.baseState,baseQueue:de.baseQueue,queue:de.queue,next:null},Qe===null?kt.memoizedState=Qe=i:Qe=Qe.next=i}return Qe}function cy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cf(i){var r=_f;return _f+=1,Gu===null&&(Gu=[]),i=aC(Gu,i,r),r=kt,(Qe===null?r.memoizedState:Qe.next)===null&&(r=r.alternate,z.H=r===null||r.memoizedState===null?ZC:cS),i}function uy(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Cf(i);if(i.$$typeof===I)return Cn(i)}throw Error(n(438,String(i)))}function ZA(i){var r=null,c=kt.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var p=kt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(r={data:p.data.map(function(S){return S.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=cy(),kt.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(i),p=0;p<i;p++)c[p]=nt;return r.index++,c}function Jo(i,r){return typeof r=="function"?r(i):r}function dy(i){var r=$e();return jA(r,de,i)}function jA(i,r,c){var p=i.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=c;var S=i.baseQueue,b=p.pending;if(b!==null){if(S!==null){var w=S.next;S.next=b.next,b.next=w}r.baseQueue=S=b,p.pending=null}if(b=i.baseState,S===null)i.memoizedState=b;else{r=S.next;var D=w=null,B=null,Y=r,j=!1;do{var et=Y.lane&-536870913;if(et!==Y.lane?(Gt&et)===et:(Xo&et)===et){var $=Y.revertLane;if($===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),et===Pu&&(j=!0);else if((Xo&$)===$){Y=Y.next,$===Pu&&(j=!0);continue}else et={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},B===null?(D=B=et,w=b):B=B.next=et,kt.lanes|=$,ma|=$;et=Y.action,zl&&c(b,et),b=Y.hasEagerState?Y.eagerState:c(b,et)}else $={lane:et,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},B===null?(D=B=$,w=b):B=B.next=$,kt.lanes|=et,ma|=et;Y=Y.next}while(Y!==null&&Y!==r);if(B===null?w=b:B.next=D,!Ci(b,i.memoizedState)&&(Ze=!0,j&&(c=Uu,c!==null)))throw c;i.memoizedState=b,i.baseState=w,i.baseQueue=B,p.lastRenderedState=b}return S===null&&(p.lanes=0),[i.memoizedState,p.dispatch]}function tS(i){var r=$e(),c=r.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var p=c.dispatch,S=c.pending,b=r.memoizedState;if(S!==null){c.pending=null;var w=S=S.next;do b=i(b,w.action),w=w.next;while(w!==S);Ci(b,r.memoizedState)||(Ze=!0),r.memoizedState=b,r.baseQueue===null&&(r.baseState=b),c.lastRenderedState=b}return[b,p]}function vC(i,r,c){var p=kt,S=$e(),b=qt;if(b){if(c===void 0)throw Error(n(407));c=c()}else c=r();var w=!Ci((de||S).memoizedState,c);if(w&&(S.memoizedState=c,Ze=!0),S=S.queue,iS(bC.bind(null,p,S,i),[i]),S.getSnapshot!==r||w||Qe!==null&&Qe.memoizedState.tag&1){if(p.flags|=2048,zu(9,{destroy:void 0},SC.bind(null,p,S,c,r),null),Se===null)throw Error(n(349));b||(Xo&127)!==0||AC(p,r,c)}return c}function AC(i,r,c){i.flags|=16384,i={getSnapshot:r,value:c},r=kt.updateQueue,r===null?(r=cy(),kt.updateQueue=r,r.stores=[i]):(c=r.stores,c===null?r.stores=[i]:c.push(i))}function SC(i,r,c,p){r.value=c,r.getSnapshot=p,EC(r)&&TC(i)}function bC(i,r,c){return c(function(){EC(r)&&TC(i)})}function EC(i){var r=i.getSnapshot;i=i.value;try{var c=r();return!Ci(i,c)}catch{return!0}}function TC(i){var r=kl(i,2);r!==null&&ui(r,i,2)}function eS(i){var r=Xn();if(typeof i=="function"){var c=i;if(i=c(),zl){ea(!0);try{c()}finally{ea(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:i},r}function _C(i,r,c,p){return i.baseState=c,jA(i,de,typeof p=="function"?p:Jo)}function sk(i,r,c,p,S){if(py(i))throw Error(n(485));if(i=r.action,i!==null){var b={payload:S,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){b.listeners.push(w)}};z.T!==null?c(!0):b.isTransition=!1,p(b),c=r.pending,c===null?(b.next=r.pending=b,CC(r,b)):(b.next=c.next,r.pending=c.next=b)}}function CC(i,r){var c=r.action,p=r.payload,S=i.state;if(r.isTransition){var b=z.T,w={};z.T=w;try{var D=c(S,p),B=z.S;B!==null&&B(w,D),wC(i,r,D)}catch(Y){nS(i,r,Y)}finally{b!==null&&w.types!==null&&(b.types=w.types),z.T=b}}else try{b=c(S,p),wC(i,r,b)}catch(Y){nS(i,r,Y)}}function wC(i,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(p){xC(i,r,p)},function(p){return nS(i,r,p)}):xC(i,r,c)}function xC(i,r,c){r.status="fulfilled",r.value=c,MC(r),i.state=c,r=i.pending,r!==null&&(c=r.next,c===r?i.pending=null:(c=c.next,r.next=c,CC(i,c)))}function nS(i,r,c){var p=i.pending;if(i.pending=null,p!==null){p=p.next;do r.status="rejected",r.reason=c,MC(r),r=r.next;while(r!==p)}i.action=null}function MC(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function RC(i,r){return r}function NC(i,r){if(qt){var c=Se.formState;if(c!==null){t:{var p=kt;if(qt){if(xe){e:{for(var S=xe,b=us;S.nodeType!==8;){if(!b){S=null;break e}if(S=hs(S.nextSibling),S===null){S=null;break e}}b=S.data,S=b==="F!"||b==="F"?S:null}if(S){xe=hs(S.nextSibling),p=S.data==="F!";break t}}ra(p)}p=!1}p&&(r=c[0])}}return c=Xn(),c.memoizedState=c.baseState=r,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:RC,lastRenderedState:r},c.queue=p,c=KC.bind(null,kt,p),p.dispatch=c,p=eS(!1),b=lS.bind(null,kt,!1,p.queue),p=Xn(),S={state:r,dispatch:null,action:i,pending:null},p.queue=S,c=sk.bind(null,kt,S,b,c),S.dispatch=c,p.memoizedState=i,[r,c,!1]}function IC(i){var r=$e();return DC(r,de,i)}function DC(i,r,c){if(r=jA(i,r,RC)[0],i=dy(Jo)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var p=Cf(r)}catch(w){throw w===Ou?ey:w}else p=r;r=$e();var S=r.queue,b=S.dispatch;return c!==r.memoizedState&&(kt.flags|=2048,zu(9,{destroy:void 0},ok.bind(null,S,c),null)),[p,b,i]}function ok(i,r){i.action=r}function kC(i){var r=$e(),c=de;if(c!==null)return DC(r,c,i);$e(),r=r.memoizedState,c=$e();var p=c.queue.dispatch;return c.memoizedState=i,[r,p,!1]}function zu(i,r,c,p){return i={tag:i,create:c,deps:p,inst:r,next:null},r=kt.updateQueue,r===null&&(r=cy(),kt.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=i.next=i:(p=c.next,c.next=i,i.next=p,r.lastEffect=i),i}function LC(){return $e().memoizedState}function hy(i,r,c,p){var S=Xn();kt.flags|=i,S.memoizedState=zu(1|r,{destroy:void 0},c,p===void 0?null:p)}function fy(i,r,c,p){var S=$e();p=p===void 0?null:p;var b=S.memoizedState.inst;de!==null&&p!==null&&XA(p,de.memoizedState.deps)?S.memoizedState=zu(r,b,c,p):(kt.flags|=i,S.memoizedState=zu(1|r,b,c,p))}function PC(i,r){hy(8390656,8,i,r)}function iS(i,r){fy(2048,8,i,r)}function rk(i){kt.flags|=4;var r=kt.updateQueue;if(r===null)r=cy(),kt.updateQueue=r,r.events=[i];else{var c=r.events;c===null?r.events=[i]:c.push(i)}}function UC(i){var r=$e().memoizedState;return rk({ref:r,nextImpl:i}),function(){if((ee&2)!==0)throw Error(n(440));return r.impl.apply(void 0,arguments)}}function OC(i,r){return fy(4,2,i,r)}function BC(i,r){return fy(4,4,i,r)}function FC(i,r){if(typeof r=="function"){i=i();var c=r(i);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function HC(i,r,c){c=c!=null?c.concat([i]):null,fy(4,4,FC.bind(null,r,i),c)}function sS(){}function GC(i,r){var c=$e();r=r===void 0?null:r;var p=c.memoizedState;return r!==null&&XA(r,p[1])?p[0]:(c.memoizedState=[i,r],i)}function zC(i,r){var c=$e();r=r===void 0?null:r;var p=c.memoizedState;if(r!==null&&XA(r,p[1]))return p[0];if(p=i(),zl){ea(!0);try{i()}finally{ea(!1)}}return c.memoizedState=[p,r],p}function oS(i,r,c){return c===void 0||(Xo&1073741824)!==0&&(Gt&261930)===0?i.memoizedState=r:(i.memoizedState=c,i=Vw(),kt.lanes|=i,ma|=i,c)}function VC(i,r,c,p){return Ci(c,r)?c:Fu.current!==null?(i=oS(i,c,p),Ci(i,r)||(Ze=!0),i):(Xo&42)===0||(Xo&1073741824)!==0&&(Gt&261930)===0?(Ze=!0,i.memoizedState=c):(i=Vw(),kt.lanes|=i,ma|=i,r)}function qC(i,r,c,p,S){var b=Q.p;Q.p=b!==0&&8>b?b:8;var w=z.T,D={};z.T=D,lS(i,!1,r,c);try{var B=S(),Y=z.S;if(Y!==null&&Y(D,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var j=ek(B,p);wf(i,r,j,Ii(i))}else wf(i,r,p,Ii(i))}catch(et){wf(i,r,{then:function(){},status:"rejected",reason:et},Ii())}finally{Q.p=b,w!==null&&D.types!==null&&(w.types=D.types),z.T=w}}function ak(){}function rS(i,r,c,p){if(i.tag!==5)throw Error(n(476));var S=YC(i).queue;qC(i,S,r,ot,c===null?ak:function(){return $C(i),c(p)})}function YC(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ot,baseState:ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:ot},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:c},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function $C(i){var r=YC(i);r.next===null&&(r=i.alternate.memoizedState),wf(i,r.next.queue,{},Ii())}function aS(){return Cn(Vf)}function XC(){return $e().memoizedState}function JC(){return $e().memoizedState}function lk(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var c=Ii();i=ca(c);var p=ua(r,i,c);p!==null&&(ui(p,r,c),bf(p,r,c)),r={cache:UA()},i.payload=r;return}r=r.return}}function ck(i,r,c){var p=Ii();c={lane:p,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},py(i)?WC(r,c):(c=CA(i,r,c,p),c!==null&&(ui(c,i,p),QC(c,r,p)))}function KC(i,r,c){var p=Ii();wf(i,r,c,p)}function wf(i,r,c,p){var S={lane:p,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(py(i))WC(r,S);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=r.lastRenderedReducer,b!==null))try{var w=r.lastRenderedState,D=b(w,c);if(S.hasEagerState=!0,S.eagerState=D,Ci(D,w))return Jg(i,r,S,0),Se===null&&Xg(),!1}catch{}finally{}if(c=CA(i,r,S,p),c!==null)return ui(c,i,p),QC(c,r,p),!0}return!1}function lS(i,r,c,p){if(p={lane:2,revertLane:HS(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},py(i)){if(r)throw Error(n(479))}else r=CA(i,c,p,2),r!==null&&ui(r,i,2)}function py(i){var r=i.alternate;return i===kt||r!==null&&r===kt}function WC(i,r){Hu=ay=!0;var c=i.pending;c===null?r.next=r:(r.next=c.next,c.next=r),i.pending=r}function QC(i,r,c){if((c&4194048)!==0){var p=r.lanes;p&=i.pendingLanes,c|=p,r.lanes=c,n_(i,c)}}var xf={readContext:Cn,use:uy,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useLayoutEffect:Be,useInsertionEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useSyncExternalStore:Be,useId:Be,useHostTransitionStatus:Be,useFormState:Be,useActionState:Be,useOptimistic:Be,useMemoCache:Be,useCacheRefresh:Be};xf.useEffectEvent=Be;var ZC={readContext:Cn,use:uy,useCallback:function(i,r){return Xn().memoizedState=[i,r===void 0?null:r],i},useContext:Cn,useEffect:PC,useImperativeHandle:function(i,r,c){c=c!=null?c.concat([i]):null,hy(4194308,4,FC.bind(null,r,i),c)},useLayoutEffect:function(i,r){return hy(4194308,4,i,r)},useInsertionEffect:function(i,r){hy(4,2,i,r)},useMemo:function(i,r){var c=Xn();r=r===void 0?null:r;var p=i();if(zl){ea(!0);try{i()}finally{ea(!1)}}return c.memoizedState=[p,r],p},useReducer:function(i,r,c){var p=Xn();if(c!==void 0){var S=c(r);if(zl){ea(!0);try{c(r)}finally{ea(!1)}}}else S=r;return p.memoizedState=p.baseState=S,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:S},p.queue=i,i=i.dispatch=ck.bind(null,kt,i),[p.memoizedState,i]},useRef:function(i){var r=Xn();return i={current:i},r.memoizedState=i},useState:function(i){i=eS(i);var r=i.queue,c=KC.bind(null,kt,r);return r.dispatch=c,[i.memoizedState,c]},useDebugValue:sS,useDeferredValue:function(i,r){var c=Xn();return oS(c,i,r)},useTransition:function(){var i=eS(!1);return i=qC.bind(null,kt,i.queue,!0,!1),Xn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,c){var p=kt,S=Xn();if(qt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=r(),Se===null)throw Error(n(349));(Gt&127)!==0||AC(p,r,c)}S.memoizedState=c;var b={value:c,getSnapshot:r};return S.queue=b,PC(bC.bind(null,p,b,i),[i]),p.flags|=2048,zu(9,{destroy:void 0},SC.bind(null,p,b,c,r),null),c},useId:function(){var i=Xn(),r=Se.identifierPrefix;if(qt){var c=oo,p=so;c=(p&~(1<<32-_i(p)-1)).toString(32)+c,r="_"+r+"R_"+c,c=ly++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=nk++,r="_"+r+"r_"+c.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:aS,useFormState:NC,useActionState:NC,useOptimistic:function(i){var r=Xn();r.memoizedState=r.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=lS.bind(null,kt,!0,c),c.dispatch=r,[i,r]},useMemoCache:ZA,useCacheRefresh:function(){return Xn().memoizedState=lk.bind(null,kt)},useEffectEvent:function(i){var r=Xn(),c={impl:i};return r.memoizedState=c,function(){if((ee&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}},cS={readContext:Cn,use:uy,useCallback:GC,useContext:Cn,useEffect:iS,useImperativeHandle:HC,useInsertionEffect:OC,useLayoutEffect:BC,useMemo:zC,useReducer:dy,useRef:LC,useState:function(){return dy(Jo)},useDebugValue:sS,useDeferredValue:function(i,r){var c=$e();return VC(c,de.memoizedState,i,r)},useTransition:function(){var i=dy(Jo)[0],r=$e().memoizedState;return[typeof i=="boolean"?i:Cf(i),r]},useSyncExternalStore:vC,useId:XC,useHostTransitionStatus:aS,useFormState:IC,useActionState:IC,useOptimistic:function(i,r){var c=$e();return _C(c,de,i,r)},useMemoCache:ZA,useCacheRefresh:JC};cS.useEffectEvent=UC;var jC={readContext:Cn,use:uy,useCallback:GC,useContext:Cn,useEffect:iS,useImperativeHandle:HC,useInsertionEffect:OC,useLayoutEffect:BC,useMemo:zC,useReducer:tS,useRef:LC,useState:function(){return tS(Jo)},useDebugValue:sS,useDeferredValue:function(i,r){var c=$e();return de===null?oS(c,i,r):VC(c,de.memoizedState,i,r)},useTransition:function(){var i=tS(Jo)[0],r=$e().memoizedState;return[typeof i=="boolean"?i:Cf(i),r]},useSyncExternalStore:vC,useId:XC,useHostTransitionStatus:aS,useFormState:kC,useActionState:kC,useOptimistic:function(i,r){var c=$e();return de!==null?_C(c,de,i,r):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:ZA,useCacheRefresh:JC};jC.useEffectEvent=UC;function uS(i,r,c,p){r=i.memoizedState,c=c(p,r),c=c==null?r:v({},r,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var dS={enqueueSetState:function(i,r,c){i=i._reactInternals;var p=Ii(),S=ca(p);S.payload=r,c!=null&&(S.callback=c),r=ua(i,S,p),r!==null&&(ui(r,i,p),bf(r,i,p))},enqueueReplaceState:function(i,r,c){i=i._reactInternals;var p=Ii(),S=ca(p);S.tag=1,S.payload=r,c!=null&&(S.callback=c),r=ua(i,S,p),r!==null&&(ui(r,i,p),bf(r,i,p))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var c=Ii(),p=ca(c);p.tag=2,r!=null&&(p.callback=r),r=ua(i,p,c),r!==null&&(ui(r,i,c),bf(r,i,c))}};function tw(i,r,c,p,S,b,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,b,w):r.prototype&&r.prototype.isPureReactComponent?!ff(c,p)||!ff(S,b):!0}function ew(i,r,c,p){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,p),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,p),r.state!==i&&dS.enqueueReplaceState(r,r.state,null)}function Vl(i,r){var c=r;if("ref"in r){c={};for(var p in r)p!=="ref"&&(c[p]=r[p])}if(i=i.defaultProps){c===r&&(c=v({},c));for(var S in i)c[S]===void 0&&(c[S]=i[S])}return c}function nw(i){$g(i)}function iw(i){console.error(i)}function sw(i){$g(i)}function my(i,r){try{var c=i.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(p){setTimeout(function(){throw p})}}function ow(i,r,c){try{var p=i.onCaughtError;p(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function hS(i,r,c){return c=ca(c),c.tag=3,c.payload={element:null},c.callback=function(){my(i,r)},c}function rw(i){return i=ca(i),i.tag=3,i}function aw(i,r,c,p){var S=c.type.getDerivedStateFromError;if(typeof S=="function"){var b=p.value;i.payload=function(){return S(b)},i.callback=function(){ow(r,c,p)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){ow(r,c,p),typeof S!="function"&&(ga===null?ga=new Set([this]):ga.add(this));var D=p.stack;this.componentDidCatch(p.value,{componentStack:D!==null?D:""})})}function uk(i,r,c,p,S){if(c.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(r=c.alternate,r!==null&&Lu(r,c,S,!0),c=xi.current,c!==null){switch(c.tag){case 31:case 13:return ds===null?xy():c.alternate===null&&Fe===0&&(Fe=3),c.flags&=-257,c.flags|=65536,c.lanes=S,p===ny?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([p]):r.add(p),OS(i,p,S)),!1;case 22:return c.flags|=65536,p===ny?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([p])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([p]):c.add(p)),OS(i,p,S)),!1}throw Error(n(435,c.tag))}return OS(i,p,S),xy(),!1}if(qt)return r=xi.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=S,p!==IA&&(i=Error(n(422),{cause:p}),gf(as(i,c)))):(p!==IA&&(r=Error(n(423),{cause:p}),gf(as(r,c))),i=i.current.alternate,i.flags|=65536,S&=-S,i.lanes|=S,p=as(p,c),S=hS(i.stateNode,p,S),zA(i,S),Fe!==4&&(Fe=2)),!1;var b=Error(n(520),{cause:p});if(b=as(b,c),Pf===null?Pf=[b]:Pf.push(b),Fe!==4&&(Fe=2),r===null)return!0;p=as(p,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,i=S&-S,c.lanes|=i,i=hS(c.stateNode,p,i),zA(c,i),!1;case 1:if(r=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ga===null||!ga.has(b))))return c.flags|=65536,S&=-S,c.lanes|=S,S=rw(S),aw(S,i,c,p),zA(c,S),!1}c=c.return}while(c!==null);return!1}var fS=Error(n(461)),Ze=!1;function wn(i,r,c,p){r.child=i===null?dC(r,null,c,p):Gl(r,i.child,c,p)}function lw(i,r,c,p,S){c=c.render;var b=r.ref;if("ref"in p){var w={};for(var D in p)D!=="ref"&&(w[D]=p[D])}else w=p;return Ol(r),p=JA(i,r,c,w,b,S),D=KA(),i!==null&&!Ze?(WA(i,r,S),Ko(i,r,S)):(qt&&D&&RA(r),r.flags|=1,wn(i,r,p,S),r.child)}function cw(i,r,c,p,S){if(i===null){var b=c.type;return typeof b=="function"&&!wA(b)&&b.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=b,uw(i,r,b,p,S)):(i=Wg(c.type,null,p,r,r.mode,S),i.ref=r.ref,i.return=r,r.child=i)}if(b=i.child,!bS(i,S)){var w=b.memoizedProps;if(c=c.compare,c=c!==null?c:ff,c(w,p)&&i.ref===r.ref)return Ko(i,r,S)}return r.flags|=1,i=Vo(b,p),i.ref=r.ref,i.return=r,r.child=i}function uw(i,r,c,p,S){if(i!==null){var b=i.memoizedProps;if(ff(b,p)&&i.ref===r.ref)if(Ze=!1,r.pendingProps=p=b,bS(i,S))(i.flags&131072)!==0&&(Ze=!0);else return r.lanes=i.lanes,Ko(i,r,S)}return pS(i,r,c,p,S)}function dw(i,r,c,p){var S=p.children,b=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((r.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,i!==null){for(p=r.child=i.child,S=0;p!==null;)S=S|p.lanes|p.childLanes,p=p.sibling;p=S&~b}else p=0,r.child=null;return hw(i,r,b,c,p)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&ty(r,b!==null?b.cachePool:null),b!==null?pC(r,b):qA(),mC(r);else return p=r.lanes=536870912,hw(i,r,b!==null?b.baseLanes|c:c,c,p)}else b!==null?(ty(r,b.cachePool),pC(r,b),ha(),r.memoizedState=null):(i!==null&&ty(r,null),qA(),ha());return wn(i,r,S,c),r.child}function Mf(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function hw(i,r,c,p,S){var b=BA();return b=b===null?null:{parent:We._currentValue,pool:b},r.memoizedState={baseLanes:c,cachePool:b},i!==null&&ty(r,null),qA(),mC(r),i!==null&&Lu(i,r,p,!0),r.childLanes=S,null}function gy(i,r){return r=vy({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function fw(i,r,c){return Gl(r,i.child,null,c),i=gy(r,r.pendingProps),i.flags|=2,Mi(r),r.memoizedState=null,i}function dk(i,r,c){var p=r.pendingProps,S=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(qt){if(p.mode==="hidden")return i=gy(r,p),r.lanes=536870912,Mf(null,i);if($A(r),(i=xe)?(i=Cx(i,us),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:sa!==null?{id:so,overflow:oo}:null,retryLane:536870912,hydrationErrors:null},c=W_(i),c.return=r,r.child=c,_n=r,xe=null)):i=null,i===null)throw ra(r);return r.lanes=536870912,null}return gy(r,p)}var b=i.memoizedState;if(b!==null){var w=b.dehydrated;if($A(r),S)if(r.flags&256)r.flags&=-257,r=fw(i,r,c);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(n(558));else if(Ze||Lu(i,r,c,!1),S=(c&i.childLanes)!==0,Ze||S){if(p=Se,p!==null&&(w=i_(p,c),w!==0&&w!==b.retryLane))throw b.retryLane=w,kl(i,w),ui(p,i,w),fS;xy(),r=fw(i,r,c)}else i=b.treeContext,xe=hs(w.nextSibling),_n=r,qt=!0,oa=null,us=!1,i!==null&&j_(r,i),r=gy(r,p),r.flags|=4096;return r}return i=Vo(i.child,{mode:p.mode,children:p.children}),i.ref=r.ref,r.child=i,i.return=r,i}function yy(i,r){var c=r.ref;if(c===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(i===null||i.ref!==c)&&(r.flags|=4194816)}}function pS(i,r,c,p,S){return Ol(r),c=JA(i,r,c,p,void 0,S),p=KA(),i!==null&&!Ze?(WA(i,r,S),Ko(i,r,S)):(qt&&p&&RA(r),r.flags|=1,wn(i,r,c,S),r.child)}function pw(i,r,c,p,S,b){return Ol(r),r.updateQueue=null,c=yC(r,p,c,S),gC(i),p=KA(),i!==null&&!Ze?(WA(i,r,b),Ko(i,r,b)):(qt&&p&&RA(r),r.flags|=1,wn(i,r,c,b),r.child)}function mw(i,r,c,p,S){if(Ol(r),r.stateNode===null){var b=Nu,w=c.contextType;typeof w=="object"&&w!==null&&(b=Cn(w)),b=new c(p,b),r.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=dS,r.stateNode=b,b._reactInternals=r,b=r.stateNode,b.props=p,b.state=r.memoizedState,b.refs={},HA(r),w=c.contextType,b.context=typeof w=="object"&&w!==null?Cn(w):Nu,b.state=r.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(uS(r,c,w,p),b.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(w=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),w!==b.state&&dS.enqueueReplaceState(b,b.state,null),Tf(r,p,b,S),Ef(),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308),p=!0}else if(i===null){b=r.stateNode;var D=r.memoizedProps,B=Vl(c,D);b.props=B;var Y=b.context,j=c.contextType;w=Nu,typeof j=="object"&&j!==null&&(w=Cn(j));var et=c.getDerivedStateFromProps;j=typeof et=="function"||typeof b.getSnapshotBeforeUpdate=="function",D=r.pendingProps!==D,j||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(D||Y!==w)&&ew(r,b,p,w),la=!1;var $=r.memoizedState;b.state=$,Tf(r,p,b,S),Ef(),Y=r.memoizedState,D||$!==Y||la?(typeof et=="function"&&(uS(r,c,et,p),Y=r.memoizedState),(B=la||tw(r,c,B,p,$,Y,w))?(j||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(r.flags|=4194308)):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=p,r.memoizedState=Y),b.props=p,b.state=Y,b.context=w,p=B):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),p=!1)}else{b=r.stateNode,GA(i,r),w=r.memoizedProps,j=Vl(c,w),b.props=j,et=r.pendingProps,$=b.context,Y=c.contextType,B=Nu,typeof Y=="object"&&Y!==null&&(B=Cn(Y)),D=c.getDerivedStateFromProps,(Y=typeof D=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(w!==et||$!==B)&&ew(r,b,p,B),la=!1,$=r.memoizedState,b.state=$,Tf(r,p,b,S),Ef();var J=r.memoizedState;w!==et||$!==J||la||i!==null&&i.dependencies!==null&&Zg(i.dependencies)?(typeof D=="function"&&(uS(r,c,D,p),J=r.memoizedState),(j=la||tw(r,c,j,p,$,J,B)||i!==null&&i.dependencies!==null&&Zg(i.dependencies))?(Y||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(p,J,B),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(p,J,B)),typeof b.componentDidUpdate=="function"&&(r.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof b.componentDidUpdate!="function"||w===i.memoizedProps&&$===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&$===i.memoizedState||(r.flags|=1024),r.memoizedProps=p,r.memoizedState=J),b.props=p,b.state=J,b.context=B,p=j):(typeof b.componentDidUpdate!="function"||w===i.memoizedProps&&$===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&$===i.memoizedState||(r.flags|=1024),p=!1)}return b=p,yy(i,r),p=(r.flags&128)!==0,b||p?(b=r.stateNode,c=p&&typeof c.getDerivedStateFromError!="function"?null:b.render(),r.flags|=1,i!==null&&p?(r.child=Gl(r,i.child,null,S),r.child=Gl(r,null,c,S)):wn(i,r,c,S),r.memoizedState=b.state,i=r.child):i=Ko(i,r,S),i}function gw(i,r,c,p){return Pl(),r.flags|=256,wn(i,r,c,p),r.child}var mS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gS(i){return{baseLanes:i,cachePool:oC()}}function yS(i,r,c){return i=i!==null?i.childLanes&~c:0,r&&(i|=Ni),i}function yw(i,r,c){var p=r.pendingProps,S=!1,b=(r.flags&128)!==0,w;if((w=b)||(w=i!==null&&i.memoizedState===null?!1:(Ye.current&2)!==0),w&&(S=!0,r.flags&=-129),w=(r.flags&32)!==0,r.flags&=-33,i===null){if(qt){if(S?da(r):ha(),(i=xe)?(i=Cx(i,us),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:sa!==null?{id:so,overflow:oo}:null,retryLane:536870912,hydrationErrors:null},c=W_(i),c.return=r,r.child=c,_n=r,xe=null)):i=null,i===null)throw ra(r);return jS(i)?r.lanes=32:r.lanes=536870912,null}var D=p.children;return p=p.fallback,S?(ha(),S=r.mode,D=vy({mode:"hidden",children:D},S),p=Ll(p,S,c,null),D.return=r,p.return=r,D.sibling=p,r.child=D,p=r.child,p.memoizedState=gS(c),p.childLanes=yS(i,w,c),r.memoizedState=mS,Mf(null,p)):(da(r),vS(r,D))}var B=i.memoizedState;if(B!==null&&(D=B.dehydrated,D!==null)){if(b)r.flags&256?(da(r),r.flags&=-257,r=AS(i,r,c)):r.memoizedState!==null?(ha(),r.child=i.child,r.flags|=128,r=null):(ha(),D=p.fallback,S=r.mode,p=vy({mode:"visible",children:p.children},S),D=Ll(D,S,c,null),D.flags|=2,p.return=r,D.return=r,p.sibling=D,r.child=p,Gl(r,i.child,null,c),p=r.child,p.memoizedState=gS(c),p.childLanes=yS(i,w,c),r.memoizedState=mS,r=Mf(null,p));else if(da(r),jS(D)){if(w=D.nextSibling&&D.nextSibling.dataset,w)var Y=w.dgst;w=Y,p=Error(n(419)),p.stack="",p.digest=w,gf({value:p,source:null,stack:null}),r=AS(i,r,c)}else if(Ze||Lu(i,r,c,!1),w=(c&i.childLanes)!==0,Ze||w){if(w=Se,w!==null&&(p=i_(w,c),p!==0&&p!==B.retryLane))throw B.retryLane=p,kl(i,p),ui(w,i,p),fS;ZS(D)||xy(),r=AS(i,r,c)}else ZS(D)?(r.flags|=192,r.child=i.child,r=null):(i=B.treeContext,xe=hs(D.nextSibling),_n=r,qt=!0,oa=null,us=!1,i!==null&&j_(r,i),r=vS(r,p.children),r.flags|=4096);return r}return S?(ha(),D=p.fallback,S=r.mode,B=i.child,Y=B.sibling,p=Vo(B,{mode:"hidden",children:p.children}),p.subtreeFlags=B.subtreeFlags&65011712,Y!==null?D=Vo(Y,D):(D=Ll(D,S,c,null),D.flags|=2),D.return=r,p.return=r,p.sibling=D,r.child=p,Mf(null,p),p=r.child,D=i.child.memoizedState,D===null?D=gS(c):(S=D.cachePool,S!==null?(B=We._currentValue,S=S.parent!==B?{parent:B,pool:B}:S):S=oC(),D={baseLanes:D.baseLanes|c,cachePool:S}),p.memoizedState=D,p.childLanes=yS(i,w,c),r.memoizedState=mS,Mf(i.child,p)):(da(r),c=i.child,i=c.sibling,c=Vo(c,{mode:"visible",children:p.children}),c.return=r,c.sibling=null,i!==null&&(w=r.deletions,w===null?(r.deletions=[i],r.flags|=16):w.push(i)),r.child=c,r.memoizedState=null,c)}function vS(i,r){return r=vy({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function vy(i,r){return i=wi(22,i,null,r),i.lanes=0,i}function AS(i,r,c){return Gl(r,i.child,null,c),i=vS(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function vw(i,r,c){i.lanes|=r;var p=i.alternate;p!==null&&(p.lanes|=r),LA(i.return,r,c)}function SS(i,r,c,p,S,b){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:S,treeForkCount:b}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=c,w.tailMode=S,w.treeForkCount=b)}function Aw(i,r,c){var p=r.pendingProps,S=p.revealOrder,b=p.tail;p=p.children;var w=Ye.current,D=(w&2)!==0;if(D?(w=w&1|2,r.flags|=128):w&=1,st(Ye,w),wn(i,r,p,c),p=qt?mf:0,!D&&i!==null&&(i.flags&128)!==0)t:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&vw(i,c,r);else if(i.tag===19)vw(i,c,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(S){case"forwards":for(c=r.child,S=null;c!==null;)i=c.alternate,i!==null&&ry(i)===null&&(S=c),c=c.sibling;c=S,c===null?(S=r.child,r.child=null):(S=c.sibling,c.sibling=null),SS(r,!1,S,c,b,p);break;case"backwards":case"unstable_legacy-backwards":for(c=null,S=r.child,r.child=null;S!==null;){if(i=S.alternate,i!==null&&ry(i)===null){r.child=S;break}i=S.sibling,S.sibling=c,c=S,S=i}SS(r,!0,c,null,b,p);break;case"together":SS(r,!1,null,null,void 0,p);break;default:r.memoizedState=null}return r.child}function Ko(i,r,c){if(i!==null&&(r.dependencies=i.dependencies),ma|=r.lanes,(c&r.childLanes)===0)if(i!==null){if(Lu(i,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(n(153));if(r.child!==null){for(i=r.child,c=Vo(i,i.pendingProps),r.child=c,c.return=r;i.sibling!==null;)i=i.sibling,c=c.sibling=Vo(i,i.pendingProps),c.return=r;c.sibling=null}return r.child}function bS(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Zg(i)))}function hk(i,r,c){switch(r.tag){case 3:on(r,r.stateNode.containerInfo),aa(r,We,i.memoizedState.cache),Pl();break;case 27:case 5:Ps(r);break;case 4:on(r,r.stateNode.containerInfo);break;case 10:aa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,$A(r),null;break;case 13:var p=r.memoizedState;if(p!==null)return p.dehydrated!==null?(da(r),r.flags|=128,null):(c&r.child.childLanes)!==0?yw(i,r,c):(da(r),i=Ko(i,r,c),i!==null?i.sibling:null);da(r);break;case 19:var S=(i.flags&128)!==0;if(p=(c&r.childLanes)!==0,p||(Lu(i,r,c,!1),p=(c&r.childLanes)!==0),S){if(p)return Aw(i,r,c);r.flags|=128}if(S=r.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),st(Ye,Ye.current),p)break;return null;case 22:return r.lanes=0,dw(i,r,c,r.pendingProps);case 24:aa(r,We,i.memoizedState.cache)}return Ko(i,r,c)}function Sw(i,r,c){if(i!==null)if(i.memoizedProps!==r.pendingProps)Ze=!0;else{if(!bS(i,c)&&(r.flags&128)===0)return Ze=!1,hk(i,r,c);Ze=(i.flags&131072)!==0}else Ze=!1,qt&&(r.flags&1048576)!==0&&Z_(r,mf,r.index);switch(r.lanes=0,r.tag){case 16:t:{var p=r.pendingProps;if(i=Fl(r.elementType),r.type=i,typeof i=="function")wA(i)?(p=Vl(i,p),r.tag=1,r=mw(null,r,i,p,c)):(r.tag=0,r=pS(null,r,i,p,c));else{if(i!=null){var S=i.$$typeof;if(S===U){r.tag=11,r=lw(null,r,i,p,c);break t}else if(S===F){r.tag=14,r=cw(null,r,i,p,c);break t}}throw r=ct(i)||i,Error(n(306,r,""))}}return r;case 0:return pS(i,r,r.type,r.pendingProps,c);case 1:return p=r.type,S=Vl(p,r.pendingProps),mw(i,r,p,S,c);case 3:t:{if(on(r,r.stateNode.containerInfo),i===null)throw Error(n(387));p=r.pendingProps;var b=r.memoizedState;S=b.element,GA(i,r),Tf(r,p,null,c);var w=r.memoizedState;if(p=w.cache,aa(r,We,p),p!==b.cache&&PA(r,[We],c,!0),Ef(),p=w.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:w.cache},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){r=gw(i,r,p,c);break t}else if(p!==S){S=as(Error(n(424)),r),gf(S),r=gw(i,r,p,c);break t}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(xe=hs(i.firstChild),_n=r,qt=!0,oa=null,us=!0,c=dC(r,null,p,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Pl(),p===S){r=Ko(i,r,c);break t}wn(i,r,p,c)}r=r.child}return r;case 26:return yy(i,r),i===null?(c=Ix(r.type,null,r.pendingProps,null))?r.memoizedState=c:qt||(c=r.type,i=r.pendingProps,p=Ly(bt.current).createElement(c),p[Tn]=r,p[si]=i,xn(p,c,i),fn(p),r.stateNode=p):r.memoizedState=Ix(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Ps(r),i===null&&qt&&(p=r.stateNode=Mx(r.type,r.pendingProps,bt.current),_n=r,us=!0,S=xe,Sa(r.type)?(tb=S,xe=hs(p.firstChild)):xe=S),wn(i,r,r.pendingProps.children,c),yy(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&qt&&((S=p=xe)&&(p=zk(p,r.type,r.pendingProps,us),p!==null?(r.stateNode=p,_n=r,xe=hs(p.firstChild),us=!1,S=!0):S=!1),S||ra(r)),Ps(r),S=r.type,b=r.pendingProps,w=i!==null?i.memoizedProps:null,p=b.children,KS(S,b)?p=null:w!==null&&KS(S,w)&&(r.flags|=32),r.memoizedState!==null&&(S=JA(i,r,ik,null,null,c),Vf._currentValue=S),yy(i,r),wn(i,r,p,c),r.child;case 6:return i===null&&qt&&((i=c=xe)&&(c=Vk(c,r.pendingProps,us),c!==null?(r.stateNode=c,_n=r,xe=null,i=!0):i=!1),i||ra(r)),null;case 13:return yw(i,r,c);case 4:return on(r,r.stateNode.containerInfo),p=r.pendingProps,i===null?r.child=Gl(r,null,p,c):wn(i,r,p,c),r.child;case 11:return lw(i,r,r.type,r.pendingProps,c);case 7:return wn(i,r,r.pendingProps,c),r.child;case 8:return wn(i,r,r.pendingProps.children,c),r.child;case 12:return wn(i,r,r.pendingProps.children,c),r.child;case 10:return p=r.pendingProps,aa(r,r.type,p.value),wn(i,r,p.children,c),r.child;case 9:return S=r.type._context,p=r.pendingProps.children,Ol(r),S=Cn(S),p=p(S),r.flags|=1,wn(i,r,p,c),r.child;case 14:return cw(i,r,r.type,r.pendingProps,c);case 15:return uw(i,r,r.type,r.pendingProps,c);case 19:return Aw(i,r,c);case 31:return dk(i,r,c);case 22:return dw(i,r,c,r.pendingProps);case 24:return Ol(r),p=Cn(We),i===null?(S=BA(),S===null&&(S=Se,b=UA(),S.pooledCache=b,b.refCount++,b!==null&&(S.pooledCacheLanes|=c),S=b),r.memoizedState={parent:p,cache:S},HA(r),aa(r,We,S)):((i.lanes&c)!==0&&(GA(i,r),Tf(r,null,null,c),Ef()),S=i.memoizedState,b=r.memoizedState,S.parent!==p?(S={parent:p,cache:p},r.memoizedState=S,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=S),aa(r,We,p)):(p=b.cache,aa(r,We,p),p!==S.cache&&PA(r,[We],c,!0))),wn(i,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function Wo(i){i.flags|=4}function ES(i,r,c,p,S){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(S&335544128)===S)if(i.stateNode.complete)i.flags|=8192;else if(Xw())i.flags|=8192;else throw Hl=ny,FA}else i.flags&=-16777217}function bw(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Ux(r))if(Xw())i.flags|=8192;else throw Hl=ny,FA}function Ay(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?t_():536870912,i.lanes|=r,$u|=r)}function Rf(i,r){if(!qt)switch(i.tailMode){case"hidden":r=i.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Me(i){var r=i.alternate!==null&&i.alternate.child===i.child,c=0,p=0;if(r)for(var S=i.child;S!==null;)c|=S.lanes|S.childLanes,p|=S.subtreeFlags&65011712,p|=S.flags&65011712,S.return=i,S=S.sibling;else for(S=i.child;S!==null;)c|=S.lanes|S.childLanes,p|=S.subtreeFlags,p|=S.flags,S.return=i,S=S.sibling;return i.subtreeFlags|=p,i.childLanes=c,r}function fk(i,r,c){var p=r.pendingProps;switch(NA(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(r),null;case 1:return Me(r),null;case 3:return c=r.stateNode,p=null,i!==null&&(p=i.memoizedState.cache),r.memoizedState.cache!==p&&(r.flags|=2048),$o(We),we(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(ku(r)?Wo(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,DA())),Me(r),null;case 26:var S=r.type,b=r.memoizedState;return i===null?(Wo(r),b!==null?(Me(r),bw(r,b)):(Me(r),ES(r,S,null,p,c))):b?b!==i.memoizedState?(Wo(r),Me(r),bw(r,b)):(Me(r),r.flags&=-16777217):(i=i.memoizedProps,i!==p&&Wo(r),Me(r),ES(r,S,i,p,c)),null;case 27:if(is(r),c=bt.current,S=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==p&&Wo(r);else{if(!p){if(r.stateNode===null)throw Error(n(166));return Me(r),null}i=at.current,ku(r)?tC(r):(i=Mx(S,p,c),r.stateNode=i,Wo(r))}return Me(r),null;case 5:if(is(r),S=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==p&&Wo(r);else{if(!p){if(r.stateNode===null)throw Error(n(166));return Me(r),null}if(b=at.current,ku(r))tC(r);else{var w=Ly(bt.current);switch(b){case 1:b=w.createElementNS("http://www.w3.org/2000/svg",S);break;case 2:b=w.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;default:switch(S){case"svg":b=w.createElementNS("http://www.w3.org/2000/svg",S);break;case"math":b=w.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;case"script":b=w.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof p.is=="string"?w.createElement("select",{is:p.is}):w.createElement("select"),p.multiple?b.multiple=!0:p.size&&(b.size=p.size);break;default:b=typeof p.is=="string"?w.createElement(S,{is:p.is}):w.createElement(S)}}b[Tn]=r,b[si]=p;t:for(w=r.child;w!==null;){if(w.tag===5||w.tag===6)b.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===r)break t;for(;w.sibling===null;){if(w.return===null||w.return===r)break t;w=w.return}w.sibling.return=w.return,w=w.sibling}r.stateNode=b;t:switch(xn(b,S,p),S){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break t;case"img":p=!0;break t;default:p=!1}p&&Wo(r)}}return Me(r),ES(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,c),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==p&&Wo(r);else{if(typeof p!="string"&&r.stateNode===null)throw Error(n(166));if(i=bt.current,ku(r)){if(i=r.stateNode,c=r.memoizedProps,p=null,S=_n,S!==null)switch(S.tag){case 27:case 5:p=S.memoizedProps}i[Tn]=r,i=!!(i.nodeValue===c||p!==null&&p.suppressHydrationWarning===!0||yx(i.nodeValue,c)),i||ra(r,!0)}else i=Ly(i).createTextNode(p),i[Tn]=r,r.stateNode=i}return Me(r),null;case 31:if(c=r.memoizedState,i===null||i.memoizedState!==null){if(p=ku(r),c!==null){if(i===null){if(!p)throw Error(n(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Tn]=r}else Pl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Me(r),i=!1}else c=DA(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return r.flags&256?(Mi(r),r):(Mi(r),null);if((r.flags&128)!==0)throw Error(n(558))}return Me(r),null;case 13:if(p=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(S=ku(r),p!==null&&p.dehydrated!==null){if(i===null){if(!S)throw Error(n(318));if(S=r.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[Tn]=r}else Pl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Me(r),S=!1}else S=DA(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=S),S=!0;if(!S)return r.flags&256?(Mi(r),r):(Mi(r),null)}return Mi(r),(r.flags&128)!==0?(r.lanes=c,r):(c=p!==null,i=i!==null&&i.memoizedState!==null,c&&(p=r.child,S=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(S=p.alternate.memoizedState.cachePool.pool),b=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(b=p.memoizedState.cachePool.pool),b!==S&&(p.flags|=2048)),c!==i&&c&&(r.child.flags|=8192),Ay(r,r.updateQueue),Me(r),null);case 4:return we(),i===null&&qS(r.stateNode.containerInfo),Me(r),null;case 10:return $o(r.type),Me(r),null;case 19:if(K(Ye),p=r.memoizedState,p===null)return Me(r),null;if(S=(r.flags&128)!==0,b=p.rendering,b===null)if(S)Rf(p,!1);else{if(Fe!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(b=ry(i),b!==null){for(r.flags|=128,Rf(p,!1),i=b.updateQueue,r.updateQueue=i,Ay(r,i),r.subtreeFlags=0,i=c,c=r.child;c!==null;)K_(c,i),c=c.sibling;return st(Ye,Ye.current&1|2),qt&&qo(r,p.treeForkCount),r.child}i=i.sibling}p.tail!==null&&Ei()>_y&&(r.flags|=128,S=!0,Rf(p,!1),r.lanes=4194304)}else{if(!S)if(i=ry(b),i!==null){if(r.flags|=128,S=!0,i=i.updateQueue,r.updateQueue=i,Ay(r,i),Rf(p,!0),p.tail===null&&p.tailMode==="hidden"&&!b.alternate&&!qt)return Me(r),null}else 2*Ei()-p.renderingStartTime>_y&&c!==536870912&&(r.flags|=128,S=!0,Rf(p,!1),r.lanes=4194304);p.isBackwards?(b.sibling=r.child,r.child=b):(i=p.last,i!==null?i.sibling=b:r.child=b,p.last=b)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ei(),i.sibling=null,c=Ye.current,st(Ye,S?c&1|2:c&1),qt&&qo(r,p.treeForkCount),i):(Me(r),null);case 22:case 23:return Mi(r),YA(),p=r.memoizedState!==null,i!==null?i.memoizedState!==null!==p&&(r.flags|=8192):p&&(r.flags|=8192),p?(c&536870912)!==0&&(r.flags&128)===0&&(Me(r),r.subtreeFlags&6&&(r.flags|=8192)):Me(r),c=r.updateQueue,c!==null&&Ay(r,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),p=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(p=r.memoizedState.cachePool.pool),p!==c&&(r.flags|=2048),i!==null&&K(Bl),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),$o(We),Me(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function pk(i,r){switch(NA(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return $o(We),we(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return is(r),null;case 31:if(r.memoizedState!==null){if(Mi(r),r.alternate===null)throw Error(n(340));Pl()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Mi(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Pl()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return K(Ye),null;case 4:return we(),null;case 10:return $o(r.type),null;case 22:case 23:return Mi(r),YA(),i!==null&&K(Bl),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return $o(We),null;case 25:return null;default:return null}}function Ew(i,r){switch(NA(r),r.tag){case 3:$o(We),we();break;case 26:case 27:case 5:is(r);break;case 4:we();break;case 31:r.memoizedState!==null&&Mi(r);break;case 13:Mi(r);break;case 19:K(Ye);break;case 10:$o(r.type);break;case 22:case 23:Mi(r),YA(),i!==null&&K(Bl);break;case 24:$o(We)}}function Nf(i,r){try{var c=r.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var S=p.next;c=S;do{if((c.tag&i)===i){p=void 0;var b=c.create,w=c.inst;p=b(),w.destroy=p}c=c.next}while(c!==S)}}catch(D){ae(r,r.return,D)}}function fa(i,r,c){try{var p=r.updateQueue,S=p!==null?p.lastEffect:null;if(S!==null){var b=S.next;p=b;do{if((p.tag&i)===i){var w=p.inst,D=w.destroy;if(D!==void 0){w.destroy=void 0,S=r;var B=c,Y=D;try{Y()}catch(j){ae(S,B,j)}}}p=p.next}while(p!==b)}}catch(j){ae(r,r.return,j)}}function Tw(i){var r=i.updateQueue;if(r!==null){var c=i.stateNode;try{fC(r,c)}catch(p){ae(i,i.return,p)}}}function _w(i,r,c){c.props=Vl(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(p){ae(i,r,p)}}function If(i,r){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var p=i.stateNode;break;case 30:p=i.stateNode;break;default:p=i.stateNode}typeof c=="function"?i.refCleanup=c(p):c.current=p}}catch(S){ae(i,r,S)}}function ro(i,r){var c=i.ref,p=i.refCleanup;if(c!==null)if(typeof p=="function")try{p()}catch(S){ae(i,r,S)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(S){ae(i,r,S)}else c.current=null}function Cw(i){var r=i.type,c=i.memoizedProps,p=i.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&p.focus();break t;case"img":c.src?p.src=c.src:c.srcSet&&(p.srcset=c.srcSet)}}catch(S){ae(i,i.return,S)}}function TS(i,r,c){try{var p=i.stateNode;Uk(p,i.type,c,r),p[si]=r}catch(S){ae(i,i.return,S)}}function ww(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Sa(i.type)||i.tag===4}function _S(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||ww(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Sa(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function CS(i,r,c){var p=i.tag;if(p===5||p===6)i=i.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(i),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=Go));else if(p!==4&&(p===27&&Sa(i.type)&&(c=i.stateNode,r=null),i=i.child,i!==null))for(CS(i,r,c),i=i.sibling;i!==null;)CS(i,r,c),i=i.sibling}function Sy(i,r,c){var p=i.tag;if(p===5||p===6)i=i.stateNode,r?c.insertBefore(i,r):c.appendChild(i);else if(p!==4&&(p===27&&Sa(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Sy(i,r,c),i=i.sibling;i!==null;)Sy(i,r,c),i=i.sibling}function xw(i){var r=i.stateNode,c=i.memoizedProps;try{for(var p=i.type,S=r.attributes;S.length;)r.removeAttributeNode(S[0]);xn(r,p,c),r[Tn]=i,r[si]=c}catch(b){ae(i,i.return,b)}}var Qo=!1,je=!1,wS=!1,Mw=typeof WeakSet=="function"?WeakSet:Set,pn=null;function mk(i,r){if(i=i.containerInfo,XS=Gy,i=H_(i),AA(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else t:{c=(c=i.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var S=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break t}var w=0,D=-1,B=-1,Y=0,j=0,et=i,$=null;e:for(;;){for(var J;et!==c||S!==0&&et.nodeType!==3||(D=w+S),et!==b||p!==0&&et.nodeType!==3||(B=w+p),et.nodeType===3&&(w+=et.nodeValue.length),(J=et.firstChild)!==null;)$=et,et=J;for(;;){if(et===i)break e;if($===c&&++Y===S&&(D=w),$===b&&++j===p&&(B=w),(J=et.nextSibling)!==null)break;et=$,$=et.parentNode}et=J}c=D===-1||B===-1?null:{start:D,end:B}}else c=null}c=c||{start:0,end:0}}else c=null;for(JS={focusedElem:i,selectionRange:c},Gy=!1,pn=r;pn!==null;)if(r=pn,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,pn=i;else for(;pn!==null;){switch(r=pn,b=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)S=i[c],S.ref.impl=S.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,c=r,S=b.memoizedProps,b=b.memoizedState,p=c.stateNode;try{var mt=Vl(c.type,S);i=p.getSnapshotBeforeUpdate(mt,b),p.__reactInternalSnapshotBeforeUpdate=i}catch(Tt){ae(c,c.return,Tt)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,c=i.nodeType,c===9)QS(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":QS(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=r.sibling,i!==null){i.return=r.return,pn=i;break}pn=r.return}}function Rw(i,r,c){var p=c.flags;switch(c.tag){case 0:case 11:case 15:jo(i,c),p&4&&Nf(5,c);break;case 1:if(jo(i,c),p&4)if(i=c.stateNode,r===null)try{i.componentDidMount()}catch(w){ae(c,c.return,w)}else{var S=Vl(c.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(S,r,i.__reactInternalSnapshotBeforeUpdate)}catch(w){ae(c,c.return,w)}}p&64&&Tw(c),p&512&&If(c,c.return);break;case 3:if(jo(i,c),p&64&&(i=c.updateQueue,i!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{fC(i,r)}catch(w){ae(c,c.return,w)}}break;case 27:r===null&&p&4&&xw(c);case 26:case 5:jo(i,c),r===null&&p&4&&Cw(c),p&512&&If(c,c.return);break;case 12:jo(i,c);break;case 31:jo(i,c),p&4&&Dw(i,c);break;case 13:jo(i,c),p&4&&kw(i,c),p&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=_k.bind(null,c),qk(i,c))));break;case 22:if(p=c.memoizedState!==null||Qo,!p){r=r!==null&&r.memoizedState!==null||je,S=Qo;var b=je;Qo=p,(je=r)&&!b?tr(i,c,(c.subtreeFlags&8772)!==0):jo(i,c),Qo=S,je=b}break;case 30:break;default:jo(i,c)}}function Nw(i){var r=i.alternate;r!==null&&(i.alternate=null,Nw(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&nA(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ne=null,ri=!1;function Zo(i,r,c){for(c=c.child;c!==null;)Iw(i,r,c),c=c.sibling}function Iw(i,r,c){if(Ti&&typeof Ti.onCommitFiberUnmount=="function")try{Ti.onCommitFiberUnmount(tf,c)}catch{}switch(c.tag){case 26:je||ro(c,r),Zo(i,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:je||ro(c,r);var p=Ne,S=ri;Sa(c.type)&&(Ne=c.stateNode,ri=!1),Zo(i,r,c),Hf(c.stateNode),Ne=p,ri=S;break;case 5:je||ro(c,r);case 6:if(p=Ne,S=ri,Ne=null,Zo(i,r,c),Ne=p,ri=S,Ne!==null)if(ri)try{(Ne.nodeType===9?Ne.body:Ne.nodeName==="HTML"?Ne.ownerDocument.body:Ne).removeChild(c.stateNode)}catch(b){ae(c,r,b)}else try{Ne.removeChild(c.stateNode)}catch(b){ae(c,r,b)}break;case 18:Ne!==null&&(ri?(i=Ne,Tx(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),td(i)):Tx(Ne,c.stateNode));break;case 4:p=Ne,S=ri,Ne=c.stateNode.containerInfo,ri=!0,Zo(i,r,c),Ne=p,ri=S;break;case 0:case 11:case 14:case 15:fa(2,c,r),je||fa(4,c,r),Zo(i,r,c);break;case 1:je||(ro(c,r),p=c.stateNode,typeof p.componentWillUnmount=="function"&&_w(c,r,p)),Zo(i,r,c);break;case 21:Zo(i,r,c);break;case 22:je=(p=je)||c.memoizedState!==null,Zo(i,r,c),je=p;break;default:Zo(i,r,c)}}function Dw(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{td(i)}catch(c){ae(r,r.return,c)}}}function kw(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{td(i)}catch(c){ae(r,r.return,c)}}function gk(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new Mw),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new Mw),r;default:throw Error(n(435,i.tag))}}function by(i,r){var c=gk(i);r.forEach(function(p){if(!c.has(p)){c.add(p);var S=Ck.bind(null,i,p);p.then(S,S)}})}function ai(i,r){var c=r.deletions;if(c!==null)for(var p=0;p<c.length;p++){var S=c[p],b=i,w=r,D=w;t:for(;D!==null;){switch(D.tag){case 27:if(Sa(D.type)){Ne=D.stateNode,ri=!1;break t}break;case 5:Ne=D.stateNode,ri=!1;break t;case 3:case 4:Ne=D.stateNode.containerInfo,ri=!0;break t}D=D.return}if(Ne===null)throw Error(n(160));Iw(b,w,S),Ne=null,ri=!1,b=S.alternate,b!==null&&(b.return=null),S.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Lw(r,i),r=r.sibling}var Os=null;function Lw(i,r){var c=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ai(r,i),li(i),p&4&&(fa(3,i,i.return),Nf(3,i),fa(5,i,i.return));break;case 1:ai(r,i),li(i),p&512&&(je||c===null||ro(c,c.return)),p&64&&Qo&&(i=i.updateQueue,i!==null&&(p=i.callbacks,p!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?p:c.concat(p))));break;case 26:var S=Os;if(ai(r,i),li(i),p&512&&(je||c===null||ro(c,c.return)),p&4){var b=c!==null?c.memoizedState:null;if(p=i.memoizedState,c===null)if(p===null)if(i.stateNode===null){t:{p=i.type,c=i.memoizedProps,S=S.ownerDocument||S;e:switch(p){case"title":b=S.getElementsByTagName("title")[0],(!b||b[sf]||b[Tn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=S.createElement(p),S.head.insertBefore(b,S.querySelector("head > title"))),xn(b,p,c),b[Tn]=i,fn(b),p=b;break t;case"link":var w=Lx("link","href",S).get(p+(c.href||""));if(w){for(var D=0;D<w.length;D++)if(b=w[D],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(D,1);break e}}b=S.createElement(p),xn(b,p,c),S.head.appendChild(b);break;case"meta":if(w=Lx("meta","content",S).get(p+(c.content||""))){for(D=0;D<w.length;D++)if(b=w[D],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(D,1);break e}}b=S.createElement(p),xn(b,p,c),S.head.appendChild(b);break;default:throw Error(n(468,p))}b[Tn]=i,fn(b),p=b}i.stateNode=p}else Px(S,i.type,i.stateNode);else i.stateNode=kx(S,p,i.memoizedProps);else b!==p?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,p===null?Px(S,i.type,i.stateNode):kx(S,p,i.memoizedProps)):p===null&&i.stateNode!==null&&TS(i,i.memoizedProps,c.memoizedProps)}break;case 27:ai(r,i),li(i),p&512&&(je||c===null||ro(c,c.return)),c!==null&&p&4&&TS(i,i.memoizedProps,c.memoizedProps);break;case 5:if(ai(r,i),li(i),p&512&&(je||c===null||ro(c,c.return)),i.flags&32){S=i.stateNode;try{Tu(S,"")}catch(mt){ae(i,i.return,mt)}}p&4&&i.stateNode!=null&&(S=i.memoizedProps,TS(i,S,c!==null?c.memoizedProps:S)),p&1024&&(wS=!0);break;case 6:if(ai(r,i),li(i),p&4){if(i.stateNode===null)throw Error(n(162));p=i.memoizedProps,c=i.stateNode;try{c.nodeValue=p}catch(mt){ae(i,i.return,mt)}}break;case 3:if(Oy=null,S=Os,Os=Py(r.containerInfo),ai(r,i),Os=S,li(i),p&4&&c!==null&&c.memoizedState.isDehydrated)try{td(r.containerInfo)}catch(mt){ae(i,i.return,mt)}wS&&(wS=!1,Pw(i));break;case 4:p=Os,Os=Py(i.stateNode.containerInfo),ai(r,i),li(i),Os=p;break;case 12:ai(r,i),li(i);break;case 31:ai(r,i),li(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,by(i,p)));break;case 13:ai(r,i),li(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Ty=Ei()),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,by(i,p)));break;case 22:S=i.memoizedState!==null;var B=c!==null&&c.memoizedState!==null,Y=Qo,j=je;if(Qo=Y||S,je=j||B,ai(r,i),je=j,Qo=Y,li(i),p&8192)t:for(r=i.stateNode,r._visibility=S?r._visibility&-2:r._visibility|1,S&&(c===null||B||Qo||je||ql(i)),c=null,r=i;;){if(r.tag===5||r.tag===26){if(c===null){B=c=r;try{if(b=B.stateNode,S)w=b.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{D=B.stateNode;var et=B.memoizedProps.style,$=et!=null&&et.hasOwnProperty("display")?et.display:null;D.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(mt){ae(B,B.return,mt)}}}else if(r.tag===6){if(c===null){B=r;try{B.stateNode.nodeValue=S?"":B.memoizedProps}catch(mt){ae(B,B.return,mt)}}}else if(r.tag===18){if(c===null){B=r;try{var J=B.stateNode;S?_x(J,!0):_x(B.stateNode,!1)}catch(mt){ae(B,B.return,mt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}p&4&&(p=i.updateQueue,p!==null&&(c=p.retryQueue,c!==null&&(p.retryQueue=null,by(i,c))));break;case 19:ai(r,i),li(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,by(i,p)));break;case 30:break;case 21:break;default:ai(r,i),li(i)}}function li(i){var r=i.flags;if(r&2){try{for(var c,p=i.return;p!==null;){if(ww(p)){c=p;break}p=p.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var S=c.stateNode,b=_S(i);Sy(i,b,S);break;case 5:var w=c.stateNode;c.flags&32&&(Tu(w,""),c.flags&=-33);var D=_S(i);Sy(i,D,w);break;case 3:case 4:var B=c.stateNode.containerInfo,Y=_S(i);CS(i,Y,B);break;default:throw Error(n(161))}}catch(j){ae(i,i.return,j)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function Pw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;Pw(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function jo(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Rw(i,r.alternate,r),r=r.sibling}function ql(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:fa(4,r,r.return),ql(r);break;case 1:ro(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&_w(r,r.return,c),ql(r);break;case 27:Hf(r.stateNode);case 26:case 5:ro(r,r.return),ql(r);break;case 22:r.memoizedState===null&&ql(r);break;case 30:ql(r);break;default:ql(r)}i=i.sibling}}function tr(i,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var p=r.alternate,S=i,b=r,w=b.flags;switch(b.tag){case 0:case 11:case 15:tr(S,b,c),Nf(4,b);break;case 1:if(tr(S,b,c),p=b,S=p.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(Y){ae(p,p.return,Y)}if(p=b,S=p.updateQueue,S!==null){var D=p.stateNode;try{var B=S.shared.hiddenCallbacks;if(B!==null)for(S.shared.hiddenCallbacks=null,S=0;S<B.length;S++)hC(B[S],D)}catch(Y){ae(p,p.return,Y)}}c&&w&64&&Tw(b),If(b,b.return);break;case 27:xw(b);case 26:case 5:tr(S,b,c),c&&p===null&&w&4&&Cw(b),If(b,b.return);break;case 12:tr(S,b,c);break;case 31:tr(S,b,c),c&&w&4&&Dw(S,b);break;case 13:tr(S,b,c),c&&w&4&&kw(S,b);break;case 22:b.memoizedState===null&&tr(S,b,c),If(b,b.return);break;case 30:break;default:tr(S,b,c)}r=r.sibling}}function xS(i,r){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&yf(c))}function MS(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&yf(i))}function Bs(i,r,c,p){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Uw(i,r,c,p),r=r.sibling}function Uw(i,r,c,p){var S=r.flags;switch(r.tag){case 0:case 11:case 15:Bs(i,r,c,p),S&2048&&Nf(9,r);break;case 1:Bs(i,r,c,p);break;case 3:Bs(i,r,c,p),S&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&yf(i)));break;case 12:if(S&2048){Bs(i,r,c,p),i=r.stateNode;try{var b=r.memoizedProps,w=b.id,D=b.onPostCommit;typeof D=="function"&&D(w,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(B){ae(r,r.return,B)}}else Bs(i,r,c,p);break;case 31:Bs(i,r,c,p);break;case 13:Bs(i,r,c,p);break;case 23:break;case 22:b=r.stateNode,w=r.alternate,r.memoizedState!==null?b._visibility&2?Bs(i,r,c,p):Df(i,r):b._visibility&2?Bs(i,r,c,p):(b._visibility|=2,Vu(i,r,c,p,(r.subtreeFlags&10256)!==0||!1)),S&2048&&xS(w,r);break;case 24:Bs(i,r,c,p),S&2048&&MS(r.alternate,r);break;default:Bs(i,r,c,p)}}function Vu(i,r,c,p,S){for(S=S&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var b=i,w=r,D=c,B=p,Y=w.flags;switch(w.tag){case 0:case 11:case 15:Vu(b,w,D,B,S),Nf(8,w);break;case 23:break;case 22:var j=w.stateNode;w.memoizedState!==null?j._visibility&2?Vu(b,w,D,B,S):Df(b,w):(j._visibility|=2,Vu(b,w,D,B,S)),S&&Y&2048&&xS(w.alternate,w);break;case 24:Vu(b,w,D,B,S),S&&Y&2048&&MS(w.alternate,w);break;default:Vu(b,w,D,B,S)}r=r.sibling}}function Df(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=i,p=r,S=p.flags;switch(p.tag){case 22:Df(c,p),S&2048&&xS(p.alternate,p);break;case 24:Df(c,p),S&2048&&MS(p.alternate,p);break;default:Df(c,p)}r=r.sibling}}var kf=8192;function qu(i,r,c){if(i.subtreeFlags&kf)for(i=i.child;i!==null;)Ow(i,r,c),i=i.sibling}function Ow(i,r,c){switch(i.tag){case 26:qu(i,r,c),i.flags&kf&&i.memoizedState!==null&&nL(c,Os,i.memoizedState,i.memoizedProps);break;case 5:qu(i,r,c);break;case 3:case 4:var p=Os;Os=Py(i.stateNode.containerInfo),qu(i,r,c),Os=p;break;case 22:i.memoizedState===null&&(p=i.alternate,p!==null&&p.memoizedState!==null?(p=kf,kf=16777216,qu(i,r,c),kf=p):qu(i,r,c));break;default:qu(i,r,c)}}function Bw(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Lf(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var p=r[c];pn=p,Hw(p,i)}Bw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Fw(i),i=i.sibling}function Fw(i){switch(i.tag){case 0:case 11:case 15:Lf(i),i.flags&2048&&fa(9,i,i.return);break;case 3:Lf(i);break;case 12:Lf(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Ey(i)):Lf(i);break;default:Lf(i)}}function Ey(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var p=r[c];pn=p,Hw(p,i)}Bw(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:fa(8,r,r.return),Ey(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,Ey(r));break;default:Ey(r)}i=i.sibling}}function Hw(i,r){for(;pn!==null;){var c=pn;switch(c.tag){case 0:case 11:case 15:fa(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var p=c.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:yf(c.memoizedState.cache)}if(p=c.child,p!==null)p.return=c,pn=p;else t:for(c=i;pn!==null;){p=pn;var S=p.sibling,b=p.return;if(Nw(p),p===c){pn=null;break t}if(S!==null){S.return=b,pn=S;break t}pn=b}}}var yk={getCacheForType:function(i){var r=Cn(We),c=r.data.get(i);return c===void 0&&(c=i(),r.data.set(i,c)),c},cacheSignal:function(){return Cn(We).controller.signal}},vk=typeof WeakMap=="function"?WeakMap:Map,ee=0,Se=null,Ft=null,Gt=0,re=0,Ri=null,pa=!1,Yu=!1,RS=!1,er=0,Fe=0,ma=0,Yl=0,NS=0,Ni=0,$u=0,Pf=null,ci=null,IS=!1,Ty=0,Gw=0,_y=1/0,Cy=null,ga=null,rn=0,ya=null,Xu=null,nr=0,DS=0,kS=null,zw=null,Uf=0,LS=null;function Ii(){return(ee&2)!==0&&Gt!==0?Gt&-Gt:z.T!==null?HS():s_()}function Vw(){if(Ni===0)if((Gt&536870912)===0||qt){var i=kg;kg<<=1,(kg&3932160)===0&&(kg=262144),Ni=i}else Ni=536870912;return i=xi.current,i!==null&&(i.flags|=32),Ni}function ui(i,r,c){(i===Se&&(re===2||re===9)||i.cancelPendingCommit!==null)&&(Ju(i,0),va(i,Gt,Ni,!1)),nf(i,c),((ee&2)===0||i!==Se)&&(i===Se&&((ee&2)===0&&(Yl|=c),Fe===4&&va(i,Gt,Ni,!1)),ao(i))}function qw(i,r,c){if((ee&6)!==0)throw Error(n(327));var p=!c&&(r&127)===0&&(r&i.expiredLanes)===0||ef(i,r),S=p?bk(i,r):US(i,r,!0),b=p;do{if(S===0){Yu&&!p&&va(i,r,0,!1);break}else{if(c=i.current.alternate,b&&!Ak(c)){S=US(i,r,!1),b=!1;continue}if(S===2){if(b=r,i.errorRecoveryDisabledLanes&b)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){r=w;t:{var D=i;S=Pf;var B=D.current.memoizedState.isDehydrated;if(B&&(Ju(D,w).flags|=256),w=US(D,w,!1),w!==2){if(RS&&!B){D.errorRecoveryDisabledLanes|=b,Yl|=b,S=4;break t}b=ci,ci=S,b!==null&&(ci===null?ci=b:ci.push.apply(ci,b))}S=w}if(b=!1,S!==2)continue}}if(S===1){Ju(i,0),va(i,r,0,!0);break}t:{switch(p=i,b=S,b){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:va(p,r,Ni,!pa);break t;case 2:ci=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(S=Ty+300-Ei(),10<S)){if(va(p,r,Ni,!pa),Pg(p,0,!0)!==0)break t;nr=r,p.timeoutHandle=bx(Yw.bind(null,p,c,ci,Cy,IS,r,Ni,Yl,$u,pa,b,"Throttled",-0,0),S);break t}Yw(p,c,ci,Cy,IS,r,Ni,Yl,$u,pa,b,null,-0,0)}}break}while(!0);ao(i)}function Yw(i,r,c,p,S,b,w,D,B,Y,j,et,$,J){if(i.timeoutHandle=-1,et=r.subtreeFlags,et&8192||(et&16785408)===16785408){et={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Go},Ow(r,b,et);var mt=(b&62914560)===b?Ty-Ei():(b&4194048)===b?Gw-Ei():0;if(mt=iL(et,mt),mt!==null){nr=b,i.cancelPendingCommit=mt(jw.bind(null,i,r,b,c,p,S,w,D,B,j,et,null,$,J)),va(i,b,w,!Y);return}}jw(i,r,b,c,p,S,w,D,B)}function Ak(i){for(var r=i;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var p=0;p<c.length;p++){var S=c[p],b=S.getSnapshot;S=S.value;try{if(!Ci(b(),S))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function va(i,r,c,p){r&=~NS,r&=~Yl,i.suspendedLanes|=r,i.pingedLanes&=~r,p&&(i.warmLanes|=r),p=i.expirationTimes;for(var S=r;0<S;){var b=31-_i(S),w=1<<b;p[b]=-1,S&=~w}c!==0&&e_(i,c,r)}function wy(){return(ee&6)===0?(Of(0),!1):!0}function PS(){if(Ft!==null){if(re===0)var i=Ft.return;else i=Ft,Yo=Ul=null,QA(i),Bu=null,Af=0,i=Ft;for(;i!==null;)Ew(i.alternate,i),i=i.return;Ft=null}}function Ju(i,r){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,Fk(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),nr=0,PS(),Se=i,Ft=c=Vo(i.current,null),Gt=r,re=0,Ri=null,pa=!1,Yu=ef(i,r),RS=!1,$u=Ni=NS=Yl=ma=Fe=0,ci=Pf=null,IS=!1,(r&8)!==0&&(r|=r&32);var p=i.entangledLanes;if(p!==0)for(i=i.entanglements,p&=r;0<p;){var S=31-_i(p),b=1<<S;r|=i[S],p&=~b}return er=r,Xg(),c}function $w(i,r){kt=null,z.H=xf,r===Ou||r===ey?(r=lC(),re=3):r===FA?(r=lC(),re=4):re=r===fS?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ri=r,Ft===null&&(Fe=1,my(i,as(r,i.current)))}function Xw(){var i=xi.current;return i===null?!0:(Gt&4194048)===Gt?ds===null:(Gt&62914560)===Gt||(Gt&536870912)!==0?i===ds:!1}function Jw(){var i=z.H;return z.H=xf,i===null?xf:i}function Kw(){var i=z.A;return z.A=yk,i}function xy(){Fe=4,pa||(Gt&4194048)!==Gt&&xi.current!==null||(Yu=!0),(ma&134217727)===0&&(Yl&134217727)===0||Se===null||va(Se,Gt,Ni,!1)}function US(i,r,c){var p=ee;ee|=2;var S=Jw(),b=Kw();(Se!==i||Gt!==r)&&(Cy=null,Ju(i,r)),r=!1;var w=Fe;t:do try{if(re!==0&&Ft!==null){var D=Ft,B=Ri;switch(re){case 8:PS(),w=6;break t;case 3:case 2:case 9:case 6:xi.current===null&&(r=!0);var Y=re;if(re=0,Ri=null,Ku(i,D,B,Y),c&&Yu){w=0;break t}break;default:Y=re,re=0,Ri=null,Ku(i,D,B,Y)}}Sk(),w=Fe;break}catch(j){$w(i,j)}while(!0);return r&&i.shellSuspendCounter++,Yo=Ul=null,ee=p,z.H=S,z.A=b,Ft===null&&(Se=null,Gt=0,Xg()),w}function Sk(){for(;Ft!==null;)Ww(Ft)}function bk(i,r){var c=ee;ee|=2;var p=Jw(),S=Kw();Se!==i||Gt!==r?(Cy=null,_y=Ei()+500,Ju(i,r)):Yu=ef(i,r);t:do try{if(re!==0&&Ft!==null){r=Ft;var b=Ri;e:switch(re){case 1:re=0,Ri=null,Ku(i,r,b,1);break;case 2:case 9:if(rC(b)){re=0,Ri=null,Qw(r);break}r=function(){re!==2&&re!==9||Se!==i||(re=7),ao(i)},b.then(r,r);break t;case 3:re=7;break t;case 4:re=5;break t;case 7:rC(b)?(re=0,Ri=null,Qw(r)):(re=0,Ri=null,Ku(i,r,b,7));break;case 5:var w=null;switch(Ft.tag){case 26:w=Ft.memoizedState;case 5:case 27:var D=Ft;if(w?Ux(w):D.stateNode.complete){re=0,Ri=null;var B=D.sibling;if(B!==null)Ft=B;else{var Y=D.return;Y!==null?(Ft=Y,My(Y)):Ft=null}break e}}re=0,Ri=null,Ku(i,r,b,5);break;case 6:re=0,Ri=null,Ku(i,r,b,6);break;case 8:PS(),Fe=6;break t;default:throw Error(n(462))}}Ek();break}catch(j){$w(i,j)}while(!0);return Yo=Ul=null,z.H=p,z.A=S,ee=c,Ft!==null?0:(Se=null,Gt=0,Xg(),Fe)}function Ek(){for(;Ft!==null&&!YD();)Ww(Ft)}function Ww(i){var r=Sw(i.alternate,i,er);i.memoizedProps=i.pendingProps,r===null?My(i):Ft=r}function Qw(i){var r=i,c=r.alternate;switch(r.tag){case 15:case 0:r=pw(c,r,r.pendingProps,r.type,void 0,Gt);break;case 11:r=pw(c,r,r.pendingProps,r.type.render,r.ref,Gt);break;case 5:QA(r);default:Ew(c,r),r=Ft=K_(r,er),r=Sw(c,r,er)}i.memoizedProps=i.pendingProps,r===null?My(i):Ft=r}function Ku(i,r,c,p){Yo=Ul=null,QA(r),Bu=null,Af=0;var S=r.return;try{if(uk(i,S,r,c,Gt)){Fe=1,my(i,as(c,i.current)),Ft=null;return}}catch(b){if(S!==null)throw Ft=S,b;Fe=1,my(i,as(c,i.current)),Ft=null;return}r.flags&32768?(qt||p===1?i=!0:Yu||(Gt&536870912)!==0?i=!1:(pa=i=!0,(p===2||p===9||p===3||p===6)&&(p=xi.current,p!==null&&p.tag===13&&(p.flags|=16384))),Zw(r,i)):My(r)}function My(i){var r=i;do{if((r.flags&32768)!==0){Zw(r,pa);return}i=r.return;var c=fk(r.alternate,r,er);if(c!==null){Ft=c;return}if(r=r.sibling,r!==null){Ft=r;return}Ft=r=i}while(r!==null);Fe===0&&(Fe=5)}function Zw(i,r){do{var c=pk(i.alternate,i);if(c!==null){c.flags&=32767,Ft=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(i=i.sibling,i!==null)){Ft=i;return}Ft=i=c}while(i!==null);Fe=6,Ft=null}function jw(i,r,c,p,S,b,w,D,B){i.cancelPendingCommit=null;do Ry();while(rn!==0);if((ee&6)!==0)throw Error(n(327));if(r!==null){if(r===i.current)throw Error(n(177));if(b=r.lanes|r.childLanes,b|=_A,e2(i,c,b,w,D,B),i===Se&&(Ft=Se=null,Gt=0),Xu=r,ya=i,nr=c,DS=b,kS=S,zw=p,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,wk(Ig,function(){return sx(),null})):(i.callbackNode=null,i.callbackPriority=0),p=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||p){p=z.T,z.T=null,S=Q.p,Q.p=2,w=ee,ee|=4;try{mk(i,r,c)}finally{ee=w,Q.p=S,z.T=p}}rn=1,tx(),ex(),nx()}}function tx(){if(rn===1){rn=0;var i=ya,r=Xu,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=z.T,z.T=null;var p=Q.p;Q.p=2;var S=ee;ee|=4;try{Lw(r,i);var b=JS,w=H_(i.containerInfo),D=b.focusedElem,B=b.selectionRange;if(w!==D&&D&&D.ownerDocument&&F_(D.ownerDocument.documentElement,D)){if(B!==null&&AA(D)){var Y=B.start,j=B.end;if(j===void 0&&(j=Y),"selectionStart"in D)D.selectionStart=Y,D.selectionEnd=Math.min(j,D.value.length);else{var et=D.ownerDocument||document,$=et&&et.defaultView||window;if($.getSelection){var J=$.getSelection(),mt=D.textContent.length,Tt=Math.min(B.start,mt),fe=B.end===void 0?Tt:Math.min(B.end,mt);!J.extend&&Tt>fe&&(w=fe,fe=Tt,Tt=w);var V=B_(D,Tt),G=B_(D,fe);if(V&&G&&(J.rangeCount!==1||J.anchorNode!==V.node||J.anchorOffset!==V.offset||J.focusNode!==G.node||J.focusOffset!==G.offset)){var q=et.createRange();q.setStart(V.node,V.offset),J.removeAllRanges(),Tt>fe?(J.addRange(q),J.extend(G.node,G.offset)):(q.setEnd(G.node,G.offset),J.addRange(q))}}}}for(et=[],J=D;J=J.parentNode;)J.nodeType===1&&et.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<et.length;D++){var tt=et[D];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}Gy=!!XS,JS=XS=null}finally{ee=S,Q.p=p,z.T=c}}i.current=r,rn=2}}function ex(){if(rn===2){rn=0;var i=ya,r=Xu,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=z.T,z.T=null;var p=Q.p;Q.p=2;var S=ee;ee|=4;try{Rw(i,r.alternate,r)}finally{ee=S,Q.p=p,z.T=c}}rn=3}}function nx(){if(rn===4||rn===3){rn=0,$D();var i=ya,r=Xu,c=nr,p=zw;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?rn=5:(rn=0,Xu=ya=null,ix(i,i.pendingLanes));var S=i.pendingLanes;if(S===0&&(ga=null),tA(c),r=r.stateNode,Ti&&typeof Ti.onCommitFiberRoot=="function")try{Ti.onCommitFiberRoot(tf,r,void 0,(r.current.flags&128)===128)}catch{}if(p!==null){r=z.T,S=Q.p,Q.p=2,z.T=null;try{for(var b=i.onRecoverableError,w=0;w<p.length;w++){var D=p[w];b(D.value,{componentStack:D.stack})}}finally{z.T=r,Q.p=S}}(nr&3)!==0&&Ry(),ao(i),S=i.pendingLanes,(c&261930)!==0&&(S&42)!==0?i===LS?Uf++:(Uf=0,LS=i):Uf=0,Of(0)}}function ix(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,yf(r)))}function Ry(){return tx(),ex(),nx(),sx()}function sx(){if(rn!==5)return!1;var i=ya,r=DS;DS=0;var c=tA(nr),p=z.T,S=Q.p;try{Q.p=32>c?32:c,z.T=null,c=kS,kS=null;var b=ya,w=nr;if(rn=0,Xu=ya=null,nr=0,(ee&6)!==0)throw Error(n(331));var D=ee;if(ee|=4,Fw(b.current),Uw(b,b.current,w,c),ee=D,Of(0,!1),Ti&&typeof Ti.onPostCommitFiberRoot=="function")try{Ti.onPostCommitFiberRoot(tf,b)}catch{}return!0}finally{Q.p=S,z.T=p,ix(i,r)}}function ox(i,r,c){r=as(c,r),r=hS(i.stateNode,r,2),i=ua(i,r,2),i!==null&&(nf(i,2),ao(i))}function ae(i,r,c){if(i.tag===3)ox(i,i,c);else for(;r!==null;){if(r.tag===3){ox(r,i,c);break}else if(r.tag===1){var p=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ga===null||!ga.has(p))){i=as(c,i),c=rw(2),p=ua(r,c,2),p!==null&&(aw(c,p,r,i),nf(p,2),ao(p));break}}r=r.return}}function OS(i,r,c){var p=i.pingCache;if(p===null){p=i.pingCache=new vk;var S=new Set;p.set(r,S)}else S=p.get(r),S===void 0&&(S=new Set,p.set(r,S));S.has(c)||(RS=!0,S.add(c),i=Tk.bind(null,i,r,c),r.then(i,i))}function Tk(i,r,c){var p=i.pingCache;p!==null&&p.delete(r),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Se===i&&(Gt&c)===c&&(Fe===4||Fe===3&&(Gt&62914560)===Gt&&300>Ei()-Ty?(ee&2)===0&&Ju(i,0):NS|=c,$u===Gt&&($u=0)),ao(i)}function rx(i,r){r===0&&(r=t_()),i=kl(i,r),i!==null&&(nf(i,r),ao(i))}function _k(i){var r=i.memoizedState,c=0;r!==null&&(c=r.retryLane),rx(i,c)}function Ck(i,r){var c=0;switch(i.tag){case 31:case 13:var p=i.stateNode,S=i.memoizedState;S!==null&&(c=S.retryLane);break;case 19:p=i.stateNode;break;case 22:p=i.stateNode._retryCache;break;default:throw Error(n(314))}p!==null&&p.delete(r),rx(i,c)}function wk(i,r){return Wv(i,r)}var Ny=null,Wu=null,BS=!1,Iy=!1,FS=!1,Aa=0;function ao(i){i!==Wu&&i.next===null&&(Wu===null?Ny=Wu=i:Wu=Wu.next=i),Iy=!0,BS||(BS=!0,Mk())}function Of(i,r){if(!FS&&Iy){FS=!0;do for(var c=!1,p=Ny;p!==null;){if(i!==0){var S=p.pendingLanes;if(S===0)var b=0;else{var w=p.suspendedLanes,D=p.pingedLanes;b=(1<<31-_i(42|i)+1)-1,b&=S&~(w&~D),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,ux(p,b))}else b=Gt,b=Pg(p,p===Se?b:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(b&3)===0||ef(p,b)||(c=!0,ux(p,b));p=p.next}while(c);FS=!1}}function xk(){ax()}function ax(){Iy=BS=!1;var i=0;Aa!==0&&Bk()&&(i=Aa);for(var r=Ei(),c=null,p=Ny;p!==null;){var S=p.next,b=lx(p,r);b===0?(p.next=null,c===null?Ny=S:c.next=S,S===null&&(Wu=c)):(c=p,(i!==0||(b&3)!==0)&&(Iy=!0)),p=S}rn!==0&&rn!==5||Of(i),Aa!==0&&(Aa=0)}function lx(i,r){for(var c=i.suspendedLanes,p=i.pingedLanes,S=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var w=31-_i(b),D=1<<w,B=S[w];B===-1?((D&c)===0||(D&p)!==0)&&(S[w]=t2(D,r)):B<=r&&(i.expiredLanes|=D),b&=~D}if(r=Se,c=Gt,c=Pg(i,i===r?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p=i.callbackNode,c===0||i===r&&(re===2||re===9)||i.cancelPendingCommit!==null)return p!==null&&p!==null&&Qv(p),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||ef(i,c)){if(r=c&-c,r===i.callbackPriority)return r;switch(p!==null&&Qv(p),tA(c)){case 2:case 8:c=ZT;break;case 32:c=Ig;break;case 268435456:c=jT;break;default:c=Ig}return p=cx.bind(null,i),c=Wv(c,p),i.callbackPriority=r,i.callbackNode=c,r}return p!==null&&p!==null&&Qv(p),i.callbackPriority=2,i.callbackNode=null,2}function cx(i,r){if(rn!==0&&rn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Ry()&&i.callbackNode!==c)return null;var p=Gt;return p=Pg(i,i===Se?p:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p===0?null:(qw(i,p,r),lx(i,Ei()),i.callbackNode!=null&&i.callbackNode===c?cx.bind(null,i):null)}function ux(i,r){if(Ry())return null;qw(i,r,!0)}function Mk(){Hk(function(){(ee&6)!==0?Wv(QT,xk):ax()})}function HS(){if(Aa===0){var i=Pu;i===0&&(i=Dg,Dg<<=1,(Dg&261888)===0&&(Dg=256)),Aa=i}return Aa}function dx(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Fg(""+i)}function hx(i,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,i.id&&c.setAttribute("form",i.id),r.parentNode.insertBefore(c,r),i=new FormData(i),c.parentNode.removeChild(c),i}function Rk(i,r,c,p,S){if(r==="submit"&&c&&c.stateNode===S){var b=dx((S[si]||null).action),w=p.submitter;w&&(r=(r=w[si]||null)?dx(r.formAction):w.getAttribute("formAction"),r!==null&&(b=r,w=null));var D=new Vg("action","action",null,p,S);i.push({event:D,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Aa!==0){var B=w?hx(S,w):new FormData(S);rS(c,{pending:!0,data:B,method:S.method,action:b},null,B)}}else typeof b=="function"&&(D.preventDefault(),B=w?hx(S,w):new FormData(S),rS(c,{pending:!0,data:B,method:S.method,action:b},b,B))},currentTarget:S}]})}}for(var GS=0;GS<TA.length;GS++){var zS=TA[GS],Nk=zS.toLowerCase(),Ik=zS[0].toUpperCase()+zS.slice(1);Us(Nk,"on"+Ik)}Us(V_,"onAnimationEnd"),Us(q_,"onAnimationIteration"),Us(Y_,"onAnimationStart"),Us("dblclick","onDoubleClick"),Us("focusin","onFocus"),Us("focusout","onBlur"),Us(X2,"onTransitionRun"),Us(J2,"onTransitionStart"),Us(K2,"onTransitionCancel"),Us($_,"onTransitionEnd"),bu("onMouseEnter",["mouseout","mouseover"]),bu("onMouseLeave",["mouseout","mouseover"]),bu("onPointerEnter",["pointerout","pointerover"]),bu("onPointerLeave",["pointerout","pointerover"]),Rl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bf));function fx(i,r){r=(r&4)!==0;for(var c=0;c<i.length;c++){var p=i[c],S=p.event;p=p.listeners;t:{var b=void 0;if(r)for(var w=p.length-1;0<=w;w--){var D=p[w],B=D.instance,Y=D.currentTarget;if(D=D.listener,B!==b&&S.isPropagationStopped())break t;b=D,S.currentTarget=Y;try{b(S)}catch(j){$g(j)}S.currentTarget=null,b=B}else for(w=0;w<p.length;w++){if(D=p[w],B=D.instance,Y=D.currentTarget,D=D.listener,B!==b&&S.isPropagationStopped())break t;b=D,S.currentTarget=Y;try{b(S)}catch(j){$g(j)}S.currentTarget=null,b=B}}}}function Ht(i,r){var c=r[eA];c===void 0&&(c=r[eA]=new Set);var p=i+"__bubble";c.has(p)||(px(r,i,2,!1),c.add(p))}function VS(i,r,c){var p=0;r&&(p|=4),px(c,i,p,r)}var Dy="_reactListening"+Math.random().toString(36).slice(2);function qS(i){if(!i[Dy]){i[Dy]=!0,a_.forEach(function(c){c!=="selectionchange"&&(Dk.has(c)||VS(c,!1,i),VS(c,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Dy]||(r[Dy]=!0,VS("selectionchange",!1,r))}}function px(i,r,c,p){switch(Vx(r)){case 2:var S=rL;break;case 8:S=aL;break;default:S=ob}c=S.bind(null,r,c,i),S=void 0,!uA||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(S=!0),p?S!==void 0?i.addEventListener(r,c,{capture:!0,passive:S}):i.addEventListener(r,c,!0):S!==void 0?i.addEventListener(r,c,{passive:S}):i.addEventListener(r,c,!1)}function YS(i,r,c,p,S){var b=p;if((r&1)===0&&(r&2)===0&&p!==null)t:for(;;){if(p===null)return;var w=p.tag;if(w===3||w===4){var D=p.stateNode.containerInfo;if(D===S)break;if(w===4)for(w=p.return;w!==null;){var B=w.tag;if((B===3||B===4)&&w.stateNode.containerInfo===S)return;w=w.return}for(;D!==null;){if(w=vu(D),w===null)return;if(B=w.tag,B===5||B===6||B===26||B===27){p=b=w;continue t}D=D.parentNode}}p=p.return}A_(function(){var Y=b,j=lA(c),et=[];t:{var $=X_.get(i);if($!==void 0){var J=Vg,mt=i;switch(i){case"keypress":if(Gg(c)===0)break t;case"keydown":case"keyup":J=C2;break;case"focusin":mt="focus",J=pA;break;case"focusout":mt="blur",J=pA;break;case"beforeblur":case"afterblur":J=pA;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=E_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=f2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=M2;break;case V_:case q_:case Y_:J=g2;break;case $_:J=N2;break;case"scroll":case"scrollend":J=d2;break;case"wheel":J=D2;break;case"copy":case"cut":case"paste":J=v2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=__;break;case"toggle":case"beforetoggle":J=L2}var Tt=(r&4)!==0,fe=!Tt&&(i==="scroll"||i==="scrollend"),V=Tt?$!==null?$+"Capture":null:$;Tt=[];for(var G=Y,q;G!==null;){var tt=G;if(q=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||q===null||V===null||(tt=rf(G,V),tt!=null&&Tt.push(Ff(G,tt,q))),fe)break;G=G.return}0<Tt.length&&($=new J($,mt,null,c,j),et.push({event:$,listeners:Tt}))}}if((r&7)===0){t:{if($=i==="mouseover"||i==="pointerover",J=i==="mouseout"||i==="pointerout",$&&c!==aA&&(mt=c.relatedTarget||c.fromElement)&&(vu(mt)||mt[yu]))break t;if((J||$)&&($=j.window===j?j:($=j.ownerDocument)?$.defaultView||$.parentWindow:window,J?(mt=c.relatedTarget||c.toElement,J=Y,mt=mt?vu(mt):null,mt!==null&&(fe=a(mt),Tt=mt.tag,mt!==fe||Tt!==5&&Tt!==27&&Tt!==6)&&(mt=null)):(J=null,mt=Y),J!==mt)){if(Tt=E_,tt="onMouseLeave",V="onMouseEnter",G="mouse",(i==="pointerout"||i==="pointerover")&&(Tt=__,tt="onPointerLeave",V="onPointerEnter",G="pointer"),fe=J==null?$:of(J),q=mt==null?$:of(mt),$=new Tt(tt,G+"leave",J,c,j),$.target=fe,$.relatedTarget=q,tt=null,vu(j)===Y&&(Tt=new Tt(V,G+"enter",mt,c,j),Tt.target=q,Tt.relatedTarget=fe,tt=Tt),fe=tt,J&&mt)e:{for(Tt=kk,V=J,G=mt,q=0,tt=V;tt;tt=Tt(tt))q++;tt=0;for(var St=G;St;St=Tt(St))tt++;for(;0<q-tt;)V=Tt(V),q--;for(;0<tt-q;)G=Tt(G),tt--;for(;q--;){if(V===G||G!==null&&V===G.alternate){Tt=V;break e}V=Tt(V),G=Tt(G)}Tt=null}else Tt=null;J!==null&&mx(et,$,J,Tt,!1),mt!==null&&fe!==null&&mx(et,fe,mt,Tt,!0)}}t:{if($=Y?of(Y):window,J=$.nodeName&&$.nodeName.toLowerCase(),J==="select"||J==="input"&&$.type==="file")var Qt=D_;else if(N_($))if(k_)Qt=q2;else{Qt=z2;var yt=G2}else J=$.nodeName,!J||J.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?Y&&rA(Y.elementType)&&(Qt=D_):Qt=V2;if(Qt&&(Qt=Qt(i,Y))){I_(et,Qt,c,j);break t}yt&&yt(i,$,Y),i==="focusout"&&Y&&$.type==="number"&&Y.memoizedProps.value!=null&&oA($,"number",$.value)}switch(yt=Y?of(Y):window,i){case"focusin":(N_(yt)||yt.contentEditable==="true")&&(xu=yt,SA=Y,pf=null);break;case"focusout":pf=SA=xu=null;break;case"mousedown":bA=!0;break;case"contextmenu":case"mouseup":case"dragend":bA=!1,G_(et,c,j);break;case"selectionchange":if($2)break;case"keydown":case"keyup":G_(et,c,j)}var Pt;if(gA)t:{switch(i){case"compositionstart":var zt="onCompositionStart";break t;case"compositionend":zt="onCompositionEnd";break t;case"compositionupdate":zt="onCompositionUpdate";break t}zt=void 0}else wu?M_(i,c)&&(zt="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(zt="onCompositionStart");zt&&(C_&&c.locale!=="ko"&&(wu||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&wu&&(Pt=S_()):(ia=j,dA="value"in ia?ia.value:ia.textContent,wu=!0)),yt=ky(Y,zt),0<yt.length&&(zt=new T_(zt,i,null,c,j),et.push({event:zt,listeners:yt}),Pt?zt.data=Pt:(Pt=R_(c),Pt!==null&&(zt.data=Pt)))),(Pt=U2?O2(i,c):B2(i,c))&&(zt=ky(Y,"onBeforeInput"),0<zt.length&&(yt=new T_("onBeforeInput","beforeinput",null,c,j),et.push({event:yt,listeners:zt}),yt.data=Pt)),Rk(et,i,Y,c,j)}fx(et,r)})}function Ff(i,r,c){return{instance:i,listener:r,currentTarget:c}}function ky(i,r){for(var c=r+"Capture",p=[];i!==null;){var S=i,b=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||b===null||(S=rf(i,c),S!=null&&p.unshift(Ff(i,S,b)),S=rf(i,r),S!=null&&p.push(Ff(i,S,b))),i.tag===3)return p;i=i.return}return[]}function kk(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function mx(i,r,c,p,S){for(var b=r._reactName,w=[];c!==null&&c!==p;){var D=c,B=D.alternate,Y=D.stateNode;if(D=D.tag,B!==null&&B===p)break;D!==5&&D!==26&&D!==27||Y===null||(B=Y,S?(Y=rf(c,b),Y!=null&&w.unshift(Ff(c,Y,B))):S||(Y=rf(c,b),Y!=null&&w.push(Ff(c,Y,B)))),c=c.return}w.length!==0&&i.push({event:r,listeners:w})}var Lk=/\r\n?/g,Pk=/\u0000|\uFFFD/g;function gx(i){return(typeof i=="string"?i:""+i).replace(Lk,`
`).replace(Pk,"")}function yx(i,r){return r=gx(r),gx(i)===r}function he(i,r,c,p,S,b){switch(c){case"children":typeof p=="string"?r==="body"||r==="textarea"&&p===""||Tu(i,p):(typeof p=="number"||typeof p=="bigint")&&r!=="body"&&Tu(i,""+p);break;case"className":Og(i,"class",p);break;case"tabIndex":Og(i,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Og(i,c,p);break;case"style":y_(i,p,b);break;case"data":if(r!=="object"){Og(i,"data",p);break}case"src":case"href":if(p===""&&(r!=="a"||c!=="href")){i.removeAttribute(c);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(c);break}p=Fg(""+p),i.setAttribute(c,p);break;case"action":case"formAction":if(typeof p=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(r!=="input"&&he(i,r,"name",S.name,S,null),he(i,r,"formEncType",S.formEncType,S,null),he(i,r,"formMethod",S.formMethod,S,null),he(i,r,"formTarget",S.formTarget,S,null)):(he(i,r,"encType",S.encType,S,null),he(i,r,"method",S.method,S,null),he(i,r,"target",S.target,S,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(c);break}p=Fg(""+p),i.setAttribute(c,p);break;case"onClick":p!=null&&(i.onclick=Go);break;case"onScroll":p!=null&&Ht("scroll",i);break;case"onScrollEnd":p!=null&&Ht("scrollend",i);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(c=p.__html,c!=null){if(S.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"multiple":i.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":i.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){i.removeAttribute("xlink:href");break}c=Fg(""+p),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(c,""+p):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":p===!0?i.setAttribute(c,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(c,p):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?i.setAttribute(c,p):i.removeAttribute(c);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?i.removeAttribute(c):i.setAttribute(c,p);break;case"popover":Ht("beforetoggle",i),Ht("toggle",i),Ug(i,"popover",p);break;case"xlinkActuate":Ho(i,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Ho(i,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Ho(i,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Ho(i,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Ho(i,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Ho(i,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Ho(i,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Ho(i,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Ho(i,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Ug(i,"is",p);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=c2.get(c)||c,Ug(i,c,p))}}function $S(i,r,c,p,S,b){switch(c){case"style":y_(i,p,b);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(c=p.__html,c!=null){if(S.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"children":typeof p=="string"?Tu(i,p):(typeof p=="number"||typeof p=="bigint")&&Tu(i,""+p);break;case"onScroll":p!=null&&Ht("scroll",i);break;case"onScrollEnd":p!=null&&Ht("scrollend",i);break;case"onClick":p!=null&&(i.onclick=Go);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!l_.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(S=c.endsWith("Capture"),r=c.slice(2,S?c.length-7:void 0),b=i[si]||null,b=b!=null?b[c]:null,typeof b=="function"&&i.removeEventListener(r,b,S),typeof p=="function")){typeof b!="function"&&b!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(r,p,S);break t}c in i?i[c]=p:p===!0?i.setAttribute(c,""):Ug(i,c,p)}}}function xn(i,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ht("error",i),Ht("load",i);var p=!1,S=!1,b;for(b in c)if(c.hasOwnProperty(b)){var w=c[b];if(w!=null)switch(b){case"src":p=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:he(i,r,b,w,c,null)}}S&&he(i,r,"srcSet",c.srcSet,c,null),p&&he(i,r,"src",c.src,c,null);return;case"input":Ht("invalid",i);var D=b=w=S=null,B=null,Y=null;for(p in c)if(c.hasOwnProperty(p)){var j=c[p];if(j!=null)switch(p){case"name":S=j;break;case"type":w=j;break;case"checked":B=j;break;case"defaultChecked":Y=j;break;case"value":b=j;break;case"defaultValue":D=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(n(137,r));break;default:he(i,r,p,j,c,null)}}f_(i,b,D,B,Y,w,S,!1);return;case"select":Ht("invalid",i),p=w=b=null;for(S in c)if(c.hasOwnProperty(S)&&(D=c[S],D!=null))switch(S){case"value":b=D;break;case"defaultValue":w=D;break;case"multiple":p=D;default:he(i,r,S,D,c,null)}r=b,c=w,i.multiple=!!p,r!=null?Eu(i,!!p,r,!1):c!=null&&Eu(i,!!p,c,!0);return;case"textarea":Ht("invalid",i),b=S=p=null;for(w in c)if(c.hasOwnProperty(w)&&(D=c[w],D!=null))switch(w){case"value":p=D;break;case"defaultValue":S=D;break;case"children":b=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(n(91));break;default:he(i,r,w,D,c,null)}m_(i,p,S,b);return;case"option":for(B in c)if(c.hasOwnProperty(B)&&(p=c[B],p!=null))switch(B){case"selected":i.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:he(i,r,B,p,c,null)}return;case"dialog":Ht("beforetoggle",i),Ht("toggle",i),Ht("cancel",i),Ht("close",i);break;case"iframe":case"object":Ht("load",i);break;case"video":case"audio":for(p=0;p<Bf.length;p++)Ht(Bf[p],i);break;case"image":Ht("error",i),Ht("load",i);break;case"details":Ht("toggle",i);break;case"embed":case"source":case"link":Ht("error",i),Ht("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in c)if(c.hasOwnProperty(Y)&&(p=c[Y],p!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:he(i,r,Y,p,c,null)}return;default:if(rA(r)){for(j in c)c.hasOwnProperty(j)&&(p=c[j],p!==void 0&&$S(i,r,j,p,c,void 0));return}}for(D in c)c.hasOwnProperty(D)&&(p=c[D],p!=null&&he(i,r,D,p,c,null))}function Uk(i,r,c,p){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,b=null,w=null,D=null,B=null,Y=null,j=null;for(J in c){var et=c[J];if(c.hasOwnProperty(J)&&et!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":B=et;default:p.hasOwnProperty(J)||he(i,r,J,null,p,et)}}for(var $ in p){var J=p[$];if(et=c[$],p.hasOwnProperty($)&&(J!=null||et!=null))switch($){case"type":b=J;break;case"name":S=J;break;case"checked":Y=J;break;case"defaultChecked":j=J;break;case"value":w=J;break;case"defaultValue":D=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(n(137,r));break;default:J!==et&&he(i,r,$,J,p,et)}}sA(i,w,D,B,Y,j,b,S);return;case"select":J=w=D=$=null;for(b in c)if(B=c[b],c.hasOwnProperty(b)&&B!=null)switch(b){case"value":break;case"multiple":J=B;default:p.hasOwnProperty(b)||he(i,r,b,null,p,B)}for(S in p)if(b=p[S],B=c[S],p.hasOwnProperty(S)&&(b!=null||B!=null))switch(S){case"value":$=b;break;case"defaultValue":D=b;break;case"multiple":w=b;default:b!==B&&he(i,r,S,b,p,B)}r=D,c=w,p=J,$!=null?Eu(i,!!c,$,!1):!!p!=!!c&&(r!=null?Eu(i,!!c,r,!0):Eu(i,!!c,c?[]:"",!1));return;case"textarea":J=$=null;for(D in c)if(S=c[D],c.hasOwnProperty(D)&&S!=null&&!p.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:he(i,r,D,null,p,S)}for(w in p)if(S=p[w],b=c[w],p.hasOwnProperty(w)&&(S!=null||b!=null))switch(w){case"value":$=S;break;case"defaultValue":J=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:S!==b&&he(i,r,w,S,p,b)}p_(i,$,J);return;case"option":for(var mt in c)if($=c[mt],c.hasOwnProperty(mt)&&$!=null&&!p.hasOwnProperty(mt))switch(mt){case"selected":i.selected=!1;break;default:he(i,r,mt,null,p,$)}for(B in p)if($=p[B],J=c[B],p.hasOwnProperty(B)&&$!==J&&($!=null||J!=null))switch(B){case"selected":i.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:he(i,r,B,$,p,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in c)$=c[Tt],c.hasOwnProperty(Tt)&&$!=null&&!p.hasOwnProperty(Tt)&&he(i,r,Tt,null,p,$);for(Y in p)if($=p[Y],J=c[Y],p.hasOwnProperty(Y)&&$!==J&&($!=null||J!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(n(137,r));break;default:he(i,r,Y,$,p,J)}return;default:if(rA(r)){for(var fe in c)$=c[fe],c.hasOwnProperty(fe)&&$!==void 0&&!p.hasOwnProperty(fe)&&$S(i,r,fe,void 0,p,$);for(j in p)$=p[j],J=c[j],!p.hasOwnProperty(j)||$===J||$===void 0&&J===void 0||$S(i,r,j,$,p,J);return}}for(var V in c)$=c[V],c.hasOwnProperty(V)&&$!=null&&!p.hasOwnProperty(V)&&he(i,r,V,null,p,$);for(et in p)$=p[et],J=c[et],!p.hasOwnProperty(et)||$===J||$==null&&J==null||he(i,r,et,$,p,J)}function vx(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ok(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,c=performance.getEntriesByType("resource"),p=0;p<c.length;p++){var S=c[p],b=S.transferSize,w=S.initiatorType,D=S.duration;if(b&&D&&vx(w)){for(w=0,D=S.responseEnd,p+=1;p<c.length;p++){var B=c[p],Y=B.startTime;if(Y>D)break;var j=B.transferSize,et=B.initiatorType;j&&vx(et)&&(B=B.responseEnd,w+=j*(B<D?1:(D-Y)/(B-Y)))}if(--p,r+=8*(b+w)/(S.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var XS=null,JS=null;function Ly(i){return i.nodeType===9?i:i.ownerDocument}function Ax(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sx(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function KS(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var WS=null;function Bk(){var i=window.event;return i&&i.type==="popstate"?i===WS?!1:(WS=i,!0):(WS=null,!1)}var bx=typeof setTimeout=="function"?setTimeout:void 0,Fk=typeof clearTimeout=="function"?clearTimeout:void 0,Ex=typeof Promise=="function"?Promise:void 0,Hk=typeof queueMicrotask=="function"?queueMicrotask:typeof Ex<"u"?function(i){return Ex.resolve(null).then(i).catch(Gk)}:bx;function Gk(i){setTimeout(function(){throw i})}function Sa(i){return i==="head"}function Tx(i,r){var c=r,p=0;do{var S=c.nextSibling;if(i.removeChild(c),S&&S.nodeType===8)if(c=S.data,c==="/$"||c==="/&"){if(p===0){i.removeChild(S),td(r);return}p--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")p++;else if(c==="html")Hf(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Hf(c);for(var b=c.firstChild;b;){var w=b.nextSibling,D=b.nodeName;b[sf]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=w}}else c==="body"&&Hf(i.ownerDocument.body);c=S}while(c);td(r)}function _x(i,r){var c=i;i=0;do{var p=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),p&&p.nodeType===8)if(c=p.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=p}while(c)}function QS(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":QS(c),nA(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function zk(i,r,c,p){for(;i.nodeType===1;){var S=c;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!p&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(p){if(!i[sf])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==S.rel||i.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||i.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||i.getAttribute("title")!==(S.title==null?null:S.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(S.src==null?null:S.src)||i.getAttribute("type")!==(S.type==null?null:S.type)||i.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var b=S.name==null?null:""+S.name;if(S.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=hs(i.nextSibling),i===null)break}return null}function Vk(i,r,c){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=hs(i.nextSibling),i===null))return null;return i}function Cx(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=hs(i.nextSibling),i===null))return null;return i}function ZS(i){return i.data==="$?"||i.data==="$~"}function jS(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function qk(i,r){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||c.readyState!=="loading")r();else{var p=function(){r(),c.removeEventListener("DOMContentLoaded",p)};c.addEventListener("DOMContentLoaded",p),i._reactRetry=p}}function hs(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var tb=null;function wx(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(r===0)return hs(i.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}i=i.nextSibling}return null}function xx(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return i;r--}else c!=="/$"&&c!=="/&"||r++}i=i.previousSibling}return null}function Mx(i,r,c){switch(r=Ly(c),i){case"html":if(i=r.documentElement,!i)throw Error(n(452));return i;case"head":if(i=r.head,!i)throw Error(n(453));return i;case"body":if(i=r.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Hf(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);nA(i)}var fs=new Map,Rx=new Set;function Py(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ir=Q.d;Q.d={f:Yk,r:$k,D:Xk,C:Jk,L:Kk,m:Wk,X:Zk,S:Qk,M:jk};function Yk(){var i=ir.f(),r=wy();return i||r}function $k(i){var r=Au(i);r!==null&&r.tag===5&&r.type==="form"?$C(r):ir.r(i)}var Qu=typeof document>"u"?null:document;function Nx(i,r,c){var p=Qu;if(p&&typeof r=="string"&&r){var S=os(r);S='link[rel="'+i+'"][href="'+S+'"]',typeof c=="string"&&(S+='[crossorigin="'+c+'"]'),Rx.has(S)||(Rx.add(S),i={rel:i,crossOrigin:c,href:r},p.querySelector(S)===null&&(r=p.createElement("link"),xn(r,"link",i),fn(r),p.head.appendChild(r)))}}function Xk(i){ir.D(i),Nx("dns-prefetch",i,null)}function Jk(i,r){ir.C(i,r),Nx("preconnect",i,r)}function Kk(i,r,c){ir.L(i,r,c);var p=Qu;if(p&&i&&r){var S='link[rel="preload"][as="'+os(r)+'"]';r==="image"&&c&&c.imageSrcSet?(S+='[imagesrcset="'+os(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(S+='[imagesizes="'+os(c.imageSizes)+'"]')):S+='[href="'+os(i)+'"]';var b=S;switch(r){case"style":b=Zu(i);break;case"script":b=ju(i)}fs.has(b)||(i=v({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:i,as:r},c),fs.set(b,i),p.querySelector(S)!==null||r==="style"&&p.querySelector(Gf(b))||r==="script"&&p.querySelector(zf(b))||(r=p.createElement("link"),xn(r,"link",i),fn(r),p.head.appendChild(r)))}}function Wk(i,r){ir.m(i,r);var c=Qu;if(c&&i){var p=r&&typeof r.as=="string"?r.as:"script",S='link[rel="modulepreload"][as="'+os(p)+'"][href="'+os(i)+'"]',b=S;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=ju(i)}if(!fs.has(b)&&(i=v({rel:"modulepreload",href:i},r),fs.set(b,i),c.querySelector(S)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(zf(b)))return}p=c.createElement("link"),xn(p,"link",i),fn(p),c.head.appendChild(p)}}}function Qk(i,r,c){ir.S(i,r,c);var p=Qu;if(p&&i){var S=Su(p).hoistableStyles,b=Zu(i);r=r||"default";var w=S.get(b);if(!w){var D={loading:0,preload:null};if(w=p.querySelector(Gf(b)))D.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":r},c),(c=fs.get(b))&&eb(i,c);var B=w=p.createElement("link");fn(B),xn(B,"link",i),B._p=new Promise(function(Y,j){B.onload=Y,B.onerror=j}),B.addEventListener("load",function(){D.loading|=1}),B.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Uy(w,r,p)}w={type:"stylesheet",instance:w,count:1,state:D},S.set(b,w)}}}function Zk(i,r){ir.X(i,r);var c=Qu;if(c&&i){var p=Su(c).hoistableScripts,S=ju(i),b=p.get(S);b||(b=c.querySelector(zf(S)),b||(i=v({src:i,async:!0},r),(r=fs.get(S))&&nb(i,r),b=c.createElement("script"),fn(b),xn(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(S,b))}}function jk(i,r){ir.M(i,r);var c=Qu;if(c&&i){var p=Su(c).hoistableScripts,S=ju(i),b=p.get(S);b||(b=c.querySelector(zf(S)),b||(i=v({src:i,async:!0,type:"module"},r),(r=fs.get(S))&&nb(i,r),b=c.createElement("script"),fn(b),xn(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(S,b))}}function Ix(i,r,c,p){var S=(S=bt.current)?Py(S):null;if(!S)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=Zu(c.href),c=Su(S).hoistableStyles,p=c.get(r),p||(p={type:"style",instance:null,count:0,state:null},c.set(r,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Zu(c.href);var b=Su(S).hoistableStyles,w=b.get(i);if(w||(S=S.ownerDocument||S,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,w),(b=S.querySelector(Gf(i)))&&!b._p&&(w.instance=b,w.state.loading=5),fs.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},fs.set(i,c),b||tL(S,i,c,w.state))),r&&p===null)throw Error(n(528,""));return w}if(r&&p!==null)throw Error(n(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ju(c),c=Su(S).hoistableScripts,p=c.get(r),p||(p={type:"script",instance:null,count:0,state:null},c.set(r,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Zu(i){return'href="'+os(i)+'"'}function Gf(i){return'link[rel="stylesheet"]['+i+"]"}function Dx(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function tL(i,r,c,p){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?p.loading=1:(r=i.createElement("link"),p.preload=r,r.addEventListener("load",function(){return p.loading|=1}),r.addEventListener("error",function(){return p.loading|=2}),xn(r,"link",c),fn(r),i.head.appendChild(r))}function ju(i){return'[src="'+os(i)+'"]'}function zf(i){return"script[async]"+i}function kx(i,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var p=i.querySelector('style[data-href~="'+os(c.href)+'"]');if(p)return r.instance=p,fn(p),p;var S=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return p=(i.ownerDocument||i).createElement("style"),fn(p),xn(p,"style",S),Uy(p,c.precedence,i),r.instance=p;case"stylesheet":S=Zu(c.href);var b=i.querySelector(Gf(S));if(b)return r.state.loading|=4,r.instance=b,fn(b),b;p=Dx(c),(S=fs.get(S))&&eb(p,S),b=(i.ownerDocument||i).createElement("link"),fn(b);var w=b;return w._p=new Promise(function(D,B){w.onload=D,w.onerror=B}),xn(b,"link",p),r.state.loading|=4,Uy(b,c.precedence,i),r.instance=b;case"script":return b=ju(c.src),(S=i.querySelector(zf(b)))?(r.instance=S,fn(S),S):(p=c,(S=fs.get(b))&&(p=v({},c),nb(p,S)),i=i.ownerDocument||i,S=i.createElement("script"),fn(S),xn(S,"link",p),i.head.appendChild(S),r.instance=S);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(p=r.instance,r.state.loading|=4,Uy(p,c.precedence,i));return r.instance}function Uy(i,r,c){for(var p=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=p.length?p[p.length-1]:null,b=S,w=0;w<p.length;w++){var D=p[w];if(D.dataset.precedence===r)b=D;else if(b!==S)break}b?b.parentNode.insertBefore(i,b.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(i,r.firstChild))}function eb(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function nb(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Oy=null;function Lx(i,r,c){if(Oy===null){var p=new Map,S=Oy=new Map;S.set(c,p)}else S=Oy,p=S.get(c),p||(p=new Map,S.set(c,p));if(p.has(i))return p;for(p.set(i,null),c=c.getElementsByTagName(i),S=0;S<c.length;S++){var b=c[S];if(!(b[sf]||b[Tn]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var w=b.getAttribute(r)||"";w=i+w;var D=p.get(w);D?D.push(b):p.set(w,[b])}}return p}function Px(i,r,c){i=i.ownerDocument||i,i.head.insertBefore(c,r==="title"?i.querySelector("head > title"):null)}function eL(i,r,c){if(c===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Ux(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function nL(i,r,c,p){if(c.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var S=Zu(p.href),b=r.querySelector(Gf(S));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=By.bind(i),r.then(i,i)),c.state.loading|=4,c.instance=b,fn(b);return}b=r.ownerDocument||r,p=Dx(p),(S=fs.get(S))&&eb(p,S),b=b.createElement("link"),fn(b);var w=b;w._p=new Promise(function(D,B){w.onload=D,w.onerror=B}),xn(b,"link",p),c.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=By.bind(i),r.addEventListener("load",c),r.addEventListener("error",c))}}var ib=0;function iL(i,r){return i.stylesheets&&i.count===0&&Hy(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var p=setTimeout(function(){if(i.stylesheets&&Hy(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+r);0<i.imgBytes&&ib===0&&(ib=62500*Ok());var S=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Hy(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>ib?50:800)+r);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(p),clearTimeout(S)}}:null}function By(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hy(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Fy=null;function Hy(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Fy=new Map,r.forEach(sL,i),Fy=null,By.call(i))}function sL(i,r){if(!(r.state.loading&4)){var c=Fy.get(i);if(c)var p=c.get(null);else{c=new Map,Fy.set(i,c);for(var S=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<S.length;b++){var w=S[b];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),p=w)}p&&c.set(null,p)}S=r.instance,w=S.getAttribute("data-precedence"),b=c.get(w)||p,b===p&&c.set(null,S),c.set(w,S),this.count++,p=By.bind(this),S.addEventListener("load",p),S.addEventListener("error",p),b?b.parentNode.insertBefore(S,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(S,i.firstChild)),r.state.loading|=4}}var Vf={$$typeof:I,Provider:null,Consumer:null,_currentValue:ot,_currentValue2:ot,_threadCount:0};function oL(i,r,c,p,S,b,w,D,B){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zv(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zv(0),this.hiddenUpdates=Zv(null),this.identifierPrefix=p,this.onUncaughtError=S,this.onCaughtError=b,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function Ox(i,r,c,p,S,b,w,D,B,Y,j,et){return i=new oL(i,r,c,w,B,Y,j,et,D),r=1,b===!0&&(r|=24),b=wi(3,null,null,r),i.current=b,b.stateNode=i,r=UA(),r.refCount++,i.pooledCache=r,r.refCount++,b.memoizedState={element:p,isDehydrated:c,cache:r},HA(b),i}function Bx(i){return i?(i=Nu,i):Nu}function Fx(i,r,c,p,S,b){S=Bx(S),p.context===null?p.context=S:p.pendingContext=S,p=ca(r),p.payload={element:c},b=b===void 0?null:b,b!==null&&(p.callback=b),c=ua(i,p,r),c!==null&&(ui(c,i,r),bf(c,i,r))}function Hx(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<r?c:r}}function sb(i,r){Hx(i,r),(i=i.alternate)&&Hx(i,r)}function Gx(i){if(i.tag===13||i.tag===31){var r=kl(i,67108864);r!==null&&ui(r,i,67108864),sb(i,67108864)}}function zx(i){if(i.tag===13||i.tag===31){var r=Ii();r=jv(r);var c=kl(i,r);c!==null&&ui(c,i,r),sb(i,r)}}var Gy=!0;function rL(i,r,c,p){var S=z.T;z.T=null;var b=Q.p;try{Q.p=2,ob(i,r,c,p)}finally{Q.p=b,z.T=S}}function aL(i,r,c,p){var S=z.T;z.T=null;var b=Q.p;try{Q.p=8,ob(i,r,c,p)}finally{Q.p=b,z.T=S}}function ob(i,r,c,p){if(Gy){var S=rb(p);if(S===null)YS(i,r,p,zy,c),qx(i,p);else if(cL(S,i,r,c,p))p.stopPropagation();else if(qx(i,p),r&4&&-1<lL.indexOf(i)){for(;S!==null;){var b=Au(S);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var w=Ml(b.pendingLanes);if(w!==0){var D=b;for(D.pendingLanes|=2,D.entangledLanes|=2;w;){var B=1<<31-_i(w);D.entanglements[1]|=B,w&=~B}ao(b),(ee&6)===0&&(_y=Ei()+500,Of(0))}}break;case 31:case 13:D=kl(b,2),D!==null&&ui(D,b,2),wy(),sb(b,2)}if(b=rb(p),b===null&&YS(i,r,p,zy,c),b===S)break;S=b}S!==null&&p.stopPropagation()}else YS(i,r,p,null,c)}}function rb(i){return i=lA(i),ab(i)}var zy=null;function ab(i){if(zy=null,i=vu(i),i!==null){var r=a(i);if(r===null)i=null;else{var c=r.tag;if(c===13){if(i=l(r),i!==null)return i;i=null}else if(c===31){if(i=d(r),i!==null)return i;i=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return zy=i,null}function Vx(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(XD()){case QT:return 2;case ZT:return 8;case Ig:case JD:return 32;case jT:return 268435456;default:return 32}default:return 32}}var lb=!1,ba=null,Ea=null,Ta=null,qf=new Map,Yf=new Map,_a=[],lL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qx(i,r){switch(i){case"focusin":case"focusout":ba=null;break;case"dragenter":case"dragleave":Ea=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":qf.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yf.delete(r.pointerId)}}function $f(i,r,c,p,S,b){return i===null||i.nativeEvent!==b?(i={blockedOn:r,domEventName:c,eventSystemFlags:p,nativeEvent:b,targetContainers:[S]},r!==null&&(r=Au(r),r!==null&&Gx(r)),i):(i.eventSystemFlags|=p,r=i.targetContainers,S!==null&&r.indexOf(S)===-1&&r.push(S),i)}function cL(i,r,c,p,S){switch(r){case"focusin":return ba=$f(ba,i,r,c,p,S),!0;case"dragenter":return Ea=$f(Ea,i,r,c,p,S),!0;case"mouseover":return Ta=$f(Ta,i,r,c,p,S),!0;case"pointerover":var b=S.pointerId;return qf.set(b,$f(qf.get(b)||null,i,r,c,p,S)),!0;case"gotpointercapture":return b=S.pointerId,Yf.set(b,$f(Yf.get(b)||null,i,r,c,p,S)),!0}return!1}function Yx(i){var r=vu(i.target);if(r!==null){var c=a(r);if(c!==null){if(r=c.tag,r===13){if(r=l(c),r!==null){i.blockedOn=r,o_(i.priority,function(){zx(c)});return}}else if(r===31){if(r=d(c),r!==null){i.blockedOn=r,o_(i.priority,function(){zx(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Vy(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var c=rb(i.nativeEvent);if(c===null){c=i.nativeEvent;var p=new c.constructor(c.type,c);aA=p,c.target.dispatchEvent(p),aA=null}else return r=Au(c),r!==null&&Gx(r),i.blockedOn=c,!1;r.shift()}return!0}function $x(i,r,c){Vy(i)&&c.delete(r)}function uL(){lb=!1,ba!==null&&Vy(ba)&&(ba=null),Ea!==null&&Vy(Ea)&&(Ea=null),Ta!==null&&Vy(Ta)&&(Ta=null),qf.forEach($x),Yf.forEach($x)}function qy(i,r){i.blockedOn===r&&(i.blockedOn=null,lb||(lb=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,uL)))}var Yy=null;function Xx(i){Yy!==i&&(Yy=i,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Yy===i&&(Yy=null);for(var r=0;r<i.length;r+=3){var c=i[r],p=i[r+1],S=i[r+2];if(typeof p!="function"){if(ab(p||c)===null)continue;break}var b=Au(c);b!==null&&(i.splice(r,3),r-=3,rS(b,{pending:!0,data:S,method:c.method,action:p},p,S))}}))}function td(i){function r(B){return qy(B,i)}ba!==null&&qy(ba,i),Ea!==null&&qy(Ea,i),Ta!==null&&qy(Ta,i),qf.forEach(r),Yf.forEach(r);for(var c=0;c<_a.length;c++){var p=_a[c];p.blockedOn===i&&(p.blockedOn=null)}for(;0<_a.length&&(c=_a[0],c.blockedOn===null);)Yx(c),c.blockedOn===null&&_a.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(p=0;p<c.length;p+=3){var S=c[p],b=c[p+1],w=S[si]||null;if(typeof b=="function")w||Xx(c);else if(w){var D=null;if(b&&b.hasAttribute("formAction")){if(S=b,w=b[si]||null)D=w.formAction;else if(ab(S)!==null)continue}else D=w.action;typeof D=="function"?c[p+1]=D:(c.splice(p,3),p-=3),Xx(c)}}}function Jx(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(w){return S=w})},focusReset:"manual",scroll:"manual"})}function r(){S!==null&&(S(),S=null),p||setTimeout(c,20)}function c(){if(!p&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,S=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){p=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),S!==null&&(S(),S=null)}}}function cb(i){this._internalRoot=i}$y.prototype.render=cb.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(n(409));var c=r.current,p=Ii();Fx(c,p,i,r,null,null)},$y.prototype.unmount=cb.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Fx(i.current,2,null,i,null,null),wy(),r[yu]=null}};function $y(i){this._internalRoot=i}$y.prototype.unstable_scheduleHydration=function(i){if(i){var r=s_();i={blockedOn:null,target:i,priority:r};for(var c=0;c<_a.length&&r!==0&&r<_a[c].priority;c++);_a.splice(c,0,i),c===0&&Yx(i)}};var Kx=t.version;if(Kx!=="19.2.4")throw Error(n(527,Kx,"19.2.4"));Q.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(r),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var dL={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xy.isDisabled&&Xy.supportsFiber)try{tf=Xy.inject(dL),Ti=Xy}catch{}}return Jf.createRoot=function(i,r){if(!s(i))throw Error(n(299));var c=!1,p="",S=nw,b=iw,w=sw;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(S=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError)),r=Ox(i,1,!1,null,null,c,p,null,S,b,w,Jx),i[yu]=r.current,qS(i),new cb(r)},Jf.hydrateRoot=function(i,r,c){if(!s(i))throw Error(n(299));var p=!1,S="",b=nw,w=iw,D=sw,B=null;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(S=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.formState!==void 0&&(B=c.formState)),r=Ox(i,1,!0,r,c??null,p,S,B,b,w,D,Jx),r.context=Bx(null),c=r.current,p=Ii(),p=jv(p),S=ca(p),S.callback=null,ua(c,S,p),c=p,r.current.lanes=c,nf(r,c),ao(r),i[yu]=r.current,qS(i),new $y(r)},Jf.version="19.2.4",Jf}var r1;function _L(){if(r1)return fb.exports;r1=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(t){console.error(t)}}return o(),fb.exports=TL(),fb.exports}var CL=_L();const wL=gR(CL),xL={schemaVersion:"1.0",basics:{name:"",title:"",tagline:"",location:"",openToRelocation:!1,preferredLocations:[],experienceYears:0,availability:"",contact:{email:"",phone:"",linkedin:""}},summary:"",skills:{talentAcquisition:[],hrOperations:[],payrollCompliance:[],toolsAndPlatforms:[],managementAndEngagement:[]},experience:[],achievements:[],education:{degree:"",institution:"",year:0},preferences:{rolesInterestedIn:[],workType:[],industries:[]},labels:{experience:{title:"",summary:""}}},Y0={schemaVersion:"1.0",basics:{name:"Ayushman Mishra",title:"Senior Frontend Engineer",tagline:"Building scalable, high-performance UI with React",location:"Noida, India",openToRelocation:!0,preferredLocations:["Relocate"],experienceYears:7,availability:"Immediate",contact:{email:"ayushmishra.ui@gmail.com",phone:"+91-9990931449",linkedin:"https://linkedin.com/in/ayushmish/"}},summary:"Senior Frontend Engineer with 7+ years of experience specializing in React.js, JavaScript, TypeScript, and Node.js. Proven expertise in building scalable, user-centric web applications for high-growth companies. Strong background in UI optimization, API integration, performance tuning, and mentoring teams in Agile environments.",skills:{frontend:["React.js","Next.js","Astro","Redux","JavaScript (ES6+)","TypeScript"],styling:["Tailwind CSS","SCSS","Bootstrap","Material UI"],backend:["Node.js","REST APIs","GraphQL"],cloudDevOps:["AWS","Jenkins","GitHub Actions","Docker (Basic)","Netlify","Vercel"],testing:["Jest","Cypress","React Testing Library"],tools:["Git","Figma","Adobe XD","JIRA","Agile/Scrum"]},experience:[{company:"BOLD Technology Systems Pvt. Ltd",companyLogo:"/images/companies/bold.png",employmentType:"Full-time",totalDuration:"Aug 2020  Present  5 yrs 7 mos",location:"Noida, Uttar Pradesh, India",workMode:"Hybrid",keyPlatforms:["Monster.com","FlexJobs.com","MyPerfectResume.com","LiveCareer.com"],roles:[{title:"Module Lead",duration:{from:"2024-07",to:"Present"},durationText:"Jul 2024  Present  1 yr 8 mos",responsibilities:["Own frontend architecture and technical direction for high-traffic web platforms serving 1M+ monthly active users","Drive design decisions around scalability, performance, maintainability, and frontend best practices across teams","Lead delivery planning, code reviews, and architectural discussions to ensure production-grade quality","Mentor engineers on advanced React patterns, performance optimization, and scalable UI architecture","Partner with product, design, and backend leadership to align technical execution with business goals"]},{title:"Senior Software Engineer",duration:{from:"2023-02",to:"2024-08"},durationText:"Feb 2023  Aug 2024  1 yr 7 mos",responsibilities:["Led the design and implementation of scalable frontend architectures using React.js and Node.js for enterprise-grade platforms","Delivered robust, high-performance UI systems supporting over 1M+ users with strict reliability and uptime requirements","Played a key role in platform migrations and post-acquisition integrations using GraphQL and REST APIs with zero downtime","Optimized application performance through code splitting, lazy loading, memoization, and profiling, reducing page load times by up to 40%","Collaborated closely with design teams using Figma, Avocode, InVision, and Adobe XD to achieve pixel-perfect and accessible UI","Implemented A/B testing, SEO best practices, and WCAG-compliant accessibility standards to improve engagement and Core Web Vitals","Worked cross-functionally using Jira and Git to deliver high-impact features in Agile/Scrum environments"],skills:["React.js","Frontend Architecture","Performance Optimization","REST APIs","SEO","Accessibility"]},{title:"Software Developer  UI",duration:{from:"2021-07",to:"2023-02"},durationText:"Jul 2021  Feb 2023  1 yr 8 mos",responsibilities:["Developed modular, reusable UI components using React, JavaScript (ES6+), and modern CSS frameworks","Implemented responsive, cross-browser interfaces for high-traffic consumer-facing applications","Integrated frontend components with backend APIs to deliver end-to-end user flows","Contributed to performance improvements and frontend stability through refactoring and optimization initiatives"]},{title:"Associate Software Developer  UI",duration:{from:"2020-08",to:"2021-07"},durationText:"Aug 2020  Jul 2021  1 yr",responsibilities:["Built and maintained UI features using HTML, CSS, and JavaScript within large-scale web applications","Converted design specifications into functional, maintainable frontend code","Collaborated with senior engineers to deliver features, fix defects, and improve overall UI quality"]}]},{company:"Cognizant Technology Solutions",companyLogo:"/images/companies/cognizant.png",employmentType:"Full-time",totalDuration:"Sep 2018  Jul 2020  1 yr 11 mos",location:"Bengaluru, Karnataka, India",roles:[{title:"Programmer Analyst",duration:{from:"2019-09",to:"2020-07"},durationText:"Sep 2019  Jul 2020  11 mos",responsibilities:["Developed Single Page Applications using React.js, Redux, and TypeScript for enterprise clients","Designed responsive, cross-browser user interfaces for banking and healthcare platforms","Integrated RESTful APIs and implemented state management patterns to support complex workflows","Participated in Agile delivery cycles, contributing to sprint planning and on-time feature delivery"]},{title:"Programmer Analyst Trainee",duration:{from:"2018-09",to:"2019-08"},durationText:"Sep 2018  Aug 2019  1 yr",responsibilities:["Trained in enterprise frontend development practices and modern JavaScript frameworks","Contributed to internal tools and client-facing UI modules under senior guidance","Built a strong foundation in Agile development, version control, and code quality standards"]}]}],achievements:["4 promotions in 5 years at BOLD Technology (fastest career progression)","Featured in company newsletter for exemplary performance","Multiple Kudos awards from senior leadership","IELTS Band 8  strong professional communication"],education:{degree:"B.Tech in Computer Science & Engineering",institution:"IEC College of Engineering & Technology",year:2018},preferences:{rolesInterestedIn:["Senior Frontend Engineer","Frontend Lead","UI Architect"],workType:["Full-time","Remote","Relocation"],industries:["SaaS","EdTech","HRTech","FinTech"]}},ML={schemaVersion:"1.0",basics:{name:"Ayushman Mishra",title:"Senior Frontend-Entwickler",tagline:"Entwicklung skalierbarer, leistungsstarker UIs mit React",location:"Noida, Indien",openToRelocation:!0,preferredLocations:["Relocate","Remote"],experienceYears:7,availability:"Sofort verfgbar",contact:{email:"ayushmishra.ui@gmail.com",phone:"+91-9990931449",linkedin:"https://linkedin.com/in/ayushmish/"}},summary:"Senior Frontend-Entwickler mit ber 7 Jahren Erfahrung, spezialisiert auf React.js, JavaScript, TypeScript und Node.js. Nachgewiesene Expertise in der Entwicklung skalierbarer, benutzerzentrierter Webanwendungen fr wachstumsstarke Unternehmen. Starker Hintergrund in UI-Optimierung, API-Integration, Leistungsoptimierung und Mentoring von Teams in agilen Umgebungen.",skills:{frontend:["React.js","Next.js","Astro","Redux","JavaScript (ES6+)","TypeScript"],styling:["Tailwind CSS","SCSS","Bootstrap","Material UI"],backend:["Node.js","REST APIs","GraphQL"],cloudDevOps:["AWS","Jenkins","GitHub Actions","Docker (Basic)","Netlify","Vercel"],testing:["Jest","Cypress","React Testing Library"],tools:["Git","Figma","Adobe XD","JIRA","Agile/Scrum"]},experience:[{company:"BOLD Technology Systems Pvt. Ltd",companyLogo:"/images/companies/bold.png",employmentType:"Vollzeit",totalDuration:"Aug 2020  Aktuell  5 Jahre 7 Monate",location:"Noida, Uttar Pradesh, Indien",workMode:"Hybrid",keyPlatforms:["Monster.com","FlexJobs.com","MyPerfectResume.com","LiveCareer.com"],roles:[{title:"Module Lead",duration:{from:"07.2024",to:"Aktuell"},durationText:"Juli 2024  Aktuell  1 Jahr 8 Monate",responsibilities:["Leitung der Frontend-Architektur und -Bereitstellung fr gro angelegte React-Anwendungen","Verantwortung fr technische Entscheidungen, Codequalitt und Leistungsstandards","Mentoring von Ingenieuren und Code-Reviews zur Gewhrleistung skalierbarer, wartbarer UI-Systeme"]},{title:"Senior Software Engineer",duration:{from:"02.2023",to:"08.2024"},durationText:"Feb 2023  Aug 2024  1 Jahr 7 Monate",responsibilities:["Leitung des Designs und der Implementierung skalierbarer Webarchitekturen mit ReactJS und Node.js fr Plattformen mit ber 1 Mio. Nutzern","Entwicklung und Integration von UIs mit Backend-Diensten, Sicherstellung von produktionsreifer Leistung und Zuverlssigkeit","Enge Zusammenarbeit mit Designern unter Verwendung von Figma, Avocode, InVision und Adobe XD fr pixelgenaue UIs","Optimierung der Frontend-Leistung mit HTML5, CSS3, JavaScript (ES6+) und SASS/SCSS","Durchfhrung von A/B-Tests, Sicherstellung der Barrierefreiheit (WCAG) und SEO-Compliance","Zusammenarbeit mit funktionsbergreifenden Teams unter Verwendung von Jira und Git zur Bereitstellung hochwertiger Software"],skills:["React.js","REST APIs","Frontend Entwicklung","SEO","Barrierefreiheit"]},{title:"Software Developer  UI",duration:{from:"07.2021",to:"02.2023"},durationText:"Juli 2021  Feb 2023  1 Jahr 8 Monate",responsibilities:["Erstellung wiederverwendbarer UI-Komponenten mit React und modernem JavaScript","Implementierung responsiver Layouts und Verbesserung der Browserkompatibilitt","Zusammenarbeit mit Backend-Teams fr API-gesteuerte UI-Entwicklung"]},{title:"Associate Software Developer  UI",duration:{from:"08.2020",to:"07.2021"},durationText:"Aug 2020  Juli 2021  1 Jahr",responsibilities:["Arbeit an der UI-Entwicklung mit HTML, CSS und JavaScript","Umsetzung von Designs in funktionale Webseiten","Untersttzung erfahrener Entwickler bei der Feature-Entwicklung und Fehlerbehebung"]}]},{company:"Cognizant Technology Solutions",companyLogo:"/images/companies/cognizant.png",employmentType:"Vollzeit",totalDuration:"Sep 2018  Juli 2020  1 Jahr 11 Monate",location:"Bengaluru, Karnataka, Indien",roles:[{title:"Programmer Analyst",duration:{from:"09.2019",to:"07.2020"},durationText:"Sep 2019  Juli 2020  11 Monate",responsibilities:["Entwicklung von SPAs mit React.js, Redux und JavaScript","Integration von REST-APIs und Implementierung von State Management","Arbeit in agilen Teams zur Erfllung von Sprint-Zielen"]},{title:"Programmer Analyst Trainee",duration:{from:"09.2018",to:"08.2019"},durationText:"Sep 2018  Aug 2019  1 Jahr",responsibilities:["Ausbildung in Frontend-Entwicklung und Unternehmenssoftware-Praktiken","Arbeit an internen Tools und kundenorientierten UI-Modulen"]}]}],achievements:["4 Befrderungen in 5 Jahren bei BOLD Technology (schnellster Karriereaufstieg)","Vorgestellt im Unternehmensnewsletter fr beispielhafte Leistung","Mehrere Auszeichnungen (Kudos) von der Geschftsleitung","Befrderung bei Cognizant innerhalb von 2 Jahren","IELTS Band 8  starke professionelle Kommunikation"],education:{degree:"B.Tech in Informatik & Ingenieurwesen",institution:"IEC College of Engineering & Technology",year:2018},preferences:{rolesInterestedIn:["Senior Frontend Engineer","Frontend Lead","UI Architect"],workType:["Vollzeit","Remote","Umzug"],industries:["SaaS","EdTech","HRTech","FinTech"]}},RL={schemaVersion:"1.0",basics:{name:"",title:"",tagline:"ReactUI",location:"",openToRelocation:!0,preferredLocations:["",""],experienceYears:7,availability:"",contact:{email:"ayushmishra.ui@gmail.com",phone:"+91-9990931449",linkedin:"https://linkedin.com/in/ayushmish/"}},summary:"React.jsJavaScriptTypeScriptNode.js7WebUIAPI",skills:{frontend:["React.js","Next.js","Astro","Redux","JavaScript (ES6+)","TypeScript"],styling:["Tailwind CSS","SCSS","Bootstrap","Material UI"],backend:["Node.js","REST APIs","GraphQL"],cloudDevOps:["AWS","Jenkins","GitHub Actions","Docker (Basic)","Netlify","Vercel"],testing:["Jest","Cypress","React Testing Library"],tools:["Git","Figma","Adobe XD","JIRA","Agile/Scrum"]},experience:[{company:"BOLD Technology Systems Pvt. Ltd",companyLogo:"/images/companies/bold.png",employmentType:"",totalDuration:"20208    57",location:"",workMode:"",keyPlatforms:["Monster.com","FlexJobs.com","MyPerfectResume.com","LiveCareer.com"],roles:[{title:"",duration:{from:"20247",to:""},durationText:"20247    18",responsibilities:["React","","UI"]},{title:"",duration:{from:"20232",to:"20248"},durationText:"20232  20248  17",responsibilities:["ReactJSNode.js100Web","UI","FigmaAvocodeInVisionAdobe XDUI","HTML5CSS3JavaScriptES6+SASS/SCSS","A/BWCAGSEO","JiraGit"],skills:["React.js","REST APIs","","SEO",""]},{title:"  UI",duration:{from:"20217",to:"20232"},durationText:"20217  20232  18",responsibilities:["ReactJavaScriptUI","","APIUI"]},{title:"  UI",duration:{from:"20208",to:"20217"},durationText:"20208  20217  1",responsibilities:["HTMLCSSJavaScriptUI","Web",""]}]},{company:"Cognizant Technology Solutions",companyLogo:"/images/companies/cognizant.png",employmentType:"",totalDuration:"20189  20207  111",location:"",roles:[{title:"",duration:{from:"20199",to:"20207"},durationText:"20199  20207  11",responsibilities:["React.jsReduxJavaScriptSPA","REST API",""]},{title:"",duration:{from:"20189",to:"20198"},durationText:"20189  20198  1",responsibilities:["","UI"]}]}],achievements:["BOLD Technology54","","Kudos","Cognizant2","IELTS Band 8  "],education:{degree:"  (B.Tech)",institution:"IEC College of Engineering & Technology",year:2018},preferences:{rolesInterestedIn:["","","UI"],workType:["","",""],industries:["SaaS","EdTech","HRTech","FinTech"]}},NL={en:{nav:{home:"Home",experience:"Experience",skills:"Skills",achievements:"Achievements",hireMe:"Hire Me"},hero:{availability:"for opportunities",contactMe:"Contact Me",downloadCV:"Download CV",linkedin:"LinkedIn",yearsExp:"Years Experience",openTo:"Open to"},experience:{title:"Professional Journey",summary:"Over {years} years of crafting scalable web applications and leading frontend teams to success.",currentRole:"Current Role",currentLocation:"Current Location",keyProjects:"Impacted Platforms"},skills:{title:"Technical Expertise",summary:"A comprehensive toolset sharpened over 7 years of building high-performance web applications."},achievements:{title:"Key Achievements",education:"Education",graduated:"Graduated",interests:"Interests"},footer:{rights:"All rights reserved.",builtWith:"Built with React, Tailwind & Gemini API"}},de:{nav:{home:"Startseite",experience:"Erfahrung",skills:"Fhigkeiten",achievements:"Erfolge",hireMe:"Mich Einstellen"},hero:{availability:"fr Angebote",contactMe:"Kontaktieren",downloadCV:"Lebenslauf (CV)",linkedin:"LinkedIn",yearsExp:"Jahre Erfahrung",openTo:"Offen fr"},experience:{title:"Beruflicher Werdegang",summary:"ber {years} Jahre Erfahrung in der Erstellung skalierbarer Webanwendungen und der erfolgreichen Leitung von Frontend-Teams.",currentRole:"Aktuelle Position",currentLocation:"Aktueller Standort",keyProjects:"Wichtige Plattformen"},skills:{title:"Technische Fachkenntnisse",summary:"Ein umfassendes Toolset, geschrft durch 7 Jahre Entwicklung leistungsstarker Webanwendungen."},achievements:{title:"Wichtige Erfolge",education:"Ausbildung",graduated:"Abschluss",interests:"Interessen"},footer:{rights:"Alle Rechte vorbehalten.",builtWith:"Erstellt mit React, Tailwind & Gemini API"}},jp:{nav:{home:"",experience:"",skills:"",achievements:"",hireMe:""},hero:{availability:"",contactMe:"",downloadCV:"",linkedin:"LinkedIn",yearsExp:"",openTo:""},experience:{title:"",summary:"{years}Web",currentRole:"",currentLocation:"",keyProjects:""},skills:{title:"",summary:"7Web"},achievements:{title:"",education:"",graduated:"",interests:""},footer:{rights:"All rights reserved.",builtWith:"React, Tailwind & Gemini API "}}},yR=Y0,vR=jt.createContext(void 0),IL=({children:o})=>{const[t,e]=jt.useState("en"),[n,s]=jt.useState(!1),[a,l]=jt.useState(null);jt.useEffect(()=>{const E=localStorage.getItem("portfolio_custom_data");if(E)try{l(JSON.parse(E))}catch(_){console.error("Failed to parse saved portfolio data",_)}},[]);const d=E=>{l(E),E?localStorage.setItem("portfolio_custom_data",JSON.stringify(E)):localStorage.removeItem("portfolio_custom_data")},h=(E,_)=>{if(!a)return;const C=JSON.parse(JSON.stringify(a)),M=E.split(".");let R=C;for(let L=0;L<M.length-1;L++)R[M[L]]||(R[M[L]]={}),R=R[M[L]];R[M[M.length-1]]=_,d(C)},f=E=>{e(E),s(E!=="en"&&!a)};let m;if(a)m=a;else switch(t){case"de":m=ML;break;case"jp":m=RL;break;default:m=Y0}const v=NL[t],A=!!a;return k.jsx(vR.Provider,{value:{language:t,setLanguage:f,data:m,labels:v,showApology:n,setShowApology:s,customData:a,setCustomData:d,updateData:h,isBuilderMode:A},children:o})},Bo=()=>{const o=jt.useContext(vR);if(o===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return o};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=(...o)=>o.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=o=>{const t=kL(o);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=o=>{for(const t in o)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=jt.forwardRef(({color:o="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:l,...d},h)=>jt.createElement("svg",{ref:h,...LL,width:t,height:t,stroke:o,strokeWidth:n?Number(e)*24/Number(t):e,className:AR("lucide",s),...!a&&!PL(d)&&{"aria-hidden":"true"},...d},[...l.map(([f,m])=>jt.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=(o,t)=>{const e=jt.forwardRef(({className:n,...s},a)=>jt.createElement(UL,{ref:a,iconNode:t,className:AR(`lucide-${DL(a1(o))}`,`lucide-${o}`,n),...s}));return e.displayName=a1(o),e};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],BL=$t("award",OL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Rb=$t("briefcase",FL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],GL=$t("building-2",HL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],VL=$t("calendar",zL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],YL=$t("check",qL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],SR=$t("circle-alert",$L);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],JL=$t("circle-check",XL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],WL=$t("cloud",KL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],ZL=$t("code",QL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],tP=$t("database",jL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],bR=$t("download",eP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],TT=$t("file-braces",nP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ER=$t("file-text",iP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],_T=$t("globe",sP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],rP=$t("info",oP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],lP=$t("layout-template",aP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],TR=$t("linkedin",cP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],_R=$t("loader-circle",uP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],CR=$t("mail",dP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Nb=$t("map-pin",hP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],pP=$t("panels-top-left",fP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],wR=$t("pen-tool",mP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],yP=$t("pen",gP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],AP=$t("phone",vP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],bP=$t("refresh-cw",SP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],TP=$t("save",EP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],CP=$t("send",_P);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],xP=$t("server",wP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],RP=$t("smartphone",MP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],l1=$t("sparkles",NP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],DP=$t("star",IP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],LP=$t("terminal",kP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],xR=$t("upload",PP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],OP=$t("users",UP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Cg=$t("x",BP),Jt=({value:o,path:t,as:e="span",inputType:n="text",className:s="",textClassName:a="",inputClassName:l="",placeholder:d="Empty",multiline:h=!1,transformValue:f,renderChildren:m})=>{const{isBuilderMode:v,updateData:A}=Bo(),[E,_]=jt.useState(!1),[C,M]=jt.useState(o);jt.useEffect(()=>{M(o)},[o]);const R=()=>{const U=f?f(C):C;A(t,U),_(!1)},L=()=>{M(o),_(!1)},I=U=>{U.key==="Escape"&&L(),U.key==="Enter"&&!h&&n!=="textarea"&&R()};if(!v)return k.jsx(e,{className:a,children:m?m(o):o});if(E){const U=h||n==="textarea"?"textarea":"input";return k.jsxs("div",{className:`inline-flex items-center gap-2 ${s}`,children:[k.jsx(U,{type:n==="textarea"?void 0:n,value:C,onChange:P=>M(P.target.value),className:`bg-white border border-blue-200 rounded px-2 py-1 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-300 min-w-[100px] w-full ${l}`,autoFocus:!0,onKeyDown:I,placeholder:d,rows:h?3:void 0}),k.jsxs("div",{className:"flex flex-col gap-1 shrink-0 z-10",children:[k.jsx("button",{onClick:R,className:"p-1 hover:bg-green-50 rounded text-green-600 bg-white shadow-sm border border-green-100",children:k.jsx(YL,{size:16})}),k.jsx("button",{onClick:L,className:"p-1 hover:bg-red-50 rounded text-red-500 bg-white shadow-sm border border-red-100",children:k.jsx(Cg,{size:16})})]})]})}return k.jsxs("div",{className:`relative inline-block group ${s}`,children:[k.jsx(e,{className:`${a} decoration-blue-200/50 hover:underline decoration-dashed decoration-2 underline-offset-4 cursor-text`,onClick:()=>_(!0),children:(m?m(o):o)||k.jsx("span",{className:"text-gray-300 italic",children:"Empty"})}),k.jsx("button",{onClick:()=>_(!0),className:"absolute -right-6 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-blue-50 rounded-full bg-white/80 shadow-sm border border-gray-100",title:"Edit",children:k.jsx(yP,{size:12,className:"text-blue-500"})})]})},FP=()=>{var h,f,m,v,A,E,_,C;const{data:o,labels:t}=Bo(),{basics:e,summary:n}=o,s=((f=(h=o.labels)==null?void 0:h.hero)==null?void 0:f.availability)||t.hero.availability,a=((v=(m=o.labels)==null?void 0:m.hero)==null?void 0:v.contactMe)||t.hero.contactMe,l=((E=(A=o.labels)==null?void 0:A.hero)==null?void 0:E.downloadCV)||t.hero.downloadCV,d=((C=(_=o.labels)==null?void 0:_.hero)==null?void 0:C.yearsExp)||t.hero.yearsExp;return k.jsxs("section",{id:"hero",className:"hero-section relative bg-gradient-to-br from-slate-50 via-white to-blue-50 pt-24 pb-12 lg:pt-32 lg:pb-24 overflow-hidden",children:[k.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),k.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:k.jsxs("div",{className:"hero-content max-w-4xl mx-auto text-center",children:[k.jsxs("div",{className:"hero-availability inline-block mb-4 px-3 py-1 rounded-full bg-blue-100/50 text-accent font-medium text-sm border border-blue-200 backdrop-blur-sm",children:[k.jsx(Jt,{value:e.availability,path:"basics.availability",className:"mr-1"}),s]}),k.jsxs("h1",{className:"hero-name text-4xl sm:text-5xl lg:text-6xl font-bold text-primary tracking-tight mb-6",children:["Hi, I'm ",k.jsxs("span",{className:"text-accent relative inline-block",children:[k.jsx(Jt,{value:e.name,path:"basics.name",inputClassName:"text-4xl sm:text-5xl lg:text-6xl font-bold text-accent min-w-[300px]"}),k.jsx("span",{className:"absolute bottom-1 left-0 w-full h-3 bg-blue-200/30 -z-10 rounded-sm transform -rotate-1"})]})]}),k.jsx("h2",{className:"hero-title text-xl sm:text-2xl font-medium text-secondary mb-6",children:k.jsx(Jt,{value:e.title,path:"basics.title"})}),k.jsxs("div",{className:"hero-summary text-lg sm:text-xl text-gray-600 mb-8 max-w-2xl mx-auto leading-relaxed",children:[k.jsxs("p",{className:"mb-2 hero-tagline",children:[k.jsx(Jt,{value:e.tagline,path:"basics.tagline"}),"."]}),k.jsx(Jt,{value:n,path:"summary",as:"p",inputType:"textarea",multiline:!0,inputClassName:"min-h-[100px] text-lg w-full",className:"hero-description",textClassName:"hero-description-text"})]}),k.jsxs("div",{className:"hero-actions flex flex-wrap justify-center gap-4 mb-10",children:[k.jsxs("a",{href:`mailto:${e.contact.email}`,className:"hero-btn-contact inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-accent hover:bg-accentHover transition-colors",children:[k.jsx(CR,{className:"w-5 h-5 mr-2"}),a]}),k.jsxs("a",{href:"Ayushman_Mishra_Frontend.pdf",download:`${e.name.replace(" ","_")}_Resume.pdf`,className:"hero-btn-download inline-flex items-center px-6 py-3 border border-gray-300 text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-colors shadow-sm",children:[k.jsx(bR,{className:"w-5 h-5 mr-2"}),l]}),k.jsxs("a",{href:e.contact.linkedin,target:"_blank",rel:"noopener noreferrer",className:"hero-btn-linkedin inline-flex items-center px-6 py-3 border border-gray-300 text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-colors shadow-sm",children:[k.jsx(TR,{className:"w-5 h-5 mr-2"}),t.hero.linkedin]})]}),k.jsxs("div",{className:"hero-details flex flex-col sm:flex-row items-center justify-center gap-6 text-sm text-gray-500",children:[k.jsxs("div",{className:"hero-location flex items-center",children:[k.jsx(Nb,{className:"w-4 h-4 mr-1"}),k.jsx(Jt,{value:e.location,path:"basics.location"})]}),k.jsx("div",{className:"hidden sm:block",children:""}),k.jsxs("div",{className:"hero-experience",children:[k.jsx(Jt,{value:e.experienceYears,path:"basics.experienceYears",inputType:"number",transformValue:Number,className:"mr-1"}),"+ ",d]}),k.jsx("div",{className:"hidden sm:block",children:""}),k.jsxs("div",{className:"hero-open-to",children:[t.hero.openTo,": ",k.jsx(Jt,{value:e.preferredLocations.join(", "),path:"basics.preferredLocations",transformValue:M=>M.split(",").map(R=>R.trim())})]})]})]})}),k.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 opacity-30 pointer-events-none",children:[k.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 rounded-full bg-blue-200 blur-3xl"}),k.jsx("div",{className:"absolute top-40 -left-20 w-72 h-72 rounded-full bg-indigo-200 blur-3xl"})]})]})},HP=({title:o,skills:t,icon:e,categoryKey:n})=>k.jsxs("div",{className:"skill-category bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[k.jsxs("div",{className:"skill-category-header flex items-center mb-4",children:[k.jsx("div",{className:"p-2 bg-blue-50 rounded-lg text-accent mr-3",children:k.jsx(e,{size:20})}),k.jsx("h3",{className:"skill-category-title font-bold text-lg text-primary capitalize",children:o.replace(/([A-Z])/g," $1").trim()})]}),k.jsx("div",{className:"skills-list flex flex-wrap gap-2",children:k.jsx(Jt,{value:t.join(", "),path:`skills.${n}`,transformValue:s=>s.split(",").map(a=>a.trim()),className:"w-full",inputClassName:"text-sm"})})]}),GP=o=>{const t=o.toLowerCase();return t.includes("front")||t.includes("web")||t.includes("ui")?pP:t.includes("back")||t.includes("api")||t.includes("server")?xP:t.includes("cloud")||t.includes("devops")||t.includes("aws")?WL:t.includes("style")||t.includes("css")||t.includes("design")?wR:t.includes("test")||t.includes("qa")?ZL:t.includes("tool")||t.includes("git")?LP:t.includes("data")||t.includes("sql")?tP:t.includes("mobile")||t.includes("app")?RP:t.includes("recruit")||t.includes("talent")||t.includes("hire")?OP:t.includes("hr")||t.includes("manage")||t.includes("oper")?Rb:t.includes("policy")||t.includes("compliance")?ER:_T},zP=()=>{var a,l,d,h;const{data:o,labels:t}=Bo(),{skills:e}=o,n=((l=(a=o.labels)==null?void 0:a.skills)==null?void 0:l.title)||t.skills.title,s=((h=(d=o.labels)==null?void 0:d.skills)==null?void 0:h.summary)||t.skills.summary;return k.jsx("section",{id:"skills",className:"skills-section py-16 bg-white",children:k.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsxs("div",{className:"skills-header text-center mb-12",children:[k.jsx("h2",{className:"skills-title text-3xl font-bold text-primary",children:k.jsx(Jt,{value:n,path:"labels.skills.title"})}),k.jsx("div",{className:"skills-summary mt-4 text-gray-600 max-w-2xl mx-auto",children:k.jsx(Jt,{value:s,path:"labels.skills.summary",as:"p",inputType:"textarea",multiline:!0})})]}),k.jsx("div",{className:"skills-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.keys(e).map(f=>k.jsx(HP,{title:f,skills:e[f],icon:GP(f),categoryKey:f},f))})]})})},VP=()=>{var h,f,m,v,A,E,_,C;const{data:o,labels:t}=Bo(),{experience:e,basics:n}=o,s=((f=(h=o.labels)==null?void 0:h.experience)==null?void 0:f.title)||t.experience.title,a=(((v=(m=o.labels)==null?void 0:m.experience)==null?void 0:v.summary)||t.experience.summary).replace("{years}",n.experienceYears.toString()),l=((E=(A=o.labels)==null?void 0:A.experience)==null?void 0:E.currentRole)||t.experience.currentRole,d=((C=(_=o.labels)==null?void 0:_.experience)==null?void 0:C.keyProjects)||t.experience.keyProjects;return k.jsxs("section",{id:"experience",className:"experience-section py-24 bg-slate-50 relative overflow-hidden",children:[k.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(#cbd5e1_1px,transparent_1px)] [background-size:20px_20px] opacity-40"}),k.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10 max-w-6xl",children:[k.jsxs("div",{className:"experience-header flex flex-col lg:flex-row justify-between items-start lg:items-end gap-8 mb-16",children:[k.jsxs("div",{className:"max-w-2xl",children:[k.jsx("h2",{className:"experience-title text-4xl sm:text-5xl font-bold text-primary mb-6",children:k.jsx(Jt,{value:s,path:"labels.experience.title"})}),k.jsx("div",{className:"experience-summary text-lg text-gray-600 leading-relaxed",children:k.jsx(Jt,{value:a,path:"labels.experience.summary",as:"p",inputType:"textarea",multiline:!0})})]}),k.jsxs("div",{className:"experience-status-cards flex flex-col sm:flex-row gap-4 w-full lg:w-auto",children:[k.jsxs("div",{className:"status-card-role bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4 flex-1 lg:flex-none lg:min-w-[240px]",children:[k.jsx("div",{className:"p-2.5 bg-blue-50 text-accent rounded-lg shrink-0",children:k.jsx(Rb,{size:20})}),k.jsxs("div",{children:[k.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide",children:k.jsx(Jt,{value:l,path:"labels.experience.currentRole"})}),k.jsx("p",{className:"text-primary font-bold text-sm sm:text-base",children:n.title})]})]}),k.jsxs("div",{className:"status-card-location bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4 flex-1 lg:flex-none lg:min-w-[240px]",children:[k.jsx("div",{className:"p-2.5 bg-blue-50 text-accent rounded-lg shrink-0",children:k.jsx(Nb,{size:20})}),k.jsxs("div",{children:[k.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide",children:t.experience.currentLocation}),k.jsx("p",{className:"text-primary font-bold text-sm sm:text-base",children:n.location})]})]})]})]}),k.jsx("div",{className:"experience-list space-y-12",children:e.map((M,R)=>k.jsxs("div",{className:"experience-card bg-white rounded-3xl p-6 sm:p-10 shadow-sm border border-gray-100 relative overflow-hidden",children:[k.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-slate-50 rounded-bl-[100px] -z-0 opacity-50"}),k.jsxs("div",{className:"relative z-10",children:[k.jsxs("div",{className:"company-header flex flex-col md:flex-row md:items-start gap-6 mb-10 border-b border-gray-100 pb-8",children:[k.jsx("div",{className:"company-logo w-16 h-16 rounded-2xl bg-white border border-gray-200 shadow-sm flex items-center justify-center text-gray-700 shrink-0 overflow-hidden",children:M.companyLogo?k.jsx("img",{src:M.companyLogo,alt:M.company,className:"w-full h-full object-contain p-2",onError:L=>{var U;L.currentTarget.style.display="none",(U=L.currentTarget.parentElement)==null||U.classList.add("p-3");const I=L.currentTarget.parentElement;if(I){const P=document.createElement("div");P.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"></path><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"></path><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"></path><path d="M10 6h4"></path><path d="M10 10h4"></path><path d="M10 14h4"></path><path d="M10 18h4"></path></svg>',I.appendChild(P)}}}):k.jsx(GL,{size:32})}),k.jsxs("div",{className:"flex-1",children:[k.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4",children:k.jsxs("div",{children:[k.jsx("h3",{className:"company-name text-2xl sm:text-3xl font-bold text-primary",children:k.jsx(Jt,{value:M.company,path:`experience.${R}.company`})}),k.jsxs("div",{className:"company-meta flex flex-wrap items-center gap-y-2 gap-x-4 text-sm sm:text-base text-gray-500 mt-2",children:[k.jsxs("div",{className:"flex items-center gap-1.5",children:[k.jsx(Nb,{size:16,className:"text-gray-400"}),k.jsx(Jt,{value:M.location,path:`experience.${R}.location`})]}),k.jsx("span",{className:"hidden sm:inline text-gray-300",children:"|"}),k.jsxs("div",{className:"flex items-center gap-1.5",children:[k.jsx(Rb,{size:16,className:"text-gray-400"}),k.jsx(Jt,{value:M.employmentType,path:`experience.${R}.employmentType`})]}),k.jsx("span",{className:"hidden sm:inline text-gray-300",children:"|"}),k.jsx("div",{className:"px-2.5 py-0.5 rounded-full bg-slate-100 text-slate-600 font-medium text-xs border border-slate-200",children:k.jsx(Jt,{value:M.totalDuration,path:`experience.${R}.totalDuration`})})]})]})}),M.keyPlatforms&&M.keyPlatforms.length>0&&k.jsx("div",{className:"key-platforms mt-5 pt-5 border-t border-dashed border-gray-100",children:k.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[k.jsxs("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider shrink-0",children:[d,":"]}),k.jsx("div",{className:"flex flex-wrap gap-2",children:k.jsx(Jt,{value:M.keyPlatforms.join(", "),path:`experience.${R}.keyPlatforms`,transformValue:L=>L.split(",").map(I=>I.trim()),className:"w-full",renderChildren:L=>k.jsx("div",{className:"flex flex-wrap gap-2",children:String(L).split(",").map((I,U)=>k.jsxs("span",{className:"platform-badge inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-indigo-50 border border-indigo-100 text-indigo-700 text-xs font-medium hover:bg-indigo-100 transition-colors cursor-default",children:[k.jsx(_T,{size:12}),I.trim()]},U))})})})]})})]})]}),k.jsx("div",{className:"company-roles space-y-10",children:M.roles.map((L,I)=>{var U;return k.jsxs("div",{className:"role-item relative pl-8 md:pl-0",children:[k.jsx("div",{className:"absolute left-0 top-2 bottom-0 w-0.5 bg-gray-100 md:hidden"}),k.jsx("div",{className:"absolute left-[-5px] top-2.5 w-3 h-3 rounded-full bg-accent border-2 border-white md:hidden shadow-sm z-10"}),k.jsxs("div",{className:"grid md:grid-cols-[250px_1fr] gap-6 md:gap-10",children:[k.jsxs("div",{className:"role-meta md:text-right shrink-0",children:[k.jsx("h4",{className:"role-title text-lg font-bold text-primary leading-tight mb-2",children:k.jsx(Jt,{value:L.title,path:`experience.${R}.roles.${I}.title`})}),k.jsxs("div",{className:"role-duration inline-flex md:flex md:flex-col md:items-end items-center gap-2 text-sm text-gray-500",children:[k.jsxs("div",{className:"flex items-center gap-1.5",children:[k.jsx(VL,{size:14,className:"md:hidden"}),k.jsxs("span",{className:"font-medium text-accent",children:[k.jsx(Jt,{value:L.duration.from,path:`experience.${R}.roles.${I}.duration.from`,className:"mr-1"}),"",k.jsx(Jt,{value:L.duration.to,path:`experience.${R}.roles.${I}.duration.to`,className:"ml-1"})]})]}),k.jsx("span",{className:"text-xs text-gray-400 bg-gray-50 px-2 py-0.5 rounded border border-gray-100 inline-block",children:k.jsx(Jt,{value:((U=L.durationText.split("")[1])==null?void 0:U.trim())||L.durationText,path:`experience.${R}.roles.${I}.durationText`})})]})]}),k.jsxs("div",{className:"role-content",children:[k.jsx("ul",{className:"role-responsibilities space-y-3 mb-6",children:L.responsibilities.map((P,O)=>k.jsxs("li",{className:"responsibility-item flex items-start gap-3 text-gray-600 leading-relaxed text-[15px]",children:[k.jsx(JL,{size:18,className:"text-accent mt-0.5 flex-shrink-0 opacity-80"}),k.jsx(Jt,{value:P,path:`experience.${R}.roles.${I}.responsibilities.${O}`,as:"span",className:"w-full"})]},O))}),L.skills&&L.skills.length>0&&k.jsx("div",{className:"role-skills flex flex-wrap gap-2",children:k.jsx(Jt,{value:L.skills.join(", "),path:`experience.${R}.roles.${I}.skills`,transformValue:P=>P.split(",").map(O=>O.trim()),className:"w-full"})})]})]})]},I)})})]})]},R))})]})]})},qP=()=>{var h,f,m,v,A,E;const{data:o,labels:t}=Bo(),{achievements:e,education:n,preferences:s}=o,a=((f=(h=o.labels)==null?void 0:h.achievements)==null?void 0:f.title)||t.achievements.title,l=((v=(m=o.labels)==null?void 0:m.achievements)==null?void 0:v.education)||t.achievements.education,d=((E=(A=o.labels)==null?void 0:A.achievements)==null?void 0:E.interests)||t.achievements.interests;return k.jsx("section",{id:"achievements",className:"achievements-section py-16 bg-gray-900 text-white",children:k.jsx("div",{className:"achievements-container container mx-auto px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[k.jsxs("div",{className:"achievements-column",children:[k.jsxs("div",{className:"achievements-title-group flex items-center mb-8",children:[k.jsx(BL,{className:"text-yellow-400 mr-3",size:32}),k.jsx("h2",{className:"achievements-title text-3xl font-bold",children:k.jsx(Jt,{value:a,path:"labels.achievements.title"})})]}),k.jsx("div",{className:"achievements-list space-y-4",children:e.map((_,C)=>k.jsxs("div",{className:"achievement-item flex items-start bg-gray-800 p-4 rounded-lg border border-gray-700",children:[k.jsx(DP,{className:"text-yellow-400 mr-3 mt-1 flex-shrink-0",size:18}),k.jsx(Jt,{value:_,path:`achievements.${C}`,as:"p",className:"text-gray-300 w-full",inputClassName:"text-gray-900 bg-white"})]},C))})]}),k.jsxs("div",{className:"education-column",children:[k.jsxs("div",{className:"education-header flex items-center mb-8",children:[k.jsx("div",{className:"p-2 bg-blue-900/50 rounded-lg text-blue-400 mr-3",children:k.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z"}),k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})]})}),k.jsx("h2",{className:"education-title text-3xl font-bold",children:k.jsx(Jt,{value:l,path:"labels.achievements.education"})})]}),k.jsxs("div",{className:"education-card bg-gray-800 p-6 rounded-xl border border-gray-700",children:[k.jsx("h3",{className:"education-degree text-xl font-bold text-white mb-2",children:k.jsx(Jt,{value:n.degree,path:"education.degree"})}),k.jsx("p",{className:"education-institution text-blue-400 mb-4",children:k.jsx(Jt,{value:n.institution,path:"education.institution"})}),k.jsxs("div",{className:"education-meta flex justify-between items-center text-sm text-gray-400",children:[k.jsx("span",{children:t.achievements.graduated}),k.jsx("span",{className:"education-year bg-gray-700 px-3 py-1 rounded-full",children:k.jsx(Jt,{value:n.year,path:"education.year"})})]})]}),k.jsxs("div",{className:"interests-section mt-8",children:[k.jsx("h3",{className:"interests-title text-xl font-bold mb-4",children:k.jsx(Jt,{value:d,path:"labels.achievements.interests"})}),k.jsx("div",{className:"interests-list flex flex-wrap gap-2",children:k.jsx(Jt,{value:s.industries.join(", "),path:"preferences.industries",transformValue:_=>_.split(",").map(C=>C.trim()),className:"w-full",inputClassName:"text-gray-900 bg-white",renderChildren:_=>k.jsx("div",{className:"flex flex-wrap gap-2",children:String(_).split(",").map((C,M)=>k.jsx("span",{className:"interest-item px-3 py-1 bg-gray-800 border border-gray-600 rounded-full text-sm text-gray-300",children:C.trim()},M))})})})]})]})]})})})},YP=()=>{const{data:o,labels:t}=Bo(),{basics:e}=o,n=new Date().getFullYear();return k.jsx("footer",{className:"bg-white border-t border-gray-100 py-12",children:k.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[k.jsxs("div",{className:"mb-6 md:mb-0 text-center md:text-left",children:[k.jsx("h3",{className:"text-xl font-bold text-primary mb-1",children:e.name}),k.jsx("p",{className:"text-gray-500 text-sm",children:e.title})]}),k.jsxs("div",{className:"flex space-x-6",children:[k.jsxs("a",{href:`mailto:${e.contact.email}`,className:"text-gray-400 hover:text-accent transition-colors",children:[k.jsx("span",{className:"sr-only",children:"Email"}),k.jsx(CR,{size:24})]}),k.jsxs("a",{href:e.contact.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-accent transition-colors",children:[k.jsx("span",{className:"sr-only",children:"LinkedIn"}),k.jsx(TR,{size:24})]}),k.jsxs("a",{href:`tel:${e.contact.phone}`,className:"text-gray-400 hover:text-accent transition-colors",children:[k.jsx("span",{className:"sr-only",children:"Phone"}),k.jsx(AP,{size:24})]})]})]}),k.jsxs("div",{className:"mt-8 border-t border-gray-100 pt-8 flex flex-col md:flex-row justify-between items-center text-sm text-gray-500",children:[k.jsxs("p",{children:[" ",n," ",e.name,". ",t.footer.rights]}),k.jsx("p",{className:"mt-2 md:mt-0",children:t.footer.builtWith})]})]})})};var $P={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let XP,JP;function KP(){return{geminiUrl:XP,vertexUrl:JP}}function WP(o,t,e,n){var s,a;if(!(o!=null&&o.baseUrl)){const l=KP();return t?(s=l.vertexUrl)!==null&&s!==void 0?s:e:(a=l.geminiUrl)!==null&&a!==void 0?a:n}return o.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jr{}function lt(o,t){const e=/\{([^}]+)\}/g;return o.replace(e,(n,s)=>{if(Object.prototype.hasOwnProperty.call(t,s)){const a=t[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function y(o,t,e){for(let a=0;a<t.length-1;a++){const l=t[a];if(l.endsWith("[]")){const d=l.slice(0,-2);if(!(d in o))if(Array.isArray(e))o[d]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(o[d])){const h=o[d];if(Array.isArray(e))for(let f=0;f<h.length;f++){const m=h[f];y(m,t.slice(a+1),e[f])}else for(const f of h)y(f,t.slice(a+1),e)}return}else if(l.endsWith("[0]")){const d=l.slice(0,-3);d in o||(o[d]=[{}]);const h=o[d];y(h[0],t.slice(a+1),e);return}(!o[l]||typeof o[l]!="object")&&(o[l]={}),o=o[l]}const n=t[t.length-1],s=o[n];if(s!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===s)return;if(typeof s=="object"&&typeof e=="object"&&s!==null&&e!==null)Object.assign(s,e);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else n==="_self"&&typeof e=="object"&&e!==null&&!Array.isArray(e)?Object.assign(o,e):o[n]=e}function g(o,t,e=void 0){try{if(t.length===1&&t[0]==="_self")return o;for(let n=0;n<t.length;n++){if(typeof o!="object"||o===null)return e;const s=t[n];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in o){const l=o[a];return Array.isArray(l)?l.map(d=>g(d,t.slice(n+1),e)):e}else return e}else o=o[s]}return o}catch(n){if(n instanceof TypeError)return e;throw n}}function QP(o,t){for(const[e,n]of Object.entries(t)){const s=e.split("."),a=n.split("."),l=new Set;let d=-1;for(let h=0;h<s.length;h++)if(s[h]==="*"){d=h;break}if(d!==-1&&a.length>d)for(let h=d;h<a.length;h++){const f=a[h];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&l.add(f)}Ib(o,s,a,0,l)}}function Ib(o,t,e,n,s){if(n>=t.length||typeof o!="object"||o===null)return;const a=t[n];if(a.endsWith("[]")){const l=a.slice(0,-2),d=o;if(l in d&&Array.isArray(d[l]))for(const h of d[l])Ib(h,t,e,n+1,s)}else if(a==="*"){if(typeof o=="object"&&o!==null&&!Array.isArray(o)){const l=o,d=Object.keys(l).filter(f=>!f.startsWith("_")&&!s.has(f)),h={};for(const f of d)h[f]=l[f];for(const[f,m]of Object.entries(h)){const v=[];for(const A of e.slice(n))A==="*"?v.push(f):v.push(A);y(l,v,m)}for(const f of d)delete l[f]}}else{const l=o;a in l&&Ib(l[a],t,e,n+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CT(o){if(typeof o!="string")throw new Error("fromImageBytes must be a string");return o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZP(o){const t={},e=g(o,["operationName"]);e!=null&&y(t,["operationName"],e);const n=g(o,["resourceName"]);return n!=null&&y(t,["_url","resourceName"],n),t}function jP(o){const t={},e=g(o,["name"]);e!=null&&y(t,["name"],e);const n=g(o,["metadata"]);n!=null&&y(t,["metadata"],n);const s=g(o,["done"]);s!=null&&y(t,["done"],s);const a=g(o,["error"]);a!=null&&y(t,["error"],a);const l=g(o,["response","generateVideoResponse"]);return l!=null&&y(t,["response"],eU(l)),t}function tU(o){const t={},e=g(o,["name"]);e!=null&&y(t,["name"],e);const n=g(o,["metadata"]);n!=null&&y(t,["metadata"],n);const s=g(o,["done"]);s!=null&&y(t,["done"],s);const a=g(o,["error"]);a!=null&&y(t,["error"],a);const l=g(o,["response"]);return l!=null&&y(t,["response"],nU(l)),t}function eU(o){const t={},e=g(o,["generatedSamples"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(l=>iU(l))),y(t,["generatedVideos"],a)}const n=g(o,["raiMediaFilteredCount"]);n!=null&&y(t,["raiMediaFilteredCount"],n);const s=g(o,["raiMediaFilteredReasons"]);return s!=null&&y(t,["raiMediaFilteredReasons"],s),t}function nU(o){const t={},e=g(o,["videos"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(l=>sU(l))),y(t,["generatedVideos"],a)}const n=g(o,["raiMediaFilteredCount"]);n!=null&&y(t,["raiMediaFilteredCount"],n);const s=g(o,["raiMediaFilteredReasons"]);return s!=null&&y(t,["raiMediaFilteredReasons"],s),t}function iU(o){const t={},e=g(o,["video"]);return e!=null&&y(t,["video"],uU(e)),t}function sU(o){const t={},e=g(o,["_self"]);return e!=null&&y(t,["video"],dU(e)),t}function oU(o){const t={},e=g(o,["operationName"]);return e!=null&&y(t,["_url","operationName"],e),t}function rU(o){const t={},e=g(o,["operationName"]);return e!=null&&y(t,["_url","operationName"],e),t}function aU(o){const t={},e=g(o,["name"]);e!=null&&y(t,["name"],e);const n=g(o,["metadata"]);n!=null&&y(t,["metadata"],n);const s=g(o,["done"]);s!=null&&y(t,["done"],s);const a=g(o,["error"]);a!=null&&y(t,["error"],a);const l=g(o,["response"]);return l!=null&&y(t,["response"],lU(l)),t}function lU(o){const t={},e=g(o,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(o,["parent"]);n!=null&&y(t,["parent"],n);const s=g(o,["documentName"]);return s!=null&&y(t,["documentName"],s),t}function MR(o){const t={},e=g(o,["name"]);e!=null&&y(t,["name"],e);const n=g(o,["metadata"]);n!=null&&y(t,["metadata"],n);const s=g(o,["done"]);s!=null&&y(t,["done"],s);const a=g(o,["error"]);a!=null&&y(t,["error"],a);const l=g(o,["response"]);return l!=null&&y(t,["response"],cU(l)),t}function cU(o){const t={},e=g(o,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(o,["parent"]);n!=null&&y(t,["parent"],n);const s=g(o,["documentName"]);return s!=null&&y(t,["documentName"],s),t}function uU(o){const t={},e=g(o,["uri"]);e!=null&&y(t,["uri"],e);const n=g(o,["encodedVideo"]);n!=null&&y(t,["videoBytes"],CT(n));const s=g(o,["encoding"]);return s!=null&&y(t,["mimeType"],s),t}function dU(o){const t={},e=g(o,["gcsUri"]);e!=null&&y(t,["uri"],e);const n=g(o,["bytesBase64Encoded"]);n!=null&&y(t,["videoBytes"],CT(n));const s=g(o,["mimeType"]);return s!=null&&y(t,["mimeType"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var c1;(function(o){o.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",o.OUTCOME_OK="OUTCOME_OK",o.OUTCOME_FAILED="OUTCOME_FAILED",o.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(c1||(c1={}));var u1;(function(o){o.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",o.PYTHON="PYTHON"})(u1||(u1={}));var d1;(function(o){o.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",o.SILENT="SILENT",o.WHEN_IDLE="WHEN_IDLE",o.INTERRUPT="INTERRUPT"})(d1||(d1={}));var El;(function(o){o.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",o.STRING="STRING",o.NUMBER="NUMBER",o.INTEGER="INTEGER",o.BOOLEAN="BOOLEAN",o.ARRAY="ARRAY",o.OBJECT="OBJECT",o.NULL="NULL"})(El||(El={}));var h1;(function(o){o.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",o.SIMPLE_SEARCH="SIMPLE_SEARCH",o.ELASTIC_SEARCH="ELASTIC_SEARCH"})(h1||(h1={}));var f1;(function(o){o.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",o.NO_AUTH="NO_AUTH",o.API_KEY_AUTH="API_KEY_AUTH",o.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",o.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",o.OAUTH="OAUTH",o.OIDC_AUTH="OIDC_AUTH"})(f1||(f1={}));var p1;(function(o){o.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",o.HTTP_IN_QUERY="HTTP_IN_QUERY",o.HTTP_IN_HEADER="HTTP_IN_HEADER",o.HTTP_IN_PATH="HTTP_IN_PATH",o.HTTP_IN_BODY="HTTP_IN_BODY",o.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(p1||(p1={}));var m1;(function(o){o.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",o.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",o.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",o.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(m1||(m1={}));var g1;(function(o){o.UNSPECIFIED="UNSPECIFIED",o.BLOCKING="BLOCKING",o.NON_BLOCKING="NON_BLOCKING"})(g1||(g1={}));var y1;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(y1||(y1={}));var v1;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.AUTO="AUTO",o.ANY="ANY",o.NONE="NONE",o.VALIDATED="VALIDATED"})(v1||(v1={}));var A1;(function(o){o.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",o.LOW="LOW",o.MEDIUM="MEDIUM",o.HIGH="HIGH",o.MINIMAL="MINIMAL"})(A1||(A1={}));var S1;(function(o){o.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",o.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",o.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",o.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",o.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",o.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",o.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",o.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",o.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",o.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",o.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(S1||(S1={}));var b1;(function(o){o.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",o.SEVERITY="SEVERITY",o.PROBABILITY="PROBABILITY"})(b1||(b1={}));var E1;(function(o){o.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE",o.OFF="OFF"})(E1||(E1={}));var T1;(function(o){o.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",o.STOP="STOP",o.MAX_TOKENS="MAX_TOKENS",o.SAFETY="SAFETY",o.RECITATION="RECITATION",o.LANGUAGE="LANGUAGE",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT",o.SPII="SPII",o.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",o.IMAGE_SAFETY="IMAGE_SAFETY",o.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",o.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",o.NO_IMAGE="NO_IMAGE",o.IMAGE_RECITATION="IMAGE_RECITATION",o.IMAGE_OTHER="IMAGE_OTHER"})(T1||(T1={}));var _1;(function(o){o.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",o.NEGLIGIBLE="NEGLIGIBLE",o.LOW="LOW",o.MEDIUM="MEDIUM",o.HIGH="HIGH"})(_1||(_1={}));var C1;(function(o){o.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",o.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",o.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",o.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",o.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(C1||(C1={}));var w1;(function(o){o.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",o.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",o.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",o.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",o.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(w1||(w1={}));var x1;(function(o){o.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",o.SAFETY="SAFETY",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT",o.IMAGE_SAFETY="IMAGE_SAFETY",o.MODEL_ARMOR="MODEL_ARMOR",o.JAILBREAK="JAILBREAK"})(x1||(x1={}));var M1;(function(o){o.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",o.ON_DEMAND="ON_DEMAND",o.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(M1||(M1={}));var $0;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.AUDIO="AUDIO"})($0||($0={}));var R1;(function(o){o.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",o.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",o.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",o.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(R1||(R1={}));var N1;(function(o){o.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",o.TUNING_MODE_FULL="TUNING_MODE_FULL",o.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(N1||(N1={}));var I1;(function(o){o.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",o.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",o.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",o.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",o.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",o.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",o.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(I1||(I1={}));var Db;(function(o){o.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",o.JOB_STATE_QUEUED="JOB_STATE_QUEUED",o.JOB_STATE_PENDING="JOB_STATE_PENDING",o.JOB_STATE_RUNNING="JOB_STATE_RUNNING",o.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",o.JOB_STATE_FAILED="JOB_STATE_FAILED",o.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",o.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",o.JOB_STATE_PAUSED="JOB_STATE_PAUSED",o.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",o.JOB_STATE_UPDATING="JOB_STATE_UPDATING",o.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Db||(Db={}));var D1;(function(o){o.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",o.TUNING_TASK_I2V="TUNING_TASK_I2V",o.TUNING_TASK_T2V="TUNING_TASK_T2V",o.TUNING_TASK_R2V="TUNING_TASK_R2V"})(D1||(D1={}));var k1;(function(o){o.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",o.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",o.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",o.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",o.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(k1||(k1={}));var kb;(function(o){o.COLLECTION="COLLECTION"})(kb||(kb={}));var L1;(function(o){o.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",o.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",o.BALANCED="BALANCED",o.PRIORITIZE_COST="PRIORITIZE_COST"})(L1||(L1={}));var P1;(function(o){o.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",o.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(P1||(P1={}));var U1;(function(o){o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE"})(U1||(U1={}));var O1;(function(o){o.DONT_ALLOW="DONT_ALLOW",o.ALLOW_ADULT="ALLOW_ADULT",o.ALLOW_ALL="ALLOW_ALL"})(O1||(O1={}));var B1;(function(o){o.auto="auto",o.en="en",o.ja="ja",o.ko="ko",o.hi="hi",o.zh="zh",o.pt="pt",o.es="es"})(B1||(B1={}));var F1;(function(o){o.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",o.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",o.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",o.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",o.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(F1||(F1={}));var H1;(function(o){o.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",o.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",o.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",o.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(H1||(H1={}));var G1;(function(o){o.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",o.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",o.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",o.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(G1||(G1={}));var z1;(function(o){o.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",o.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",o.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",o.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",o.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",o.EDIT_MODE_STYLE="EDIT_MODE_STYLE",o.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",o.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(z1||(z1={}));var V1;(function(o){o.FOREGROUND="FOREGROUND",o.BACKGROUND="BACKGROUND",o.PROMPT="PROMPT",o.SEMANTIC="SEMANTIC",o.INTERACTIVE="INTERACTIVE"})(V1||(V1={}));var q1;(function(o){o.ASSET="ASSET",o.STYLE="STYLE"})(q1||(q1={}));var Y1;(function(o){o.INSERT="INSERT",o.REMOVE="REMOVE",o.REMOVE_STATIC="REMOVE_STATIC",o.OUTPAINT="OUTPAINT"})(Y1||(Y1={}));var $1;(function(o){o.OPTIMIZED="OPTIMIZED",o.LOSSLESS="LOSSLESS"})($1||($1={}));var X1;(function(o){o.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",o.PREFERENCE_TUNING="PREFERENCE_TUNING",o.DISTILLATION="DISTILLATION"})(X1||(X1={}));var J1;(function(o){o.STATE_UNSPECIFIED="STATE_UNSPECIFIED",o.STATE_PENDING="STATE_PENDING",o.STATE_ACTIVE="STATE_ACTIVE",o.STATE_FAILED="STATE_FAILED"})(J1||(J1={}));var K1;(function(o){o.STATE_UNSPECIFIED="STATE_UNSPECIFIED",o.PROCESSING="PROCESSING",o.ACTIVE="ACTIVE",o.FAILED="FAILED"})(K1||(K1={}));var W1;(function(o){o.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",o.UPLOADED="UPLOADED",o.GENERATED="GENERATED",o.REGISTERED="REGISTERED"})(W1||(W1={}));var Q1;(function(o){o.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",o.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",o.RESPONSE_REJECTED="RESPONSE_REJECTED",o.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Q1||(Q1={}));var Z1;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.VIDEO="VIDEO",o.AUDIO="AUDIO",o.DOCUMENT="DOCUMENT"})(Z1||(Z1={}));var j1;(function(o){o.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",o.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",o.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(j1||(j1={}));var tM;(function(o){o.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",o.ACTIVITY_START="ACTIVITY_START",o.ACTIVITY_END="ACTIVITY_END"})(tM||(tM={}));var eM;(function(o){o.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",o.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",o.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(eM||(eM={}));var nM;(function(o){o.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",o.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",o.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(nM||(nM={}));var iM;(function(o){o.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",o.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",o.NO_INTERRUPTION="NO_INTERRUPTION"})(iM||(iM={}));var sM;(function(o){o.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",o.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",o.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(sM||(sM={}));var oM;(function(o){o.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",o.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",o.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",o.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",o.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",o.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",o.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",o.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",o.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",o.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",o.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",o.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",o.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(oM||(oM={}));var rM;(function(o){o.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",o.QUALITY="QUALITY",o.DIVERSITY="DIVERSITY",o.VOCALIZATION="VOCALIZATION"})(rM||(rM={}));var dd;(function(o){o.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",o.PLAY="PLAY",o.PAUSE="PAUSE",o.STOP="STOP",o.RESET_CONTEXT="RESET_CONTEXT"})(dd||(dd={}));class Lb{constructor(t){const e={};for(const n of t.headers.entries())e[n[0]]=n[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class Kf{get text(){var t,e,n,s,a,l,d,h;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",m=!1;const v=[];for(const A of(h=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[E,_]of Object.entries(A))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(_!==null||_!==void 0)&&v.push(E);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;m=!0,f+=A.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?f:void 0}get data(){var t,e,n,s,a,l,d,h;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const m=[];for(const v of(h=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[A,E]of Object.entries(v))A!=="inlineData"&&(E!==null||E!==void 0)&&m.push(A);v.inlineData&&typeof v.inlineData.data=="string"&&(f+=atob(v.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var t,e,n,s,a,l,d,h;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(h=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var t,e,n,s,a,l,d,h,f;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(h=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return(f=m==null?void 0:m[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var t,e,n,s,a,l,d,h,f;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(h=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return(f=m==null?void 0:m[0])===null||f===void 0?void 0:f.output}}class aM{}class lM{}class hU{}class fU{}class pU{}class mU{}class cM{}class uM{}class dM{}class gU{}class X0{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const n=new X0;let s;const a=t;return e?s=tU(a):s=jP(a),Object.assign(n,s),n}}class hM{}class fM{}class pM{}class mM{}class yU{}class vU{}class AU{}class wT{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const n=new wT,a=aU(t);return Object.assign(n,a),n}}class SU{}class bU{}class EU{}class TU{}class gM{}class _U{get text(){var t,e,n;let s="",a=!1;const l=[];for(const d of(n=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&n!==void 0?n:[]){for(const[h,f]of Object.entries(d))h!=="text"&&h!=="thought"&&f!==null&&l.push(h);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,s+=d.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var t,e,n;let s="";const a=[];for(const l of(n=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&n!==void 0?n:[]){for(const[d,h]of Object.entries(l))d!=="inlineData"&&h!==null&&a.push(d);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class CU{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class xT{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const n=new xT,a=MR(t);return Object.assign(n,a),n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function te(o,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(o.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function RR(o,t){const e=te(o,t);return e?e.startsWith("publishers/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/${e}`:e.startsWith("models/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/publishers/google/${e}`:e:""}function NR(o){return Array.isArray(o)?o.map(t=>J0(t)):[J0(o)]}function J0(o){if(typeof o=="object"&&o!==null)return o;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof o}`)}function IR(o){const t=J0(o);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function DR(o){const t=J0(o);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function yM(o){if(o==null)throw new Error("PartUnion is required");if(typeof o=="object")return o;if(typeof o=="string")return{text:o};throw new Error(`Unsupported part type: ${typeof o}`)}function kR(o){if(o==null||Array.isArray(o)&&o.length===0)throw new Error("PartListUnion is required");return Array.isArray(o)?o.map(t=>yM(t)):[yM(o)]}function Pb(o){return o!=null&&typeof o=="object"&&"parts"in o&&Array.isArray(o.parts)}function vM(o){return o!=null&&typeof o=="object"&&"functionCall"in o}function AM(o){return o!=null&&typeof o=="object"&&"functionResponse"in o}function $n(o){if(o==null)throw new Error("ContentUnion is required");return Pb(o)?o:{role:"user",parts:kR(o)}}function MT(o,t){if(!t)return[];if(o.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const n=$n(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(o.isVertexAI()){const e=$n(t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>$n(e)):[$n(t)]}function Is(o){if(o==null||Array.isArray(o)&&o.length===0)throw new Error("contents are required");if(!Array.isArray(o)){if(vM(o)||AM(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[$n(o)]}const t=[],e=[],n=Pb(o[0]);for(const s of o){const a=Pb(s);if(a!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)t.push(s);else{if(vM(s)||AM(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");e.push(s)}}return n||t.push({role:"user",parts:kR(e)}),t}function wU(o,t){o.includes("null")&&(t.nullable=!0);const e=o.filter(n=>n!=="null");if(e.length===1)t.type=Object.values(El).includes(e[0].toUpperCase())?e[0].toUpperCase():El.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const n of e)t.anyOf.push({type:Object.values(El).includes(n.toUpperCase())?n.toUpperCase():El.TYPE_UNSPECIFIED})}}function Ad(o){const t={},e=["items"],n=["anyOf"],s=["properties"];if(o.type&&o.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=o.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(t.nullable=!0,o=a[1]):a[1].type==="null"&&(t.nullable=!0,o=a[0])),o.type instanceof Array&&wU(o.type,t);for(const[l,d]of Object.entries(o))if(d!=null)if(l=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;t.type=Object.values(El).includes(d.toUpperCase())?d.toUpperCase():El.TYPE_UNSPECIFIED}else if(e.includes(l))t[l]=Ad(d);else if(n.includes(l)){const h=[];for(const f of d){if(f.type=="null"){t.nullable=!0;continue}h.push(Ad(f))}t[l]=h}else if(s.includes(l)){const h={};for(const[f,m]of Object.entries(d))h[f]=Ad(m);t[l]=h}else{if(l==="additionalProperties")continue;t[l]=d}return t}function RT(o){return Ad(o)}function NT(o){if(typeof o=="object")return o;if(typeof o=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:o}}};throw new Error(`Unsupported speechConfig type: ${typeof o}`)}function IT(o){if("multiSpeakerVoiceConfig"in o)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return o}function Wh(o){if(o.functionDeclarations)for(const t of o.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Ad(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Ad(t.response));return o}function Qh(o){if(o==null)throw new Error("tools is required");if(!Array.isArray(o))throw new Error("tools is required and must be an array of Tools");const t=[];for(const e of o)t.push(e);return t}function xU(o,t,e,n=1){const s=!t.startsWith(`${e}/`)&&t.split("/").length===n;return o.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${o.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${o.getProject()}/locations/${o.getLocation()}/${t}`:s?`projects/${o.getProject()}/locations/${o.getLocation()}/${e}/${t}`:t:s?`${e}/${t}`:t}function ta(o,t){if(typeof t!="string")throw new Error("name must be a string");return xU(o,t,"cachedContents")}function LR(o){switch(o){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return o}}function wl(o){return CT(o)}function MU(o){return o!=null&&typeof o=="object"&&"name"in o}function RU(o){return o!=null&&typeof o=="object"&&"video"in o}function NU(o){return o!=null&&typeof o=="object"&&"uri"in o}function PR(o){var t;let e;if(MU(o)&&(e=o.name),!(NU(o)&&(e=o.uri,e===void 0))&&!(RU(o)&&(e=(t=o.video)===null||t===void 0?void 0:t.uri,e===void 0))){if(typeof o=="string"&&(e=o),e===void 0)throw new Error("Could not extract file name from the provided input.");if(e.startsWith("https://")){const s=e.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${e}`);e=s[0]}else e.startsWith("files/")&&(e=e.split("files/")[1]);return e}}function UR(o,t){let e;return o.isVertexAI()?e=t?"publishers/google/models":"models":e=t?"models":"tunedModels",e}function OR(o){for(const t of["models","tunedModels","publisherModels"])if(IU(o,t))return o[t];return[]}function IU(o,t){return o!==null&&typeof o=="object"&&t in o}function DU(o,t={}){const e=o,n={name:e.name,description:e.description,parametersJsonSchema:e.inputSchema};return e.outputSchema&&(n.responseJsonSchema=e.outputSchema),t.behavior&&(n.behavior=t.behavior),{functionDeclarations:[n]}}function kU(o,t={}){const e=[],n=new Set;for(const s of o){const a=s.name;if(n.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);n.add(a);const l=DU(s,t);l.functionDeclarations&&e.push(...l.functionDeclarations)}return{functionDeclarations:e}}function BR(o,t){let e;if(typeof t=="string")if(o.isVertexAI())if(t.startsWith("gs://"))e={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))e={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))e={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(o.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");e={inlinedRequests:t}}else e=t;const n=[e.gcsUri,e.bigqueryUri].filter(Boolean).length,s=[e.inlinedRequests,e.fileName].filter(Boolean).length;if(o.isVertexAI()){if(s>0||n!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return e}function LU(o){if(typeof o!="string")return o;const t=o;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function FR(o){if(typeof o!="object"||o===null)return{};const t=o,e=t.inlinedResponses;if(typeof e!="object"||e===null)return o;const s=e.inlinedResponses;if(!Array.isArray(s)||s.length===0)return o;let a=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const h=l.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),o}function Zh(o,t){const e=t;if(!o.isVertexAI()){if(/batches\/[^/]+$/.test(e))return e.split("/").pop();throw new Error(`Invalid batch job name: ${e}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(e))return e.split("/").pop();if(/^\d+$/.test(e))return e;throw new Error(`Invalid batch job name: ${e}.`)}function HR(o){const t=o;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PU(o){const t={},e=g(o,["responsesFile"]);e!=null&&y(t,["fileName"],e);const n=g(o,["inlinedResponses","inlinedResponses"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>mO(l))),y(t,["inlinedResponses"],a)}const s=g(o,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(t,["inlinedEmbedContentResponses"],a)}return t}function UU(o){const t={},e=g(o,["predictionsFormat"]);e!=null&&y(t,["format"],e);const n=g(o,["gcsDestination","outputUriPrefix"]);n!=null&&y(t,["gcsUri"],n);const s=g(o,["bigqueryDestination","outputUri"]);return s!=null&&y(t,["bigqueryUri"],s),t}function OU(o){const t={},e=g(o,["format"]);e!=null&&y(t,["predictionsFormat"],e);const n=g(o,["gcsUri"]);n!=null&&y(t,["gcsDestination","outputUriPrefix"],n);const s=g(o,["bigqueryUri"]);if(s!=null&&y(t,["bigqueryDestination","outputUri"],s),g(o,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(o,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(g(o,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function l0(o){const t={},e=g(o,["name"]);e!=null&&y(t,["name"],e);const n=g(o,["metadata","displayName"]);n!=null&&y(t,["displayName"],n);const s=g(o,["metadata","state"]);s!=null&&y(t,["state"],HR(s));const a=g(o,["metadata","createTime"]);a!=null&&y(t,["createTime"],a);const l=g(o,["metadata","endTime"]);l!=null&&y(t,["endTime"],l);const d=g(o,["metadata","updateTime"]);d!=null&&y(t,["updateTime"],d);const h=g(o,["metadata","model"]);h!=null&&y(t,["model"],h);const f=g(o,["metadata","output"]);return f!=null&&y(t,["dest"],PU(FR(f))),t}function Ub(o){const t={},e=g(o,["name"]);e!=null&&y(t,["name"],e);const n=g(o,["displayName"]);n!=null&&y(t,["displayName"],n);const s=g(o,["state"]);s!=null&&y(t,["state"],HR(s));const a=g(o,["error"]);a!=null&&y(t,["error"],a);const l=g(o,["createTime"]);l!=null&&y(t,["createTime"],l);const d=g(o,["startTime"]);d!=null&&y(t,["startTime"],d);const h=g(o,["endTime"]);h!=null&&y(t,["endTime"],h);const f=g(o,["updateTime"]);f!=null&&y(t,["updateTime"],f);const m=g(o,["model"]);m!=null&&y(t,["model"],m);const v=g(o,["inputConfig"]);v!=null&&y(t,["src"],BU(v));const A=g(o,["outputConfig"]);A!=null&&y(t,["dest"],UU(FR(A)));const E=g(o,["completionStats"]);return E!=null&&y(t,["completionStats"],E),t}function BU(o){const t={},e=g(o,["instancesFormat"]);e!=null&&y(t,["format"],e);const n=g(o,["gcsSource","uris"]);n!=null&&y(t,["gcsUri"],n);const s=g(o,["bigquerySource","inputUri"]);return s!=null&&y(t,["bigqueryUri"],s),t}function FU(o,t){const e={};if(g(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(g(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=g(t,["fileName"]);n!=null&&y(e,["fileName"],n);const s=g(t,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>pO(o,l))),y(e,["requests","requests"],a)}return e}function HU(o){const t={},e=g(o,["format"]);e!=null&&y(t,["instancesFormat"],e);const n=g(o,["gcsUri"]);n!=null&&y(t,["gcsSource","uris"],n);const s=g(o,["bigqueryUri"]);if(s!=null&&y(t,["bigquerySource","inputUri"],s),g(o,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(o,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function GU(o){const t={},e=g(o,["data"]);if(e!=null&&y(t,["data"],e),g(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(o,["mimeType"]);return n!=null&&y(t,["mimeType"],n),t}function zU(o,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],Zh(o,n)),e}function VU(o,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],Zh(o,n)),e}function qU(o){const t={},e=g(o,["content"]);e!=null&&y(t,["content"],e);const n=g(o,["citationMetadata"]);n!=null&&y(t,["citationMetadata"],YU(n));const s=g(o,["tokenCount"]);s!=null&&y(t,["tokenCount"],s);const a=g(o,["finishReason"]);a!=null&&y(t,["finishReason"],a);const l=g(o,["avgLogprobs"]);l!=null&&y(t,["avgLogprobs"],l);const d=g(o,["groundingMetadata"]);d!=null&&y(t,["groundingMetadata"],d);const h=g(o,["index"]);h!=null&&y(t,["index"],h);const f=g(o,["logprobsResult"]);f!=null&&y(t,["logprobsResult"],f);const m=g(o,["safetyRatings"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(E=>E)),y(t,["safetyRatings"],A)}const v=g(o,["urlContextMetadata"]);return v!=null&&y(t,["urlContextMetadata"],v),t}function YU(o){const t={},e=g(o,["citationSources"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(s=>s)),y(t,["citations"],n)}return t}function GR(o){const t={},e=g(o,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(a=>EO(a))),y(t,["parts"],s)}const n=g(o,["role"]);return n!=null&&y(t,["role"],n),t}function $U(o,t){const e={},n=g(o,["displayName"]);if(t!==void 0&&n!=null&&y(t,["batch","displayName"],n),g(o,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return e}function XU(o,t){const e={},n=g(o,["displayName"]);t!==void 0&&n!=null&&y(t,["displayName"],n);const s=g(o,["dest"]);return t!==void 0&&s!=null&&y(t,["outputConfig"],OU(LU(s))),e}function SM(o,t){const e={},n=g(t,["model"]);n!=null&&y(e,["_url","model"],te(o,n));const s=g(t,["src"]);s!=null&&y(e,["batch","inputConfig"],FU(o,BR(o,s)));const a=g(t,["config"]);return a!=null&&$U(a,e),e}function JU(o,t){const e={},n=g(t,["model"]);n!=null&&y(e,["model"],te(o,n));const s=g(t,["src"]);s!=null&&y(e,["inputConfig"],HU(BR(o,s)));const a=g(t,["config"]);return a!=null&&XU(a,e),e}function KU(o,t){const e={},n=g(o,["displayName"]);return t!==void 0&&n!=null&&y(t,["batch","displayName"],n),e}function WU(o,t){const e={},n=g(t,["model"]);n!=null&&y(e,["_url","model"],te(o,n));const s=g(t,["src"]);s!=null&&y(e,["batch","inputConfig"],iO(o,s));const a=g(t,["config"]);return a!=null&&KU(a,e),e}function QU(o,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],Zh(o,n)),e}function ZU(o,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],Zh(o,n)),e}function jU(o){const t={},e=g(o,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(o,["name"]);n!=null&&y(t,["name"],n);const s=g(o,["done"]);s!=null&&y(t,["done"],s);const a=g(o,["error"]);return a!=null&&y(t,["error"],a),t}function tO(o){const t={},e=g(o,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(o,["name"]);n!=null&&y(t,["name"],n);const s=g(o,["done"]);s!=null&&y(t,["done"],s);const a=g(o,["error"]);return a!=null&&y(t,["error"],a),t}function eO(o,t){const e={},n=g(t,["contents"]);if(n!=null){let a=MT(o,n);Array.isArray(a)&&(a=a.map(l=>l)),y(e,["requests[]","request","content"],a)}const s=g(t,["config"]);return s!=null&&(y(e,["_self"],nO(s,e)),QP(e,{"requests[].*":"requests[].request.*"})),e}function nO(o,t){const e={},n=g(o,["taskType"]);t!==void 0&&n!=null&&y(t,["requests[]","taskType"],n);const s=g(o,["title"]);t!==void 0&&s!=null&&y(t,["requests[]","title"],s);const a=g(o,["outputDimensionality"]);if(t!==void 0&&a!=null&&y(t,["requests[]","outputDimensionality"],a),g(o,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(o,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return e}function iO(o,t){const e={},n=g(t,["fileName"]);n!=null&&y(e,["file_name"],n);const s=g(t,["inlinedRequests"]);return s!=null&&y(e,["requests"],eO(o,s)),e}function sO(o){const t={};if(g(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(o,["fileUri"]);e!=null&&y(t,["fileUri"],e);const n=g(o,["mimeType"]);return n!=null&&y(t,["mimeType"],n),t}function oO(o){const t={},e=g(o,["id"]);e!=null&&y(t,["id"],e);const n=g(o,["args"]);n!=null&&y(t,["args"],n);const s=g(o,["name"]);if(s!=null&&y(t,["name"],s),g(o,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(o,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function rO(o){const t={},e=g(o,["allowedFunctionNames"]);e!=null&&y(t,["allowedFunctionNames"],e);const n=g(o,["mode"]);if(n!=null&&y(t,["mode"],n),g(o,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function aO(o,t,e){const n={},s=g(t,["systemInstruction"]);e!==void 0&&s!=null&&y(e,["systemInstruction"],GR($n(s)));const a=g(t,["temperature"]);a!=null&&y(n,["temperature"],a);const l=g(t,["topP"]);l!=null&&y(n,["topP"],l);const d=g(t,["topK"]);d!=null&&y(n,["topK"],d);const h=g(t,["candidateCount"]);h!=null&&y(n,["candidateCount"],h);const f=g(t,["maxOutputTokens"]);f!=null&&y(n,["maxOutputTokens"],f);const m=g(t,["stopSequences"]);m!=null&&y(n,["stopSequences"],m);const v=g(t,["responseLogprobs"]);v!=null&&y(n,["responseLogprobs"],v);const A=g(t,["logprobs"]);A!=null&&y(n,["logprobs"],A);const E=g(t,["presencePenalty"]);E!=null&&y(n,["presencePenalty"],E);const _=g(t,["frequencyPenalty"]);_!=null&&y(n,["frequencyPenalty"],_);const C=g(t,["seed"]);C!=null&&y(n,["seed"],C);const M=g(t,["responseMimeType"]);M!=null&&y(n,["responseMimeType"],M);const R=g(t,["responseSchema"]);R!=null&&y(n,["responseSchema"],RT(R));const L=g(t,["responseJsonSchema"]);if(L!=null&&y(n,["responseJsonSchema"],L),g(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=g(t,["safetySettings"]);if(e!==void 0&&I!=null){let gt=I;Array.isArray(gt)&&(gt=gt.map(ct=>TO(ct))),y(e,["safetySettings"],gt)}const U=g(t,["tools"]);if(e!==void 0&&U!=null){let gt=Qh(U);Array.isArray(gt)&&(gt=gt.map(ct=>CO(Wh(ct)))),y(e,["tools"],gt)}const P=g(t,["toolConfig"]);if(e!==void 0&&P!=null&&y(e,["toolConfig"],_O(P)),g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=g(t,["cachedContent"]);e!==void 0&&O!=null&&y(e,["cachedContent"],ta(o,O));const F=g(t,["responseModalities"]);F!=null&&y(n,["responseModalities"],F);const Z=g(t,["mediaResolution"]);Z!=null&&y(n,["mediaResolution"],Z);const X=g(t,["speechConfig"]);if(X!=null&&y(n,["speechConfig"],NT(X)),g(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const nt=g(t,["thinkingConfig"]);nt!=null&&y(n,["thinkingConfig"],nt);const it=g(t,["imageConfig"]);it!=null&&y(n,["imageConfig"],fO(it));const dt=g(t,["enableEnhancedCivicAnswers"]);if(dt!=null&&y(n,["enableEnhancedCivicAnswers"],dt),g(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return n}function lO(o){const t={},e=g(o,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(o,["candidates"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(f=>qU(f))),y(t,["candidates"],h)}const s=g(o,["modelVersion"]);s!=null&&y(t,["modelVersion"],s);const a=g(o,["promptFeedback"]);a!=null&&y(t,["promptFeedback"],a);const l=g(o,["responseId"]);l!=null&&y(t,["responseId"],l);const d=g(o,["usageMetadata"]);return d!=null&&y(t,["usageMetadata"],d),t}function cO(o,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],Zh(o,n)),e}function uO(o,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],Zh(o,n)),e}function dO(o){const t={};if(g(o,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(o,["enableWidget"]);return e!=null&&y(t,["enableWidget"],e),t}function hO(o){const t={};if(g(o,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(o,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(o,["timeRangeFilter"]);return e!=null&&y(t,["timeRangeFilter"],e),t}function fO(o){const t={},e=g(o,["aspectRatio"]);e!=null&&y(t,["aspectRatio"],e);const n=g(o,["imageSize"]);if(n!=null&&y(t,["imageSize"],n),g(o,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(g(o,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(o,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function pO(o,t){const e={},n=g(t,["model"]);n!=null&&y(e,["request","model"],te(o,n));const s=g(t,["contents"]);if(s!=null){let d=Is(s);Array.isArray(d)&&(d=d.map(h=>GR(h))),y(e,["request","contents"],d)}const a=g(t,["metadata"]);a!=null&&y(e,["metadata"],a);const l=g(t,["config"]);return l!=null&&y(e,["request","generationConfig"],aO(o,l,g(e,["request"],{}))),e}function mO(o){const t={},e=g(o,["response"]);e!=null&&y(t,["response"],lO(e));const n=g(o,["metadata"]);n!=null&&y(t,["metadata"],n);const s=g(o,["error"]);return s!=null&&y(t,["error"],s),t}function gO(o,t){const e={},n=g(o,["pageSize"]);t!==void 0&&n!=null&&y(t,["_query","pageSize"],n);const s=g(o,["pageToken"]);if(t!==void 0&&s!=null&&y(t,["_query","pageToken"],s),g(o,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return e}function yO(o,t){const e={},n=g(o,["pageSize"]);t!==void 0&&n!=null&&y(t,["_query","pageSize"],n);const s=g(o,["pageToken"]);t!==void 0&&s!=null&&y(t,["_query","pageToken"],s);const a=g(o,["filter"]);return t!==void 0&&a!=null&&y(t,["_query","filter"],a),e}function vO(o){const t={},e=g(o,["config"]);return e!=null&&gO(e,t),t}function AO(o){const t={},e=g(o,["config"]);return e!=null&&yO(e,t),t}function SO(o){const t={},e=g(o,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(o,["nextPageToken"]);n!=null&&y(t,["nextPageToken"],n);const s=g(o,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l0(l))),y(t,["batchJobs"],a)}return t}function bO(o){const t={},e=g(o,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(o,["nextPageToken"]);n!=null&&y(t,["nextPageToken"],n);const s=g(o,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Ub(l))),y(t,["batchJobs"],a)}return t}function EO(o){const t={},e=g(o,["mediaResolution"]);e!=null&&y(t,["mediaResolution"],e);const n=g(o,["codeExecutionResult"]);n!=null&&y(t,["codeExecutionResult"],n);const s=g(o,["executableCode"]);s!=null&&y(t,["executableCode"],s);const a=g(o,["fileData"]);a!=null&&y(t,["fileData"],sO(a));const l=g(o,["functionCall"]);l!=null&&y(t,["functionCall"],oO(l));const d=g(o,["functionResponse"]);d!=null&&y(t,["functionResponse"],d);const h=g(o,["inlineData"]);h!=null&&y(t,["inlineData"],GU(h));const f=g(o,["text"]);f!=null&&y(t,["text"],f);const m=g(o,["thought"]);m!=null&&y(t,["thought"],m);const v=g(o,["thoughtSignature"]);v!=null&&y(t,["thoughtSignature"],v);const A=g(o,["videoMetadata"]);return A!=null&&y(t,["videoMetadata"],A),t}function TO(o){const t={},e=g(o,["category"]);if(e!=null&&y(t,["category"],e),g(o,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=g(o,["threshold"]);return n!=null&&y(t,["threshold"],n),t}function _O(o){const t={},e=g(o,["retrievalConfig"]);e!=null&&y(t,["retrievalConfig"],e);const n=g(o,["functionCallingConfig"]);return n!=null&&y(t,["functionCallingConfig"],rO(n)),t}function CO(o){const t={};if(g(o,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=g(o,["computerUse"]);e!=null&&y(t,["computerUse"],e);const n=g(o,["fileSearch"]);n!=null&&y(t,["fileSearch"],n);const s=g(o,["codeExecution"]);if(s!=null&&y(t,["codeExecution"],s),g(o,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(o,["functionDeclarations"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(v=>v)),y(t,["functionDeclarations"],m)}const l=g(o,["googleMaps"]);l!=null&&y(t,["googleMaps"],dO(l));const d=g(o,["googleSearch"]);d!=null&&y(t,["googleSearch"],hO(d));const h=g(o,["googleSearchRetrieval"]);h!=null&&y(t,["googleSearchRetrieval"],h);const f=g(o,["urlContext"]);return f!=null&&y(t,["urlContext"],f),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Kr;(function(o){o.PAGED_ITEM_BATCH_JOBS="batchJobs",o.PAGED_ITEM_MODELS="models",o.PAGED_ITEM_TUNING_JOBS="tuningJobs",o.PAGED_ITEM_FILES="files",o.PAGED_ITEM_CACHED_CONTENTS="cachedContents",o.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",o.PAGED_ITEM_DOCUMENTS="documents"})(Kr||(Kr={}));class pu{constructor(t,e,n,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,n,s)}init(t,e,n){var s,a;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.sdkHttpResponseInternal=e==null?void 0:e.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!n||Object.keys(n).length===0?l={config:{}}:typeof n=="object"?l=Object.assign({},n):l=n,l.config&&(l.config.pageToken=e.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wO extends jr{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new pu(Kr.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(e),e),this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)}}createInlinedGenerateContentRequest(t){const e=SM(this.apiClient,t),n=e._url,s=lt("{model}:batchGenerateContent",n),d=e.batch.inputConfig.requests,h=d.requests,f=[];for(const m of h){const v=Object.assign({},m);if(v.systemInstruction){const A=v.systemInstruction;delete v.systemInstruction;const E=v.request;E.systemInstruction=A,v.request=E}f.push(v)}return d.requests=f,delete e.config,delete e._url,delete e._query,{path:s,body:e}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,e){const n=e?Object.assign({},e):{},s=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${s}`),n.dest===void 0){const a=this.getGcsUri(t),l=this.getBigqueryUri(t);if(a)a.endsWith(".jsonl")?n.dest=`${a.slice(0,-6)}/dest`:n.dest=`${a}_dest_${s}`;else if(l)n.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=JU(this.apiClient,t);return d=lt("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l.then(m=>Ub(m))}else{const f=SM(this.apiClient,t);return d=lt("{model}:batchGenerateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l.then(m=>l0(m))}}async createEmbeddingsInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=WU(this.apiClient,t);return a=lt("{model}:asyncBatchEmbedContent",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>l0(h))}}async get(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=uO(this.apiClient,t);return d=lt("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l.then(m=>Ub(m))}else{const f=cO(this.apiClient,t);return d=lt("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l.then(m=>l0(m))}}async cancel(t){var e,n,s,a;let l="",d={};if(this.apiClient.isVertexAI()){const h=VU(this.apiClient,t);l=lt("batchPredictionJobs/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal})}else{const h=zU(this.apiClient,t);l=lt("batches/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=AO(t);return d=lt("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=bO(m),A=new gM;return Object.assign(A,v),A})}else{const f=vO(t);return d=lt("batches",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=SO(m),A=new gM;return Object.assign(A,v),A})}}async delete(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=ZU(this.apiClient,t);return d=lt("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>tO(m))}else{const f=QU(this.apiClient,t);return d=lt("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>jU(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xO(o){const t={},e=g(o,["data"]);if(e!=null&&y(t,["data"],e),g(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(o,["mimeType"]);return n!=null&&y(t,["mimeType"],n),t}function bM(o){const t={},e=g(o,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(a=>WO(a))),y(t,["parts"],s)}const n=g(o,["role"]);return n!=null&&y(t,["role"],n),t}function MO(o,t){const e={},n=g(o,["ttl"]);t!==void 0&&n!=null&&y(t,["ttl"],n);const s=g(o,["expireTime"]);t!==void 0&&s!=null&&y(t,["expireTime"],s);const a=g(o,["displayName"]);t!==void 0&&a!=null&&y(t,["displayName"],a);const l=g(o,["contents"]);if(t!==void 0&&l!=null){let m=Is(l);Array.isArray(m)&&(m=m.map(v=>bM(v))),y(t,["contents"],m)}const d=g(o,["systemInstruction"]);t!==void 0&&d!=null&&y(t,["systemInstruction"],bM($n(d)));const h=g(o,["tools"]);if(t!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(v=>ZO(v))),y(t,["tools"],m)}const f=g(o,["toolConfig"]);if(t!==void 0&&f!=null&&y(t,["toolConfig"],QO(f)),g(o,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return e}function RO(o,t){const e={},n=g(o,["ttl"]);t!==void 0&&n!=null&&y(t,["ttl"],n);const s=g(o,["expireTime"]);t!==void 0&&s!=null&&y(t,["expireTime"],s);const a=g(o,["displayName"]);t!==void 0&&a!=null&&y(t,["displayName"],a);const l=g(o,["contents"]);if(t!==void 0&&l!=null){let v=Is(l);Array.isArray(v)&&(v=v.map(A=>A)),y(t,["contents"],v)}const d=g(o,["systemInstruction"]);t!==void 0&&d!=null&&y(t,["systemInstruction"],$n(d));const h=g(o,["tools"]);if(t!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(A=>jO(A))),y(t,["tools"],v)}const f=g(o,["toolConfig"]);t!==void 0&&f!=null&&y(t,["toolConfig"],f);const m=g(o,["kmsKeyName"]);return t!==void 0&&m!=null&&y(t,["encryption_spec","kmsKeyName"],m),e}function NO(o,t){const e={},n=g(t,["model"]);n!=null&&y(e,["model"],RR(o,n));const s=g(t,["config"]);return s!=null&&MO(s,e),e}function IO(o,t){const e={},n=g(t,["model"]);n!=null&&y(e,["model"],RR(o,n));const s=g(t,["config"]);return s!=null&&RO(s,e),e}function DO(o,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],ta(o,n)),e}function kO(o,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],ta(o,n)),e}function LO(o){const t={},e=g(o,["sdkHttpResponse"]);return e!=null&&y(t,["sdkHttpResponse"],e),t}function PO(o){const t={},e=g(o,["sdkHttpResponse"]);return e!=null&&y(t,["sdkHttpResponse"],e),t}function UO(o){const t={};if(g(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(o,["fileUri"]);e!=null&&y(t,["fileUri"],e);const n=g(o,["mimeType"]);return n!=null&&y(t,["mimeType"],n),t}function OO(o){const t={},e=g(o,["id"]);e!=null&&y(t,["id"],e);const n=g(o,["args"]);n!=null&&y(t,["args"],n);const s=g(o,["name"]);if(s!=null&&y(t,["name"],s),g(o,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(o,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function BO(o){const t={},e=g(o,["allowedFunctionNames"]);e!=null&&y(t,["allowedFunctionNames"],e);const n=g(o,["mode"]);if(n!=null&&y(t,["mode"],n),g(o,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function FO(o){const t={},e=g(o,["description"]);e!=null&&y(t,["description"],e);const n=g(o,["name"]);n!=null&&y(t,["name"],n);const s=g(o,["parameters"]);s!=null&&y(t,["parameters"],s);const a=g(o,["parametersJsonSchema"]);a!=null&&y(t,["parametersJsonSchema"],a);const l=g(o,["response"]);l!=null&&y(t,["response"],l);const d=g(o,["responseJsonSchema"]);if(d!=null&&y(t,["responseJsonSchema"],d),g(o,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function HO(o,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],ta(o,n)),e}function GO(o,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],ta(o,n)),e}function zO(o){const t={};if(g(o,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(o,["enableWidget"]);return e!=null&&y(t,["enableWidget"],e),t}function VO(o){const t={};if(g(o,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(o,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(o,["timeRangeFilter"]);return e!=null&&y(t,["timeRangeFilter"],e),t}function qO(o,t){const e={},n=g(o,["pageSize"]);t!==void 0&&n!=null&&y(t,["_query","pageSize"],n);const s=g(o,["pageToken"]);return t!==void 0&&s!=null&&y(t,["_query","pageToken"],s),e}function YO(o,t){const e={},n=g(o,["pageSize"]);t!==void 0&&n!=null&&y(t,["_query","pageSize"],n);const s=g(o,["pageToken"]);return t!==void 0&&s!=null&&y(t,["_query","pageToken"],s),e}function $O(o){const t={},e=g(o,["config"]);return e!=null&&qO(e,t),t}function XO(o){const t={},e=g(o,["config"]);return e!=null&&YO(e,t),t}function JO(o){const t={},e=g(o,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(o,["nextPageToken"]);n!=null&&y(t,["nextPageToken"],n);const s=g(o,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(t,["cachedContents"],a)}return t}function KO(o){const t={},e=g(o,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(o,["nextPageToken"]);n!=null&&y(t,["nextPageToken"],n);const s=g(o,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(t,["cachedContents"],a)}return t}function WO(o){const t={},e=g(o,["mediaResolution"]);e!=null&&y(t,["mediaResolution"],e);const n=g(o,["codeExecutionResult"]);n!=null&&y(t,["codeExecutionResult"],n);const s=g(o,["executableCode"]);s!=null&&y(t,["executableCode"],s);const a=g(o,["fileData"]);a!=null&&y(t,["fileData"],UO(a));const l=g(o,["functionCall"]);l!=null&&y(t,["functionCall"],OO(l));const d=g(o,["functionResponse"]);d!=null&&y(t,["functionResponse"],d);const h=g(o,["inlineData"]);h!=null&&y(t,["inlineData"],xO(h));const f=g(o,["text"]);f!=null&&y(t,["text"],f);const m=g(o,["thought"]);m!=null&&y(t,["thought"],m);const v=g(o,["thoughtSignature"]);v!=null&&y(t,["thoughtSignature"],v);const A=g(o,["videoMetadata"]);return A!=null&&y(t,["videoMetadata"],A),t}function QO(o){const t={},e=g(o,["retrievalConfig"]);e!=null&&y(t,["retrievalConfig"],e);const n=g(o,["functionCallingConfig"]);return n!=null&&y(t,["functionCallingConfig"],BO(n)),t}function ZO(o){const t={};if(g(o,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=g(o,["computerUse"]);e!=null&&y(t,["computerUse"],e);const n=g(o,["fileSearch"]);n!=null&&y(t,["fileSearch"],n);const s=g(o,["codeExecution"]);if(s!=null&&y(t,["codeExecution"],s),g(o,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(o,["functionDeclarations"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(v=>v)),y(t,["functionDeclarations"],m)}const l=g(o,["googleMaps"]);l!=null&&y(t,["googleMaps"],zO(l));const d=g(o,["googleSearch"]);d!=null&&y(t,["googleSearch"],VO(d));const h=g(o,["googleSearchRetrieval"]);h!=null&&y(t,["googleSearchRetrieval"],h);const f=g(o,["urlContext"]);return f!=null&&y(t,["urlContext"],f),t}function jO(o){const t={},e=g(o,["retrieval"]);e!=null&&y(t,["retrieval"],e);const n=g(o,["computerUse"]);if(n!=null&&y(t,["computerUse"],n),g(o,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=g(o,["codeExecution"]);s!=null&&y(t,["codeExecution"],s);const a=g(o,["enterpriseWebSearch"]);a!=null&&y(t,["enterpriseWebSearch"],a);const l=g(o,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(A=>FO(A))),y(t,["functionDeclarations"],v)}const d=g(o,["googleMaps"]);d!=null&&y(t,["googleMaps"],d);const h=g(o,["googleSearch"]);h!=null&&y(t,["googleSearch"],h);const f=g(o,["googleSearchRetrieval"]);f!=null&&y(t,["googleSearchRetrieval"],f);const m=g(o,["urlContext"]);return m!=null&&y(t,["urlContext"],m),t}function tB(o,t){const e={},n=g(o,["ttl"]);t!==void 0&&n!=null&&y(t,["ttl"],n);const s=g(o,["expireTime"]);return t!==void 0&&s!=null&&y(t,["expireTime"],s),e}function eB(o,t){const e={},n=g(o,["ttl"]);t!==void 0&&n!=null&&y(t,["ttl"],n);const s=g(o,["expireTime"]);return t!==void 0&&s!=null&&y(t,["expireTime"],s),e}function nB(o,t){const e={},n=g(t,["name"]);n!=null&&y(e,["_url","name"],ta(o,n));const s=g(t,["config"]);return s!=null&&tB(s,e),e}function iB(o,t){const e={},n=g(t,["name"]);n!=null&&y(e,["_url","name"],ta(o,n));const s=g(t,["config"]);return s!=null&&eB(s,e),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sB extends jr{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new pu(Kr.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(e),e)}async create(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=IO(this.apiClient,t);return d=lt("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const f=NO(this.apiClient,t);return d=lt("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async get(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=GO(this.apiClient,t);return d=lt("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const f=HO(this.apiClient,t);return d=lt("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async delete(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=kO(this.apiClient,t);return d=lt("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=PO(m),A=new pM;return Object.assign(A,v),A})}else{const f=DO(this.apiClient,t);return d=lt("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=LO(m),A=new pM;return Object.assign(A,v),A})}}async update(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=iB(this.apiClient,t);return d=lt("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const f=nB(this.apiClient,t);return d=lt("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async listInternal(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=XO(t);return d=lt("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=KO(m),A=new mM;return Object.assign(A,v),A})}else{const f=$O(t);return d=lt("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=JO(m),A=new mM;return Object.assign(A,v),A})}}}function K0(o,t){var e={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&t.indexOf(n)<0&&(e[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(o);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(o,n[s])&&(e[n[s]]=o[n[s]]);return e}function EM(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],n=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function wt(o){return this instanceof wt?(this.v=o,this):new wt(o)}function to(o,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(o,t||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(E){return function(_){return Promise.resolve(_).then(E,v)}}function d(E,_){n[E]&&(s[E]=function(C){return new Promise(function(M,R){a.push([E,C,M,R])>1||h(E,C)})},_&&(s[E]=_(s[E])))}function h(E,_){try{f(n[E](_))}catch(C){A(a[0][3],C)}}function f(E){E.value instanceof wt?Promise.resolve(E.value.v).then(m,v):A(a[0][2],E)}function m(E){h("next",E)}function v(E){h("throw",E)}function A(E,_){E(_),a.shift(),a.length&&h(a[0][0],a[0][1])}}function eo(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=o[Symbol.asyncIterator],e;return t?t.call(o):(o=typeof EM=="function"?EM(o):o[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(a){e[a]=o[a]&&function(l){return new Promise(function(d,h){l=o[a](l),s(d,h,l.done,l.value)})}}function s(a,l,d,h){Promise.resolve(h).then(function(f){a({value:f,done:d})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oB(o){var t;if(o.candidates==null||o.candidates.length===0)return!1;const e=(t=o.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:zR(e)}function zR(o){if(o.parts===void 0||o.parts.length===0)return!1;for(const t of o.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function rB(o){if(o.length!==0){for(const t of o)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function TM(o){if(o===void 0||o.length===0)return[];const t=[],e=o.length;let n=0;for(;n<e;)if(o[n].role==="user")t.push(o[n]),n++;else{const s=[];let a=!0;for(;n<e&&o[n].role==="model";)s.push(o[n]),a&&!zR(o[n])&&(a=!1),n++;a?t.push(...s):t.pop()}return t}class aB{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new lB(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class lB{constructor(t,e,n,s={},a=[]){this.apiClient=t,this.modelsModule=e,this.model=n,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),rB(a)}async sendMessage(t){var e;await this.sendPromise;const n=$n(t.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var a,l,d;const h=await s,f=(l=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,m=h.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let A=[];m!=null&&(A=(d=m.slice(v))!==null&&d!==void 0?d:[]);const E=f?[f]:[];this.recordHistory(n,E,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(t){var e;await this.sendPromise;const n=$n(t.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,n)}getHistory(t=!1){const e=t?TM(this.history):this.history;return structuredClone(e)}processStreamResponse(t,e){return to(this,arguments,function*(){var s,a,l,d,h,f;const m=[];try{for(var v=!0,A=eo(t),E;E=yield wt(A.next()),s=E.done,!s;v=!0){d=E.value,v=!1;const _=d;if(oB(_)){const C=(f=(h=_.candidates)===null||h===void 0?void 0:h[0])===null||f===void 0?void 0:f.content;C!==void 0&&m.push(C)}yield yield wt(_)}}catch(_){a={error:_}}finally{try{!v&&!s&&(l=A.return)&&(yield wt(l.call(A)))}finally{if(a)throw a.error}}this.recordHistory(e,m)})}recordHistory(t,e,n){let s=[];e.length>0&&e.every(a=>a.role!==void 0)?s=e:s.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...TM(n)):this.history.push(t),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _p extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,_p.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cB(o){const t={},e=g(o,["file"]);return e!=null&&y(t,["file"],e),t}function uB(o){const t={},e=g(o,["sdkHttpResponse"]);return e!=null&&y(t,["sdkHttpResponse"],e),t}function dB(o){const t={},e=g(o,["name"]);return e!=null&&y(t,["_url","file"],PR(e)),t}function hB(o){const t={},e=g(o,["sdkHttpResponse"]);return e!=null&&y(t,["sdkHttpResponse"],e),t}function fB(o){const t={},e=g(o,["name"]);return e!=null&&y(t,["_url","file"],PR(e)),t}function pB(o){const t={},e=g(o,["uris"]);return e!=null&&y(t,["uris"],e),t}function mB(o,t){const e={},n=g(o,["pageSize"]);t!==void 0&&n!=null&&y(t,["_query","pageSize"],n);const s=g(o,["pageToken"]);return t!==void 0&&s!=null&&y(t,["_query","pageToken"],s),e}function gB(o){const t={},e=g(o,["config"]);return e!=null&&mB(e,t),t}function yB(o){const t={},e=g(o,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(o,["nextPageToken"]);n!=null&&y(t,["nextPageToken"],n);const s=g(o,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(t,["files"],a)}return t}function vB(o){const t={},e=g(o,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(o,["files"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),y(t,["files"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AB extends jr{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new pu(Kr.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(e),e)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(e=>e)}async download(t){await this.apiClient.downloadFile(t)}async registerFiles(t){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(t){return this.registerFilesInternal(t)}async listInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=gB(t);return a=lt("files",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const f=yB(h),m=new SU;return Object.assign(m,f),m})}}async createInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cB(t);return a=lt("upload/v1beta/files",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=uB(h),m=new bU;return Object.assign(m,f),m})}}async get(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=fB(t);return a=lt("files/{file}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=dB(t);return a=lt("files/{file}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const f=hB(h),m=new EU;return Object.assign(m,f),m})}}async registerFilesInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=pB(t);return a=lt("files:register",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=vB(h),m=new TU;return Object.assign(m,f),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c0(o){const t={},e=g(o,["data"]);if(e!=null&&y(t,["data"],e),g(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(o,["mimeType"]);return n!=null&&y(t,["mimeType"],n),t}function SB(o){const t={},e=g(o,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(a=>UB(a))),y(t,["parts"],s)}const n=g(o,["role"]);return n!=null&&y(t,["role"],n),t}function bB(o){const t={};if(g(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(o,["fileUri"]);e!=null&&y(t,["fileUri"],e);const n=g(o,["mimeType"]);return n!=null&&y(t,["mimeType"],n),t}function EB(o){const t={},e=g(o,["id"]);e!=null&&y(t,["id"],e);const n=g(o,["args"]);n!=null&&y(t,["args"],n);const s=g(o,["name"]);if(s!=null&&y(t,["name"],s),g(o,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(o,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function TB(o){const t={},e=g(o,["description"]);e!=null&&y(t,["description"],e);const n=g(o,["name"]);n!=null&&y(t,["name"],n);const s=g(o,["parameters"]);s!=null&&y(t,["parameters"],s);const a=g(o,["parametersJsonSchema"]);a!=null&&y(t,["parametersJsonSchema"],a);const l=g(o,["response"]);l!=null&&y(t,["response"],l);const d=g(o,["responseJsonSchema"]);if(d!=null&&y(t,["responseJsonSchema"],d),g(o,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function _B(o){const t={},e=g(o,["modelSelectionConfig"]);e!=null&&y(t,["modelConfig"],e);const n=g(o,["responseJsonSchema"]);n!=null&&y(t,["responseJsonSchema"],n);const s=g(o,["audioTimestamp"]);s!=null&&y(t,["audioTimestamp"],s);const a=g(o,["candidateCount"]);a!=null&&y(t,["candidateCount"],a);const l=g(o,["enableAffectiveDialog"]);l!=null&&y(t,["enableAffectiveDialog"],l);const d=g(o,["frequencyPenalty"]);d!=null&&y(t,["frequencyPenalty"],d);const h=g(o,["logprobs"]);h!=null&&y(t,["logprobs"],h);const f=g(o,["maxOutputTokens"]);f!=null&&y(t,["maxOutputTokens"],f);const m=g(o,["mediaResolution"]);m!=null&&y(t,["mediaResolution"],m);const v=g(o,["presencePenalty"]);v!=null&&y(t,["presencePenalty"],v);const A=g(o,["responseLogprobs"]);A!=null&&y(t,["responseLogprobs"],A);const E=g(o,["responseMimeType"]);E!=null&&y(t,["responseMimeType"],E);const _=g(o,["responseModalities"]);_!=null&&y(t,["responseModalities"],_);const C=g(o,["responseSchema"]);C!=null&&y(t,["responseSchema"],C);const M=g(o,["routingConfig"]);M!=null&&y(t,["routingConfig"],M);const R=g(o,["seed"]);R!=null&&y(t,["seed"],R);const L=g(o,["speechConfig"]);L!=null&&y(t,["speechConfig"],L);const I=g(o,["stopSequences"]);I!=null&&y(t,["stopSequences"],I);const U=g(o,["temperature"]);U!=null&&y(t,["temperature"],U);const P=g(o,["thinkingConfig"]);P!=null&&y(t,["thinkingConfig"],P);const O=g(o,["topK"]);O!=null&&y(t,["topK"],O);const F=g(o,["topP"]);if(F!=null&&y(t,["topP"],F),g(o,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function CB(o){const t={};if(g(o,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(o,["enableWidget"]);return e!=null&&y(t,["enableWidget"],e),t}function wB(o){const t={};if(g(o,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(o,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(o,["timeRangeFilter"]);return e!=null&&y(t,["timeRangeFilter"],e),t}function xB(o,t){const e={},n=g(o,["generationConfig"]);t!==void 0&&n!=null&&y(t,["setup","generationConfig"],n);const s=g(o,["responseModalities"]);t!==void 0&&s!=null&&y(t,["setup","generationConfig","responseModalities"],s);const a=g(o,["temperature"]);t!==void 0&&a!=null&&y(t,["setup","generationConfig","temperature"],a);const l=g(o,["topP"]);t!==void 0&&l!=null&&y(t,["setup","generationConfig","topP"],l);const d=g(o,["topK"]);t!==void 0&&d!=null&&y(t,["setup","generationConfig","topK"],d);const h=g(o,["maxOutputTokens"]);t!==void 0&&h!=null&&y(t,["setup","generationConfig","maxOutputTokens"],h);const f=g(o,["mediaResolution"]);t!==void 0&&f!=null&&y(t,["setup","generationConfig","mediaResolution"],f);const m=g(o,["seed"]);t!==void 0&&m!=null&&y(t,["setup","generationConfig","seed"],m);const v=g(o,["speechConfig"]);t!==void 0&&v!=null&&y(t,["setup","generationConfig","speechConfig"],IT(v));const A=g(o,["thinkingConfig"]);t!==void 0&&A!=null&&y(t,["setup","generationConfig","thinkingConfig"],A);const E=g(o,["enableAffectiveDialog"]);t!==void 0&&E!=null&&y(t,["setup","generationConfig","enableAffectiveDialog"],E);const _=g(o,["systemInstruction"]);t!==void 0&&_!=null&&y(t,["setup","systemInstruction"],SB($n(_)));const C=g(o,["tools"]);if(t!==void 0&&C!=null){let O=Qh(C);Array.isArray(O)&&(O=O.map(F=>BB(Wh(F)))),y(t,["setup","tools"],O)}const M=g(o,["sessionResumption"]);t!==void 0&&M!=null&&y(t,["setup","sessionResumption"],OB(M));const R=g(o,["inputAudioTranscription"]);t!==void 0&&R!=null&&y(t,["setup","inputAudioTranscription"],R);const L=g(o,["outputAudioTranscription"]);t!==void 0&&L!=null&&y(t,["setup","outputAudioTranscription"],L);const I=g(o,["realtimeInputConfig"]);t!==void 0&&I!=null&&y(t,["setup","realtimeInputConfig"],I);const U=g(o,["contextWindowCompression"]);t!==void 0&&U!=null&&y(t,["setup","contextWindowCompression"],U);const P=g(o,["proactivity"]);if(t!==void 0&&P!=null&&y(t,["setup","proactivity"],P),g(o,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return e}function MB(o,t){const e={},n=g(o,["generationConfig"]);t!==void 0&&n!=null&&y(t,["setup","generationConfig"],_B(n));const s=g(o,["responseModalities"]);t!==void 0&&s!=null&&y(t,["setup","generationConfig","responseModalities"],s);const a=g(o,["temperature"]);t!==void 0&&a!=null&&y(t,["setup","generationConfig","temperature"],a);const l=g(o,["topP"]);t!==void 0&&l!=null&&y(t,["setup","generationConfig","topP"],l);const d=g(o,["topK"]);t!==void 0&&d!=null&&y(t,["setup","generationConfig","topK"],d);const h=g(o,["maxOutputTokens"]);t!==void 0&&h!=null&&y(t,["setup","generationConfig","maxOutputTokens"],h);const f=g(o,["mediaResolution"]);t!==void 0&&f!=null&&y(t,["setup","generationConfig","mediaResolution"],f);const m=g(o,["seed"]);t!==void 0&&m!=null&&y(t,["setup","generationConfig","seed"],m);const v=g(o,["speechConfig"]);t!==void 0&&v!=null&&y(t,["setup","generationConfig","speechConfig"],IT(v));const A=g(o,["thinkingConfig"]);t!==void 0&&A!=null&&y(t,["setup","generationConfig","thinkingConfig"],A);const E=g(o,["enableAffectiveDialog"]);t!==void 0&&E!=null&&y(t,["setup","generationConfig","enableAffectiveDialog"],E);const _=g(o,["systemInstruction"]);t!==void 0&&_!=null&&y(t,["setup","systemInstruction"],$n(_));const C=g(o,["tools"]);if(t!==void 0&&C!=null){let F=Qh(C);Array.isArray(F)&&(F=F.map(Z=>FB(Wh(Z)))),y(t,["setup","tools"],F)}const M=g(o,["sessionResumption"]);t!==void 0&&M!=null&&y(t,["setup","sessionResumption"],M);const R=g(o,["inputAudioTranscription"]);t!==void 0&&R!=null&&y(t,["setup","inputAudioTranscription"],R);const L=g(o,["outputAudioTranscription"]);t!==void 0&&L!=null&&y(t,["setup","outputAudioTranscription"],L);const I=g(o,["realtimeInputConfig"]);t!==void 0&&I!=null&&y(t,["setup","realtimeInputConfig"],I);const U=g(o,["contextWindowCompression"]);t!==void 0&&U!=null&&y(t,["setup","contextWindowCompression"],U);const P=g(o,["proactivity"]);t!==void 0&&P!=null&&y(t,["setup","proactivity"],P);const O=g(o,["explicitVadSignal"]);return t!==void 0&&O!=null&&y(t,["setup","explicitVadSignal"],O),e}function RB(o,t){const e={},n=g(t,["model"]);n!=null&&y(e,["setup","model"],te(o,n));const s=g(t,["config"]);return s!=null&&y(e,["config"],xB(s,e)),e}function NB(o,t){const e={},n=g(t,["model"]);n!=null&&y(e,["setup","model"],te(o,n));const s=g(t,["config"]);return s!=null&&y(e,["config"],MB(s,e)),e}function IB(o){const t={},e=g(o,["musicGenerationConfig"]);return e!=null&&y(t,["musicGenerationConfig"],e),t}function DB(o){const t={},e=g(o,["weightedPrompts"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(s=>s)),y(t,["weightedPrompts"],n)}return t}function kB(o){const t={},e=g(o,["media"]);if(e!=null){let f=NR(e);Array.isArray(f)&&(f=f.map(m=>c0(m))),y(t,["mediaChunks"],f)}const n=g(o,["audio"]);n!=null&&y(t,["audio"],c0(DR(n)));const s=g(o,["audioStreamEnd"]);s!=null&&y(t,["audioStreamEnd"],s);const a=g(o,["video"]);a!=null&&y(t,["video"],c0(IR(a)));const l=g(o,["text"]);l!=null&&y(t,["text"],l);const d=g(o,["activityStart"]);d!=null&&y(t,["activityStart"],d);const h=g(o,["activityEnd"]);return h!=null&&y(t,["activityEnd"],h),t}function LB(o){const t={},e=g(o,["media"]);if(e!=null){let f=NR(e);Array.isArray(f)&&(f=f.map(m=>m)),y(t,["mediaChunks"],f)}const n=g(o,["audio"]);n!=null&&y(t,["audio"],DR(n));const s=g(o,["audioStreamEnd"]);s!=null&&y(t,["audioStreamEnd"],s);const a=g(o,["video"]);a!=null&&y(t,["video"],IR(a));const l=g(o,["text"]);l!=null&&y(t,["text"],l);const d=g(o,["activityStart"]);d!=null&&y(t,["activityStart"],d);const h=g(o,["activityEnd"]);return h!=null&&y(t,["activityEnd"],h),t}function PB(o){const t={},e=g(o,["setupComplete"]);e!=null&&y(t,["setupComplete"],e);const n=g(o,["serverContent"]);n!=null&&y(t,["serverContent"],n);const s=g(o,["toolCall"]);s!=null&&y(t,["toolCall"],s);const a=g(o,["toolCallCancellation"]);a!=null&&y(t,["toolCallCancellation"],a);const l=g(o,["usageMetadata"]);l!=null&&y(t,["usageMetadata"],HB(l));const d=g(o,["goAway"]);d!=null&&y(t,["goAway"],d);const h=g(o,["sessionResumptionUpdate"]);h!=null&&y(t,["sessionResumptionUpdate"],h);const f=g(o,["voiceActivityDetectionSignal"]);f!=null&&y(t,["voiceActivityDetectionSignal"],f);const m=g(o,["voiceActivity"]);return m!=null&&y(t,["voiceActivity"],GB(m)),t}function UB(o){const t={},e=g(o,["mediaResolution"]);e!=null&&y(t,["mediaResolution"],e);const n=g(o,["codeExecutionResult"]);n!=null&&y(t,["codeExecutionResult"],n);const s=g(o,["executableCode"]);s!=null&&y(t,["executableCode"],s);const a=g(o,["fileData"]);a!=null&&y(t,["fileData"],bB(a));const l=g(o,["functionCall"]);l!=null&&y(t,["functionCall"],EB(l));const d=g(o,["functionResponse"]);d!=null&&y(t,["functionResponse"],d);const h=g(o,["inlineData"]);h!=null&&y(t,["inlineData"],c0(h));const f=g(o,["text"]);f!=null&&y(t,["text"],f);const m=g(o,["thought"]);m!=null&&y(t,["thought"],m);const v=g(o,["thoughtSignature"]);v!=null&&y(t,["thoughtSignature"],v);const A=g(o,["videoMetadata"]);return A!=null&&y(t,["videoMetadata"],A),t}function OB(o){const t={},e=g(o,["handle"]);if(e!=null&&y(t,["handle"],e),g(o,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function BB(o){const t={};if(g(o,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=g(o,["computerUse"]);e!=null&&y(t,["computerUse"],e);const n=g(o,["fileSearch"]);n!=null&&y(t,["fileSearch"],n);const s=g(o,["codeExecution"]);if(s!=null&&y(t,["codeExecution"],s),g(o,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(o,["functionDeclarations"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(v=>v)),y(t,["functionDeclarations"],m)}const l=g(o,["googleMaps"]);l!=null&&y(t,["googleMaps"],CB(l));const d=g(o,["googleSearch"]);d!=null&&y(t,["googleSearch"],wB(d));const h=g(o,["googleSearchRetrieval"]);h!=null&&y(t,["googleSearchRetrieval"],h);const f=g(o,["urlContext"]);return f!=null&&y(t,["urlContext"],f),t}function FB(o){const t={},e=g(o,["retrieval"]);e!=null&&y(t,["retrieval"],e);const n=g(o,["computerUse"]);if(n!=null&&y(t,["computerUse"],n),g(o,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=g(o,["codeExecution"]);s!=null&&y(t,["codeExecution"],s);const a=g(o,["enterpriseWebSearch"]);a!=null&&y(t,["enterpriseWebSearch"],a);const l=g(o,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(A=>TB(A))),y(t,["functionDeclarations"],v)}const d=g(o,["googleMaps"]);d!=null&&y(t,["googleMaps"],d);const h=g(o,["googleSearch"]);h!=null&&y(t,["googleSearch"],h);const f=g(o,["googleSearchRetrieval"]);f!=null&&y(t,["googleSearchRetrieval"],f);const m=g(o,["urlContext"]);return m!=null&&y(t,["urlContext"],m),t}function HB(o){const t={},e=g(o,["promptTokenCount"]);e!=null&&y(t,["promptTokenCount"],e);const n=g(o,["cachedContentTokenCount"]);n!=null&&y(t,["cachedContentTokenCount"],n);const s=g(o,["candidatesTokenCount"]);s!=null&&y(t,["responseTokenCount"],s);const a=g(o,["toolUsePromptTokenCount"]);a!=null&&y(t,["toolUsePromptTokenCount"],a);const l=g(o,["thoughtsTokenCount"]);l!=null&&y(t,["thoughtsTokenCount"],l);const d=g(o,["totalTokenCount"]);d!=null&&y(t,["totalTokenCount"],d);const h=g(o,["promptTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(_=>_)),y(t,["promptTokensDetails"],E)}const f=g(o,["cacheTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(_=>_)),y(t,["cacheTokensDetails"],E)}const m=g(o,["candidatesTokensDetails"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(_=>_)),y(t,["responseTokensDetails"],E)}const v=g(o,["toolUsePromptTokensDetails"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(_=>_)),y(t,["toolUsePromptTokensDetails"],E)}const A=g(o,["trafficType"]);return A!=null&&y(t,["trafficType"],A),t}function GB(o){const t={},e=g(o,["type"]);return e!=null&&y(t,["voiceActivityType"],e),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zB(o,t){const e={},n=g(o,["data"]);if(n!=null&&y(e,["data"],n),g(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=g(o,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function VB(o,t){const e={},n=g(o,["content"]);n!=null&&y(e,["content"],n);const s=g(o,["citationMetadata"]);s!=null&&y(e,["citationMetadata"],qB(s));const a=g(o,["tokenCount"]);a!=null&&y(e,["tokenCount"],a);const l=g(o,["finishReason"]);l!=null&&y(e,["finishReason"],l);const d=g(o,["avgLogprobs"]);d!=null&&y(e,["avgLogprobs"],d);const h=g(o,["groundingMetadata"]);h!=null&&y(e,["groundingMetadata"],h);const f=g(o,["index"]);f!=null&&y(e,["index"],f);const m=g(o,["logprobsResult"]);m!=null&&y(e,["logprobsResult"],m);const v=g(o,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(_=>_)),y(e,["safetyRatings"],E)}const A=g(o,["urlContextMetadata"]);return A!=null&&y(e,["urlContextMetadata"],A),e}function qB(o,t){const e={},n=g(o,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),y(e,["citations"],s)}return e}function YB(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],te(o,s));const a=g(t,["contents"]);if(a!=null){let l=Is(a);Array.isArray(l)&&(l=l.map(d=>d)),y(n,["contents"],l)}return n}function $B(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["tokensInfo"],a)}return e}function XB(o,t){const e={},n=g(o,["values"]);n!=null&&y(e,["values"],n);const s=g(o,["statistics"]);return s!=null&&y(e,["statistics"],JB(s)),e}function JB(o,t){const e={},n=g(o,["truncated"]);n!=null&&y(e,["truncated"],n);const s=g(o,["token_count"]);return s!=null&&y(e,["tokenCount"],s),e}function Nv(o,t){const e={},n=g(o,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>i3(l))),y(e,["parts"],a)}const s=g(o,["role"]);return s!=null&&y(e,["role"],s),e}function KB(o,t){const e={},n=g(o,["controlType"]);n!=null&&y(e,["controlType"],n);const s=g(o,["enableControlImageComputation"]);return s!=null&&y(e,["computeControl"],s),e}function WB(o,t){const e={};if(g(o,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(o,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(o,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function QB(o,t,e){const n={},s=g(o,["systemInstruction"]);t!==void 0&&s!=null&&y(t,["systemInstruction"],$n(s));const a=g(o,["tools"]);if(t!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>$R(h))),y(t,["tools"],d)}const l=g(o,["generationConfig"]);return t!==void 0&&l!=null&&y(t,["generationConfig"],zF(l)),n}function ZB(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],te(o,s));const a=g(t,["contents"]);if(a!=null){let d=Is(a);Array.isArray(d)&&(d=d.map(h=>Nv(h))),y(n,["contents"],d)}const l=g(t,["config"]);return l!=null&&WB(l),n}function jB(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],te(o,s));const a=g(t,["contents"]);if(a!=null){let d=Is(a);Array.isArray(d)&&(d=d.map(h=>h)),y(n,["contents"],d)}const l=g(t,["config"]);return l!=null&&QB(l,n),n}function tF(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["totalTokens"]);s!=null&&y(e,["totalTokens"],s);const a=g(o,["cachedContentTokenCount"]);return a!=null&&y(e,["cachedContentTokenCount"],a),e}function eF(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["totalTokens"]);return s!=null&&y(e,["totalTokens"],s),e}function nF(o,t,e){const n={},s=g(t,["model"]);return s!=null&&y(n,["_url","name"],te(o,s)),n}function iF(o,t,e){const n={},s=g(t,["model"]);return s!=null&&y(n,["_url","name"],te(o,s)),n}function sF(o,t){const e={},n=g(o,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function oF(o,t){const e={},n=g(o,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function rF(o,t,e){const n={},s=g(o,["outputGcsUri"]);t!==void 0&&s!=null&&y(t,["parameters","storageUri"],s);const a=g(o,["negativePrompt"]);t!==void 0&&a!=null&&y(t,["parameters","negativePrompt"],a);const l=g(o,["numberOfImages"]);t!==void 0&&l!=null&&y(t,["parameters","sampleCount"],l);const d=g(o,["aspectRatio"]);t!==void 0&&d!=null&&y(t,["parameters","aspectRatio"],d);const h=g(o,["guidanceScale"]);t!==void 0&&h!=null&&y(t,["parameters","guidanceScale"],h);const f=g(o,["seed"]);t!==void 0&&f!=null&&y(t,["parameters","seed"],f);const m=g(o,["safetyFilterLevel"]);t!==void 0&&m!=null&&y(t,["parameters","safetySetting"],m);const v=g(o,["personGeneration"]);t!==void 0&&v!=null&&y(t,["parameters","personGeneration"],v);const A=g(o,["includeSafetyAttributes"]);t!==void 0&&A!=null&&y(t,["parameters","includeSafetyAttributes"],A);const E=g(o,["includeRaiReason"]);t!==void 0&&E!=null&&y(t,["parameters","includeRaiReason"],E);const _=g(o,["language"]);t!==void 0&&_!=null&&y(t,["parameters","language"],_);const C=g(o,["outputMimeType"]);t!==void 0&&C!=null&&y(t,["parameters","outputOptions","mimeType"],C);const M=g(o,["outputCompressionQuality"]);t!==void 0&&M!=null&&y(t,["parameters","outputOptions","compressionQuality"],M);const R=g(o,["addWatermark"]);t!==void 0&&R!=null&&y(t,["parameters","addWatermark"],R);const L=g(o,["labels"]);t!==void 0&&L!=null&&y(t,["labels"],L);const I=g(o,["editMode"]);t!==void 0&&I!=null&&y(t,["parameters","editMode"],I);const U=g(o,["baseSteps"]);return t!==void 0&&U!=null&&y(t,["parameters","editConfig","baseSteps"],U),n}function aF(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],te(o,s));const a=g(t,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const l=g(t,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(f=>c3(f))),y(n,["instances[0]","referenceImages"],h)}const d=g(t,["config"]);return d!=null&&rF(d,n),n}function lF(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Iv(l))),y(e,["generatedImages"],a)}return e}function cF(o,t,e){const n={},s=g(o,["taskType"]);t!==void 0&&s!=null&&y(t,["requests[]","taskType"],s);const a=g(o,["title"]);t!==void 0&&a!=null&&y(t,["requests[]","title"],a);const l=g(o,["outputDimensionality"]);if(t!==void 0&&l!=null&&y(t,["requests[]","outputDimensionality"],l),g(o,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(o,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function uF(o,t,e){const n={},s=g(o,["taskType"]);t!==void 0&&s!=null&&y(t,["instances[]","task_type"],s);const a=g(o,["title"]);t!==void 0&&a!=null&&y(t,["instances[]","title"],a);const l=g(o,["outputDimensionality"]);t!==void 0&&l!=null&&y(t,["parameters","outputDimensionality"],l);const d=g(o,["mimeType"]);t!==void 0&&d!=null&&y(t,["instances[]","mimeType"],d);const h=g(o,["autoTruncate"]);return t!==void 0&&h!=null&&y(t,["parameters","autoTruncate"],h),n}function dF(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],te(o,s));const a=g(t,["contents"]);if(a!=null){let h=MT(o,a);Array.isArray(h)&&(h=h.map(f=>f)),y(n,["requests[]","content"],h)}const l=g(t,["config"]);l!=null&&cF(l,n);const d=g(t,["model"]);return d!==void 0&&y(n,["requests[]","model"],te(o,d)),n}function hF(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],te(o,s));const a=g(t,["contents"]);if(a!=null){let d=MT(o,a);Array.isArray(d)&&(d=d.map(h=>h)),y(n,["instances[]","content"],d)}const l=g(t,["config"]);return l!=null&&uF(l,n),n}function fF(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>d)),y(e,["embeddings"],l)}const a=g(o,["metadata"]);return a!=null&&y(e,["metadata"],a),e}function pF(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>XB(d))),y(e,["embeddings"],l)}const a=g(o,["metadata"]);return a!=null&&y(e,["metadata"],a),e}function mF(o,t){const e={},n=g(o,["endpoint"]);n!=null&&y(e,["name"],n);const s=g(o,["deployedModelId"]);return s!=null&&y(e,["deployedModelId"],s),e}function gF(o,t){const e={};if(g(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(o,["fileUri"]);n!=null&&y(e,["fileUri"],n);const s=g(o,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function yF(o,t){const e={},n=g(o,["id"]);n!=null&&y(e,["id"],n);const s=g(o,["args"]);s!=null&&y(e,["args"],s);const a=g(o,["name"]);if(a!=null&&y(e,["name"],a),g(o,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(o,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vF(o,t){const e={},n=g(o,["allowedFunctionNames"]);n!=null&&y(e,["allowedFunctionNames"],n);const s=g(o,["mode"]);if(s!=null&&y(e,["mode"],s),g(o,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function AF(o,t){const e={},n=g(o,["description"]);n!=null&&y(e,["description"],n);const s=g(o,["name"]);s!=null&&y(e,["name"],s);const a=g(o,["parameters"]);a!=null&&y(e,["parameters"],a);const l=g(o,["parametersJsonSchema"]);l!=null&&y(e,["parametersJsonSchema"],l);const d=g(o,["response"]);d!=null&&y(e,["response"],d);const h=g(o,["responseJsonSchema"]);if(h!=null&&y(e,["responseJsonSchema"],h),g(o,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function SF(o,t,e,n){const s={},a=g(t,["systemInstruction"]);e!==void 0&&a!=null&&y(e,["systemInstruction"],Nv($n(a)));const l=g(t,["temperature"]);l!=null&&y(s,["temperature"],l);const d=g(t,["topP"]);d!=null&&y(s,["topP"],d);const h=g(t,["topK"]);h!=null&&y(s,["topK"],h);const f=g(t,["candidateCount"]);f!=null&&y(s,["candidateCount"],f);const m=g(t,["maxOutputTokens"]);m!=null&&y(s,["maxOutputTokens"],m);const v=g(t,["stopSequences"]);v!=null&&y(s,["stopSequences"],v);const A=g(t,["responseLogprobs"]);A!=null&&y(s,["responseLogprobs"],A);const E=g(t,["logprobs"]);E!=null&&y(s,["logprobs"],E);const _=g(t,["presencePenalty"]);_!=null&&y(s,["presencePenalty"],_);const C=g(t,["frequencyPenalty"]);C!=null&&y(s,["frequencyPenalty"],C);const M=g(t,["seed"]);M!=null&&y(s,["seed"],M);const R=g(t,["responseMimeType"]);R!=null&&y(s,["responseMimeType"],R);const L=g(t,["responseSchema"]);L!=null&&y(s,["responseSchema"],RT(L));const I=g(t,["responseJsonSchema"]);if(I!=null&&y(s,["responseJsonSchema"],I),g(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=g(t,["safetySettings"]);if(e!==void 0&&U!=null){let ct=U;Array.isArray(ct)&&(ct=ct.map(At=>u3(At))),y(e,["safetySettings"],ct)}const P=g(t,["tools"]);if(e!==void 0&&P!=null){let ct=Qh(P);Array.isArray(ct)&&(ct=ct.map(At=>y3(Wh(At)))),y(e,["tools"],ct)}const O=g(t,["toolConfig"]);if(e!==void 0&&O!=null&&y(e,["toolConfig"],g3(O)),g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=g(t,["cachedContent"]);e!==void 0&&F!=null&&y(e,["cachedContent"],ta(o,F));const Z=g(t,["responseModalities"]);Z!=null&&y(s,["responseModalities"],Z);const X=g(t,["mediaResolution"]);X!=null&&y(s,["mediaResolution"],X);const nt=g(t,["speechConfig"]);if(nt!=null&&y(s,["speechConfig"],NT(nt)),g(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const it=g(t,["thinkingConfig"]);it!=null&&y(s,["thinkingConfig"],it);const dt=g(t,["imageConfig"]);dt!=null&&y(s,["imageConfig"],XF(dt));const gt=g(t,["enableEnhancedCivicAnswers"]);if(gt!=null&&y(s,["enableEnhancedCivicAnswers"],gt),g(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function bF(o,t,e,n){const s={},a=g(t,["systemInstruction"]);e!==void 0&&a!=null&&y(e,["systemInstruction"],$n(a));const l=g(t,["temperature"]);l!=null&&y(s,["temperature"],l);const d=g(t,["topP"]);d!=null&&y(s,["topP"],d);const h=g(t,["topK"]);h!=null&&y(s,["topK"],h);const f=g(t,["candidateCount"]);f!=null&&y(s,["candidateCount"],f);const m=g(t,["maxOutputTokens"]);m!=null&&y(s,["maxOutputTokens"],m);const v=g(t,["stopSequences"]);v!=null&&y(s,["stopSequences"],v);const A=g(t,["responseLogprobs"]);A!=null&&y(s,["responseLogprobs"],A);const E=g(t,["logprobs"]);E!=null&&y(s,["logprobs"],E);const _=g(t,["presencePenalty"]);_!=null&&y(s,["presencePenalty"],_);const C=g(t,["frequencyPenalty"]);C!=null&&y(s,["frequencyPenalty"],C);const M=g(t,["seed"]);M!=null&&y(s,["seed"],M);const R=g(t,["responseMimeType"]);R!=null&&y(s,["responseMimeType"],R);const L=g(t,["responseSchema"]);L!=null&&y(s,["responseSchema"],RT(L));const I=g(t,["responseJsonSchema"]);I!=null&&y(s,["responseJsonSchema"],I);const U=g(t,["routingConfig"]);U!=null&&y(s,["routingConfig"],U);const P=g(t,["modelSelectionConfig"]);P!=null&&y(s,["modelConfig"],P);const O=g(t,["safetySettings"]);if(e!==void 0&&O!=null){let ot=O;Array.isArray(ot)&&(ot=ot.map(Ct=>Ct)),y(e,["safetySettings"],ot)}const F=g(t,["tools"]);if(e!==void 0&&F!=null){let ot=Qh(F);Array.isArray(ot)&&(ot=ot.map(Ct=>$R(Wh(Ct)))),y(e,["tools"],ot)}const Z=g(t,["toolConfig"]);e!==void 0&&Z!=null&&y(e,["toolConfig"],Z);const X=g(t,["labels"]);e!==void 0&&X!=null&&y(e,["labels"],X);const nt=g(t,["cachedContent"]);e!==void 0&&nt!=null&&y(e,["cachedContent"],ta(o,nt));const it=g(t,["responseModalities"]);it!=null&&y(s,["responseModalities"],it);const dt=g(t,["mediaResolution"]);dt!=null&&y(s,["mediaResolution"],dt);const gt=g(t,["speechConfig"]);gt!=null&&y(s,["speechConfig"],NT(gt));const ct=g(t,["audioTimestamp"]);ct!=null&&y(s,["audioTimestamp"],ct);const At=g(t,["thinkingConfig"]);At!=null&&y(s,["thinkingConfig"],At);const z=g(t,["imageConfig"]);if(z!=null&&y(s,["imageConfig"],JF(z)),g(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const Q=g(t,["modelArmorConfig"]);return e!==void 0&&Q!=null&&y(e,["modelArmorConfig"],Q),s}function _M(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],te(o,s));const a=g(t,["contents"]);if(a!=null){let d=Is(a);Array.isArray(d)&&(d=d.map(h=>Nv(h))),y(n,["contents"],d)}const l=g(t,["config"]);return l!=null&&y(n,["generationConfig"],SF(o,l,n)),n}function CM(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],te(o,s));const a=g(t,["contents"]);if(a!=null){let d=Is(a);Array.isArray(d)&&(d=d.map(h=>h)),y(n,["contents"],d)}const l=g(t,["config"]);return l!=null&&y(n,["generationConfig"],bF(o,l,n)),n}function wM(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["candidates"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>VB(m))),y(e,["candidates"],f)}const a=g(o,["modelVersion"]);a!=null&&y(e,["modelVersion"],a);const l=g(o,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const d=g(o,["responseId"]);d!=null&&y(e,["responseId"],d);const h=g(o,["usageMetadata"]);return h!=null&&y(e,["usageMetadata"],h),e}function xM(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),y(e,["candidates"],m)}const a=g(o,["createTime"]);a!=null&&y(e,["createTime"],a);const l=g(o,["modelVersion"]);l!=null&&y(e,["modelVersion"],l);const d=g(o,["promptFeedback"]);d!=null&&y(e,["promptFeedback"],d);const h=g(o,["responseId"]);h!=null&&y(e,["responseId"],h);const f=g(o,["usageMetadata"]);return f!=null&&y(e,["usageMetadata"],f),e}function EF(o,t,e){const n={};if(g(o,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(o,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=g(o,["numberOfImages"]);t!==void 0&&s!=null&&y(t,["parameters","sampleCount"],s);const a=g(o,["aspectRatio"]);t!==void 0&&a!=null&&y(t,["parameters","aspectRatio"],a);const l=g(o,["guidanceScale"]);if(t!==void 0&&l!=null&&y(t,["parameters","guidanceScale"],l),g(o,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=g(o,["safetyFilterLevel"]);t!==void 0&&d!=null&&y(t,["parameters","safetySetting"],d);const h=g(o,["personGeneration"]);t!==void 0&&h!=null&&y(t,["parameters","personGeneration"],h);const f=g(o,["includeSafetyAttributes"]);t!==void 0&&f!=null&&y(t,["parameters","includeSafetyAttributes"],f);const m=g(o,["includeRaiReason"]);t!==void 0&&m!=null&&y(t,["parameters","includeRaiReason"],m);const v=g(o,["language"]);t!==void 0&&v!=null&&y(t,["parameters","language"],v);const A=g(o,["outputMimeType"]);t!==void 0&&A!=null&&y(t,["parameters","outputOptions","mimeType"],A);const E=g(o,["outputCompressionQuality"]);if(t!==void 0&&E!=null&&y(t,["parameters","outputOptions","compressionQuality"],E),g(o,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(o,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=g(o,["imageSize"]);if(t!==void 0&&_!=null&&y(t,["parameters","sampleImageSize"],_),g(o,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function TF(o,t,e){const n={},s=g(o,["outputGcsUri"]);t!==void 0&&s!=null&&y(t,["parameters","storageUri"],s);const a=g(o,["negativePrompt"]);t!==void 0&&a!=null&&y(t,["parameters","negativePrompt"],a);const l=g(o,["numberOfImages"]);t!==void 0&&l!=null&&y(t,["parameters","sampleCount"],l);const d=g(o,["aspectRatio"]);t!==void 0&&d!=null&&y(t,["parameters","aspectRatio"],d);const h=g(o,["guidanceScale"]);t!==void 0&&h!=null&&y(t,["parameters","guidanceScale"],h);const f=g(o,["seed"]);t!==void 0&&f!=null&&y(t,["parameters","seed"],f);const m=g(o,["safetyFilterLevel"]);t!==void 0&&m!=null&&y(t,["parameters","safetySetting"],m);const v=g(o,["personGeneration"]);t!==void 0&&v!=null&&y(t,["parameters","personGeneration"],v);const A=g(o,["includeSafetyAttributes"]);t!==void 0&&A!=null&&y(t,["parameters","includeSafetyAttributes"],A);const E=g(o,["includeRaiReason"]);t!==void 0&&E!=null&&y(t,["parameters","includeRaiReason"],E);const _=g(o,["language"]);t!==void 0&&_!=null&&y(t,["parameters","language"],_);const C=g(o,["outputMimeType"]);t!==void 0&&C!=null&&y(t,["parameters","outputOptions","mimeType"],C);const M=g(o,["outputCompressionQuality"]);t!==void 0&&M!=null&&y(t,["parameters","outputOptions","compressionQuality"],M);const R=g(o,["addWatermark"]);t!==void 0&&R!=null&&y(t,["parameters","addWatermark"],R);const L=g(o,["labels"]);t!==void 0&&L!=null&&y(t,["labels"],L);const I=g(o,["imageSize"]);t!==void 0&&I!=null&&y(t,["parameters","sampleImageSize"],I);const U=g(o,["enhancePrompt"]);return t!==void 0&&U!=null&&y(t,["parameters","enhancePrompt"],U),n}function _F(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],te(o,s));const a=g(t,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const l=g(t,["config"]);return l!=null&&EF(l,n),n}function CF(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],te(o,s));const a=g(t,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const l=g(t,["config"]);return l!=null&&TF(l,n),n}function wF(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>BF(d))),y(e,["generatedImages"],l)}const a=g(o,["positivePromptSafetyAttributes"]);return a!=null&&y(e,["positivePromptSafetyAttributes"],qR(a)),e}function xF(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>Iv(d))),y(e,["generatedImages"],l)}const a=g(o,["positivePromptSafetyAttributes"]);return a!=null&&y(e,["positivePromptSafetyAttributes"],YR(a)),e}function MF(o,t,e){const n={},s=g(o,["numberOfVideos"]);if(t!==void 0&&s!=null&&y(t,["parameters","sampleCount"],s),g(o,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(o,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=g(o,["durationSeconds"]);if(t!==void 0&&a!=null&&y(t,["parameters","durationSeconds"],a),g(o,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=g(o,["aspectRatio"]);t!==void 0&&l!=null&&y(t,["parameters","aspectRatio"],l);const d=g(o,["resolution"]);t!==void 0&&d!=null&&y(t,["parameters","resolution"],d);const h=g(o,["personGeneration"]);if(t!==void 0&&h!=null&&y(t,["parameters","personGeneration"],h),g(o,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=g(o,["negativePrompt"]);t!==void 0&&f!=null&&y(t,["parameters","negativePrompt"],f);const m=g(o,["enhancePrompt"]);if(t!==void 0&&m!=null&&y(t,["parameters","enhancePrompt"],m),g(o,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=g(o,["lastFrame"]);t!==void 0&&v!=null&&y(t,["instances[0]","lastFrame"],Dv(v));const A=g(o,["referenceImages"]);if(t!==void 0&&A!=null){let E=A;Array.isArray(E)&&(E=E.map(_=>N3(_))),y(t,["instances[0]","referenceImages"],E)}if(g(o,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(g(o,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function RF(o,t,e){const n={},s=g(o,["numberOfVideos"]);t!==void 0&&s!=null&&y(t,["parameters","sampleCount"],s);const a=g(o,["outputGcsUri"]);t!==void 0&&a!=null&&y(t,["parameters","storageUri"],a);const l=g(o,["fps"]);t!==void 0&&l!=null&&y(t,["parameters","fps"],l);const d=g(o,["durationSeconds"]);t!==void 0&&d!=null&&y(t,["parameters","durationSeconds"],d);const h=g(o,["seed"]);t!==void 0&&h!=null&&y(t,["parameters","seed"],h);const f=g(o,["aspectRatio"]);t!==void 0&&f!=null&&y(t,["parameters","aspectRatio"],f);const m=g(o,["resolution"]);t!==void 0&&m!=null&&y(t,["parameters","resolution"],m);const v=g(o,["personGeneration"]);t!==void 0&&v!=null&&y(t,["parameters","personGeneration"],v);const A=g(o,["pubsubTopic"]);t!==void 0&&A!=null&&y(t,["parameters","pubsubTopic"],A);const E=g(o,["negativePrompt"]);t!==void 0&&E!=null&&y(t,["parameters","negativePrompt"],E);const _=g(o,["enhancePrompt"]);t!==void 0&&_!=null&&y(t,["parameters","enhancePrompt"],_);const C=g(o,["generateAudio"]);t!==void 0&&C!=null&&y(t,["parameters","generateAudio"],C);const M=g(o,["lastFrame"]);t!==void 0&&M!=null&&y(t,["instances[0]","lastFrame"],io(M));const R=g(o,["referenceImages"]);if(t!==void 0&&R!=null){let U=R;Array.isArray(U)&&(U=U.map(P=>I3(P))),y(t,["instances[0]","referenceImages"],U)}const L=g(o,["mask"]);t!==void 0&&L!=null&&y(t,["instances[0]","mask"],R3(L));const I=g(o,["compressionQuality"]);return t!==void 0&&I!=null&&y(t,["parameters","compressionQuality"],I),n}function NF(o,t){const e={},n=g(o,["name"]);n!=null&&y(e,["name"],n);const s=g(o,["metadata"]);s!=null&&y(e,["metadata"],s);const a=g(o,["done"]);a!=null&&y(e,["done"],a);const l=g(o,["error"]);l!=null&&y(e,["error"],l);const d=g(o,["response","generateVideoResponse"]);return d!=null&&y(e,["response"],LF(d)),e}function IF(o,t){const e={},n=g(o,["name"]);n!=null&&y(e,["name"],n);const s=g(o,["metadata"]);s!=null&&y(e,["metadata"],s);const a=g(o,["done"]);a!=null&&y(e,["done"],a);const l=g(o,["error"]);l!=null&&y(e,["error"],l);const d=g(o,["response"]);return d!=null&&y(e,["response"],PF(d)),e}function DF(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],te(o,s));const a=g(t,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const l=g(t,["image"]);l!=null&&y(n,["instances[0]","image"],Dv(l));const d=g(t,["video"]);d!=null&&y(n,["instances[0]","video"],XR(d));const h=g(t,["source"]);h!=null&&UF(h,n);const f=g(t,["config"]);return f!=null&&MF(f,n),n}function kF(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],te(o,s));const a=g(t,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const l=g(t,["image"]);l!=null&&y(n,["instances[0]","image"],io(l));const d=g(t,["video"]);d!=null&&y(n,["instances[0]","video"],JR(d));const h=g(t,["source"]);h!=null&&OF(h,n);const f=g(t,["config"]);return f!=null&&RF(f,n),n}function LF(o,t){const e={},n=g(o,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(d=>HF(d))),y(e,["generatedVideos"],l)}const s=g(o,["raiMediaFilteredCount"]);s!=null&&y(e,["raiMediaFilteredCount"],s);const a=g(o,["raiMediaFilteredReasons"]);return a!=null&&y(e,["raiMediaFilteredReasons"],a),e}function PF(o,t){const e={},n=g(o,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(d=>GF(d))),y(e,["generatedVideos"],l)}const s=g(o,["raiMediaFilteredCount"]);s!=null&&y(e,["raiMediaFilteredCount"],s);const a=g(o,["raiMediaFilteredReasons"]);return a!=null&&y(e,["raiMediaFilteredReasons"],a),e}function UF(o,t,e){const n={},s=g(o,["prompt"]);t!==void 0&&s!=null&&y(t,["instances[0]","prompt"],s);const a=g(o,["image"]);t!==void 0&&a!=null&&y(t,["instances[0]","image"],Dv(a));const l=g(o,["video"]);return t!==void 0&&l!=null&&y(t,["instances[0]","video"],XR(l)),n}function OF(o,t,e){const n={},s=g(o,["prompt"]);t!==void 0&&s!=null&&y(t,["instances[0]","prompt"],s);const a=g(o,["image"]);t!==void 0&&a!=null&&y(t,["instances[0]","image"],io(a));const l=g(o,["video"]);return t!==void 0&&l!=null&&y(t,["instances[0]","video"],JR(l)),n}function BF(o,t){const e={},n=g(o,["_self"]);n!=null&&y(e,["image"],KF(n));const s=g(o,["raiFilteredReason"]);s!=null&&y(e,["raiFilteredReason"],s);const a=g(o,["_self"]);return a!=null&&y(e,["safetyAttributes"],qR(a)),e}function Iv(o,t){const e={},n=g(o,["_self"]);n!=null&&y(e,["image"],VR(n));const s=g(o,["raiFilteredReason"]);s!=null&&y(e,["raiFilteredReason"],s);const a=g(o,["_self"]);a!=null&&y(e,["safetyAttributes"],YR(a));const l=g(o,["prompt"]);return l!=null&&y(e,["enhancedPrompt"],l),e}function FF(o,t){const e={},n=g(o,["_self"]);n!=null&&y(e,["mask"],VR(n));const s=g(o,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["labels"],a)}return e}function HF(o,t){const e={},n=g(o,["video"]);return n!=null&&y(e,["video"],x3(n)),e}function GF(o,t){const e={},n=g(o,["_self"]);return n!=null&&y(e,["video"],M3(n)),e}function zF(o,t){const e={},n=g(o,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const s=g(o,["responseJsonSchema"]);s!=null&&y(e,["responseJsonSchema"],s);const a=g(o,["audioTimestamp"]);a!=null&&y(e,["audioTimestamp"],a);const l=g(o,["candidateCount"]);l!=null&&y(e,["candidateCount"],l);const d=g(o,["enableAffectiveDialog"]);d!=null&&y(e,["enableAffectiveDialog"],d);const h=g(o,["frequencyPenalty"]);h!=null&&y(e,["frequencyPenalty"],h);const f=g(o,["logprobs"]);f!=null&&y(e,["logprobs"],f);const m=g(o,["maxOutputTokens"]);m!=null&&y(e,["maxOutputTokens"],m);const v=g(o,["mediaResolution"]);v!=null&&y(e,["mediaResolution"],v);const A=g(o,["presencePenalty"]);A!=null&&y(e,["presencePenalty"],A);const E=g(o,["responseLogprobs"]);E!=null&&y(e,["responseLogprobs"],E);const _=g(o,["responseMimeType"]);_!=null&&y(e,["responseMimeType"],_);const C=g(o,["responseModalities"]);C!=null&&y(e,["responseModalities"],C);const M=g(o,["responseSchema"]);M!=null&&y(e,["responseSchema"],M);const R=g(o,["routingConfig"]);R!=null&&y(e,["routingConfig"],R);const L=g(o,["seed"]);L!=null&&y(e,["seed"],L);const I=g(o,["speechConfig"]);I!=null&&y(e,["speechConfig"],I);const U=g(o,["stopSequences"]);U!=null&&y(e,["stopSequences"],U);const P=g(o,["temperature"]);P!=null&&y(e,["temperature"],P);const O=g(o,["thinkingConfig"]);O!=null&&y(e,["thinkingConfig"],O);const F=g(o,["topK"]);F!=null&&y(e,["topK"],F);const Z=g(o,["topP"]);if(Z!=null&&y(e,["topP"],Z),g(o,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function VF(o,t,e){const n={},s=g(t,["model"]);return s!=null&&y(n,["_url","name"],te(o,s)),n}function qF(o,t,e){const n={},s=g(t,["model"]);return s!=null&&y(n,["_url","name"],te(o,s)),n}function YF(o,t){const e={};if(g(o,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(o,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function $F(o,t){const e={};if(g(o,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(o,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(o,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function XF(o,t){const e={},n=g(o,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const s=g(o,["imageSize"]);if(s!=null&&y(e,["imageSize"],s),g(o,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(g(o,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(o,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function JF(o,t){const e={},n=g(o,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const s=g(o,["imageSize"]);s!=null&&y(e,["imageSize"],s);const a=g(o,["personGeneration"]);a!=null&&y(e,["personGeneration"],a);const l=g(o,["outputMimeType"]);l!=null&&y(e,["imageOutputOptions","mimeType"],l);const d=g(o,["outputCompressionQuality"]);return d!=null&&y(e,["imageOutputOptions","compressionQuality"],d),e}function KF(o,t){const e={},n=g(o,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],wl(n));const s=g(o,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function VR(o,t){const e={},n=g(o,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const s=g(o,["bytesBase64Encoded"]);s!=null&&y(e,["imageBytes"],wl(s));const a=g(o,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function Dv(o,t){const e={};if(g(o,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=g(o,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],wl(n));const s=g(o,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function io(o,t){const e={},n=g(o,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const s=g(o,["imageBytes"]);s!=null&&y(e,["bytesBase64Encoded"],wl(s));const a=g(o,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function WF(o,t,e,n){const s={},a=g(t,["pageSize"]);e!==void 0&&a!=null&&y(e,["_query","pageSize"],a);const l=g(t,["pageToken"]);e!==void 0&&l!=null&&y(e,["_query","pageToken"],l);const d=g(t,["filter"]);e!==void 0&&d!=null&&y(e,["_query","filter"],d);const h=g(t,["queryBase"]);return e!==void 0&&h!=null&&y(e,["_url","models_url"],UR(o,h)),s}function QF(o,t,e,n){const s={},a=g(t,["pageSize"]);e!==void 0&&a!=null&&y(e,["_query","pageSize"],a);const l=g(t,["pageToken"]);e!==void 0&&l!=null&&y(e,["_query","pageToken"],l);const d=g(t,["filter"]);e!==void 0&&d!=null&&y(e,["_query","filter"],d);const h=g(t,["queryBase"]);return e!==void 0&&h!=null&&y(e,["_url","models_url"],UR(o,h)),s}function ZF(o,t,e){const n={},s=g(t,["config"]);return s!=null&&WF(o,s,n),n}function jF(o,t,e){const n={},s=g(t,["config"]);return s!=null&&QF(o,s,n),n}function t3(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["nextPageToken"]);s!=null&&y(e,["nextPageToken"],s);const a=g(o,["_self"]);if(a!=null){let l=OR(a);Array.isArray(l)&&(l=l.map(d=>Ob(d))),y(e,["models"],l)}return e}function e3(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["nextPageToken"]);s!=null&&y(e,["nextPageToken"],s);const a=g(o,["_self"]);if(a!=null){let l=OR(a);Array.isArray(l)&&(l=l.map(d=>Bb(d))),y(e,["models"],l)}return e}function n3(o,t){const e={},n=g(o,["maskMode"]);n!=null&&y(e,["maskMode"],n);const s=g(o,["segmentationClasses"]);s!=null&&y(e,["maskClasses"],s);const a=g(o,["maskDilation"]);return a!=null&&y(e,["dilation"],a),e}function Ob(o,t){const e={},n=g(o,["name"]);n!=null&&y(e,["name"],n);const s=g(o,["displayName"]);s!=null&&y(e,["displayName"],s);const a=g(o,["description"]);a!=null&&y(e,["description"],a);const l=g(o,["version"]);l!=null&&y(e,["version"],l);const d=g(o,["_self"]);d!=null&&y(e,["tunedModelInfo"],v3(d));const h=g(o,["inputTokenLimit"]);h!=null&&y(e,["inputTokenLimit"],h);const f=g(o,["outputTokenLimit"]);f!=null&&y(e,["outputTokenLimit"],f);const m=g(o,["supportedGenerationMethods"]);m!=null&&y(e,["supportedActions"],m);const v=g(o,["temperature"]);v!=null&&y(e,["temperature"],v);const A=g(o,["maxTemperature"]);A!=null&&y(e,["maxTemperature"],A);const E=g(o,["topP"]);E!=null&&y(e,["topP"],E);const _=g(o,["topK"]);_!=null&&y(e,["topK"],_);const C=g(o,["thinking"]);return C!=null&&y(e,["thinking"],C),e}function Bb(o,t){const e={},n=g(o,["name"]);n!=null&&y(e,["name"],n);const s=g(o,["displayName"]);s!=null&&y(e,["displayName"],s);const a=g(o,["description"]);a!=null&&y(e,["description"],a);const l=g(o,["versionId"]);l!=null&&y(e,["version"],l);const d=g(o,["deployedModels"]);if(d!=null){let A=d;Array.isArray(A)&&(A=A.map(E=>mF(E))),y(e,["endpoints"],A)}const h=g(o,["labels"]);h!=null&&y(e,["labels"],h);const f=g(o,["_self"]);f!=null&&y(e,["tunedModelInfo"],A3(f));const m=g(o,["defaultCheckpointId"]);m!=null&&y(e,["defaultCheckpointId"],m);const v=g(o,["checkpoints"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(E=>E)),y(e,["checkpoints"],A)}return e}function i3(o,t){const e={},n=g(o,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const s=g(o,["codeExecutionResult"]);s!=null&&y(e,["codeExecutionResult"],s);const a=g(o,["executableCode"]);a!=null&&y(e,["executableCode"],a);const l=g(o,["fileData"]);l!=null&&y(e,["fileData"],gF(l));const d=g(o,["functionCall"]);d!=null&&y(e,["functionCall"],yF(d));const h=g(o,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const f=g(o,["inlineData"]);f!=null&&y(e,["inlineData"],zB(f));const m=g(o,["text"]);m!=null&&y(e,["text"],m);const v=g(o,["thought"]);v!=null&&y(e,["thought"],v);const A=g(o,["thoughtSignature"]);A!=null&&y(e,["thoughtSignature"],A);const E=g(o,["videoMetadata"]);return E!=null&&y(e,["videoMetadata"],E),e}function s3(o,t){const e={},n=g(o,["productImage"]);return n!=null&&y(e,["image"],io(n)),e}function o3(o,t,e){const n={},s=g(o,["numberOfImages"]);t!==void 0&&s!=null&&y(t,["parameters","sampleCount"],s);const a=g(o,["baseSteps"]);t!==void 0&&a!=null&&y(t,["parameters","baseSteps"],a);const l=g(o,["outputGcsUri"]);t!==void 0&&l!=null&&y(t,["parameters","storageUri"],l);const d=g(o,["seed"]);t!==void 0&&d!=null&&y(t,["parameters","seed"],d);const h=g(o,["safetyFilterLevel"]);t!==void 0&&h!=null&&y(t,["parameters","safetySetting"],h);const f=g(o,["personGeneration"]);t!==void 0&&f!=null&&y(t,["parameters","personGeneration"],f);const m=g(o,["addWatermark"]);t!==void 0&&m!=null&&y(t,["parameters","addWatermark"],m);const v=g(o,["outputMimeType"]);t!==void 0&&v!=null&&y(t,["parameters","outputOptions","mimeType"],v);const A=g(o,["outputCompressionQuality"]);t!==void 0&&A!=null&&y(t,["parameters","outputOptions","compressionQuality"],A);const E=g(o,["enhancePrompt"]);t!==void 0&&E!=null&&y(t,["parameters","enhancePrompt"],E);const _=g(o,["labels"]);return t!==void 0&&_!=null&&y(t,["labels"],_),n}function r3(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],te(o,s));const a=g(t,["source"]);a!=null&&l3(a,n);const l=g(t,["config"]);return l!=null&&o3(l,n),n}function a3(o,t){const e={},n=g(o,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Iv(a))),y(e,["generatedImages"],s)}return e}function l3(o,t,e){const n={},s=g(o,["prompt"]);t!==void 0&&s!=null&&y(t,["instances[0]","prompt"],s);const a=g(o,["personImage"]);t!==void 0&&a!=null&&y(t,["instances[0]","personImage","image"],io(a));const l=g(o,["productImages"]);if(t!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>s3(h))),y(t,["instances[0]","productImages"],d)}return n}function c3(o,t){const e={},n=g(o,["referenceImage"]);n!=null&&y(e,["referenceImage"],io(n));const s=g(o,["referenceId"]);s!=null&&y(e,["referenceId"],s);const a=g(o,["referenceType"]);a!=null&&y(e,["referenceType"],a);const l=g(o,["maskImageConfig"]);l!=null&&y(e,["maskImageConfig"],n3(l));const d=g(o,["controlImageConfig"]);d!=null&&y(e,["controlImageConfig"],KB(d));const h=g(o,["styleImageConfig"]);h!=null&&y(e,["styleImageConfig"],h);const f=g(o,["subjectImageConfig"]);return f!=null&&y(e,["subjectImageConfig"],f),e}function qR(o,t){const e={},n=g(o,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const s=g(o,["safetyAttributes","scores"]);s!=null&&y(e,["scores"],s);const a=g(o,["contentType"]);return a!=null&&y(e,["contentType"],a),e}function YR(o,t){const e={},n=g(o,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const s=g(o,["safetyAttributes","scores"]);s!=null&&y(e,["scores"],s);const a=g(o,["contentType"]);return a!=null&&y(e,["contentType"],a),e}function u3(o,t){const e={},n=g(o,["category"]);if(n!=null&&y(e,["category"],n),g(o,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=g(o,["threshold"]);return s!=null&&y(e,["threshold"],s),e}function d3(o,t){const e={},n=g(o,["image"]);return n!=null&&y(e,["image"],io(n)),e}function h3(o,t,e){const n={},s=g(o,["mode"]);t!==void 0&&s!=null&&y(t,["parameters","mode"],s);const a=g(o,["maxPredictions"]);t!==void 0&&a!=null&&y(t,["parameters","maxPredictions"],a);const l=g(o,["confidenceThreshold"]);t!==void 0&&l!=null&&y(t,["parameters","confidenceThreshold"],l);const d=g(o,["maskDilation"]);t!==void 0&&d!=null&&y(t,["parameters","maskDilation"],d);const h=g(o,["binaryColorThreshold"]);t!==void 0&&h!=null&&y(t,["parameters","binaryColorThreshold"],h);const f=g(o,["labels"]);return t!==void 0&&f!=null&&y(t,["labels"],f),n}function f3(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],te(o,s));const a=g(t,["source"]);a!=null&&m3(a,n);const l=g(t,["config"]);return l!=null&&h3(l,n),n}function p3(o,t){const e={},n=g(o,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>FF(a))),y(e,["generatedMasks"],s)}return e}function m3(o,t,e){const n={},s=g(o,["prompt"]);t!==void 0&&s!=null&&y(t,["instances[0]","prompt"],s);const a=g(o,["image"]);t!==void 0&&a!=null&&y(t,["instances[0]","image"],io(a));const l=g(o,["scribbleImage"]);return t!==void 0&&l!=null&&y(t,["instances[0]","scribble"],d3(l)),n}function g3(o,t){const e={},n=g(o,["retrievalConfig"]);n!=null&&y(e,["retrievalConfig"],n);const s=g(o,["functionCallingConfig"]);return s!=null&&y(e,["functionCallingConfig"],vF(s)),e}function y3(o,t){const e={};if(g(o,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=g(o,["computerUse"]);n!=null&&y(e,["computerUse"],n);const s=g(o,["fileSearch"]);s!=null&&y(e,["fileSearch"],s);const a=g(o,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),g(o,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=g(o,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(A=>A)),y(e,["functionDeclarations"],v)}const d=g(o,["googleMaps"]);d!=null&&y(e,["googleMaps"],YF(d));const h=g(o,["googleSearch"]);h!=null&&y(e,["googleSearch"],$F(h));const f=g(o,["googleSearchRetrieval"]);f!=null&&y(e,["googleSearchRetrieval"],f);const m=g(o,["urlContext"]);return m!=null&&y(e,["urlContext"],m),e}function $R(o,t){const e={},n=g(o,["retrieval"]);n!=null&&y(e,["retrieval"],n);const s=g(o,["computerUse"]);if(s!=null&&y(e,["computerUse"],s),g(o,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=g(o,["codeExecution"]);a!=null&&y(e,["codeExecution"],a);const l=g(o,["enterpriseWebSearch"]);l!=null&&y(e,["enterpriseWebSearch"],l);const d=g(o,["functionDeclarations"]);if(d!=null){let A=d;Array.isArray(A)&&(A=A.map(E=>AF(E))),y(e,["functionDeclarations"],A)}const h=g(o,["googleMaps"]);h!=null&&y(e,["googleMaps"],h);const f=g(o,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const m=g(o,["googleSearchRetrieval"]);m!=null&&y(e,["googleSearchRetrieval"],m);const v=g(o,["urlContext"]);return v!=null&&y(e,["urlContext"],v),e}function v3(o,t){const e={},n=g(o,["baseModel"]);n!=null&&y(e,["baseModel"],n);const s=g(o,["createTime"]);s!=null&&y(e,["createTime"],s);const a=g(o,["updateTime"]);return a!=null&&y(e,["updateTime"],a),e}function A3(o,t){const e={},n=g(o,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const s=g(o,["createTime"]);s!=null&&y(e,["createTime"],s);const a=g(o,["updateTime"]);return a!=null&&y(e,["updateTime"],a),e}function S3(o,t,e){const n={},s=g(o,["displayName"]);t!==void 0&&s!=null&&y(t,["displayName"],s);const a=g(o,["description"]);t!==void 0&&a!=null&&y(t,["description"],a);const l=g(o,["defaultCheckpointId"]);return t!==void 0&&l!=null&&y(t,["defaultCheckpointId"],l),n}function b3(o,t,e){const n={},s=g(o,["displayName"]);t!==void 0&&s!=null&&y(t,["displayName"],s);const a=g(o,["description"]);t!==void 0&&a!=null&&y(t,["description"],a);const l=g(o,["defaultCheckpointId"]);return t!==void 0&&l!=null&&y(t,["defaultCheckpointId"],l),n}function E3(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","name"],te(o,s));const a=g(t,["config"]);return a!=null&&S3(a,n),n}function T3(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],te(o,s));const a=g(t,["config"]);return a!=null&&b3(a,n),n}function _3(o,t,e){const n={},s=g(o,["outputGcsUri"]);t!==void 0&&s!=null&&y(t,["parameters","storageUri"],s);const a=g(o,["safetyFilterLevel"]);t!==void 0&&a!=null&&y(t,["parameters","safetySetting"],a);const l=g(o,["personGeneration"]);t!==void 0&&l!=null&&y(t,["parameters","personGeneration"],l);const d=g(o,["includeRaiReason"]);t!==void 0&&d!=null&&y(t,["parameters","includeRaiReason"],d);const h=g(o,["outputMimeType"]);t!==void 0&&h!=null&&y(t,["parameters","outputOptions","mimeType"],h);const f=g(o,["outputCompressionQuality"]);t!==void 0&&f!=null&&y(t,["parameters","outputOptions","compressionQuality"],f);const m=g(o,["enhanceInputImage"]);t!==void 0&&m!=null&&y(t,["parameters","upscaleConfig","enhanceInputImage"],m);const v=g(o,["imagePreservationFactor"]);t!==void 0&&v!=null&&y(t,["parameters","upscaleConfig","imagePreservationFactor"],v);const A=g(o,["labels"]);t!==void 0&&A!=null&&y(t,["labels"],A);const E=g(o,["numberOfImages"]);t!==void 0&&E!=null&&y(t,["parameters","sampleCount"],E);const _=g(o,["mode"]);return t!==void 0&&_!=null&&y(t,["parameters","mode"],_),n}function C3(o,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],te(o,s));const a=g(t,["image"]);a!=null&&y(n,["instances[0]","image"],io(a));const l=g(t,["upscaleFactor"]);l!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],l);const d=g(t,["config"]);return d!=null&&_3(d,n),n}function w3(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Iv(l))),y(e,["generatedImages"],a)}return e}function x3(o,t){const e={},n=g(o,["uri"]);n!=null&&y(e,["uri"],n);const s=g(o,["encodedVideo"]);s!=null&&y(e,["videoBytes"],wl(s));const a=g(o,["encoding"]);return a!=null&&y(e,["mimeType"],a),e}function M3(o,t){const e={},n=g(o,["gcsUri"]);n!=null&&y(e,["uri"],n);const s=g(o,["bytesBase64Encoded"]);s!=null&&y(e,["videoBytes"],wl(s));const a=g(o,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function R3(o,t){const e={},n=g(o,["image"]);n!=null&&y(e,["_self"],io(n));const s=g(o,["maskMode"]);return s!=null&&y(e,["maskMode"],s),e}function N3(o,t){const e={},n=g(o,["image"]);n!=null&&y(e,["image"],Dv(n));const s=g(o,["referenceType"]);return s!=null&&y(e,["referenceType"],s),e}function I3(o,t){const e={},n=g(o,["image"]);n!=null&&y(e,["image"],io(n));const s=g(o,["referenceType"]);return s!=null&&y(e,["referenceType"],s),e}function XR(o,t){const e={},n=g(o,["uri"]);n!=null&&y(e,["uri"],n);const s=g(o,["videoBytes"]);s!=null&&y(e,["encodedVideo"],wl(s));const a=g(o,["mimeType"]);return a!=null&&y(e,["encoding"],a),e}function JR(o,t){const e={},n=g(o,["uri"]);n!=null&&y(e,["gcsUri"],n);const s=g(o,["videoBytes"]);s!=null&&y(e,["bytesBase64Encoded"],wl(s));const a=g(o,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D3(o,t){const e={},n=g(o,["displayName"]);return t!==void 0&&n!=null&&y(t,["displayName"],n),e}function k3(o){const t={},e=g(o,["config"]);return e!=null&&D3(e,t),t}function L3(o,t){const e={},n=g(o,["force"]);return t!==void 0&&n!=null&&y(t,["_query","force"],n),e}function P3(o){const t={},e=g(o,["name"]);e!=null&&y(t,["_url","name"],e);const n=g(o,["config"]);return n!=null&&L3(n,t),t}function U3(o){const t={},e=g(o,["name"]);return e!=null&&y(t,["_url","name"],e),t}function O3(o,t){const e={},n=g(o,["customMetadata"]);if(t!==void 0&&n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>l)),y(t,["customMetadata"],a)}const s=g(o,["chunkingConfig"]);return t!==void 0&&s!=null&&y(t,["chunkingConfig"],s),e}function B3(o){const t={},e=g(o,["name"]);e!=null&&y(t,["name"],e);const n=g(o,["metadata"]);n!=null&&y(t,["metadata"],n);const s=g(o,["done"]);s!=null&&y(t,["done"],s);const a=g(o,["error"]);a!=null&&y(t,["error"],a);const l=g(o,["response"]);return l!=null&&y(t,["response"],H3(l)),t}function F3(o){const t={},e=g(o,["fileSearchStoreName"]);e!=null&&y(t,["_url","file_search_store_name"],e);const n=g(o,["fileName"]);n!=null&&y(t,["fileName"],n);const s=g(o,["config"]);return s!=null&&O3(s,t),t}function H3(o){const t={},e=g(o,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(o,["parent"]);n!=null&&y(t,["parent"],n);const s=g(o,["documentName"]);return s!=null&&y(t,["documentName"],s),t}function G3(o,t){const e={},n=g(o,["pageSize"]);t!==void 0&&n!=null&&y(t,["_query","pageSize"],n);const s=g(o,["pageToken"]);return t!==void 0&&s!=null&&y(t,["_query","pageToken"],s),e}function z3(o){const t={},e=g(o,["config"]);return e!=null&&G3(e,t),t}function V3(o){const t={},e=g(o,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(o,["nextPageToken"]);n!=null&&y(t,["nextPageToken"],n);const s=g(o,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(t,["fileSearchStores"],a)}return t}function KR(o,t){const e={},n=g(o,["mimeType"]);t!==void 0&&n!=null&&y(t,["mimeType"],n);const s=g(o,["displayName"]);t!==void 0&&s!=null&&y(t,["displayName"],s);const a=g(o,["customMetadata"]);if(t!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>h)),y(t,["customMetadata"],d)}const l=g(o,["chunkingConfig"]);return t!==void 0&&l!=null&&y(t,["chunkingConfig"],l),e}function q3(o){const t={},e=g(o,["fileSearchStoreName"]);e!=null&&y(t,["_url","file_search_store_name"],e);const n=g(o,["config"]);return n!=null&&KR(n,t),t}function Y3(o){const t={},e=g(o,["sdkHttpResponse"]);return e!=null&&y(t,["sdkHttpResponse"],e),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $3="Content-Type",X3="X-Server-Timeout",J3="User-Agent",Fb="x-goog-api-client",K3="1.39.0",W3=`google-genai-sdk/${K3}`,Q3="v1beta1",Z3="v1beta";class j3{constructor(t){var e,n,s;this.clientOptions=Object.assign({},t),this.customBaseUrl=(e=t.httpOptions)===null||e===void 0?void 0:e.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=t.project&&t.location||!!t.apiKey;this.customBaseUrl&&!d?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Q3}else{if(!this.clientOptions.apiKey)throw new _p({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:Z3,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&n.push(t.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e,n){const s=[this.getRequestUrlInternal(e)];return n&&s.push(this.getBaseResourcePath()),t!==""&&s.push(t),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(t,e){return!(e.baseUrl&&e.baseUrlResourceScope===kb.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t,e),s=this.constructUrl(t.path,e,n);if(t.queryParams)for(const[l,d]of Object.entries(t.queryParams))s.searchParams.append(l,String(d));let a={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=t.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,e,s.toString(),t.abortSignal),this.unaryApiCall(s,a,t.httpMethod)}patchHttpOptions(t,e){const n=JSON.parse(JSON.stringify(t));for(const[s,a]of Object.entries(e))typeof a=="object"?n[s]=Object.assign(Object.assign({},n[s]),a):a!==void 0&&(n[s]=a);return n}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t,e),s=this.constructUrl(t.path,e,n);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=t.body,a=await this.includeExtraHttpOptionsToRequestInit(a,e,s.toString(),t.abortSignal),this.streamApiCall(s,a,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e,n,s){if(e&&e.timeout||s){const a=new AbortController,l=a.signal;if(e.timeout&&(e==null?void 0:e.timeout)>0){const d=setTimeout(()=>a.abort(),e.timeout);d&&typeof d.unref=="function"&&d.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),t.signal=l}return e&&e.extraBody!==null&&tH(t,e.extraBody),t.headers=await this.getHeadersInternal(e,n),t}async unaryApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async s=>(await MM(s),new Lb(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async s=>(await MM(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(t){return to(this,arguments,function*(){var n;const s=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";const d="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:m}=yield wt(s.read());if(f){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const v=a.decode(m,{stream:!0});try{const _=JSON.parse(v);if("error"in _){const C=JSON.parse(JSON.stringify(_.error)),M=C.status,R=C.code,L=`got status: ${M}. ${JSON.stringify(_)}`;if(R>=400&&R<600)throw new _p({message:L,status:R})}}catch(_){if(_.name==="ApiError")throw _}l+=v;let A=-1,E=0;for(;;){A=-1,E=0;for(const M of h){const R=l.indexOf(M);R!==-1&&(A===-1||R<A)&&(A=R,E=M.length)}if(A===-1)break;const _=l.substring(0,A);l=l.substring(A+E);const C=_.trim();if(C.startsWith(d)){const M=C.substring(d.length).trim();try{const R=new Response(M,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield wt(new Lb(R))}catch(R){throw new Error(`exception parsing stream chunk ${M}. ${R}`)}}}}}finally{s.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const t={},e=W3+" "+this.clientOptions.userAgentExtra;return t[J3]=e,t[Fb]=e,t[$3]="application/json",t}async getHeadersInternal(t,e){const n=new Headers;if(t&&t.headers){for(const[s,a]of Object.entries(t.headers))n.append(s,a);t.timeout&&t.timeout>0&&n.append(X3,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,e),n}getFileName(t){var e;let n="";return typeof t=="string"&&(n=t.replace(/[/\\]+$/,""),n=(e=n.split(/[/\\]/).pop())!==null&&e!==void 0?e:""),n}async uploadFile(t,e){var n;const s={};e!=null&&(s.mimeType=e.mimeType,s.name=e.name,s.displayName=e.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,l=await a.stat(t);s.sizeBytes=String(l.size);const d=(n=e==null?void 0:e.mimeType)!==null&&n!==void 0?n:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;const h={file:s},f=this.getFileName(t),m=lt("upload/v1beta/files",h._url),v=await this.fetchUploadUrl(m,s.sizeBytes,s.mimeType,f,h,e==null?void 0:e.httpOptions);return a.upload(t,v,this)}async uploadFileToFileSearchStore(t,e,n){var s;const a=this.clientOptions.uploader,l=await a.stat(e),d=String(l.size),h=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:l.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${t}:uploadToFileSearchStore`,m=this.getFileName(e),v={};n!=null&&KR(n,v);const A=await this.fetchUploadUrl(f,d,h,m,v,n==null?void 0:n.httpOptions);return a.uploadToFileSearchStore(e,A,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,e,n,s,a,l){var d;let h={};l?h=l:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e}`,"X-Goog-Upload-Header-Content-Type":`${n}`},s?{"X-Goog-Upload-File-Name":s}:{})};const f=await this.request({path:t,body:JSON.stringify(a),httpMethod:"POST",httpOptions:h});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(d=f==null?void 0:f.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function MM(o){var t;if(o===void 0)throw new Error("response is undefined");if(!o.ok){const e=o.status;let n;!((t=o.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?n=await o.json():n={error:{message:await o.text(),code:o.status,status:o.statusText}};const s=JSON.stringify(n);throw e>=400&&e<600?new _p({message:s,status:e}):new Error(s)}}function tH(o,t){if(!t||Object.keys(t).length===0)return;if(o.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let e={};if(typeof o.body=="string"&&o.body.length>0)try{const a=JSON.parse(o.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))e=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(a,l){const d=Object.assign({},a);for(const h in l)if(Object.prototype.hasOwnProperty.call(l,h)){const f=l[h],m=d[h];f&&typeof f=="object"&&!Array.isArray(f)&&m&&typeof m=="object"&&!Array.isArray(m)?d[h]=n(m,f):(m&&f&&typeof m!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof m}, New type: ${typeof f}. Overwriting.`),d[h]=f)}return d}const s=n(e,t);o.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eH="mcp_used/unknown";let nH=!1;function WR(o){for(const t of o)if(iH(t)||typeof t=="object"&&"inputSchema"in t)return!0;return nH}function QR(o){var t;const e=(t=o[Fb])!==null&&t!==void 0?t:"";o[Fb]=(e+` ${eH}`).trimStart()}function iH(o){return o!==null&&typeof o=="object"&&o instanceof DT}function sH(o){return to(this,arguments,function*(e,n=100){let s,a=0;for(;a<n;){const l=yield wt(e.listTools({cursor:s}));for(const d of l.tools)yield yield wt(d),a++;if(!l.nextCursor)break;s=l.nextCursor}})}class DT{constructor(t=[],e){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=e}static create(t,e){return new DT(t,e)}async initialize(){var t,e,n,s;if(this.mcpTools.length>0)return;const a={},l=[];for(const m of this.mcpClients)try{for(var d=!0,h=(e=void 0,eo(sH(m))),f;f=await h.next(),t=f.done,!t;d=!0){s=f.value,d=!1;const v=s;l.push(v);const A=v.name;if(a[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);a[A]=m}}catch(v){e={error:v}}finally{try{!d&&!t&&(n=h.return)&&await n.call(h)}finally{if(e)throw e.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),kU(this.mcpTools,this.config)}async callTool(t){await this.initialize();const e=[];for(const n of t)if(n.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[n.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await s.callTool({name:n.name,arguments:n.args},void 0,a);e.push({functionResponse:{name:n.name,response:l.isError?{error:l}:l}})}return e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function oH(o,t,e){const n=new CU;let s;e.data instanceof Blob?s=JSON.parse(await e.data.text()):s=JSON.parse(e.data),Object.assign(n,s),t(n)}class rH{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n}async connect(t){var e,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=cH(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),h=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let f=()=>{};const m=new Promise(I=>{f=I}),v=t.callbacks,A=function(){f({})},E=this.apiClient,_={onopen:A,onmessage:I=>{oH(E,v.onmessage,I)},onerror:(e=v==null?void 0:v.onerror)!==null&&e!==void 0?e:function(I){},onclose:(n=v==null?void 0:v.onclose)!==null&&n!==void 0?n:function(I){}},C=this.webSocketFactory.create(h,lH(l),_);C.connect(),await m;const L={setup:{model:te(this.apiClient,t.model)}};return C.send(JSON.stringify(L)),new aH(C,this.apiClient)}}class aH{constructor(t,e){this.conn=t,this.apiClient=e}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=DB(t);this.conn.send(JSON.stringify({clientContent:e}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const e=IB(t);this.conn.send(JSON.stringify(e))}sendPlaybackControl(t){const e={playbackControl:t};this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(dd.PLAY)}pause(){this.sendPlaybackControl(dd.PAUSE)}stop(){this.sendPlaybackControl(dd.STOP)}resetContext(){this.sendPlaybackControl(dd.RESET_CONTEXT)}close(){this.conn.close()}}function lH(o){const t={};return o.forEach((e,n)=>{t[n]=e}),t}function cH(o){const t=new Headers;for(const[e,n]of Object.entries(o))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uH="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function dH(o,t,e){const n=new _U;let s;e.data instanceof Blob?s=await e.data.text():e.data instanceof ArrayBuffer?s=new TextDecoder().decode(e.data):s=e.data;const a=JSON.parse(s);if(o.isVertexAI()){const l=PB(a);Object.assign(n,l)}else Object.assign(n,a);t(n)}class hH{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n,this.music=new rH(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var e,n,s,a,l,d;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let m;const v=this.apiClient.getHeaders();t.config&&t.config.tools&&WR(t.config.tools)&&QR(v);const A=gH(v);if(this.apiClient.isVertexAI()){const X=this.apiClient.getProject(),nt=this.apiClient.getLocation(),it=this.apiClient.getApiKey(),dt=!!X&&!!nt||!!it;this.apiClient.getCustomBaseUrl()&&!dt?m=h:(m=`${h}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A,m))}else{const X=this.apiClient.getApiKey();let nt="BidiGenerateContent",it="key";X!=null&&X.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),nt="BidiGenerateContentConstrained",it="access_token"),m=`${h}/ws/google.ai.generativelanguage.${f}.GenerativeService.${nt}?${it}=${X}`}let E=()=>{};const _=new Promise(X=>{E=X}),C=t.callbacks,M=function(){var X;(X=C==null?void 0:C.onopen)===null||X===void 0||X.call(C),E({})},R=this.apiClient,L={onopen:M,onmessage:X=>{dH(R,C.onmessage,X)},onerror:(e=C==null?void 0:C.onerror)!==null&&e!==void 0?e:function(X){},onclose:(n=C==null?void 0:C.onclose)!==null&&n!==void 0?n:function(X){}},I=this.webSocketFactory.create(m,mH(A),L);I.connect(),await _;let U=te(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&U.startsWith("publishers/")){const X=this.apiClient.getProject(),nt=this.apiClient.getLocation();X&&nt&&(U=`projects/${X}/locations/${nt}/`+U)}let P={};this.apiClient.isVertexAI()&&((s=t.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[$0.AUDIO]}:t.config.responseModalities=[$0.AUDIO]),!((a=t.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(d=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[],F=[];for(const X of O)if(this.isCallableTool(X)){const nt=X;F.push(await nt.tool())}else F.push(X);F.length>0&&(t.config.tools=F);const Z={model:U,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?P=NB(this.apiClient,Z):P=RB(this.apiClient,Z),delete P.config,I.send(JSON.stringify(P)),new pH(I,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const fH={turnComplete:!0};class pH{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let n=[];try{n=Is(e.turns),t.isVertexAI()||(n=n.map(s=>Nv(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:n,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(t,e){let n=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?n=e.functionResponses:n=[e.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const a of n){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!t.isVertexAI()&&!("id"in a))throw new Error(uH)}return{toolResponse:{functionResponses:n}}}sendClientContent(t){t=Object.assign(Object.assign({},fH),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){let e={};this.apiClient.isVertexAI()?e={realtimeInput:LB(t)}:e={realtimeInput:kB(t)},this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function mH(o){const t={};return o.forEach((e,n)=>{t[n]=e}),t}function gH(o){const t=new Headers;for(const[e,n]of Object.entries(o))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RM=10;function NM(o){var t,e,n;if(!((t=o==null?void 0:o.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let s=!1;for(const l of(e=o==null?void 0:o.tools)!==null&&e!==void 0?e:[])if(Sd(l)){s=!0;break}if(!s)return!0;const a=(n=o==null?void 0:o.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Sd(o){return"callTool"in o&&typeof o.callTool=="function"}function yH(o){var t,e,n;return(n=(e=(t=o.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(s=>Sd(s)))!==null&&n!==void 0?n:!1}function IM(o){var t;const e=[];return!((t=o==null?void 0:o.config)===null||t===void 0)&&t.tools&&o.config.tools.forEach((n,s)=>{if(Sd(n))return;const a=n;a.functionDeclarations&&a.functionDeclarations.length>0&&e.push(s)}),e}function DM(o){var t;return!(!((t=o==null?void 0:o.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vH extends jr{constructor(t){super(),this.apiClient=t,this.generateContent=async e=>{var n,s,a,l,d;const h=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!yH(e)||NM(e.config))return await this.generateContentInternal(h);const f=IM(e);if(f.length>0){const C=f.map(M=>`tools[${M}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let m,v;const A=Is(h.contents),E=(a=(s=(n=h.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:RM;let _=0;for(;_<E&&(m=await this.generateContentInternal(h),!(!m.functionCalls||m.functionCalls.length===0));){const C=m.candidates[0].content,M=[];for(const R of(d=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[])if(Sd(R)){const I=await R.callTool(m.functionCalls);M.push(...I)}_++,v={role:"user",parts:M},h.contents=Is(h.contents),h.contents.push(C),h.contents.push(v),DM(h.config)&&(A.push(C),A.push(v))}return DM(h.config)&&(m.automaticFunctionCallingHistory=A),m},this.generateContentStream=async e=>{var n,s,a,l,d;if(this.maybeMoveToResponseJsonSchem(e),NM(e.config)){const v=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(v)}const h=IM(e);if(h.length>0){const v=h.map(A=>`tools[${A}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(a=(s=(n=e==null?void 0:e.config)===null||n===void 0?void 0:n.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,m=(d=(l=e==null?void 0:e.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(f&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(n=>{var s;let a;const l=[];if(n!=null&&n.generatedImages)for(const h of n.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((s=h==null?void 0:h.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=h==null?void 0:h.safetyAttributes:l.push(h);let d;return a?d={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:n.sdkHttpResponse}:d={generatedImages:l,sdkHttpResponse:n.sdkHttpResponse},d}),this.list=async e=>{var n;const l={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((n=l.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new pu(Kr.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(l),l)},this.editImage=async e=>{const n={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(n.referenceImages=e.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async e=>{let n={numberOfImages:1,mode:"upscale"};e.config&&(n=Object.assign(Object.assign({},n),e.config));const s={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:n};return await this.upscaleImageInternal(s)},this.generateVideos=async e=>{var n,s,a,l,d,h;if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((n=e.video)===null||n===void 0)&&n.uri&&(!((s=e.video)===null||s===void 0)&&s.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:!((l=(a=e.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((h=(d=e.source)===null||d===void 0?void 0:d.video)===null||h===void 0)&&h.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var e,n,s;const a=(e=t.config)===null||e===void 0?void 0:e.tools;if(!a)return t;const l=await Promise.all(a.map(async h=>Sd(h)?await h.tool():h)),d={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:l})};if(d.config.tools=l,t.config&&t.config.tools&&WR(t.config.tools)){const h=(s=(n=t.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&s!==void 0?s:{};let f=Object.assign({},h);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),QR(f),d.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:f})}return d}async initAfcToolsMap(t){var e,n,s;const a=new Map;for(const l of(n=(e=t.config)===null||e===void 0?void 0:e.tools)!==null&&n!==void 0?n:[])if(Sd(l)){const d=l,h=await d.tool();for(const f of(s=h.functionDeclarations)!==null&&s!==void 0?s:[]){if(!f.name)throw new Error("Function declaration name is required.");if(a.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);a.set(f.name,d)}}return a}async processAfcStream(t){var e,n,s;const a=(s=(n=(e=t.config)===null||e===void 0?void 0:e.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&s!==void 0?s:RM;let l=!1,d=0;const h=await this.initAfcToolsMap(t);return(function(f,m,v){return to(this,arguments,function*(){for(var A,E,_,C,M,R;d<a;){l&&(d++,l=!1);const P=yield wt(f.processParamsMaybeAddMcpUsage(v)),O=yield wt(f.generateContentStreamInternal(P)),F=[],Z=[];try{for(var L=!0,I=(E=void 0,eo(O)),U;U=yield wt(I.next()),A=U.done,!A;L=!0){C=U.value,L=!1;const X=C;if(yield yield wt(X),X.candidates&&(!((M=X.candidates[0])===null||M===void 0)&&M.content)){Z.push(X.candidates[0].content);for(const nt of(R=X.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(d<a&&nt.functionCall){if(!nt.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(nt.functionCall.name)){const it=yield wt(m.get(nt.functionCall.name).callTool([nt.functionCall]));F.push(...it)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${nt.functionCall.name}`)}}}}catch(X){E={error:X}}finally{try{!L&&!A&&(_=I.return)&&(yield wt(_.call(I)))}finally{if(E)throw E.error}}if(F.length>0){l=!0;const X=new Kf;X.candidates=[{content:{role:"user",parts:F}}],yield yield wt(X);const nt=[];nt.push(...Z),nt.push({role:"user",parts:F});const it=Is(v.contents).concat(nt);v.contents=it}else break}})})(this,h,t)}async generateContentInternal(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=CM(this.apiClient,t);return d=lt("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=xM(m),A=new Kf;return Object.assign(A,v),A})}else{const f=_M(this.apiClient,t);return d=lt("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=wM(m),A=new Kf;return Object.assign(A,v),A})}}async generateContentStreamInternal(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=CM(this.apiClient,t);return d=lt("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}),l.then(function(v){return to(this,arguments,function*(){var A,E,_,C;try{for(var M=!0,R=eo(v),L;L=yield wt(R.next()),A=L.done,!A;M=!0){C=L.value,M=!1;const I=C,U=xM(yield wt(I.json()),t);U.sdkHttpResponse={headers:I.headers};const P=new Kf;Object.assign(P,U),yield yield wt(P)}}catch(I){E={error:I}}finally{try{!M&&!A&&(_=R.return)&&(yield wt(_.call(R)))}finally{if(E)throw E.error}}})})}else{const f=_M(this.apiClient,t);return d=lt("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(v){return to(this,arguments,function*(){var A,E,_,C;try{for(var M=!0,R=eo(v),L;L=yield wt(R.next()),A=L.done,!A;M=!0){C=L.value,M=!1;const I=C,U=wM(yield wt(I.json()),t);U.sdkHttpResponse={headers:I.headers};const P=new Kf;Object.assign(P,U),yield yield wt(P)}}catch(I){E={error:I}}finally{try{!M&&!A&&(_=R.return)&&(yield wt(_.call(R)))}finally{if(E)throw E.error}}})})}}async embedContent(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=hF(this.apiClient,t);return d=lt("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=pF(m),A=new aM;return Object.assign(A,v),A})}else{const f=dF(this.apiClient,t);return d=lt("{model}:batchEmbedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=fF(m),A=new aM;return Object.assign(A,v),A})}}async generateImagesInternal(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=CF(this.apiClient,t);return d=lt("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=xF(m),A=new lM;return Object.assign(A,v),A})}else{const f=_F(this.apiClient,t);return d=lt("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=wF(m),A=new lM;return Object.assign(A,v),A})}}async editImageInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI()){const d=aF(this.apiClient,t);return a=lt("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const f=lF(h),m=new hU;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI()){const d=C3(this.apiClient,t);return a=lt("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const f=w3(h),m=new fU;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI()){const d=r3(this.apiClient,t);return a=lt("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=a3(h),m=new pU;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI()){const d=f3(this.apiClient,t);return a=lt("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=p3(h),m=new mU;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=qF(this.apiClient,t);return d=lt("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l.then(m=>Bb(m))}else{const f=VF(this.apiClient,t);return d=lt("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l.then(m=>Ob(m))}}async listInternal(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=jF(this.apiClient,t);return d=lt("{models_url}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=e3(m),A=new cM;return Object.assign(A,v),A})}else{const f=ZF(this.apiClient,t);return d=lt("{models_url}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=t3(m),A=new cM;return Object.assign(A,v),A})}}async update(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=T3(this.apiClient,t);return d=lt("{model}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l.then(m=>Bb(m))}else{const f=E3(this.apiClient,t);return d=lt("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l.then(m=>Ob(m))}}async delete(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=iF(this.apiClient,t);return d=lt("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=oF(m),A=new uM;return Object.assign(A,v),A})}else{const f=nF(this.apiClient,t);return d=lt("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=sF(m),A=new uM;return Object.assign(A,v),A})}}async countTokens(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=jB(this.apiClient,t);return d=lt("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=eF(m),A=new dM;return Object.assign(A,v),A})}else{const f=ZB(this.apiClient,t);return d=lt("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=tF(m),A=new dM;return Object.assign(A,v),A})}}async computeTokens(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI()){const d=YB(this.apiClient,t);return a=lt("{model}:computeTokens",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const f=$B(h),m=new gU;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=kF(this.apiClient,t);return d=lt("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l.then(m=>{const v=IF(m),A=new X0;return Object.assign(A,v),A})}else{const f=DF(this.apiClient,t);return d=lt("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l.then(m=>{const v=NF(m),A=new X0;return Object.assign(A,v),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AH extends jr{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const e=t.operation,n=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=e.name.split("/operations/")[0];let a;n&&"httpOptions"in n&&(a=n.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:s,config:{httpOptions:a}});return e._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:e.name,config:n});return e._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(t){const e=t.operation,n=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=e.name.split("/operations/")[0];let a;n&&"httpOptions"in n&&(a=n.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:s,config:{httpOptions:a}});return e._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:e.name,config:n});return e._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=rU(t);return d=lt("{operationName}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l}else{const f=oU(t);return d=lt("{operationName}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),l}}async fetchPredictVideosOperationInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI()){const d=ZP(t);return a=lt("{resourceName}:fetchPredictOperation",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SH(o){const t={},e=g(o,["data"]);if(e!=null&&y(t,["data"],e),g(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(o,["mimeType"]);return n!=null&&y(t,["mimeType"],n),t}function bH(o){const t={},e=g(o,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(a=>NH(a))),y(t,["parts"],s)}const n=g(o,["role"]);return n!=null&&y(t,["role"],n),t}function EH(o,t,e){const n={},s=g(t,["expireTime"]);e!==void 0&&s!=null&&y(e,["expireTime"],s);const a=g(t,["newSessionExpireTime"]);e!==void 0&&a!=null&&y(e,["newSessionExpireTime"],a);const l=g(t,["uses"]);e!==void 0&&l!=null&&y(e,["uses"],l);const d=g(t,["liveConnectConstraints"]);e!==void 0&&d!=null&&y(e,["bidiGenerateContentSetup"],RH(o,d));const h=g(t,["lockAdditionalFields"]);return e!==void 0&&h!=null&&y(e,["fieldMask"],h),n}function TH(o,t){const e={},n=g(t,["config"]);return n!=null&&y(e,["config"],EH(o,n,e)),e}function _H(o){const t={};if(g(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(o,["fileUri"]);e!=null&&y(t,["fileUri"],e);const n=g(o,["mimeType"]);return n!=null&&y(t,["mimeType"],n),t}function CH(o){const t={},e=g(o,["id"]);e!=null&&y(t,["id"],e);const n=g(o,["args"]);n!=null&&y(t,["args"],n);const s=g(o,["name"]);if(s!=null&&y(t,["name"],s),g(o,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(o,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function wH(o){const t={};if(g(o,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(o,["enableWidget"]);return e!=null&&y(t,["enableWidget"],e),t}function xH(o){const t={};if(g(o,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(o,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(o,["timeRangeFilter"]);return e!=null&&y(t,["timeRangeFilter"],e),t}function MH(o,t){const e={},n=g(o,["generationConfig"]);t!==void 0&&n!=null&&y(t,["setup","generationConfig"],n);const s=g(o,["responseModalities"]);t!==void 0&&s!=null&&y(t,["setup","generationConfig","responseModalities"],s);const a=g(o,["temperature"]);t!==void 0&&a!=null&&y(t,["setup","generationConfig","temperature"],a);const l=g(o,["topP"]);t!==void 0&&l!=null&&y(t,["setup","generationConfig","topP"],l);const d=g(o,["topK"]);t!==void 0&&d!=null&&y(t,["setup","generationConfig","topK"],d);const h=g(o,["maxOutputTokens"]);t!==void 0&&h!=null&&y(t,["setup","generationConfig","maxOutputTokens"],h);const f=g(o,["mediaResolution"]);t!==void 0&&f!=null&&y(t,["setup","generationConfig","mediaResolution"],f);const m=g(o,["seed"]);t!==void 0&&m!=null&&y(t,["setup","generationConfig","seed"],m);const v=g(o,["speechConfig"]);t!==void 0&&v!=null&&y(t,["setup","generationConfig","speechConfig"],IT(v));const A=g(o,["thinkingConfig"]);t!==void 0&&A!=null&&y(t,["setup","generationConfig","thinkingConfig"],A);const E=g(o,["enableAffectiveDialog"]);t!==void 0&&E!=null&&y(t,["setup","generationConfig","enableAffectiveDialog"],E);const _=g(o,["systemInstruction"]);t!==void 0&&_!=null&&y(t,["setup","systemInstruction"],bH($n(_)));const C=g(o,["tools"]);if(t!==void 0&&C!=null){let O=Qh(C);Array.isArray(O)&&(O=O.map(F=>DH(Wh(F)))),y(t,["setup","tools"],O)}const M=g(o,["sessionResumption"]);t!==void 0&&M!=null&&y(t,["setup","sessionResumption"],IH(M));const R=g(o,["inputAudioTranscription"]);t!==void 0&&R!=null&&y(t,["setup","inputAudioTranscription"],R);const L=g(o,["outputAudioTranscription"]);t!==void 0&&L!=null&&y(t,["setup","outputAudioTranscription"],L);const I=g(o,["realtimeInputConfig"]);t!==void 0&&I!=null&&y(t,["setup","realtimeInputConfig"],I);const U=g(o,["contextWindowCompression"]);t!==void 0&&U!=null&&y(t,["setup","contextWindowCompression"],U);const P=g(o,["proactivity"]);if(t!==void 0&&P!=null&&y(t,["setup","proactivity"],P),g(o,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return e}function RH(o,t){const e={},n=g(t,["model"]);n!=null&&y(e,["setup","model"],te(o,n));const s=g(t,["config"]);return s!=null&&y(e,["config"],MH(s,e)),e}function NH(o){const t={},e=g(o,["mediaResolution"]);e!=null&&y(t,["mediaResolution"],e);const n=g(o,["codeExecutionResult"]);n!=null&&y(t,["codeExecutionResult"],n);const s=g(o,["executableCode"]);s!=null&&y(t,["executableCode"],s);const a=g(o,["fileData"]);a!=null&&y(t,["fileData"],_H(a));const l=g(o,["functionCall"]);l!=null&&y(t,["functionCall"],CH(l));const d=g(o,["functionResponse"]);d!=null&&y(t,["functionResponse"],d);const h=g(o,["inlineData"]);h!=null&&y(t,["inlineData"],SH(h));const f=g(o,["text"]);f!=null&&y(t,["text"],f);const m=g(o,["thought"]);m!=null&&y(t,["thought"],m);const v=g(o,["thoughtSignature"]);v!=null&&y(t,["thoughtSignature"],v);const A=g(o,["videoMetadata"]);return A!=null&&y(t,["videoMetadata"],A),t}function IH(o){const t={},e=g(o,["handle"]);if(e!=null&&y(t,["handle"],e),g(o,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function DH(o){const t={};if(g(o,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=g(o,["computerUse"]);e!=null&&y(t,["computerUse"],e);const n=g(o,["fileSearch"]);n!=null&&y(t,["fileSearch"],n);const s=g(o,["codeExecution"]);if(s!=null&&y(t,["codeExecution"],s),g(o,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(o,["functionDeclarations"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(v=>v)),y(t,["functionDeclarations"],m)}const l=g(o,["googleMaps"]);l!=null&&y(t,["googleMaps"],wH(l));const d=g(o,["googleSearch"]);d!=null&&y(t,["googleSearch"],xH(d));const h=g(o,["googleSearchRetrieval"]);h!=null&&y(t,["googleSearchRetrieval"],h);const f=g(o,["urlContext"]);return f!=null&&y(t,["urlContext"],f),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kH(o){const t=[];for(const e in o)if(Object.prototype.hasOwnProperty.call(o,e)){const n=o[e];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const s=Object.keys(n).map(a=>`${e}.${a}`);t.push(...s)}else t.push(e)}return t.join(",")}function LH(o,t){let e=null;const n=o.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const a=n.setup;typeof a=="object"&&a!==null?(o.bidiGenerateContentSetup=a,e=a):delete o.bidiGenerateContentSetup}else n!==void 0&&delete o.bidiGenerateContentSetup;const s=o.fieldMask;if(e){const a=kH(e);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)a?o.fieldMask=a:delete o.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];s.length>0&&(d=s.map(f=>l.includes(f)?`generationConfig.${f}`:f));const h=[];a&&h.push(a),d.length>0&&h.push(...d),h.length>0?o.fieldMask=h.join(","):delete o.fieldMask}else delete o.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?o.fieldMask=s.join(","):delete o.fieldMask;return o}class PH extends jr{constructor(t){super(),this.apiClient=t}async create(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=TH(this.apiClient,t);a=lt("auth_tokens",d._url),l=d._query,delete d.config,delete d._url,delete d._query;const h=LH(d,t.config);return s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),s.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UH(o,t){const e={},n=g(o,["force"]);return t!==void 0&&n!=null&&y(t,["_query","force"],n),e}function OH(o){const t={},e=g(o,["name"]);e!=null&&y(t,["_url","name"],e);const n=g(o,["config"]);return n!=null&&UH(n,t),t}function BH(o){const t={},e=g(o,["name"]);return e!=null&&y(t,["_url","name"],e),t}function FH(o,t){const e={},n=g(o,["pageSize"]);t!==void 0&&n!=null&&y(t,["_query","pageSize"],n);const s=g(o,["pageToken"]);return t!==void 0&&s!=null&&y(t,["_query","pageToken"],s),e}function HH(o){const t={},e=g(o,["parent"]);e!=null&&y(t,["_url","parent"],e);const n=g(o,["config"]);return n!=null&&FH(n,t),t}function GH(o){const t={},e=g(o,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(o,["nextPageToken"]);n!=null&&y(t,["nextPageToken"],n);const s=g(o,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(t,["documents"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zH extends jr{constructor(t){super(),this.apiClient=t,this.list=async e=>new pu(Kr.PAGED_ITEM_DOCUMENTS,n=>this.listInternal({parent:e.parent,config:n.config}),await this.listInternal(e),e)}async get(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=BH(t);return a=lt("{name}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(t){var e,n;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=OH(t);s=lt("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=HH(t);return a=lt("{parent}/documents",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=GH(h),m=new yU;return Object.assign(m,f),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VH extends jr{constructor(t,e=new zH(t)){super(),this.apiClient=t,this.documents=e,this.list=async(n={})=>new pu(Kr.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(n),n)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=k3(t);return a=lt("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=U3(t);return a=lt("{name}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(t){var e,n;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=P3(t);s=lt("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=z3(t);return a=lt("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=V3(h),m=new vU;return Object.assign(m,f),m})}}async uploadToFileSearchStoreInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=q3(t);return a=lt("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=Y3(h),m=new AU;return Object.assign(m,f),m})}}async importFile(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=F3(t);return a=lt("{file_search_store_name}:importFile",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=B3(h),m=new wT;return Object.assign(m,f),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ZR=function(){const{crypto:o}=globalThis;if(o!=null&&o.randomUUID)return ZR=o.randomUUID.bind(o),o.randomUUID();const t=new Uint8Array(1),e=o?()=>o.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^e()&15>>+n/4).toString(16))};const qH=()=>ZR();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hb(o){return typeof o=="object"&&o!==null&&("name"in o&&o.name==="AbortError"||"message"in o&&String(o.message).includes("FetchRequestCanceledException"))}const Gb=o=>{if(o instanceof Error)return o;if(typeof o=="object"&&o!==null){try{if(Object.prototype.toString.call(o)==="[object Error]"){const t=new Error(o.message,o.cause?{cause:o.cause}:{});return o.stack&&(t.stack=o.stack),o.cause&&!t.cause&&(t.cause=o.cause),o.name&&(t.name=o.name),t}}catch{}try{return new Error(JSON.stringify(o))}catch{}}return new Error(o)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ks extends Error{}class ii extends ks{constructor(t,e,n,s){super(`${ii.makeMessage(t,e,n)}`),this.status=t,this.headers=s,this.error=e}static makeMessage(t,e,n){const s=e!=null&&e.message?typeof e.message=="string"?e.message:JSON.stringify(e.message):e?JSON.stringify(e):n;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,e,n,s){if(!t||!s)return new kv({message:n,cause:Gb(e)});const a=e;return t===400?new tN(t,a,n,s):t===401?new eN(t,a,n,s):t===403?new nN(t,a,n,s):t===404?new iN(t,a,n,s):t===409?new sN(t,a,n,s):t===422?new oN(t,a,n,s):t===429?new rN(t,a,n,s):t>=500?new aN(t,a,n,s):new ii(t,a,n,s)}}class zb extends ii{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class kv extends ii{constructor({message:t,cause:e}){super(void 0,void 0,t||"Connection error.",void 0),e&&(this.cause=e)}}class jR extends kv{constructor({message:t}={}){super({message:t??"Request timed out."})}}class tN extends ii{}class eN extends ii{}class nN extends ii{}class iN extends ii{}class sN extends ii{}class oN extends ii{}class rN extends ii{}class aN extends ii{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YH=/^[a-z][a-z0-9+.-]*:/i,$H=o=>YH.test(o);let Vb=o=>(Vb=Array.isArray,Vb(o));const XH=Vb;let JH=XH;const kM=JH;function KH(o){if(!o)return!0;for(const t in o)return!1;return!0}function WH(o,t){return Object.prototype.hasOwnProperty.call(o,t)}const QH=(o,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new ks(`${o} must be an integer`);if(t<0)throw new ks(`${o} must be a positive integer`);return t},ZH=o=>{try{return JSON.parse(o)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jH=o=>new Promise(t=>setTimeout(t,o));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nd="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tG(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const eG=()=>{var o,t,e,n,s;const a=tG();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nd,"X-Stainless-OS":PM(Deno.build.os),"X-Stainless-Arch":LM(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(o=Deno.version)===null||o===void 0?void 0:o.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nd,"X-Stainless-OS":PM((e=globalThis.process.platform)!==null&&e!==void 0?e:"unknown"),"X-Stainless-Arch":LM((n=globalThis.process.arch)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const l=nG();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function nG(){if(typeof navigator>"u"||!navigator)return null;const o=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:e}of o){const n=e.exec(navigator.userAgent);if(n){const s=n[1]||0,a=n[2]||0,l=n[3]||0;return{browser:t,version:`${s}.${a}.${l}`}}}return null}const LM=o=>o==="x32"?"x32":o==="x86_64"||o==="x64"?"x64":o==="arm"?"arm":o==="aarch64"||o==="arm64"?"arm64":o?`other:${o}`:"unknown",PM=o=>(o=o.toLowerCase(),o.includes("ios")?"iOS":o==="android"?"Android":o==="darwin"?"MacOS":o==="win32"?"Windows":o==="freebsd"?"FreeBSD":o==="openbsd"?"OpenBSD":o==="linux"?"Linux":o?`Other:${o}`:"Unknown");let Jy;const iG=()=>Jy??(Jy=eG());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sG(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function lN(...o){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...o)}function oG(o){let t=Symbol.asyncIterator in o?o[Symbol.asyncIterator]():o[Symbol.iterator]();return lN({start(){},async pull(e){const{done:n,value:s}=await t.next();n?e.close():e.enqueue(s)},async cancel(){var e;await((e=t.return)===null||e===void 0?void 0:e.call(t))}})}function cN(o){if(o[Symbol.asyncIterator])return o;const t=o.getReader();return{async next(){try{const e=await t.read();return e!=null&&e.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function rG(o){var t,e;if(o===null||typeof o!="object")return;if(o[Symbol.asyncIterator]){await((e=(t=o[Symbol.asyncIterator]()).return)===null||e===void 0?void 0:e.call(t));return}const n=o.getReader(),s=n.cancel();n.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aG=({headers:o,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uN=()=>{var o;if(typeof File>"u"){const{process:t}=globalThis,e=typeof((o=t==null?void 0:t.versions)===null||o===void 0?void 0:o.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function yb(o,t,e){return uN(),new File(o,t??"unknown_file",e)}function lG(o){return(typeof o=="object"&&o!==null&&("name"in o&&o.name&&String(o.name)||"url"in o&&o.url&&String(o.url)||"filename"in o&&o.filename&&String(o.filename)||"path"in o&&o.path&&String(o.path))||"").split(/[\\/]/).pop()||void 0}const cG=o=>o!=null&&typeof o=="object"&&typeof o[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dN=o=>o!=null&&typeof o=="object"&&typeof o.size=="number"&&typeof o.type=="string"&&typeof o.text=="function"&&typeof o.slice=="function"&&typeof o.arrayBuffer=="function",uG=o=>o!=null&&typeof o=="object"&&typeof o.name=="string"&&typeof o.lastModified=="number"&&dN(o),dG=o=>o!=null&&typeof o=="object"&&typeof o.url=="string"&&typeof o.blob=="function";async function hG(o,t,e){if(uN(),o=await o,uG(o))return o instanceof File?o:yb([await o.arrayBuffer()],o.name);if(dG(o)){const s=await o.blob();return t||(t=new URL(o.url).pathname.split(/[\\/]/).pop()),yb(await qb(s),t,e)}const n=await qb(o);if(t||(t=lG(o)),!(e!=null&&e.type)){const s=n.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(e=Object.assign(Object.assign({},e),{type:s}))}return yb(n,t,e)}async function qb(o){var t,e,n,s,a;let l=[];if(typeof o=="string"||ArrayBuffer.isView(o)||o instanceof ArrayBuffer)l.push(o);else if(dN(o))l.push(o instanceof Blob?o:await o.arrayBuffer());else if(cG(o))try{for(var d=!0,h=eo(o),f;f=await h.next(),t=f.done,!t;d=!0){s=f.value,d=!1;const m=s;l.push(...await qb(m))}}catch(m){e={error:m}}finally{try{!d&&!t&&(n=h.return)&&await n.call(h)}finally{if(e)throw e.error}}else{const m=(a=o==null?void 0:o.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof o}${m?`; constructor: ${m}`:""}${fG(o)}`)}return l}function fG(o){return typeof o!="object"||o===null?"":`; props: [${Object.getOwnPropertyNames(o).map(e=>`"${e}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hN{constructor(t){this._client=t}}hN._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fN(o){return o.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const UM=Object.freeze(Object.create(null)),pG=(o=fN)=>(function(e,...n){if(e.length===1)return e[0];let s=!1;const a=[],l=e.reduce((m,v,A)=>{var E,_,C;/[?#]/.test(v)&&(s=!0);const M=n[A];let R=(s?encodeURIComponent:o)(""+M);return A!==n.length&&(M==null||typeof M=="object"&&M.toString===((C=Object.getPrototypeOf((_=Object.getPrototypeOf((E=M.hasOwnProperty)!==null&&E!==void 0?E:UM))!==null&&_!==void 0?_:UM))===null||C===void 0?void 0:C.toString))&&(R=M+"",a.push({start:m.length+v.length,length:R.length,error:`Value of type ${Object.prototype.toString.call(M).slice(8,-1)} is not a valid path parameter`})),m+v+(A===n.length?"":R)},""),d=l.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=h.exec(d))!==null;)a.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(a.sort((m,v)=>m.start-v.start),a.length>0){let m=0;const v=a.reduce((A,E)=>{const _=" ".repeat(E.start-m),C="^".repeat(E.length);return m=E.start+E.length,A+_+C},"");throw new ks(`Path parameters result in path with invalid segments:
${a.map(A=>A.error).join(`
`)}
${l}
${v}`)}return l}),Ky=pG(fN);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pN extends hN{create(t,e){var n;const{api_version:s=this._client.apiVersion}=t,a=K0(t,["api_version"]);if("model"in a&&"agent_config"in a)throw new ks("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new ks("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ky`/${s}/interactions`,Object.assign(Object.assign({body:a},e),{stream:(n=t.stream)!==null&&n!==void 0?n:!1}))}delete(t,e={},n){const{api_version:s=this._client.apiVersion}=e??{};return this._client.delete(Ky`/${s}/interactions/${t}`,n)}cancel(t,e={},n){const{api_version:s=this._client.apiVersion}=e??{};return this._client.post(Ky`/${s}/interactions/${t}/cancel`,n)}get(t,e={},n){var s;const a=e??{},{api_version:l=this._client.apiVersion}=a,d=K0(a,["api_version"]);return this._client.get(Ky`/${l}/interactions/${t}`,Object.assign(Object.assign({query:d},n),{stream:(s=e==null?void 0:e.stream)!==null&&s!==void 0?s:!1}))}}pN._key=Object.freeze(["interactions"]);class mN extends pN{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mG(o){let t=0;for(const s of o)t+=s.length;const e=new Uint8Array(t);let n=0;for(const s of o)e.set(s,n),n+=s.length;return e}let Wy;function kT(o){let t;return(Wy??(t=new globalThis.TextEncoder,Wy=t.encode.bind(t)))(o)}let Qy;function OM(o){let t;return(Qy??(t=new globalThis.TextDecoder,Qy=t.decode.bind(t)))(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lv{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const e=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?kT(t):t;this.buffer=mG([this.buffer,e]);const n=[];let s;for(;(s=gG(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){n.push(OM(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,l=OM(this.buffer.subarray(0,a));n.push(l),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return n}flush(){return this.buffer.length?this.decode(`
`):[]}}Lv.NEWLINE_CHARS=new Set([`
`,"\r"]);Lv.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function gG(o,t){for(let s=t??0;s<o.length;s++){if(o[s]===10)return{preceding:s,index:s+1,carriage:!1};if(o[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function yG(o){for(let n=0;n<o.length-1;n++){if(o[n]===10&&o[n+1]===10||o[n]===13&&o[n+1]===13)return n+2;if(o[n]===13&&o[n+1]===10&&n+3<o.length&&o[n+2]===13&&o[n+3]===10)return n+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W0={off:0,error:200,warn:300,info:400,debug:500},BM=(o,t,e)=>{if(o){if(WH(W0,o))return o;jn(e).warn(`${t} was set to ${JSON.stringify(o)}, expected one of ${JSON.stringify(Object.keys(W0))}`)}};function np(){}function Zy(o,t,e){return!t||W0[o]>W0[e]?np:t[o].bind(t)}const vG={error:np,warn:np,info:np,debug:np};let FM=new WeakMap;function jn(o){var t;const e=o.logger,n=(t=o.logLevel)!==null&&t!==void 0?t:"off";if(!e)return vG;const s=FM.get(e);if(s&&s[0]===n)return s[1];const a={error:Zy("error",e,n),warn:Zy("warn",e,n),info:Zy("info",e,n),debug:Zy("debug",e,n)};return FM.set(e,[n,a]),a}const $l=o=>(o.options&&(o.options=Object.assign({},o.options),delete o.options.headers),o.headers&&(o.headers=Object.fromEntries((o.headers instanceof Headers?[...o.headers]:Object.entries(o.headers)).map(([t,e])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":e]))),"retryOfRequestLogID"in o&&(o.retryOfRequestLogID&&(o.retryOf=o.retryOfRequestLogID),delete o.retryOfRequestLogID),o);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hd{constructor(t,e,n){this.iterator=t,this.controller=e,this.client=n}static fromSSEResponse(t,e,n){let s=!1;const a=n?jn(n):console;function l(){return to(this,arguments,function*(){var h,f,m,v;if(s)throw new ks("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let A=!1;try{try{for(var E=!0,_=eo(AG(t,e)),C;C=yield wt(_.next()),h=C.done,!h;E=!0){v=C.value,E=!1;const M=v;if(!A)if(M.data.startsWith("[DONE]")){A=!0;continue}else try{yield yield wt(JSON.parse(M.data))}catch(R){throw a.error("Could not parse message into JSON:",M.data),a.error("From chunk:",M.raw),R}}}catch(M){f={error:M}}finally{try{!E&&!h&&(m=_.return)&&(yield wt(m.call(_)))}finally{if(f)throw f.error}}A=!0}catch(M){if(Hb(M))return yield wt(void 0);throw M}finally{A||e.abort()}})}return new hd(l,e,n)}static fromReadableStream(t,e,n){let s=!1;function a(){return to(this,arguments,function*(){var h,f,m,v;const A=new Lv,E=cN(t);try{for(var _=!0,C=eo(E),M;M=yield wt(C.next()),h=M.done,!h;_=!0){v=M.value,_=!1;const R=v;for(const L of A.decode(R))yield yield wt(L)}}catch(R){f={error:R}}finally{try{!_&&!h&&(m=C.return)&&(yield wt(m.call(C)))}finally{if(f)throw f.error}}for(const R of A.flush())yield yield wt(R)})}function l(){return to(this,arguments,function*(){var h,f,m,v;if(s)throw new ks("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let A=!1;try{try{for(var E=!0,_=eo(a()),C;C=yield wt(_.next()),h=C.done,!h;E=!0){v=C.value,E=!1;const M=v;A||M&&(yield yield wt(JSON.parse(M)))}}catch(M){f={error:M}}finally{try{!E&&!h&&(m=_.return)&&(yield wt(m.call(_)))}finally{if(f)throw f.error}}A=!0}catch(M){if(Hb(M))return yield wt(void 0);throw M}finally{A||e.abort()}})}return new hd(l,e,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],e=[],n=this.iterator(),s=a=>({next:()=>{if(a.length===0){const l=n.next();t.push(l),e.push(l)}return a.shift()}});return[new hd(()=>s(t),this.controller,this.client),new hd(()=>s(e),this.controller,this.client)]}toReadableStream(){const t=this;let e;return lN({async start(){e=t[Symbol.asyncIterator]()},async pull(n){try{const{value:s,done:a}=await e.next();if(a)return n.close();const l=kT(JSON.stringify(s)+`
`);n.enqueue(l)}catch(s){n.error(s)}},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}}function AG(o,t){return to(this,arguments,function*(){var n,s,a,l;if(!o.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ks("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ks("Attempted to iterate over a response with no body");const d=new bG,h=new Lv,f=cN(o.body);try{for(var m=!0,v=eo(SG(f)),A;A=yield wt(v.next()),n=A.done,!n;m=!0){l=A.value,m=!1;const E=l;for(const _ of h.decode(E)){const C=d.decode(_);C&&(yield yield wt(C))}}}catch(E){s={error:E}}finally{try{!m&&!n&&(a=v.return)&&(yield wt(a.call(v)))}finally{if(s)throw s.error}}for(const E of h.flush()){const _=d.decode(E);_&&(yield yield wt(_))}})}function SG(o){return to(this,arguments,function*(){var e,n,s,a;let l=new Uint8Array;try{for(var d=!0,h=eo(o),f;f=yield wt(h.next()),e=f.done,!e;d=!0){a=f.value,d=!1;const m=a;if(m==null)continue;const v=m instanceof ArrayBuffer?new Uint8Array(m):typeof m=="string"?kT(m):m;let A=new Uint8Array(l.length+v.length);A.set(l),A.set(v,l.length),l=A;let E;for(;(E=yG(l))!==-1;)yield yield wt(l.slice(0,E)),l=l.slice(E)}}catch(m){n={error:m}}finally{try{!d&&!e&&(s=h.return)&&(yield wt(s.call(h)))}finally{if(n)throw n.error}}l.length>0&&(yield yield wt(l))})}class bG{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(t),t.startsWith(":"))return null;let[e,n,s]=EG(t,":");return s.startsWith(" ")&&(s=s.substring(1)),e==="event"?this.event=s:e==="data"&&this.data.push(s),null}}function EG(o,t){const e=o.indexOf(t);return e!==-1?[o.substring(0,e),t,o.substring(e+t.length)]:[o,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function TG(o,t){const{response:e,requestLogID:n,retryOfRequestLogID:s,startTime:a}=t,l=await(async()=>{var d;if(t.options.stream)return jn(o).debug("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller,o):hd.fromSSEResponse(e,t.controller,o);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const h=e.headers.get("content-type"),f=(d=h==null?void 0:h.split(";")[0])===null||d===void 0?void 0:d.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?await e.json():await e.text()})();return jn(o).debug(`[${n}] response parsed`,$l({retryOfRequestLogID:s,url:e.url,status:e.status,body:l,durationMs:Date.now()-a})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LT extends Promise{constructor(t,e,n=TG){super(s=>{s(null)}),this.responsePromise=e,this.parseResponse=n,this.client=t}_thenUnwrap(t){return new LT(this.client,this.responsePromise,async(e,n)=>t(await this.parseResponse(e,n),n))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,e]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:e}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,e){return this.parse().then(t,e)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gN=Symbol("brand.privateNullableHeaders");function*_G(o){if(!o)return;if(gN in o){const{values:n,nulls:s}=o;yield*n.entries();for(const a of s)yield[a,null];return}let t=!1,e;o instanceof Headers?e=o.entries():kM(o)?e=o:(t=!0,e=Object.entries(o??{}));for(let n of e){const s=n[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=kM(n[1])?n[1]:[n[1]];let l=!1;for(const d of a)d!==void 0&&(t&&!l&&(l=!0,yield[s,null]),yield[s,d])}}const Wf=o=>{const t=new Headers,e=new Set;for(const n of o){const s=new Set;for(const[a,l]of _G(n)){const d=a.toLowerCase();s.has(d)||(t.delete(a),s.add(d)),l===null?(t.delete(a),e.add(d)):(t.append(a,l),e.delete(d))}}return{[gN]:!0,values:t,nulls:e}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vb=o=>{var t,e,n,s,a,l;if(typeof globalThis.process<"u")return(n=(e=(t=$P)===null||t===void 0?void 0:t[o])===null||e===void 0?void 0:e.trim())!==null&&n!==void 0?n:void 0;if(typeof globalThis.Deno<"u")return(l=(a=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||a===void 0?void 0:a.call(s,o))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var yN;class Pv{constructor(t){var e,n,s,a,l,d,h,{baseURL:f=vb("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:m=(e=vb("GEMINI_API_KEY"))!==null&&e!==void 0?e:null,apiVersion:v="v1beta"}=t,A=K0(t,["baseURL","apiKey","apiVersion"]);const E=Object.assign(Object.assign({apiKey:m,apiVersion:v},A),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=E.baseURL,this.timeout=(n=E.timeout)!==null&&n!==void 0?n:Pv.DEFAULT_TIMEOUT,this.logger=(s=E.logger)!==null&&s!==void 0?s:console;const _="warn";this.logLevel=_,this.logLevel=(l=(a=BM(E.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:BM(vb("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:_,this.fetchOptions=E.fetchOptions,this.maxRetries=(d=E.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(h=E.fetch)!==null&&h!==void 0?h:sG(),this.encoder=aG,this._options=E,this.apiKey=m,this.apiVersion=v,this.clientAdapter=E.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:e}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!e.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const e=Wf([t.headers]);if(!(e.values.has("authorization")||e.values.has("x-goog-api-key"))){if(this.apiKey)return Wf([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Wf([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([e,n])=>typeof n<"u").map(([e,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(e)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(e)}=`;throw new ks(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${nd}`}defaultIdempotencyKey(){return`stainless-node-retry-${qH()}`}makeStatusError(t,e,n,s){return ii.generate(t,e,n,s)}buildURL(t,e,n){const s=!this.baseURLOverridden()&&n||this.baseURL,a=$H(t)?new URL(t):new URL(s+(s.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),l=this.defaultQuery();return KH(l)||(e=Object.assign(Object.assign({},l),e)),typeof e=="object"&&e&&!Array.isArray(e)&&(a.search=this.stringifyQuery(e)),a.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const e=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${e}`}}async prepareRequest(t,{url:e,options:n}){}get(t,e){return this.methodRequest("get",t,e)}post(t,e){return this.methodRequest("post",t,e)}patch(t,e){return this.methodRequest("patch",t,e)}put(t,e){return this.methodRequest("put",t,e)}delete(t,e){return this.methodRequest("delete",t,e)}methodRequest(t,e,n){return this.request(Promise.resolve(n).then(s=>Object.assign({method:t,path:e},s)))}request(t,e=null){return new LT(this,this.makeRequest(t,e,void 0))}async makeRequest(t,e,n){var s,a,l;const d=await t,h=(s=d.maxRetries)!==null&&s!==void 0?s:this.maxRetries;e==null&&(e=h),await this.prepareOptions(d);const{req:f,url:m,timeout:v}=await this.buildRequest(d,{retryCount:h-e});await this.prepareRequest(f,{url:m,options:d});const A="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),E=n===void 0?"":`, retryOf: ${n}`,_=Date.now();if(jn(this).debug(`[${A}] sending request`,$l({retryOfRequestLogID:n,method:d.method,url:m,options:d,headers:f.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new zb;const C=new AbortController,M=await this.fetchWithTimeout(m,f,v,C).catch(Gb),R=Date.now();if(M instanceof globalThis.Error){const I=`retrying, ${e} attempts remaining`;if(!((l=d.signal)===null||l===void 0)&&l.aborted)throw new zb;const U=Hb(M)||/timed? ?out/i.test(String(M)+("cause"in M?String(M.cause):""));if(e)return jn(this).info(`[${A}] connection ${U?"timed out":"failed"} - ${I}`),jn(this).debug(`[${A}] connection ${U?"timed out":"failed"} (${I})`,$l({retryOfRequestLogID:n,url:m,durationMs:R-_,message:M.message})),this.retryRequest(d,e,n??A);throw jn(this).info(`[${A}] connection ${U?"timed out":"failed"} - error; no more retries left`),jn(this).debug(`[${A}] connection ${U?"timed out":"failed"} (error; no more retries left)`,$l({retryOfRequestLogID:n,url:m,durationMs:R-_,message:M.message})),U?new jR:new kv({cause:M})}const L=`[${A}${E}] ${f.method} ${m} ${M.ok?"succeeded":"failed"} with status ${M.status} in ${R-_}ms`;if(!M.ok){const I=await this.shouldRetry(M);if(e&&I){const X=`retrying, ${e} attempts remaining`;return await rG(M.body),jn(this).info(`${L} - ${X}`),jn(this).debug(`[${A}] response error (${X})`,$l({retryOfRequestLogID:n,url:M.url,status:M.status,headers:M.headers,durationMs:R-_})),this.retryRequest(d,e,n??A,M.headers)}const U=I?"error; no more retries left":"error; not retryable";jn(this).info(`${L} - ${U}`);const P=await M.text().catch(X=>Gb(X).message),O=ZH(P),F=O?void 0:P;throw jn(this).debug(`[${A}] response error (${U})`,$l({retryOfRequestLogID:n,url:M.url,status:M.status,headers:M.headers,message:F,durationMs:Date.now()-_})),this.makeStatusError(M.status,O,F,M.headers)}return jn(this).info(L),jn(this).debug(`[${A}] response start`,$l({retryOfRequestLogID:n,url:M.url,status:M.status,headers:M.headers,durationMs:R-_})),{response:M,options:d,controller:C,requestLogID:A,retryOfRequestLogID:n,startTime:_}}async fetchWithTimeout(t,e,n,s){const a=e||{},{signal:l,method:d}=a,h=K0(a,["signal","method"]);l&&l.addEventListener("abort",()=>s.abort());const f=setTimeout(()=>s.abort(),n),m=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,v=Object.assign(Object.assign(Object.assign({signal:s.signal},m?{duplex:"half"}:{}),{method:"GET"}),h);d&&(v.method=d.toUpperCase());try{return await this.fetch.call(void 0,t,v)}finally{clearTimeout(f)}}async shouldRetry(t){const e=t.headers.get("x-should-retry");return e==="true"?!0:e==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,e,n,s){var a;let l;const d=s==null?void 0:s.get("retry-after-ms");if(d){const f=parseFloat(d);Number.isNaN(f)||(l=f)}const h=s==null?void 0:s.get("retry-after");if(h&&!l){const f=parseFloat(h);Number.isNaN(f)?l=Date.parse(h)-Date.now():l=f*1e3}if(!(l&&0<=l&&l<60*1e3)){const f=(a=t.maxRetries)!==null&&a!==void 0?a:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(e,f)}return await jH(l),this.makeRequest(t,e-1,n)}calculateDefaultRetryTimeoutMillis(t,e){const a=e-t,l=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return l*d*1e3}async buildRequest(t,{retryCount:e=0}={}){var n,s,a;const l=Object.assign({},t),{method:d,path:h,query:f,defaultBaseURL:m}=l,v=this.buildURL(h,f,m);"timeout"in l&&QH("timeout",l.timeout),l.timeout=(n=l.timeout)!==null&&n!==void 0?n:this.timeout;const{bodyHeaders:A,body:E}=this.buildBody({options:l}),_=await this.buildHeaders({options:t,method:d,bodyHeaders:A,retryCount:e});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:_},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&E instanceof globalThis.ReadableStream&&{duplex:"half"}),E&&{body:E}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(a=l.fetchOptions)!==null&&a!==void 0?a:{}),url:v,timeout:l.timeout}}async buildHeaders({options:t,method:e,bodyHeaders:n,retryCount:s}){let a={};this.idempotencyHeader&&e!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=t.idempotencyKey);const l=await this.authHeaders(t);let d=Wf([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),iG()),this._options.defaultHeaders,n,t.headers,l]);return this.validateHeaders(d),d.values}buildBody({options:{body:t,headers:e}}){if(!t)return{bodyHeaders:void 0,body:void 0};const n=Wf([e]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&n.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:oG(t)}:this.encoder({body:t,headers:n})}}Pv.DEFAULT_TIMEOUT=6e4;class En extends Pv{constructor(){super(...arguments),this.interactions=new mN(this)}}yN=En;En.GeminiNextGenAPIClient=yN;En.GeminiNextGenAPIClientError=ks;En.APIError=ii;En.APIConnectionError=kv;En.APIConnectionTimeoutError=jR;En.APIUserAbortError=zb;En.NotFoundError=iN;En.ConflictError=sN;En.RateLimitError=rN;En.BadRequestError=tN;En.AuthenticationError=eN;En.InternalServerError=aN;En.PermissionDeniedError=nN;En.UnprocessableEntityError=oN;En.toFile=hG;En.Interactions=mN;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CG(o,t){const e={},n=g(o,["name"]);return n!=null&&y(e,["_url","name"],n),e}function wG(o,t){const e={},n=g(o,["name"]);return n!=null&&y(e,["_url","name"],n),e}function xG(o,t){const e={},n=g(o,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function MG(o,t){const e={},n=g(o,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function RG(o,t,e){const n={};if(g(o,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=g(o,["tunedModelDisplayName"]);if(t!==void 0&&s!=null&&y(t,["displayName"],s),g(o,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=g(o,["epochCount"]);t!==void 0&&a!=null&&y(t,["tuningTask","hyperparameters","epochCount"],a);const l=g(o,["learningRateMultiplier"]);if(l!=null&&y(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),g(o,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(g(o,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(g(o,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(g(o,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(g(o,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=g(o,["batchSize"]);t!==void 0&&d!=null&&y(t,["tuningTask","hyperparameters","batchSize"],d);const h=g(o,["learningRate"]);if(t!==void 0&&h!=null&&y(t,["tuningTask","hyperparameters","learningRate"],h),g(o,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(g(o,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(g(o,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(g(o,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(g(o,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(g(o,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return n}function NG(o,t,e){const n={};let s=g(e,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const P=g(o,["validationDataset"]);t!==void 0&&P!=null&&y(t,["supervisedTuningSpec"],Ab(P))}else if(s==="PREFERENCE_TUNING"){const P=g(o,["validationDataset"]);t!==void 0&&P!=null&&y(t,["preferenceOptimizationSpec"],Ab(P))}else if(s==="DISTILLATION"){const P=g(o,["validationDataset"]);t!==void 0&&P!=null&&y(t,["distillationSpec"],Ab(P))}const a=g(o,["tunedModelDisplayName"]);t!==void 0&&a!=null&&y(t,["tunedModelDisplayName"],a);const l=g(o,["description"]);t!==void 0&&l!=null&&y(t,["description"],l);let d=g(e,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const P=g(o,["epochCount"]);t!==void 0&&P!=null&&y(t,["supervisedTuningSpec","hyperParameters","epochCount"],P)}else if(d==="PREFERENCE_TUNING"){const P=g(o,["epochCount"]);t!==void 0&&P!=null&&y(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],P)}else if(d==="DISTILLATION"){const P=g(o,["epochCount"]);t!==void 0&&P!=null&&y(t,["distillationSpec","hyperParameters","epochCount"],P)}let h=g(e,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const P=g(o,["learningRateMultiplier"]);t!==void 0&&P!=null&&y(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],P)}else if(h==="PREFERENCE_TUNING"){const P=g(o,["learningRateMultiplier"]);t!==void 0&&P!=null&&y(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],P)}else if(h==="DISTILLATION"){const P=g(o,["learningRateMultiplier"]);t!==void 0&&P!=null&&y(t,["distillationSpec","hyperParameters","learningRateMultiplier"],P)}let f=g(e,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const P=g(o,["exportLastCheckpointOnly"]);t!==void 0&&P!=null&&y(t,["supervisedTuningSpec","exportLastCheckpointOnly"],P)}else if(f==="PREFERENCE_TUNING"){const P=g(o,["exportLastCheckpointOnly"]);t!==void 0&&P!=null&&y(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],P)}else if(f==="DISTILLATION"){const P=g(o,["exportLastCheckpointOnly"]);t!==void 0&&P!=null&&y(t,["distillationSpec","exportLastCheckpointOnly"],P)}let m=g(e,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const P=g(o,["adapterSize"]);t!==void 0&&P!=null&&y(t,["supervisedTuningSpec","hyperParameters","adapterSize"],P)}else if(m==="PREFERENCE_TUNING"){const P=g(o,["adapterSize"]);t!==void 0&&P!=null&&y(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],P)}else if(m==="DISTILLATION"){const P=g(o,["adapterSize"]);t!==void 0&&P!=null&&y(t,["distillationSpec","hyperParameters","adapterSize"],P)}let v=g(e,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const P=g(o,["tuningMode"]);t!==void 0&&P!=null&&y(t,["supervisedTuningSpec","tuningMode"],P)}const A=g(o,["customBaseModel"]);t!==void 0&&A!=null&&y(t,["customBaseModel"],A);let E=g(e,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const P=g(o,["batchSize"]);t!==void 0&&P!=null&&y(t,["supervisedTuningSpec","hyperParameters","batchSize"],P)}let _=g(e,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const P=g(o,["learningRate"]);t!==void 0&&P!=null&&y(t,["supervisedTuningSpec","hyperParameters","learningRate"],P)}const C=g(o,["labels"]);t!==void 0&&C!=null&&y(t,["labels"],C);const M=g(o,["beta"]);t!==void 0&&M!=null&&y(t,["preferenceOptimizationSpec","hyperParameters","beta"],M);const R=g(o,["baseTeacherModel"]);t!==void 0&&R!=null&&y(t,["distillationSpec","baseTeacherModel"],R);const L=g(o,["tunedTeacherModelSource"]);t!==void 0&&L!=null&&y(t,["distillationSpec","tunedTeacherModelSource"],L);const I=g(o,["sftLossWeightMultiplier"]);t!==void 0&&I!=null&&y(t,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],I);const U=g(o,["outputUri"]);return t!==void 0&&U!=null&&y(t,["outputUri"],U),n}function IG(o,t){const e={},n=g(o,["baseModel"]);n!=null&&y(e,["baseModel"],n);const s=g(o,["preTunedModel"]);s!=null&&y(e,["preTunedModel"],s);const a=g(o,["trainingDataset"]);a!=null&&zG(a);const l=g(o,["config"]);return l!=null&&RG(l,e),e}function DG(o,t){const e={},n=g(o,["baseModel"]);n!=null&&y(e,["baseModel"],n);const s=g(o,["preTunedModel"]);s!=null&&y(e,["preTunedModel"],s);const a=g(o,["trainingDataset"]);a!=null&&VG(a,e,t);const l=g(o,["config"]);return l!=null&&NG(l,e,t),e}function kG(o,t){const e={},n=g(o,["name"]);return n!=null&&y(e,["_url","name"],n),e}function LG(o,t){const e={},n=g(o,["name"]);return n!=null&&y(e,["_url","name"],n),e}function PG(o,t,e){const n={},s=g(o,["pageSize"]);t!==void 0&&s!=null&&y(t,["_query","pageSize"],s);const a=g(o,["pageToken"]);t!==void 0&&a!=null&&y(t,["_query","pageToken"],a);const l=g(o,["filter"]);return t!==void 0&&l!=null&&y(t,["_query","filter"],l),n}function UG(o,t,e){const n={},s=g(o,["pageSize"]);t!==void 0&&s!=null&&y(t,["_query","pageSize"],s);const a=g(o,["pageToken"]);t!==void 0&&a!=null&&y(t,["_query","pageToken"],a);const l=g(o,["filter"]);return t!==void 0&&l!=null&&y(t,["_query","filter"],l),n}function OG(o,t){const e={},n=g(o,["config"]);return n!=null&&PG(n,e),e}function BG(o,t){const e={},n=g(o,["config"]);return n!=null&&UG(n,e),e}function FG(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["nextPageToken"]);s!=null&&y(e,["nextPageToken"],s);const a=g(o,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>vN(d))),y(e,["tuningJobs"],l)}return e}function HG(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["nextPageToken"]);s!=null&&y(e,["nextPageToken"],s);const a=g(o,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>Yb(d))),y(e,["tuningJobs"],l)}return e}function GG(o,t){const e={},n=g(o,["name"]);n!=null&&y(e,["model"],n);const s=g(o,["name"]);return s!=null&&y(e,["endpoint"],s),e}function zG(o,t){const e={};if(g(o,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(o,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=g(o,["examples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),y(e,["examples","examples"],s)}return e}function VG(o,t,e){const n={};let s=g(e,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=g(o,["gcsUri"]);t!==void 0&&l!=null&&y(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=g(o,["gcsUri"]);t!==void 0&&l!=null&&y(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}else if(s==="DISTILLATION"){const l=g(o,["gcsUri"]);t!==void 0&&l!=null&&y(t,["distillationSpec","promptDatasetUri"],l)}let a=g(e,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=g(o,["vertexDatasetResource"]);t!==void 0&&l!=null&&y(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=g(o,["vertexDatasetResource"]);t!==void 0&&l!=null&&y(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}else if(a==="DISTILLATION"){const l=g(o,["vertexDatasetResource"]);t!==void 0&&l!=null&&y(t,["distillationSpec","promptDatasetUri"],l)}if(g(o,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function vN(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["name"]);s!=null&&y(e,["name"],s);const a=g(o,["state"]);a!=null&&y(e,["state"],LR(a));const l=g(o,["createTime"]);l!=null&&y(e,["createTime"],l);const d=g(o,["tuningTask","startTime"]);d!=null&&y(e,["startTime"],d);const h=g(o,["tuningTask","completeTime"]);h!=null&&y(e,["endTime"],h);const f=g(o,["updateTime"]);f!=null&&y(e,["updateTime"],f);const m=g(o,["description"]);m!=null&&y(e,["description"],m);const v=g(o,["baseModel"]);v!=null&&y(e,["baseModel"],v);const A=g(o,["_self"]);return A!=null&&y(e,["tunedModel"],GG(A)),e}function Yb(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["name"]);s!=null&&y(e,["name"],s);const a=g(o,["state"]);a!=null&&y(e,["state"],LR(a));const l=g(o,["createTime"]);l!=null&&y(e,["createTime"],l);const d=g(o,["startTime"]);d!=null&&y(e,["startTime"],d);const h=g(o,["endTime"]);h!=null&&y(e,["endTime"],h);const f=g(o,["updateTime"]);f!=null&&y(e,["updateTime"],f);const m=g(o,["error"]);m!=null&&y(e,["error"],m);const v=g(o,["description"]);v!=null&&y(e,["description"],v);const A=g(o,["baseModel"]);A!=null&&y(e,["baseModel"],A);const E=g(o,["tunedModel"]);E!=null&&y(e,["tunedModel"],E);const _=g(o,["preTunedModel"]);_!=null&&y(e,["preTunedModel"],_);const C=g(o,["supervisedTuningSpec"]);C!=null&&y(e,["supervisedTuningSpec"],C);const M=g(o,["preferenceOptimizationSpec"]);M!=null&&y(e,["preferenceOptimizationSpec"],M);const R=g(o,["distillationSpec"]);R!=null&&y(e,["distillationSpec"],R);const L=g(o,["tuningDataStats"]);L!=null&&y(e,["tuningDataStats"],L);const I=g(o,["encryptionSpec"]);I!=null&&y(e,["encryptionSpec"],I);const U=g(o,["partnerModelTuningSpec"]);U!=null&&y(e,["partnerModelTuningSpec"],U);const P=g(o,["customBaseModel"]);P!=null&&y(e,["customBaseModel"],P);const O=g(o,["experiment"]);O!=null&&y(e,["experiment"],O);const F=g(o,["labels"]);F!=null&&y(e,["labels"],F);const Z=g(o,["outputUri"]);Z!=null&&y(e,["outputUri"],Z);const X=g(o,["pipelineJob"]);X!=null&&y(e,["pipelineJob"],X);const nt=g(o,["serviceAccount"]);nt!=null&&y(e,["serviceAccount"],nt);const it=g(o,["tunedModelDisplayName"]);it!=null&&y(e,["tunedModelDisplayName"],it);const dt=g(o,["veoTuningSpec"]);return dt!=null&&y(e,["veoTuningSpec"],dt),e}function qG(o,t){const e={},n=g(o,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(o,["name"]);s!=null&&y(e,["name"],s);const a=g(o,["metadata"]);a!=null&&y(e,["metadata"],a);const l=g(o,["done"]);l!=null&&y(e,["done"],l);const d=g(o,["error"]);return d!=null&&y(e,["error"],d),e}function Ab(o,t){const e={},n=g(o,["gcsUri"]);n!=null&&y(e,["validationDatasetUri"],n);const s=g(o,["vertexDatasetResource"]);return s!=null&&y(e,["validationDatasetUri"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YG extends jr{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new pu(Kr.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(e),e),this.get=async e=>await this.getInternal(e),this.tune=async e=>{var n;if(this.apiClient.isVertexAI())if(e.baseModel.startsWith("projects/")){const s={tunedModelName:e.baseModel};!((n=e.config)===null||n===void 0)&&n.preTunedModelCheckpointId&&(s.checkpointId=e.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},e),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},e);return await this.tuneInternal(s)}else{const s=Object.assign({},e),a=await this.tuneMldevInternal(s);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:Db.JOB_STATE_QUEUED}}}}async getInternal(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=LG(t);return d=lt("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>Yb(m))}else{const f=kG(t);return d=lt("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>vN(m))}}async listInternal(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=BG(t);return d=lt("tuningJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=HG(m),A=new hM;return Object.assign(A,v),A})}else{const f=OG(t);return d=lt("tunedModels",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=FG(m),A=new hM;return Object.assign(A,v),A})}}async cancel(t){var e,n,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=wG(t);return d=lt("{name}:cancel",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=MG(m),A=new fM;return Object.assign(A,v),A})}else{const f=CG(t);return d=lt("{name}:cancel",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:m.headers},A})),l.then(m=>{const v=xG(m),A=new fM;return Object.assign(A,v),A})}}async tuneInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI()){const d=DG(t,t);return a=lt("tuningJobs",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>Yb(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=IG(t);return a=lt("tunedModels",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>qG(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $G{async download(t,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const XG=1024*1024*8,JG=3,KG=1e3,WG=2,Q0="x-goog-upload-status";async function QG(o,t,e){var n;const s=await AN(o,t,e),a=await(s==null?void 0:s.json());if(((n=s==null?void 0:s.headers)===null||n===void 0?void 0:n[Q0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function ZG(o,t,e){var n;const s=await AN(o,t,e),a=await(s==null?void 0:s.json());if(((n=s==null?void 0:s.headers)===null||n===void 0?void 0:n[Q0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=MR(a),d=new xT;return Object.assign(d,l),d}async function AN(o,t,e){var n,s;let a=0,l=0,d=new Lb(new Response),h="upload";for(a=o.size;l<a;){const f=Math.min(XG,a-l),m=o.slice(l,l+f);l+f>=a&&(h+=", finalize");let v=0,A=KG;for(;v<JG&&(d=await e.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(l),"Content-Length":String(f)}}}),!(!((n=d==null?void 0:d.headers)===null||n===void 0)&&n[Q0]));)v++,await t4(A),A=A*WG;if(l+=f,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[Q0])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function jG(o){return{size:o.size,type:o.type}}function t4(o){return new Promise(t=>setTimeout(t,o))}class e4{async upload(t,e,n){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await QG(t,e,n)}async uploadToFileSearchStore(t,e,n){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await ZG(t,e,n)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await jG(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n4{create(t,e,n){return new i4(t,e,n)}}class i4{constructor(t,e,n){this.url=t,this.headers=e,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HM="x-goog-api-key";class s4{constructor(t){this.apiKey=t}async addAuthHeaders(t,e){if(t.get(HM)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(HM,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o4="gl-node/";class r4{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const e=new En({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=e.interactions,this._interactions}constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey;const n=WP(t.httpOptions,t.vertexai,void 0,void 0);n&&(t.httpOptions?t.httpOptions.baseUrl=n:t.httpOptions={baseUrl:n}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const s=new s4(this.apiKey);this.apiClient=new j3({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:o4+"web",uploader:new e4,downloader:new $G}),this.models=new vH(this.apiClient),this.live=new hH(this.apiClient,s,new n4),this.batches=new wO(this.apiClient),this.chats=new aB(this.models,this.apiClient),this.caches=new sB(this.apiClient),this.files=new AB(this.apiClient),this.operations=new AH(this.apiClient),this.authTokens=new PH(this.apiClient),this.tunings=new YG(this.apiClient),this.fileSearchStores=new VH(this.apiClient)}}let Sb=null;const a4=()=>{const o=new r4({apiKey:"AIzaSyD2Z8qAOgYX3_xHHzM_db58S2qGqgRec94"}),t=`
    You are an AI assistant for the portfolio of Ayushman Mishra, a Senior Frontend Engineer.
    Here is his data in JSON format: ${JSON.stringify(yR)}.
    
    Your goal is to answer questions about his experience, skills, and background based ONLY on this data.
    - Be professional, concise, and enthusiastic.
    - If a user asks for contact info, provide the email or LinkedIn from the data.
    - If a user asks about something not in the data, strictly say you don't have that information but they can contact him directly.
    - Highlight his key achievements like the revenue growth contribution and fast promotions when relevant.
  `;return o.chats.create({model:"gemini-2.0-flash",config:{systemInstruction:t,temperature:.7}})},l4=async o=>{try{return Sb||(Sb=a4()),(await Sb.sendMessage({message:o})).text||"I didn't get a clear response. Please try again."}catch(t){return console.error("Error communicating with Gemini:",t),"Sorry, I'm having trouble connecting to the AI service right now. Please try again later."}},c4=async o=>{var a,l,d,h,f;const t="AIzaSyD2Z8qAOgYX3_xHHzM_db58S2qGqgRec94",e=["gemini-1.5-flash","gemini-1.5-flash-001","gemini-1.5-flash-8b","gemini-1.5-pro","gemini-1.5-pro-001"],n=`
    You are a resume parser. Extract data from the following Resume text and format it EXACTLY according to this JSON schema.
    The output MUST be valid JSON.
    
    Resume text:
    ${o}

    Schema reference (filling instructions):
    ${JSON.stringify(yR,(m,v)=>typeof v=="string"&&v.length>50?"":Array.isArray(v)&&v.length>0?[v[0]]:v)}

    INSTRUCTIONS:
    1. Map the resume data to the schema fields as accurately as possible.
    2. If a field is missing in the resume, leave it as an empty string or empty array.
    3. Return ONLY the JSON object. No markdown formatting.
  `;let s=null;for(const m of e)try{console.log(`Attempting to parse resume with model: ${m}`);const v=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${m}:generateContent?key=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:n}]}],generationConfig:{response_mime_type:"application/json"}})});if(!v.ok){const _=await v.json().catch(()=>({}));if(console.warn(`Model ${m} failed:`,_),v.status===404){s=new Error(`Model ${m} not found (404).`);continue}if(v.status===429){s=new Error("Rate limit exceeded. Please wait a moment.");continue}throw new Error(`API Error: ${v.status} ${v.statusText}`)}const E=(f=(h=(d=(l=(a=(await v.json()).candidates)==null?void 0:a[0])==null?void 0:l.content)==null?void 0:d.parts)==null?void 0:h[0])==null?void 0:f.text;if(!E)throw new Error("No response content from AI");return JSON.parse(E)}catch(v){console.warn(`Error with model ${m}:`,v),s=v}throw console.error("All models failed to parse resume."),s||new Error("Failed to parse resume with any available model.")},u4=()=>{const[o,t]=jt.useState(!1),[e,n]=jt.useState([{role:"model",text:"Hi! I am Ayushman's AI assistant. Ask me anything about his skills, experience, or achievements."}]),[s,a]=jt.useState(""),[l,d]=jt.useState(!1),h=jt.useRef(null),f=()=>{var A;(A=h.current)==null||A.scrollIntoView({behavior:"smooth"})};jt.useEffect(()=>{f()},[e,o]);const m=async()=>{if(!s.trim()||l)return;const A=s.trim();a(""),n(_=>[..._,{role:"user",text:A}]),d(!0);const E=await l4(A);n(_=>[..._,{role:"model",text:E}]),d(!1)},v=A=>{A.key==="Enter"&&m()};return o?k.jsxs("div",{className:"fixed bottom-6 right-6 w-[90vw] sm:w-96 h-[500px] max-h-[80vh] bg-white rounded-2xl shadow-2xl flex flex-col z-50 border border-gray-200 overflow-hidden font-sans",children:[k.jsxs("div",{className:"bg-primary p-4 flex justify-between items-center text-white",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("div",{className:"bg-accent p-1.5 rounded-lg",children:k.jsx(l1,{size:16,className:"text-white"})}),k.jsxs("div",{children:[k.jsx("h3",{className:"font-bold text-sm",children:"Ayushman's AI Assistant"}),k.jsx("p",{className:"text-xs text-gray-300",children:"Powered by Gemini"})]})]}),k.jsx("button",{onClick:()=>t(!1),className:"text-gray-300 hover:text-white transition-colors",children:k.jsx(Cg,{size:20})})]}),k.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[e.map((A,E)=>k.jsx("div",{className:`flex ${A.role==="user"?"justify-end":"justify-start"}`,children:k.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl text-sm ${A.role==="user"?"bg-accent text-white rounded-tr-none":"bg-white text-gray-800 border border-gray-200 rounded-tl-none shadow-sm"}`,children:A.text})},E)),l&&k.jsx("div",{className:"flex justify-start",children:k.jsxs("div",{className:"bg-white p-3 rounded-2xl rounded-tl-none border border-gray-200 shadow-sm flex items-center gap-2",children:[k.jsx(_R,{size:16,className:"animate-spin text-accent"}),k.jsx("span",{className:"text-xs text-gray-500",children:"Thinking..."})]})}),k.jsx("div",{ref:h})]}),k.jsx("div",{className:"p-4 bg-white border-t border-gray-100",children:k.jsxs("div",{className:"flex gap-2",children:[k.jsx("input",{type:"text",value:s,onChange:A=>a(A.target.value),onKeyPress:v,placeholder:"Ask about my skills, experience...",className:"flex-1 px-4 py-2 border border-gray-200 rounded-full focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent text-sm"}),k.jsx("button",{onClick:m,disabled:l||!s.trim(),className:"p-2 bg-accent text-white rounded-full hover:bg-accentHover disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:k.jsx(CP,{size:18})})]})})]}):k.jsxs("button",{onClick:()=>t(!0),className:"fixed bottom-6 right-6 bg-accent hover:bg-accentHover text-white p-4 rounded-full shadow-lg transition-transform hover:scale-110 z-50 flex items-center gap-2","aria-label":"Open AI Chat",children:[k.jsx(l1,{size:20}),k.jsx("span",{className:"font-medium hidden sm:inline",children:"Ask AI about me"})]})},d4=({isVisible:o,onClose:t,message:e})=>(jt.useEffect(()=>{if(o){const n=setTimeout(()=>{t()},6e3);return()=>clearTimeout(n)}},[o,t]),o?k.jsx("div",{className:"fixed top-20 right-4 md:right-8 z-50 animate-slideIn max-w-sm w-full",children:k.jsxs("div",{className:"bg-white border-l-4 border-yellow-400 shadow-xl rounded-r-lg p-4 flex items-start gap-3",children:[k.jsx("div",{className:"text-yellow-500 mt-0.5 shrink-0",children:k.jsx(rP,{size:20})}),k.jsx("div",{className:"flex-1",children:k.jsx("p",{className:"text-sm text-gray-700 leading-relaxed font-medium",children:e})}),k.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors shrink-0",children:k.jsx(Cg,{size:18})})]})}):null),h4=({onClose:o})=>{const{setCustomData:t,customData:e}=Bo(),[n,s]=jt.useState(""),[a,l]=jt.useState(null),d=jt.useRef(null);jt.useEffect(()=>{s(JSON.stringify(e||Y0,null,2))},[e]);const h=E=>{var M;const _=(M=E.target.files)==null?void 0:M[0];if(!_)return;const C=new FileReader;C.onload=R=>{var I;const L=(I=R.target)==null?void 0:I.result;s(L),l(null)},C.readAsText(_),E.target.value=""},f=()=>{try{const E=JSON.parse(n),C=["basics","experience","skills","education"].filter(M=>!E[M]);if(C.length>0)throw new Error(`Invalid JSON: Missing required sections: ${C.join(", ")}`);t(E),l(null),o()}catch(E){l(E.message||"Invalid JSON format")}},m=()=>{window.confirm("This will clear your current changes and reload the demo data. Are you sure?")&&(s(JSON.stringify(Y0,null,2)),l(null))},v=()=>{window.confirm("This will load a blank schema template and clear your current edits. Continue?")&&(s(JSON.stringify(xL,null,2)),l(null))},A=()=>{window.confirm("This will remove your custom data and revert to the demo portfolio. Continue?")&&(t(null),o())};return k.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900/50 backdrop-blur-sm flex justify-end",children:k.jsxs("div",{className:"w-full max-w-2xl bg-white h-full shadow-2xl flex flex-col animate-slideIn",children:[k.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-slate-50",children:[k.jsxs("div",{children:[k.jsxs("h2",{className:"text-xl font-bold text-primary flex items-center gap-2",children:[k.jsx(TT,{className:"text-accent"}),"Portfolio Data Editor"]}),k.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload a JSON file, load a template, or edit directly."})]}),k.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-200 rounded-full text-gray-500",children:k.jsx(Cg,{size:20})})]}),k.jsx("div",{className:"flex-1 relative bg-slate-900",children:k.jsx("textarea",{value:n,onChange:E=>s(E.target.value),className:"w-full h-full p-6 bg-slate-900 text-green-400 font-mono text-sm resize-none focus:outline-none leading-relaxed",spellCheck:"false",placeholder:"Paste your JSON here..."})}),a&&k.jsxs("div",{className:"bg-red-50 p-4 border-t border-red-100 flex items-start gap-3",children:[k.jsx(SR,{className:"text-red-500 shrink-0 mt-0.5",size:18}),k.jsx("p",{className:"text-sm text-red-600 font-medium",children:a})]}),k.jsxs("div",{className:"p-6 border-t border-gray-100 bg-white flex flex-col sm:flex-row justify-between items-center gap-4",children:[k.jsxs("div",{className:"flex flex-wrap gap-3",children:[k.jsx("input",{type:"file",ref:d,onChange:h,accept:".json",className:"hidden"}),k.jsxs("button",{onClick:()=>{var E;return(E=d.current)==null?void 0:E.click()},className:"text-gray-700 hover:text-accent text-sm font-medium flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-50 border border-gray-200 transition-colors",title:"Upload JSON file",children:[k.jsx(xR,{size:16}),k.jsx("span",{className:"hidden sm:inline",children:"Upload"})]}),k.jsxs("button",{onClick:v,className:"text-gray-700 hover:text-accent text-sm font-medium flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-50 border border-gray-200 transition-colors",title:"Load Blank Template",children:[k.jsx(lP,{size:16}),k.jsx("span",{className:"hidden sm:inline",children:"Template"})]}),k.jsxs("button",{onClick:m,className:"text-gray-500 hover:text-gray-700 text-sm font-medium flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors",title:"Reset to Demo Data",children:[k.jsx(bP,{size:16}),k.jsx("span",{className:"hidden sm:inline",children:"Reset"})]}),e&&k.jsx("button",{onClick:A,className:"text-red-500 hover:text-red-700 text-sm font-medium px-3 py-2 rounded-lg hover:bg-red-50 transition-colors",children:"Revert to Demo"})]}),k.jsxs("button",{onClick:f,className:"w-full sm:w-auto bg-accent hover:bg-accentHover text-white px-6 py-2.5 rounded-lg font-medium shadow-sm transition-colors flex items-center justify-center gap-2",children:[k.jsx(TP,{size:18}),"Save & Build"]})]})]})})},ti=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),$b=[.001,0,0,.001,0,0],bb=1.35,Zi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},xa={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Cp="pdfjs_internal_editor_",Dt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Yt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},f4={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Xb={TRIANGLES:1,LATTICE:2},ln={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},u0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},en={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},id={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Uv={ERRORS:0,WARNINGS:1,INFOS:5},wp={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Qf={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},p4={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ov=Uv.WARNINGS;function m4(o){Number.isInteger(o)&&(Ov=o)}function g4(){return Ov}function Bv(o){Ov>=Uv.INFOS&&console.info(`Info: ${o}`)}function xt(o){Ov>=Uv.WARNINGS&&console.warn(`Warning: ${o}`)}function se(o){throw new Error(o)}function ie(o,t){o||se(t)}function y4(o){switch(o==null?void 0:o.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function SN(o,t=null,e=null){if(!o)return null;if(e&&typeof o=="string"){if(e.addDefaultProtocol&&o.startsWith("www.")){const s=o.match(/\./g);(s==null?void 0:s.length)>=2&&(o=`http://${o}`)}if(e.tryConvertEncoding)try{o=T4(o)}catch{}}const n=t?URL.parse(o,t):URL.parse(o);return y4(n)?n:null}function bN(o,t,e=!1){const n=URL.parse(o);return n?(n.hash=t,n.href):e&&SN(o,"http://example.com")?o.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Mt(o,t,e,n=!1){return Object.defineProperty(o,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const mu=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class GM extends mu{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Eb extends mu{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Jb extends mu{constructor(t){super(t,"InvalidPDFException")}}class Z0 extends mu{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class v4 extends mu{constructor(t){super(t,"FormatError")}}class Tl extends mu{constructor(t){super(t,"AbortException")}}function A4(o){(typeof o!="object"||(o==null?void 0:o.length)===void 0)&&se("Invalid argument for bytesToString");const t=o.length,e=8192;if(t<e)return String.fromCharCode.apply(null,o);const n=[];for(let s=0;s<t;s+=e){const a=Math.min(s+e,t),l=o.subarray(s,a);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function Fv(o){typeof o!="string"&&se("Invalid argument for stringToBytes");const t=o.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=o.charCodeAt(n)&255;return e}function S4(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255)}function b4(){const o=new Uint8Array(4);return o[0]=1,new Uint32Array(o.buffer,0,1)[0]===1}function E4(){try{return new Function(""),!0}catch{return!1}}class hn{static get isLittleEndian(){return Mt(this,"isLittleEndian",b4())}static get isEvalSupported(){return Mt(this,"isEvalSupported",E4())}static get isOffscreenCanvasSupported(){return Mt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Mt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Mt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Mt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Mt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return Mt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Tb=Array.from(Array(256).keys(),o=>o.toString(16).padStart(2,"0"));var $r,d0,Kb;class ut{static makeHexColor(t,e,n){return`#${Tb[t]}${Tb[e]}${Tb[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const s=t[n],a=t[n+1];t[n]=s*e[0]+a*e[2]+e[4],t[n+1]=s*e[1]+a*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const s=e[0],a=e[1],l=e[2],d=e[3],h=e[4],f=e[5];for(let m=0;m<6;m+=2){const v=t[n+m],A=t[n+m+1];t[n+m]=v*s+A*l+h,t[n+m+1]=v*a+A*d+f}}static applyInverseTransform(t,e){const n=t[0],s=t[1],a=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/a,t[1]=(-n*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/a}static axialAlignedBoundingBox(t,e,n){const s=e[0],a=e[1],l=e[2],d=e[3],h=e[4],f=e[5],m=t[0],v=t[1],A=t[2],E=t[3];let _=s*m+h,C=_,M=s*A+h,R=M,L=d*v+f,I=L,U=d*E+f,P=U;if(a!==0||l!==0){const O=a*m,F=a*A,Z=l*v,X=l*E;_+=Z,R+=Z,M+=X,C+=X,L+=O,P+=O,U+=F,I+=F}n[0]=Math.min(n[0],_,M,C,R),n[1]=Math.min(n[1],L,U,I,P),n[2]=Math.max(n[2],_,M,C,R),n[3]=Math.max(n[3],L,U,I,P)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],s=t[1],a=t[2],l=t[3],d=n**2+s**2,h=n*a+s*l,f=a**2+l**2,m=(d+f)/2,v=Math.sqrt(m**2-(d*f-h**2));e[0]=Math.sqrt(m+v||1),e[1]=Math.sqrt(m-v||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>l?null:[n,a,s,l]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,s,a){a[0]=Math.min(a[0],t,n),a[1]=Math.min(a[1],e,s),a[2]=Math.max(a[2],t,n),a[3]=Math.max(a[3],e,s)}static bezierBoundingBox(t,e,n,s,a,l,d,h,f){f[0]=Math.min(f[0],t,d),f[1]=Math.min(f[1],e,h),f[2]=Math.max(f[2],t,d),f[3]=Math.max(f[3],e,h),N(this,$r,Kb).call(this,t,n,a,d,e,s,l,h,3*(-t+3*(n-a)+d),6*(t-2*n+a),3*(n-t),f),N(this,$r,Kb).call(this,t,n,a,d,e,s,l,h,3*(-e+3*(s-l)+h),6*(e-2*s+l),3*(s-e),f)}}$r=new WeakSet,d0=function(t,e,n,s,a,l,d,h,f,m){if(f<=0||f>=1)return;const v=1-f,A=f*f,E=A*f,_=v*(v*(v*t+3*f*e)+3*A*n)+E*s,C=v*(v*(v*a+3*f*l)+3*A*d)+E*h;m[0]=Math.min(m[0],_),m[1]=Math.min(m[1],C),m[2]=Math.max(m[2],_),m[3]=Math.max(m[3],C)},Kb=function(t,e,n,s,a,l,d,h,f,m,v,A){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&N(this,$r,d0).call(this,t,e,n,s,a,l,d,h,-v/m,A);return}const E=m**2-4*v*f;if(E<0)return;const _=Math.sqrt(E),C=2*f;N(this,$r,d0).call(this,t,e,n,s,a,l,d,h,(-m+_)/C,A),N(this,$r,d0).call(this,t,e,n,s,a,l,d,h,(-m-_)/C,A)},x(ut,$r);function T4(o){return decodeURIComponent(escape(o))}let _b=null,zM=null;function _4(o){return _b||(_b=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,zM=new Map([["","t"]])),o.replaceAll(_b,(t,e,n)=>e?e.normalize("NFKC"):zM.get(n))}function EN(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const o=new Uint8Array(32);return crypto.getRandomValues(o),A4(o)}const fd="pdfjs_internal_id_";function C4(o,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,s,...a]=e;if(!o(n)&&!Number.isInteger(n)||!t(s))return!1;const l=a.length;let d=!0;switch(s.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;d=!1;break;default:return!1}for(const h of a)if(!(typeof h=="number"||d&&h===null))return!1;return!0}function Ln(o,t,e){return Math.min(Math.max(o,t),e)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(o){return o.reduce((t,e)=>t+e,0)});class xp{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(a){var h;if(!a)return;let l=null;const d=a.name;if(d==="#text")l=a.value;else if(xp.shouldBuildText(d))(h=a==null?void 0:a.attributes)!=null&&h.textContent?l=a.attributes.textContent:a.value&&(l=a.value);else return;if(l!==null&&e.push({str:l}),!!a.children)for(const f of a.children)s(f)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class TN{static setupStorage(t,e,n,s,a){const l=s.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),a==="print")break;t.addEventListener("input",d=>{s.setValue(e,{value:d.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",d=>{s.setValue(e,{value:d.target.checked?d.target.getAttribute("xfaOn"):d.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),a==="print")break;t.addEventListener("input",d=>{s.setValue(e,{value:d.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const d of n.children)d.attributes.value===l.value?d.attributes.selected=!0:d.attributes.hasOwnProperty("selected")&&delete d.attributes.selected}t.addEventListener("input",d=>{const h=d.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;s.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:a}){const{attributes:l}=e,d=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${s}`);for(const[h,f]of Object.entries(l))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!d||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}d&&a.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){var v,A;const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,a=t.intent||"display",l=document.createElement(s.name);s.attributes&&this.setAttributes({html:l,element:s,intent:a,linkService:n});const d=a!=="richText",h=t.div;if(h.append(l),t.viewport){const E=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=E}d&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(s.children.length===0){if(s.value){const E=document.createTextNode(s.value);l.append(E),d&&xp.shouldBuildText(s.name)&&f.push(E)}return{textDivs:f}}const m=[[s,-1,l]];for(;m.length>0;){const[E,_,C]=m.at(-1);if(_+1===E.children.length){m.pop();continue}const M=E.children[++m.at(-1)[1]];if(M===null)continue;const{name:R}=M;if(R==="#text"){const I=document.createTextNode(M.value);f.push(I),C.append(I);continue}const L=(v=M==null?void 0:M.attributes)!=null&&v.xmlns?document.createElementNS(M.attributes.xmlns,R):document.createElement(R);if(C.append(L),M.attributes&&this.setAttributes({html:L,element:M,storage:e,intent:a,linkService:n}),((A=M.children)==null?void 0:A.length)>0)m.push([M,-1,L]);else if(M.value){const I=document.createTextNode(M.value);d&&xp.shouldBuildText(R)&&f.push(I),L.append(I)}}for(const E of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))E.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const sr="http://www.w3.org/2000/svg",Wl=class Wl{};W(Wl,"CSS",96),W(Wl,"PDF",72),W(Wl,"PDF_TO_CSS_UNITS",Wl.CSS/Wl.PDF);let _l=Wl;async function wg(o,t="text"){if(ip(o,document.baseURI)){const e=await fetch(o);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",o,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class xg{constructor({viewBox:t,userUnit:e,scale:n,rotation:s,offsetX:a=0,offsetY:l=0,dontFlip:d=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=s,this.offsetX=a,this.offsetY=l,n*=e;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let m,v,A,E;switch(s%=360,s<0&&(s+=360),s){case 180:m=-1,v=0,A=0,E=1;break;case 90:m=0,v=1,A=1,E=0;break;case 270:m=0,v=-1,A=-1,E=0;break;case 0:m=1,v=0,A=0,E=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}d&&(A=-A,E=-E);let _,C,M,R;m===0?(_=Math.abs(f-t[1])*n+a,C=Math.abs(h-t[0])*n+l,M=(t[3]-t[1])*n,R=(t[2]-t[0])*n):(_=Math.abs(h-t[0])*n+a,C=Math.abs(f-t[1])*n+l,M=(t[2]-t[0])*n,R=(t[3]-t[1])*n),this.transform=[m*n,v*n,A*n,E*n,_-m*n*h-A*n*f,C-v*n*h-E*n*f],this.width=M,this.height=R}get rawDims(){const t=this.viewBox;return Mt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:a=!1}={}){return new xg({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:a})}convertToViewportPoint(t,e){const n=[t,e];return ut.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];ut.applyTransform(e,this.transform);const n=[t[2],t[3]];return ut.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return ut.applyInverseTransform(n,this.transform),n}}class PT extends mu{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Hv(o){const t=o.length;let e=0;for(;e<t&&o[e].trim()==="";)e++;return o.substring(e,e+5).toLowerCase()==="data:"}function UT(o){return typeof o=="string"&&/\.pdf$/i.test(o)}function w4(o){return[o]=o.split(/[#?]/,1),o.substring(o.lastIndexOf("/")+1)}function x4(o,t="document.pdf"){if(typeof o!="string")return t;if(Hv(o))return xt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(d=>{try{return new URL(d)}catch{try{return new URL(decodeURIComponent(d))}catch{try{return new URL(d,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(d),"https://foo.bar")}catch{return null}}}}})(o);if(!n)return t;const s=d=>{try{let h=decodeURIComponent(d);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:d):h}catch{return d}},a=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(a.test(l))return s(l);if(n.searchParams.size>0){const d=Array.from(n.searchParams.values()).reverse();for(const f of d)if(a.test(f))return s(f);const h=Array.from(n.searchParams.keys()).reverse();for(const f of h)if(a.test(f))return s(f)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return s(h[0])}return t}class VM{constructor(){W(this,"started",Object.create(null));W(this,"times",[])}time(t){t in this.started&&xt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||xt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:a}of this.times)t.push(`${n.padEnd(e)} ${a-s}ms
`);return t.join("")}}function ip(o,t){const e=t?URL.parse(o,t):URL.parse(o);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Ls(o){o.preventDefault()}function qe(o){o.preventDefault(),o.stopPropagation()}function M4(o){console.log("Deprecated API usage: "+o)}var Ip;class j0{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;u(this,Ip)||T(this,Ip,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=u(this,Ip).exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let d=parseInt(e[5],10);d=d>=0&&d<=59?d:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const f=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let v=parseInt(e[9],10)||0;return v=v>=0&&v<=59?v:0,f==="-"?(l+=m,d+=v):f==="+"&&(l-=m,d-=v),new Date(Date.UTC(n,s,a,l,d,h))}}Ip=new WeakMap,x(j0,Ip);function R4(o,{scale:t=1,rotation:e=0}){const{width:n,height:s}=o.attributes.style,a=[0,0,parseInt(n),parseInt(s)];return new xg({viewBox:a,userUnit:1,scale:t,rotation:e})}function Mg(o){if(o.startsWith("#")){const t=parseInt(o.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return o.startsWith("rgb(")?o.slice(4,-1).split(",").map(t=>parseInt(t)):o.startsWith("rgba(")?o.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(xt(`Not a valid color format: "${o}"`),[0,0,0])}function N4(o){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of o.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;o.set(e,Mg(n))}t.remove()}function Ue(o){const{a:t,b:e,c:n,d:s,e:a,f:l}=o.getTransform();return[t,e,n,s,a,l]}function lo(o){const{a:t,b:e,c:n,d:s,e:a,f:l}=o.getTransform().invertSelf();return[t,e,n,s,a,l]}function du(o,t,e=!1,n=!0){if(t instanceof xg){const{pageWidth:s,pageHeight:a}=t.rawDims,{style:l}=o,d=hn.isCSSRoundSupported,h=`var(--total-scale-factor) * ${s}px`,f=`var(--total-scale-factor) * ${a}px`,m=d?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,v=d?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=m,l.height=v):(l.width=v,l.height=m)}n&&o.setAttribute("data-main-rotation",t.rotation)}class Po{constructor(){const{pixelRatio:t}=Po;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,s,a=-1){let l=1/0,d=1/0,h=1/0;n=Po.capPixels(n,a),n>0&&(l=Math.sqrt(n/(t*e))),s!==-1&&(d=s/t,h=s/e);const f=Math.min(l,d,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const Wb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class I4{static get isDarkMode(){var t;return Mt(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class D4{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Mt(this,"commentForegroundColor",Mg(n))}}function k4(o,t,e,n){n=Math.min(Math.max(n??1,0),1);const s=255*(1-n);return o=Math.round(o*n+s),t=Math.round(t*n+s),e=Math.round(e*n+s),[o,t,e]}function qM(o,t){const e=o[0]/255,n=o[1]/255,s=o[2]/255,a=Math.max(e,n,s),l=Math.min(e,n,s),d=(a+l)/2;if(a===l)t[0]=t[1]=0;else{const h=a-l;switch(t[1]=d<.5?h/(a+l):h/(2-a-l),a){case e:t[0]=((n-s)/h+(n<s?6:0))*60;break;case n:t[0]=((s-e)/h+2)*60;break;case s:t[0]=((e-n)/h+4)*60;break}}t[2]=d}function Qb(o,t){const e=o[0],n=o[1],s=o[2],a=(1-Math.abs(2*s-1))*n,l=a*(1-Math.abs(e/60%2-1)),d=s-a/2;switch(Math.floor(e/60)){case 0:t[0]=a+d,t[1]=l+d,t[2]=d;break;case 1:t[0]=l+d,t[1]=a+d,t[2]=d;break;case 2:t[0]=d,t[1]=a+d,t[2]=l+d;break;case 3:t[0]=d,t[1]=l+d,t[2]=a+d;break;case 4:t[0]=l+d,t[1]=d,t[2]=a+d;break;case 5:case 6:t[0]=a+d,t[1]=d,t[2]=l+d;break}}function YM(o){return o<=.03928?o/12.92:((o+.055)/1.055)**2.4}function $M(o,t,e){Qb(o,e),e.map(YM);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];Qb(t,e),e.map(YM);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>s?(n+.05)/(s+.05):(s+.05)/(n+.05)}const XM=new Map;function L4(o,t){const e=o[0]+o[1]*256+o[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=XM.get(e);if(n)return n;const s=new Float32Array(9),a=s.subarray(0,3),l=s.subarray(3,6);qM(o,l);const d=s.subarray(6,9);qM(t,d);const h=d[2]<.5,f=h?12:4.5;if(l[2]=h?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),$M(l,d,a)<f){let m,v;h?(m=l[2],v=1):(m=0,v=l[2]);const A=.005;for(;v-m>A;){const E=l[2]=(m+v)/2;h===$M(l,d,a)<f?m=E:v=E}l[2]=h?v:m}return Qb(l,a),n=ut.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),XM.set(e,n),n}function _N({html:o,dir:t,className:e},n){const s=document.createDocumentFragment();if(typeof o=="string"){const a=document.createElement("p");a.dir=t||"auto";const l=o.split(/(?:\r\n?|\n)/);for(let d=0,h=l.length;d<h;++d){const f=l[d];a.append(document.createTextNode(f)),d<h-1&&a.append(document.createElement("br"))}s.append(a)}else TN.render({xfaHtml:o,div:s,intent:"richText"});s.firstElementChild.classList.add("richText",e),n.append(s)}function CN(o){const t=new Path2D;if(!o)return t;for(let e=0,n=o.length;e<n;)switch(o[e++]){case Qf.moveTo:t.moveTo(o[e++],o[e++]);break;case Qf.lineTo:t.lineTo(o[e++],o[e++]);break;case Qf.curveTo:t.bezierCurveTo(o[e++],o[e++],o[e++],o[e++],o[e++],o[e++]);break;case Qf.quadraticCurveTo:t.quadraticCurveTo(o[e++],o[e++],o[e++],o[e++]);break;case Qf.closePath:t.closePath();break;default:xt(`Unrecognized drawing path operator: ${o[e-1]}`);break}return t}var cr,Gs,Ed,Ma,jl,Jh,wN,xN;const Xt=class Xt{constructor(){x(this,Jh)}get pagesNumber(){return u(Xt,Ma)}set pagesNumber(t){u(Xt,Ma)!==t&&(T(Xt,Ma,t),t===0&&(T(Xt,Gs,null),T(Xt,cr,null)))}addListener(t){u(Xt,jl).push(t)}removeListener(t){const e=u(Xt,jl).indexOf(t);e>=0&&u(Xt,jl).splice(e,1)}movePages(t,e,n){N(this,Jh,xN).call(this,!0);const s=u(Xt,Gs),a=u(Xt,cr);u(Xt,Ed).set(a);const l=e.length,d=new Uint32Array(l);let h=0;for(let E=0;E<l;E++){const _=e[E]-1;d[E]=s[_],_<n&&(h+=1)}const f=u(Xt,Ma);let m=n-h;const v=f-l;m=Ln(m,0,v);for(let E=0,_=0;E<f;E++)t.has(E+1)||(s[_++]=s[E]);s.copyWithin(m+l,m,v),s.set(d,m);let A=!1;for(let E=0,_=f;E<_;E++){const C=s[E];A||(A=C!==E+1),a[C-1]=E+1}N(this,Jh,wN).call(this),A||(this.pagesNumber=0)}hasBeenAltered(){return u(Xt,Gs)!==null}getPageMappingForSaving(){return{pageIndices:u(Xt,cr)?u(Xt,cr).map(t=>t-1):null}}getPrevPageNumber(t){return u(Xt,Ed)[u(Xt,Gs)[t-1]-1]}getPageNumber(t){var e;return((e=u(Xt,cr))==null?void 0:e[t-1])??t}getPageId(t){var e;return((e=u(Xt,Gs))==null?void 0:e[t-1])??t}static get instance(){return Mt(this,"instance",new Xt)}getMapping(){return u(Xt,Gs).subarray(0,this.pagesNumber)}};cr=new WeakMap,Gs=new WeakMap,Ed=new WeakMap,Ma=new WeakMap,jl=new WeakMap,Jh=new WeakSet,wN=function(){for(const t of u(Xt,jl))t()},xN=function(t){if(u(Xt,Gs))return;const e=u(Xt,Ma),n=new Uint32Array(3*e),s=T(Xt,Gs,n.subarray(0,e)),a=T(Xt,cr,n.subarray(e,2*e));if(t)for(let l=0;l<e;l++)s[l]=a[l]=l+1;T(Xt,Ed,n.subarray(2*e))},x(Xt,cr,null),x(Xt,Gs,null),x(Xt,Ed,null),x(Xt,Ma,0),x(Xt,jl,[]);let Mp=Xt;var Ra,Na,gs,ys,Dp,Ia,Td,_d,kp,dv,MN,On,RN,NN,sd,sp;const ar=class ar{constructor(t){x(this,On);x(this,Ra,null);x(this,Na,null);x(this,gs);x(this,ys,null);x(this,Dp,null);x(this,Ia,null);x(this,Td,null);x(this,_d,null);T(this,gs,t),u(ar,kp)||T(ar,kp,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=T(this,Ra,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=u(this,gs)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Ls,{signal:e}),t.addEventListener("pointerdown",N(ar,dv,MN),{signal:e}));const n=T(this,ys,document.createElement("div"));n.className="buttons",t.append(n);const s=u(this,gs).toolbarPosition;if(s){const{style:a}=t,l=u(this,gs)._uiManager.direction==="ltr"?1-s[0]:s[0];a.insetInlineEnd=`${100*l}%`,a.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return u(this,Ra)}hide(){var t;u(this,Ra).classList.add("hidden"),(t=u(this,Na))==null||t.hideDropdown()}show(){var t,e;u(this,Ra).classList.remove("hidden"),(t=u(this,Dp))==null||t.shown(),(e=u(this,Ia))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=u(this,gs),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",u(ar,kp)[t]),N(this,On,sd).call(this,n)&&n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),u(this,ys).append(n)}async addAltText(t){const e=await t.render();N(this,On,sd).call(this,e),u(this,ys).append(e,u(this,On,sp)),T(this,Dp,t)}addComment(t,e=null){if(u(this,Ia))return;const n=t.renderForToolbar();if(!n)return;N(this,On,sd).call(this,n);const s=T(this,Td,u(this,On,sp));e?(u(this,ys).insertBefore(n,e),u(this,ys).insertBefore(s,e)):u(this,ys).append(n,s),T(this,Ia,t),t.toolbar=this}addColorPicker(t){if(u(this,Na))return;T(this,Na,t);const e=t.renderButton();N(this,On,sd).call(this,e),u(this,ys).append(e,u(this,On,sp))}async addEditSignatureButton(t){const e=T(this,_d,await t.renderEditButton(u(this,gs)));N(this,On,sd).call(this,e),u(this,ys).append(e,u(this,On,sp))}removeButton(t){var e,n;switch(t){case"comment":(e=u(this,Ia))==null||e.removeToolbarCommentButton(),T(this,Ia,null),(n=u(this,Td))==null||n.remove(),T(this,Td,null);break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const s=u(this,ys).querySelector(n);s&&t==="comment"&&this.addComment(e,s)}updateEditSignatureButton(t){u(this,_d)&&(u(this,_d).title=t)}remove(){var t;u(this,Ra).remove(),(t=u(this,Na))==null||t.destroy(),T(this,Na,null)}};Ra=new WeakMap,Na=new WeakMap,gs=new WeakMap,ys=new WeakMap,Dp=new WeakMap,Ia=new WeakMap,Td=new WeakMap,_d=new WeakMap,kp=new WeakMap,dv=new WeakSet,MN=function(t){t.stopPropagation()},On=new WeakSet,RN=function(t){u(this,gs)._focusEventsAllowed=!1,qe(t)},NN=function(t){u(this,gs)._focusEventsAllowed=!0,qe(t)},sd=function(t){const e=u(this,gs)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",N(this,On,RN).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",N(this,On,NN).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ls,{signal:e}),!0)},sp=function(){const t=document.createElement("div");return t.className="divider",t},x(ar,dv),x(ar,kp,null);let Zb=ar;var Lp,tc,ur,Wr,IN,DN,jb;class P4{constructor(t){x(this,Wr);x(this,Lp,null);x(this,tc,null);x(this,ur);T(this,ur,t)}show(t,e,n){const[s,a]=N(this,Wr,DN).call(this,e,n),{style:l}=u(this,tc)||T(this,tc,N(this,Wr,IN).call(this));t.append(u(this,tc)),l.insetInlineEnd=`${100*s}%`,l.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,tc).remove()}}Lp=new WeakMap,tc=new WeakMap,ur=new WeakMap,Wr=new WeakSet,IN=function(){const t=T(this,tc,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=u(this,ur)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Ls,{signal:e});const n=T(this,Lp,document.createElement("div"));return n.className="buttons",t.append(n),u(this,ur).hasCommentManager()&&N(this,Wr,jb).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{u(this,ur).commentSelection("floating_button")}),N(this,Wr,jb).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{u(this,ur).highlightSelection("floating_button")}),t},DN=function(t,e){let n=0,s=0;for(const a of t){const l=a.y+a.height;if(l<n)continue;const d=a.x+(e?a.width:0);if(l>n){s=d,n=l;continue}e?d>s&&(s=d):d<s&&(s=d)}return[e?1-s:s,n]},jb=function(t,e,n,s){const a=document.createElement("button");a.classList.add("basic",t),a.tabIndex=0,a.setAttribute("data-l10n-id",e);const l=document.createElement("span");a.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const d=u(this,ur)._signal;d instanceof AbortSignal&&!d.aborted&&(a.addEventListener("contextmenu",Ls,{signal:d}),a.addEventListener("click",s,{signal:d})),u(this,Lp).append(a)};function kN(o,t,e){for(const n of e)t.addEventListener(n,o[n].bind(o))}var ec,nc,Cd,ic;const pe=class pe{static initializeAndAddPointerId(t){(u(pe,nc)||T(pe,nc,new Set)).add(t)}static setPointer(t,e){u(pe,ec)||T(pe,ec,e),u(pe,ic)??T(pe,ic,t)}static setTimeStamp(t){T(pe,Cd,t)}static isSamePointerId(t){return u(pe,ec)===t}static isSamePointerIdOrRemove(t){var e;return u(pe,ec)===t?!0:((e=u(pe,nc))==null||e.delete(t),!1)}static isSamePointerType(t){return u(pe,ic)===t}static isInitializedAndDifferentPointerType(t){return u(pe,ic)!==null&&!pe.isSamePointerType(t)}static isSameTimeStamp(t){return u(pe,Cd)===t}static isUsingMultiplePointers(){var t;return((t=u(pe,nc))==null?void 0:t.size)>=1}static clearPointerType(){T(pe,ic,null)}static clearPointerIds(){T(pe,ec,NaN),T(pe,nc,null)}static clearTimeStamp(){T(pe,Cd,NaN)}};ec=new WeakMap,nc=new WeakMap,Cd=new WeakMap,ic=new WeakMap,x(pe,ec,NaN),x(pe,nc,null),x(pe,Cd,NaN),x(pe,ic,null);let Hn=pe;var hv;class U4{constructor(){x(this,hv,0)}get id(){return`${Cp}${an(this,hv)._++}`}}hv=new WeakMap;var wd,Pp,Gn,xd,h0;const qT=class qT{constructor(){x(this,xd);x(this,wd,EN());x(this,Pp,0);x(this,Gn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const a=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Mt(this,"_isSVGFittingCanvas",a)}async getFromFile(t){const{lastModified:e,name:n,size:s,type:a}=t;return N(this,xd,h0).call(this,`${e}_${n}_${s}_${a}`,t)}async getFromUrl(t){return N(this,xd,h0).call(this,t,t)}async getFromBlob(t,e){const n=await e;return N(this,xd,h0).call(this,t,n)}async getFromId(t){u(this,Gn)||T(this,Gn,new Map);const e=u(this,Gn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){u(this,Gn)||T(this,Gn,new Map);let n=u(this,Gn).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${u(this,wd)}_${an(this,Pp)._++}`,refCounter:1,isSvg:!1},u(this,Gn).set(t,n),u(this,Gn).set(n.id,n),n}getSvgUrl(t){const e=u(this,Gn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;u(this,Gn)||T(this,Gn,new Map);const e=u(this,Gn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(n.width,n.height);a.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=a.convertToBlob()}(s=n.close)==null||s.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${u(this,wd)}_`)}};wd=new WeakMap,Pp=new WeakMap,Gn=new WeakMap,xd=new WeakSet,h0=async function(t,e){u(this,Gn)||T(this,Gn,new Map);let n=u(this,Gn).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${u(this,wd)}_${an(this,Pp)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(n.url=e,s=await wg(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const a=qT._isSVGFittingCanvas,l=new FileReader,d=new Image,h=new Promise((f,m)=>{d.onload=()=>{n.bitmap=d,n.isSvg=!0,f()},l.onload=async()=>{const v=n.svgUrl=l.result;d.src=await a?`${v}#svgView(preserveAspectRatio(none))`:v},d.onerror=l.onerror=m});l.readAsDataURL(s),await h}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){xt(s),n=null}return u(this,Gn).set(t,n),n&&u(this,Gn).set(n.id,n),n};let tE=qT;var Xe,Da,Up,Le;class O4{constructor(t=128){x(this,Xe,[]);x(this,Da,!1);x(this,Up);x(this,Le,-1);T(this,Up,t)}add({cmd:t,undo:e,post:n,mustExec:s,type:a=NaN,overwriteIfSameType:l=!1,keepUndo:d=!1}){if(s&&t(),u(this,Da))return;const h={cmd:t,undo:e,post:n,type:a};if(u(this,Le)===-1){u(this,Xe).length>0&&(u(this,Xe).length=0),T(this,Le,0),u(this,Xe).push(h);return}if(l&&u(this,Xe)[u(this,Le)].type===a){d&&(h.undo=u(this,Xe)[u(this,Le)].undo),u(this,Xe)[u(this,Le)]=h;return}const f=u(this,Le)+1;f===u(this,Up)?u(this,Xe).splice(0,1):(T(this,Le,f),f<u(this,Xe).length&&u(this,Xe).splice(f)),u(this,Xe).push(h)}undo(){if(u(this,Le)===-1)return;T(this,Da,!0);const{undo:t,post:e}=u(this,Xe)[u(this,Le)];t(),e==null||e(),T(this,Da,!1),T(this,Le,u(this,Le)-1)}redo(){if(u(this,Le)<u(this,Xe).length-1){T(this,Le,u(this,Le)+1),T(this,Da,!0);const{cmd:t,post:e}=u(this,Xe)[u(this,Le)];t(),e==null||e(),T(this,Da,!1)}}hasSomethingToUndo(){return u(this,Le)!==-1}hasSomethingToRedo(){return u(this,Le)<u(this,Xe).length-1}cleanType(t){if(u(this,Le)!==-1){for(let e=u(this,Le);e>=0;e--)if(u(this,Xe)[e].type!==t){u(this,Xe).splice(e+1,u(this,Le)-e),T(this,Le,e);return}u(this,Xe).length=0,T(this,Le,-1)}}destroy(){T(this,Xe,null)}}Xe=new WeakMap,Da=new WeakMap,Up=new WeakMap,Le=new WeakMap;var fv,LN;class Rg{constructor(t){x(this,fv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=hn.platform;for(const[n,s,a={}]of t)for(const l of n){const d=l.startsWith("mac+");e&&d?(this.callbacks.set(l.slice(4),{callback:s,options:a}),this.allKeys.add(l.split("+").at(-1))):!e&&!d&&(this.callbacks.set(l,{callback:s,options:a}),this.allKeys.add(l.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(N(this,fv,LN).call(this,e));if(!n)return;const{callback:s,options:{bubbles:a=!1,args:l=[],checker:d=null}}=n;d&&!d(t,e)||(s.bind(t,...l,e)(),a||qe(e))}}fv=new WeakSet,LN=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const pv=class pv{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return N4(t),Mt(this,"_colors",t)}convert(t){const e=Mg(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((a,l)=>a===e[l]))return pv._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?ut.makeHexColor(...e):t}};W(pv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let eE=pv;var Md,ki,Rd,Pe,Je,Nd,vs,Id,As,zn,ka,La,Dd,Pa,ho,Ss,sc,Op,Bp,kd,Fp,fo,Ua,Ld,Oa,po,mv,Ba,Pd,Hp,Fa,oc,Ud,Ha,Gp,nn,le,dr,Ga,za,zp,Od,Vp,Va,mo,hr,qp,Yp,bs,rt,f0,nE,PN,UN,op,ON,BN,FN,iE,HN,GN,zN,VN,Jn,or,qN,YN,sE,$N,rp,oE;const md=class md{constructor(t,e,n,s,a,l,d,h,f,m,v,A,E,_,C,M){x(this,rt);x(this,Md,new AbortController);x(this,ki,null);x(this,Rd,null);x(this,Pe,new Map);x(this,Je,new Map);x(this,Nd,null);x(this,vs,null);x(this,Id,null);x(this,As,new O4);x(this,zn,null);x(this,ka,null);x(this,La,null);x(this,Dd,0);x(this,Pa,new Set);x(this,ho,null);x(this,Ss,null);x(this,sc,new Set);W(this,"_editorUndoBar",null);x(this,Op,!1);x(this,Bp,!1);x(this,kd,!1);x(this,Fp,null);x(this,fo,null);x(this,Ua,null);x(this,Ld,null);x(this,Oa,!1);x(this,po,null);x(this,mv,new U4);x(this,Ba,!1);x(this,Pd,!1);x(this,Hp,!1);x(this,Fa,null);x(this,oc,null);x(this,Ud,null);x(this,Ha,null);x(this,Gp,null);x(this,nn,Dt.NONE);x(this,le,new Set);x(this,dr,null);x(this,Ga,null);x(this,za,null);x(this,zp,null);x(this,Od,null);x(this,Vp,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,Va,[0,0]);x(this,mo,null);x(this,hr,null);x(this,qp,null);x(this,Yp,null);x(this,bs,null);const R=this._signal=u(this,Md).signal;T(this,hr,t),T(this,qp,e),T(this,Yp,n),T(this,Nd,s),T(this,zn,a),T(this,Ga,l),T(this,Od,h),this._eventBus=d,d._on("editingaction",this.onEditingAction.bind(this),{signal:R}),d._on("pagechanging",this.onPageChanging.bind(this),{signal:R}),d._on("scalechanging",this.onScaleChanging.bind(this),{signal:R}),d._on("rotationchanging",this.onRotationChanging.bind(this),{signal:R}),d._on("setpreference",this.onSetPreference.bind(this),{signal:R}),d._on("switchannotationeditorparams",L=>this.updateParams(L.type,L.value),{signal:R}),d._on("pagesedited",this.onPagesEdited.bind(this),{signal:R}),window.addEventListener("pointerdown",()=>{T(this,Pd,!0)},{capture:!0,signal:R}),window.addEventListener("pointerup",()=>{T(this,Pd,!1)},{capture:!0,signal:R}),N(this,rt,ON).call(this),N(this,rt,VN).call(this),N(this,rt,iE).call(this),T(this,vs,h.annotationStorage),T(this,Fp,h.filterFactory),T(this,za,f),T(this,Ld,m||null),T(this,Op,v),T(this,Bp,A),T(this,kd,E),T(this,Gp,_||null),this.viewParameters={realScale:_l.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=C||null,this._supportsPinchToZoom=M!==!1,a==null||a.setSidebarUiManager(this)}static get _keyboardManager(){const t=md.prototype,e=l=>u(l,hr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:d})=>{if(d instanceof HTMLInputElement){const{type:h}=d;return h!=="text"&&h!=="number"}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Mt(this,"_keyboardManager",new Rg([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:d})=>!(d instanceof HTMLButtonElement)&&u(l,hr).contains(d)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:d})=>!(d instanceof HTMLButtonElement)&&u(l,hr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}destroy(){var t,e,n,s,a,l,d,h,f;(t=u(this,bs))==null||t.resolve(),T(this,bs,null),(e=u(this,Md))==null||e.abort(),T(this,Md,null),this._signal=null;for(const m of u(this,Je).values())m.destroy();u(this,Je).clear(),u(this,Pe).clear(),u(this,sc).clear(),(n=u(this,Ha))==null||n.clear(),T(this,ki,null),u(this,le).clear(),u(this,As).destroy(),(s=u(this,Nd))==null||s.destroy(),(a=u(this,zn))==null||a.destroy(),(l=u(this,Ga))==null||l.destroy(),(d=u(this,po))==null||d.hide(),T(this,po,null),(h=u(this,Ud))==null||h.destroy(),T(this,Ud,null),T(this,Rd,null),u(this,fo)&&(clearTimeout(u(this,fo)),T(this,fo,null)),u(this,mo)&&(clearTimeout(u(this,mo)),T(this,mo,null)),(f=this._editorUndoBar)==null||f.destroy(),T(this,Od,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return u(this,Gp)}get useNewAltTextFlow(){return u(this,Bp)}get useNewAltTextWhenAddingImage(){return u(this,kd)}get hcmFilter(){return Mt(this,"hcmFilter",u(this,za)?u(this,Fp).addHCMFilter(u(this,za).foreground,u(this,za).background):"none")}get direction(){return Mt(this,"direction",getComputedStyle(u(this,hr)).direction)}get _highlightColors(){return Mt(this,"_highlightColors",u(this,Ld)?new Map(u(this,Ld).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Mt(this,"highlightColors",null);const e=new Map,n=!!u(this,za);for(const[s,a]of t){const l=s.endsWith("_HCM");if(n&&l){e.set(s.replace("_HCM",""),a);continue}!n&&!l&&e.set(s,a)}return Mt(this,"highlightColors",e)}get highlightColorNames(){return Mt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),T(this,La,t)}setMainHighlightColorPicker(t){T(this,Ud,t)}editAltText(t,e=!1){var n;(n=u(this,Nd))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!u(this,zn)}editComment(t,e,n,s){var a;(a=u(this,zn))==null||a.showDialog(this,t,e,n,s)}selectComment(t,e){const n=u(this,Je).get(t),s=n==null?void 0:n.getEditorByUID(e);s==null||s.toggleComment(!0,!0)}updateComment(t){var e;(e=u(this,zn))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=u(this,zn))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=u(this,zn))==null||e.removeComments([t.uid])}deleteComment(t,e){const n=()=>{t.comment=e},s=()=>{var a;(a=this._editorUndoBar)==null||a.show(n,"comment"),this.toggleComment(null),t.comment=null};this.addCommands({cmd:s,undo:n,mustExec:!0})}toggleComment(t,e,n=void 0){var s;(s=u(this,zn))==null||s.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){var n;return t&&((n=u(this,zn))==null?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=u(this,zn))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(u(this,Je).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),s=a=>{a.pageNumber===t&&(this._eventBus._off("editorsrendered",s),e())};this._eventBus.on("editorsrendered",s),await n}getSignature(t){var e;(e=u(this,Ga))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return u(this,Ga)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":T(this,kd,e);break}}onPagesEdited({pagesMapper:t}){for(const s of u(this,Pe).values())s.updatePageIndex(t.getPrevPageNumber(s.pageIndex+1)-1);const e=u(this,Je),n=T(this,Je,new Map);for(const[s,a]of e){const l=t.getPrevPageNumber(s+1)-1;if(l===-1){a.destroy();continue}n.set(l,a),a.updatePageIndex(l)}}onPageChanging({pageNumber:t}){T(this,Dd,t-1)}focusMainContainer(){u(this,hr).focus()}findParent(t,e){for(const n of u(this,Je).values()){const{x:s,y:a,width:l,height:d}=n.div.getBoundingClientRect();if(t>=s&&t<=s+l&&e>=a&&e<=a+d)return n}return null}disableUserSelect(t=!1){u(this,qp).classList.toggle("noUserSelect",t)}addShouldRescale(t){u(this,sc).add(t)}removeShouldRescale(t){u(this,sc).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*_l.PDF_TO_CSS_UNITS;for(const n of u(this,sc))n.onScaleChanging();(e=u(this,La))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:a,focusNode:l,focusOffset:d}=n,h=n.toString(),m=N(this,rt,f0).call(this,n).closest(".textLayer"),v=this.getSelectionBoxes(m);if(!v)return;n.empty();const A=N(this,rt,nE).call(this,m),E=u(this,nn)===Dt.NONE,_=()=>{const C=A==null?void 0:A.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:v,anchorNode:s,anchorOffset:a,focusNode:l,focusOffset:d,text:h});E&&this.showAllEditors("highlight",!0,!0),e&&(C==null||C.editComment())};if(E){this.switchToMode(Dt.HIGHLIGHT,_);return}_()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!u(this,vs))return null;const e=`${Cp}${t}`,n=u(this,vs).getRawValue(e);return n&&u(this,vs).remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&u(this,vs)&&!u(this,vs).has(t.id)&&u(this,vs).setValue(t.id,t)}a11yAlert(t,e=null){const n=u(this,Yp);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,u(this,Oa)&&(T(this,Oa,!1),N(this,rt,op).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of u(this,le))if(e.div.contains(t)){T(this,oc,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!u(this,oc))return;const[t,e]=u(this,oc);T(this,oc,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){N(this,rt,iE).call(this),this.setEditingState(!0)}removeEditListeners(){N(this,rt,HN).call(this),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of u(this,Ss))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of u(this,Ss))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=u(this,ki))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of u(this,le)){const a=s.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const l of u(this,Ss))if(l.isHandlingMimeForPasting(a.type)){l.paste(a,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){xt(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const a=[];for(const h of n){const f=await s.deserialize(h);if(!f)return;a.push(f)}const l=()=>{for(const h of a)N(this,rt,sE).call(this,h);N(this,rt,oE).call(this,a)},d=()=>{for(const h of a)h.remove()};this.addCommands({cmd:l,undo:d,mustExec:!0})}catch(a){xt(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,nn)!==Dt.NONE&&!this.isEditorHandlingKeyboard&&md._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,Oa)&&(T(this,Oa,!1),N(this,rt,op).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(N(this,rt,BN).call(this),N(this,rt,GN).call(this),N(this,rt,Jn).call(this,{isEditing:u(this,nn)!==Dt.NONE,isEmpty:N(this,rt,rp).call(this),hasSomethingToUndo:u(this,As).hasSomethingToUndo(),hasSomethingToRedo:u(this,As).hasSomethingToRedo(),hasSelectedEditor:!1})):(N(this,rt,FN).call(this),N(this,rt,zN).call(this),N(this,rt,Jn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!u(this,Ss)){T(this,Ss,t);for(const e of u(this,Ss))N(this,rt,or).call(this,e.defaultPropertiesToUpdate)}}getId(){return u(this,mv).id}get currentLayer(){return u(this,Je).get(u(this,Dd))}getLayer(t){return u(this,Je).get(t)}get currentPageIndex(){return u(this,Dd)}addLayer(t){u(this,Je).set(t.pageIndex,t),u(this,Ba)?t.enable():t.disable()}removeLayer(t){u(this,Je).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,s=!1,a=!1,l=!1){var d,h,f,m,v,A;if(u(this,nn)!==t&&!(u(this,bs)&&(await u(this,bs).promise,!u(this,bs)))){if(T(this,bs,Promise.withResolvers()),(d=u(this,La))==null||d.commitOrRemove(),u(this,nn)===Dt.POPUP&&((h=u(this,zn))==null||h.hideSidebar()),(f=u(this,zn))==null||f.destroyPopup(),T(this,nn,t),t===Dt.NONE){this.setEditingState(!1),N(this,rt,YN).call(this);for(const E of u(this,Pe).values())E.hideStandaloneCommentButton();(m=this._editorUndoBar)==null||m.hide(),this.toggleComment(null),u(this,bs).resolve();return}for(const E of u(this,Pe).values())E.addStandaloneCommentButton();t===Dt.SIGNATURE&&await((v=u(this,Ga))==null?void 0:v.loadSignatures()),n&&Hn.clearPointerType(),this.setEditingState(!0),await N(this,rt,qN).call(this),this.unselectAll();for(const E of u(this,Je).values())E.updateMode(t);if(t===Dt.POPUP){u(this,Rd)||T(this,Rd,await u(this,Od).getAnnotationsByType(new Set(u(this,Ss).map(C=>C._editorType))));const E=new Set,_=[];for(const C of u(this,Pe).values()){const{annotationElementId:M,hasComment:R,deleted:L}=C;M&&E.add(M),R&&!L&&_.push(C.getData())}for(const C of u(this,Rd)){const{id:M,popupRef:R,contentsObj:L}=C;R&&(L!=null&&L.str)&&!E.has(M)&&!u(this,Pa).has(M)&&_.push(C)}(A=u(this,zn))==null||A.showSidebar(_)}if(!e){s&&this.addNewEditorFromKeyboard(),u(this,bs).resolve();return}for(const E of u(this,Pe).values())E.uid===e?(this.setSelected(E),l?E.editComment():a?E.enterInEditMode():E.focus()):E.unselect();u(this,bs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==u(this,nn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(u(this,Ss)){switch(t){case Yt.CREATE:this.currentLayer.addNewEditor(e);return;case Yt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,zp)||T(this,zp,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of u(this,le))n.updateParams(t,e);else for(const n of u(this,Ss))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var a;for(const l of u(this,Pe).values())l.editorType===t&&l.show(e);(((a=u(this,zp))==null?void 0:a.get(Yt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&N(this,rt,or).call(this,[[Yt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(u(this,Hp)!==t){T(this,Hp,t);for(const e of u(this,Je).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of u(this,Pe).values())e.pageIndex===t&&(yield e)}getEditor(t){return u(this,Pe).get(t)}addEditor(t){u(this,Pe).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(u(this,fo)&&clearTimeout(u(this,fo)),T(this,fo,setTimeout(()=>{this.focusMainContainer(),T(this,fo,null)},0))),u(this,Pe).delete(t.id),t.annotationElementId&&((e=u(this,Ha))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!u(this,Pa).has(t.annotationElementId))&&((n=u(this,vs))==null||n.remove(t.id))}addDeletedAnnotationElement(t){u(this,Pa).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return u(this,Pa).has(t)}removeDeletedAnnotationElement(t){u(this,Pa).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){u(this,ki)!==t&&(T(this,ki,t),t&&N(this,rt,or).call(this,t.propertiesToUpdate))}updateUI(t){u(this,rt,$N)===t&&N(this,rt,or).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){N(this,rt,or).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(u(this,le).has(t)){u(this,le).delete(t),t.unselect(),N(this,rt,Jn).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,le).add(t),t.select(),N(this,rt,or).call(this,t.propertiesToUpdate),N(this,rt,Jn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.uid}),(e=u(this,La))==null||e.commitOrRemove();for(const n of u(this,le))n!==t&&n.unselect();u(this,le).clear(),u(this,le).add(t),t.select(),N(this,rt,or).call(this,t.propertiesToUpdate),N(this,rt,Jn).call(this,{hasSelectedEditor:!0})}isSelected(t){return u(this,le).has(t)}get firstSelectedEditor(){return u(this,le).values().next().value}unselect(t){t.unselect(),u(this,le).delete(t),N(this,rt,Jn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,le).size!==0}get isEnterHandled(){return u(this,le).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;u(this,As).undo(),N(this,rt,Jn).call(this,{hasSomethingToUndo:u(this,As).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:N(this,rt,rp).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){u(this,As).redo(),N(this,rt,Jn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,As).hasSomethingToRedo(),isEmpty:N(this,rt,rp).call(this)})}addCommands(t){u(this,As).add(t),N(this,rt,Jn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:N(this,rt,rp).call(this)})}cleanUndoStack(t){u(this,As).cleanType(t)}delete(){var a;this.commitOrRemove();const t=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...u(this,le)],n=()=>{var l;(l=this._editorUndoBar)==null||l.show(s,e.length===1?e[0].editorType:e.length);for(const d of e)d.remove()},s=()=>{for(const l of e)N(this,rt,sE).call(this,l)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=u(this,ki))==null||t.commitOrRemove()}hasSomethingToControl(){return u(this,ki)||this.hasSelection}selectAll(){for(const t of u(this,le))t.commit();N(this,rt,oE).call(this,u(this,Pe).values())}unselectAll(){var t;if(!(u(this,ki)&&(u(this,ki).commitOrRemove(),u(this,nn)!==Dt.NONE))&&!((t=u(this,La))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of u(this,le))e.unselect();u(this,le).clear(),N(this,rt,Jn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;u(this,Va)[0]+=t,u(this,Va)[1]+=e;const[s,a]=u(this,Va),l=[...u(this,le)],d=1e3;u(this,mo)&&clearTimeout(u(this,mo)),T(this,mo,setTimeout(()=>{T(this,mo,null),u(this,Va)[0]=u(this,Va)[1]=0,this.addCommands({cmd:()=>{for(const h of l)u(this,Pe).has(h.id)&&(h.translateInPage(s,a),h.translationDone())},undo:()=>{for(const h of l)u(this,Pe).has(h.id)&&(h.translateInPage(-s,-a),h.translationDone())},mustExec:!1})},d));for(const h of l)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),T(this,ho,new Map);for(const t of u(this,le))u(this,ho).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,ho))return!1;this.disableUserSelect(!1);const t=u(this,ho);T(this,ho,null);let e=!1;for(const[{x:s,y:a,pageIndex:l},d]of t)d.newX=s,d.newY=a,d.newPageIndex=l,e||(e=s!==d.savedX||a!==d.savedY||l!==d.savedPageIndex);if(!e)return!1;const n=(s,a,l,d)=>{if(u(this,Pe).has(s.id)){const h=u(this,Je).get(d);h?s._setParentAndPosition(h,a,l):(s.pageIndex=d,s.x=a,s.y=l)}};return this.addCommands({cmd:()=>{for(const[s,{newX:a,newY:l,newPageIndex:d}]of t)n(s,a,l,d)},undo:()=>{for(const[s,{savedX:a,savedY:l,savedPageIndex:d}]of t)n(s,a,l,d)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(u(this,ho))for(const n of u(this,ho).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||u(this,le).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return u(this,ki)===t}getActive(){return u(this,ki)}getMode(){return u(this,nn)}isEditingMode(){return u(this,nn)!==Dt.NONE}get imageManager(){return Mt(this,"imageManager",new tE)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,m=e.rangeCount;f<m;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:s,width:a,height:l}=t.getBoundingClientRect();let d;switch(t.getAttribute("data-main-rotation")){case"90":d=(f,m,v,A)=>({x:(m-s)/l,y:1-(f+v-n)/a,width:A/l,height:v/a});break;case"180":d=(f,m,v,A)=>({x:1-(f+v-n)/a,y:1-(m+A-s)/l,width:v/a,height:A/l});break;case"270":d=(f,m,v,A)=>({x:1-(m+A-s)/l,y:(f-n)/a,width:A/l,height:v/a});break;default:d=(f,m,v,A)=>({x:(f-n)/a,y:(m-s)/l,width:v/a,height:A/l});break}const h=[];for(let f=0,m=e.rangeCount;f<m;f++){const v=e.getRangeAt(f);if(!v.collapsed)for(const{x:A,y:E,width:_,height:C}of v.getClientRects())_===0||C===0||h.push(d(A,E,_,C))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(u(this,Id)||T(this,Id,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=u(this,Id))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=u(this,Id))==null?void 0:s.get(t.data.id);if(!e)return;const n=u(this,vs).getRawValue(e);n&&(u(this,nn)===Dt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var a;const s=(a=u(this,Ha))==null?void 0:a.get(t);s&&(s.setCanvas(e,n),u(this,Ha).delete(t))}addMissingCanvas(t,e){(u(this,Ha)||T(this,Ha,new Map)).set(t,e)}};Md=new WeakMap,ki=new WeakMap,Rd=new WeakMap,Pe=new WeakMap,Je=new WeakMap,Nd=new WeakMap,vs=new WeakMap,Id=new WeakMap,As=new WeakMap,zn=new WeakMap,ka=new WeakMap,La=new WeakMap,Dd=new WeakMap,Pa=new WeakMap,ho=new WeakMap,Ss=new WeakMap,sc=new WeakMap,Op=new WeakMap,Bp=new WeakMap,kd=new WeakMap,Fp=new WeakMap,fo=new WeakMap,Ua=new WeakMap,Ld=new WeakMap,Oa=new WeakMap,po=new WeakMap,mv=new WeakMap,Ba=new WeakMap,Pd=new WeakMap,Hp=new WeakMap,Fa=new WeakMap,oc=new WeakMap,Ud=new WeakMap,Ha=new WeakMap,Gp=new WeakMap,nn=new WeakMap,le=new WeakMap,dr=new WeakMap,Ga=new WeakMap,za=new WeakMap,zp=new WeakMap,Od=new WeakMap,Vp=new WeakMap,Va=new WeakMap,mo=new WeakMap,hr=new WeakMap,qp=new WeakMap,Yp=new WeakMap,bs=new WeakMap,rt=new WeakSet,f0=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},nE=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of u(this,Je).values())if(n.hasTextLayer(t))return n;return null},PN=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=N(this,rt,f0).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(u(this,po)||T(this,po,new P4(this)),u(this,po).show(n,s,this.direction==="ltr"))},UN=function(){var a,l,d;const t=document.getSelection();if(!t||t.isCollapsed){u(this,dr)&&((a=u(this,po))==null||a.hide(),T(this,dr,null),N(this,rt,Jn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===u(this,dr))return;const s=N(this,rt,f0).call(this,t).closest(".textLayer");if(!s){u(this,dr)&&((l=u(this,po))==null||l.hide(),T(this,dr,null),N(this,rt,Jn).call(this,{hasSelectedText:!1}));return}if((d=u(this,po))==null||d.hide(),T(this,dr,e),N(this,rt,Jn).call(this,{hasSelectedText:!0}),!(u(this,nn)!==Dt.HIGHLIGHT&&u(this,nn)!==Dt.NONE)&&(u(this,nn)===Dt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),T(this,Oa,this.isShiftKeyDown),!this.isShiftKeyDown)){const h=u(this,nn)===Dt.HIGHLIGHT?N(this,rt,nE).call(this,s):null;if(h==null||h.toggleDrawing(),u(this,Pd)){const f=new AbortController,m=this.combinedSignal(f),v=A=>{A.type==="pointerup"&&A.button!==0||(f.abort(),h==null||h.toggleDrawing(!0),A.type==="pointerup"&&N(this,rt,op).call(this,"main_toolbar"))};window.addEventListener("pointerup",v,{signal:m}),window.addEventListener("blur",v,{signal:m})}else h==null||h.toggleDrawing(!0),N(this,rt,op).call(this,"main_toolbar")}},op=function(t=""){u(this,nn)===Dt.HIGHLIGHT?this.highlightSelection(t):u(this,Op)&&N(this,rt,PN).call(this)},ON=function(){document.addEventListener("selectionchange",N(this,rt,UN).bind(this),{signal:this._signal})},BN=function(){if(u(this,Ua))return;T(this,Ua,new AbortController);const t=this.combinedSignal(u(this,Ua));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},FN=function(){var t;(t=u(this,Ua))==null||t.abort(),T(this,Ua,null)},iE=function(){if(u(this,Fa))return;T(this,Fa,new AbortController);const t=this.combinedSignal(u(this,Fa));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},HN=function(){var t;(t=u(this,Fa))==null||t.abort(),T(this,Fa,null)},GN=function(){if(u(this,ka))return;T(this,ka,new AbortController);const t=this.combinedSignal(u(this,ka));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},zN=function(){var t;(t=u(this,ka))==null||t.abort(),T(this,ka,null)},VN=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Jn=function(t){Object.entries(t).some(([n,s])=>u(this,Vp)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,Vp),t)}),u(this,nn)===Dt.HIGHLIGHT&&t.hasSelectedEditor===!1&&N(this,rt,or).call(this,[[Yt.HIGHLIGHT_FREE,!0]]))},or=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},qN=async function(){if(!u(this,Ba)){T(this,Ba,!0);const t=[];for(const e of u(this,Je).values())t.push(e.enable());await Promise.all(t);for(const e of u(this,Pe).values())e.enable()}},YN=function(){if(this.unselectAll(),u(this,Ba)){T(this,Ba,!1);for(const t of u(this,Je).values())t.disable();for(const t of u(this,Pe).values())t.disable()}},sE=function(t){const e=u(this,Je).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},$N=function(){let t=null;for(t of u(this,le));return t},rp=function(){if(u(this,Pe).size===0)return!0;if(u(this,Pe).size===1)for(const t of u(this,Pe).values())return t.isEmpty();return!1},oE=function(t){for(const e of u(this,le))e.unselect();u(this,le).clear();for(const e of t)e.isEmpty()||(u(this,le).add(e),e.select());N(this,rt,Jn).call(this,{hasSelectedEditor:this.hasSelection})},W(md,"TRANSLATE_SMALL",1),W(md,"TRANSLATE_BIG",10);let hu=md;var mn,go,zs,Bd,yo,Li,Fd,vo,fi,fr,rc,Ao,qa,js,ap,p0;const Kn=class Kn{constructor(t){x(this,js);x(this,mn,null);x(this,go,!1);x(this,zs,null);x(this,Bd,null);x(this,yo,null);x(this,Li,null);x(this,Fd,!1);x(this,vo,null);x(this,fi,null);x(this,fr,null);x(this,rc,null);x(this,Ao,!1);T(this,fi,t),T(this,Ao,t._uiManager.useNewAltTextFlow),u(Kn,qa)||T(Kn,qa,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Kn._l10n??(Kn._l10n=t)}async render(){const t=T(this,zs,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=T(this,Bd,document.createElement("span"));t.append(e),u(this,Ao)?(t.classList.add("new"),t.setAttribute("data-l10n-id",u(Kn,qa).missing),e.setAttribute("data-l10n-id",u(Kn,qa)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=u(this,fi)._uiManager._signal;t.addEventListener("contextmenu",Ls,{signal:n}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const s=a=>{a.preventDefault(),u(this,fi)._uiManager.editAltText(u(this,fi)),u(this,Ao)&&u(this,fi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,js,ap)}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(T(this,Fd,!0),s(a))},{signal:n}),await N(this,js,p0).call(this),t}finish(){u(this,zs)&&(u(this,zs).focus({focusVisible:u(this,Fd)}),T(this,Fd,!1))}isEmpty(){return u(this,Ao)?u(this,mn)===null:!u(this,mn)&&!u(this,go)}hasData(){return u(this,Ao)?u(this,mn)!==null||!!u(this,fr):this.isEmpty()}get guessedText(){return u(this,fr)}async setGuessedText(t){u(this,mn)===null&&(T(this,fr,t),T(this,rc,await Kn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),N(this,js,p0).call(this))}toggleAltTextBadge(t=!1){var e;if(!u(this,Ao)||u(this,mn)){(e=u(this,vo))==null||e.remove(),T(this,vo,null);return}if(!u(this,vo)){const n=T(this,vo,document.createElement("div"));n.className="noAltTextBadge",u(this,fi).div.append(n)}u(this,vo).classList.toggle("hidden",!t)}serialize(t){let e=u(this,mn);return!t&&u(this,fr)===e&&(e=u(this,rc)),{altText:e,decorative:u(this,go),guessedText:u(this,fr),textWithDisclaimer:u(this,rc)}}get data(){return{altText:u(this,mn),decorative:u(this,go)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:a=!1}){n&&(T(this,fr,n),T(this,rc,s)),!(u(this,mn)===t&&u(this,go)===e)&&(a||(T(this,mn,t),T(this,go,e)),N(this,js,p0).call(this))}toggle(t=!1){u(this,zs)&&(!t&&u(this,Li)&&(clearTimeout(u(this,Li)),T(this,Li,null)),u(this,zs).disabled=!t)}shown(){u(this,fi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,js,ap)}})}destroy(){var t,e;(t=u(this,zs))==null||t.remove(),T(this,zs,null),T(this,Bd,null),T(this,yo,null),(e=u(this,vo))==null||e.remove(),T(this,vo,null)}};mn=new WeakMap,go=new WeakMap,zs=new WeakMap,Bd=new WeakMap,yo=new WeakMap,Li=new WeakMap,Fd=new WeakMap,vo=new WeakMap,fi=new WeakMap,fr=new WeakMap,rc=new WeakMap,Ao=new WeakMap,qa=new WeakMap,js=new WeakSet,ap=function(){return u(this,mn)&&"added"||u(this,mn)===null&&this.guessedText&&"review"||"missing"},p0=async function(){var s,a,l;const t=u(this,zs);if(!t)return;if(u(this,Ao)){if(t.classList.toggle("done",!!u(this,mn)),t.setAttribute("data-l10n-id",u(Kn,qa)[u(this,js,ap)]),(s=u(this,Bd))==null||s.setAttribute("data-l10n-id",u(Kn,qa)[`${u(this,js,ap)}-label`]),!u(this,mn)){(a=u(this,yo))==null||a.remove();return}}else{if(!u(this,mn)&&!u(this,go)){t.classList.remove("done"),(l=u(this,yo))==null||l.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=u(this,yo);if(!e){T(this,yo,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${u(this,fi).id}`;const d=100,h=u(this,fi)._uiManager._signal;h.addEventListener("abort",()=>{clearTimeout(u(this,Li)),T(this,Li,null)},{once:!0}),t.addEventListener("mouseenter",()=>{T(this,Li,setTimeout(()=>{T(this,Li,null),u(this,yo).classList.add("show"),u(this,fi)._reportTelemetry({action:"alt_text_tooltip"})},d))},{signal:h}),t.addEventListener("mouseleave",()=>{var f;u(this,Li)&&(clearTimeout(u(this,Li)),T(this,Li,null)),(f=u(this,yo))==null||f.classList.remove("show")},{signal:h})}u(this,go)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=u(this,mn)),e.parentNode||t.append(e);const n=u(this,fi).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},x(Kn,qa,null),W(Kn,"_l10n",null);let tv=Kn;var Rn,Es,ac,_e,$p,Ya,Ts,$a,Xa,lc,Xp,rE;class jy{constructor(t){x(this,Xp);x(this,Rn,null);x(this,Es,null);x(this,ac,!1);x(this,_e,null);x(this,$p,null);x(this,Ya,null);x(this,Ts,null);x(this,$a,null);x(this,Xa,!1);x(this,lc,null);T(this,_e,t)}renderForToolbar(){const t=T(this,Es,document.createElement("button"));return t.className="comment",N(this,Xp,rE).call(this,t,!1)}renderForStandalone(){const t=T(this,Rn,document.createElement("button"));t.className="annotationCommentButton";const e=u(this,_e).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(u(this,_e)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const s=u(this,_e).commentButtonColor;s&&(n.backgroundColor=s)}return N(this,Xp,rE).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=u(this,Rn)??u(this,Es))==null||t.focus()},0)}onUpdatedColor(){if(!u(this,Rn))return;const t=u(this,_e).commentButtonColor;t&&(u(this,Rn).style.backgroundColor=t),u(this,_e)._uiManager.updatePopupColor(u(this,_e))}get commentButtonWidth(){var t;return(((t=u(this,Rn))==null?void 0:t.getBoundingClientRect().width)??0)/u(this,_e).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(u(this,lc))return u(this,lc);if(!u(this,Rn))return null;const{x:t,y:e,height:n}=u(this,Rn).getBoundingClientRect(),{x:s,y:a,width:l,height:d}=u(this,_e).parent.boundingClientRect;return[(t-s)/l,(e+n-a)/d]}set commentPopupPositionInLayer(t){T(this,lc,t)}hasDefaultPopupPosition(){return u(this,lc)===null}removeStandaloneCommentButton(){var t;(t=u(this,Rn))==null||t.remove(),T(this,Rn,null)}removeToolbarCommentButton(){var t;(t=u(this,Es))==null||t.remove(),T(this,Es,null)}setCommentButtonStates({selected:t,hasPopup:e}){u(this,Rn)&&(u(this,Rn).classList.toggle("selected",t),u(this,Rn).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,s;if(e)[n,s]=e;else{[n,s]=u(this,_e).commentButtonPosition;const{width:m,height:v,x:A,y:E}=u(this,_e);n=A+n*m,s=E+s*v}const a=u(this,_e).parent.boundingClientRect,{x:l,y:d,width:h,height:f}=a;u(this,_e)._uiManager.editComment(u(this,_e),l+n*h,d+s*f,{...t,parentDimensions:a})}finish(){u(this,Es)&&(u(this,Es).focus({focusVisible:u(this,ac)}),T(this,ac,!1))}isDeleted(){return u(this,Xa)||u(this,Ts)===""}isEmpty(){return u(this,Ts)===null}hasBeenEdited(){return this.isDeleted()||u(this,Ts)!==u(this,$p)}serialize(){return this.data}get data(){return{text:u(this,Ts),richText:u(this,Ya),date:u(this,$a),deleted:this.isDeleted()}}set data(t){if(t!==u(this,Ts)&&T(this,Ya,null),t===null){T(this,Ts,""),T(this,Xa,!0);return}T(this,Ts,t),T(this,$a,new Date),T(this,Xa,!1)}restoreData({text:t,richText:e,date:n}){T(this,Ts,t),T(this,Ya,e),T(this,$a,n),T(this,Xa,!1)}setInitialText(t,e=null){T(this,$p,t),this.data=t,T(this,$a,null),T(this,Ya,e)}shown(){}destroy(){var t,e;(t=u(this,Es))==null||t.remove(),T(this,Es,null),(e=u(this,Rn))==null||e.remove(),T(this,Rn,null),T(this,Ts,""),T(this,Ya,null),T(this,$a,null),T(this,_e,null),T(this,ac,!1),T(this,Xa,!1)}}Rn=new WeakMap,Es=new WeakMap,ac=new WeakMap,_e=new WeakMap,$p=new WeakMap,Ya=new WeakMap,Ts=new WeakMap,$a=new WeakMap,Xa=new WeakMap,lc=new WeakMap,Xp=new WeakSet,rE=function(t,e){if(!u(this,_e)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[u(this,_e)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=u(this,_e)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",Ls,{signal:n}),e&&(t.addEventListener("focusin",a=>{u(this,_e)._focusEventsAllowed=!1,qe(a)},{capture:!0,signal:n}),t.addEventListener("focusout",a=>{u(this,_e)._focusEventsAllowed=!0,qe(a)},{capture:!0,signal:n})),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const s=a=>{a.preventDefault(),t===u(this,Es)?this.edit():u(this,_e).toggleComment(!0)};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(T(this,ac,!0),s(a))},{signal:n}),t.addEventListener("pointerenter",()=>{u(this,_e).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{u(this,_e).toggleComment(!1,!1)},{signal:n}),t};var Hd,cc,Jp,Kp,Wp,Qp,Zp,pr,uc,mr,dc,gr,Cl,XN,JN,KN;const YT=class YT{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:a=null,onPinchEnd:l=null,signal:d}){x(this,Cl);x(this,Hd);x(this,cc,!1);x(this,Jp,null);x(this,Kp);x(this,Wp);x(this,Qp);x(this,Zp);x(this,pr,null);x(this,uc);x(this,mr,null);x(this,dc);x(this,gr,null);T(this,Hd,t),T(this,Jp,n),T(this,Kp,e),T(this,Wp,s),T(this,Qp,a),T(this,Zp,l),T(this,dc,new AbortController),T(this,uc,AbortSignal.any([d,u(this,dc).signal])),t.addEventListener("touchstart",N(this,Cl,XN).bind(this),{passive:!1,signal:u(this,uc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Po.pixelRatio}destroy(){var t,e;(t=u(this,dc))==null||t.abort(),T(this,dc,null),(e=u(this,pr))==null||e.abort(),T(this,pr,null)}};Hd=new WeakMap,cc=new WeakMap,Jp=new WeakMap,Kp=new WeakMap,Wp=new WeakMap,Qp=new WeakMap,Zp=new WeakMap,pr=new WeakMap,uc=new WeakMap,mr=new WeakMap,dc=new WeakMap,gr=new WeakMap,Cl=new WeakSet,XN=function(t){var s,a,l;if((s=u(this,Kp))!=null&&s.call(this))return;if(t.touches.length===1){if(u(this,pr))return;const d=T(this,pr,new AbortController),h=AbortSignal.any([u(this,uc),d.signal]),f=u(this,Hd),m={capture:!0,signal:h,passive:!1},v=A=>{var E;A.pointerType==="touch"&&((E=u(this,pr))==null||E.abort(),T(this,pr,null))};f.addEventListener("pointerdown",A=>{A.pointerType==="touch"&&(qe(A),v(A))},m),f.addEventListener("pointerup",v,m),f.addEventListener("pointercancel",v,m);return}if(!u(this,gr)){T(this,gr,new AbortController);const d=AbortSignal.any([u(this,uc),u(this,gr).signal]),h=u(this,Hd),f={signal:d,capture:!1,passive:!1};h.addEventListener("touchmove",N(this,Cl,JN).bind(this),f);const m=N(this,Cl,KN).bind(this);h.addEventListener("touchend",m,f),h.addEventListener("touchcancel",m,f),f.capture=!0,h.addEventListener("pointerdown",qe,f),h.addEventListener("pointermove",qe,f),h.addEventListener("pointercancel",qe,f),h.addEventListener("pointerup",qe,f),(a=u(this,Wp))==null||a.call(this)}if(qe(t),t.touches.length!==2||(l=u(this,Jp))!=null&&l.call(this)){T(this,mr,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),T(this,mr,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},JN=function(t){var U;if(!u(this,mr)||t.touches.length!==2)return;qe(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:s,screenY:a}=e,{screenX:l,screenY:d}=n,h=u(this,mr),{touch0X:f,touch0Y:m,touch1X:v,touch1Y:A}=h,E=v-f,_=A-m,C=l-s,M=d-a,R=Math.hypot(C,M)||1,L=Math.hypot(E,_)||1;if(!u(this,cc)&&Math.abs(L-R)<=YT.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=s,h.touch0Y=a,h.touch1X=l,h.touch1Y=d,!u(this,cc)){T(this,cc,!0);return}const I=[(s+l)/2,(a+d)/2];(U=u(this,Qp))==null||U.call(this,I,L,R)},KN=function(t){var e;t.touches.length>=2||(u(this,gr)&&(u(this,gr).abort(),T(this,gr,null),(e=u(this,Zp))==null||e.call(this)),u(this,mr)&&(qe(t),T(this,mr,null),T(this,cc,!1)))};let ev=YT;var hc,Vs,De,ce,yr,Gd,Ja,jp,Nn,fc,vr,_s,Ka,tm,pc,Pi,em,mc,Ar,So,zd,Vd,Cs,gc,nm,gv,_t,aE,im,lE,m0,WN,QN,cE,g0,uE,ZN,jN,tI,dE,eI,hE,nI,iI,sI,fE,lp;const It=class It{constructor(t){x(this,_t);x(this,hc,null);x(this,Vs,null);x(this,De,null);x(this,ce,null);x(this,yr,null);x(this,Gd,!1);x(this,Ja,null);x(this,jp,"");x(this,Nn,null);x(this,fc,null);x(this,vr,null);x(this,_s,null);x(this,Ka,null);x(this,tm,"");x(this,pc,!1);x(this,Pi,null);x(this,em,!1);x(this,mc,!1);x(this,Ar,!1);x(this,So,null);x(this,zd,0);x(this,Vd,0);x(this,Cs,null);x(this,gc,null);W(this,"isSelected",!1);W(this,"_isCopy",!1);W(this,"_editToolbar",null);W(this,"_initialOptions",Object.create(null));W(this,"_initialData",null);W(this,"_isVisible",!0);W(this,"_uiManager",null);W(this,"_focusEventsAllowed",!0);x(this,nm,!1);x(this,gv,It._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[a,l];const[d,h]=this.parentDimensions;this.x=t.x/d,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=It.prototype._resizeWithKeyboard,e=hu.TRANSLATE_SMALL,n=hu.TRANSLATE_BIG;return Mt(this,"_resizerKeyboardManager",new Rg([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],It.prototype._stopResizingWithKeyboard]]))}updatePageIndex(t){this.pageIndex=t}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Mt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new B4({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(It._l10n??(It._l10n=t),It._l10nResizer||(It._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),It._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);It._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){se("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,nm)}set _isDraggable(t){var e;T(this,nm,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,gv)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(N(this,_t,lp).call(this),(e=u(this,_s))==null||e.remove(),T(this,_s,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(u(this,pc)?T(this,pc,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[a,l]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/a,this.y=(e+s)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,s]=this.parentDimensions;this.setAt(t*n,e*s,this.width*n,this.height*s),this._onTranslated()}translate(t,e){N(this,_t,aE).call(this,this.parentDimensions,t,e)}translateInPage(t,e){u(this,Pi)||T(this,Pi,[this.x,this.y,this.width,this.height]),N(this,_t,aE).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){u(this,Pi)||T(this,Pi,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[s,a]}=this;if(this.x+=t/s,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:v,y:A}=this.div.getBoundingClientRect();this.parent.findNewParent(this,v,A)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:d}=this;const[h,f]=this.getBaseTranslation();l+=h,d+=f;const{style:m}=n;m.left=`${(100*l).toFixed(2)}%`,m.top=`${(100*d).toFixed(2)}%`,this._onTranslating(l,d),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!u(this,Pi)&&(u(this,Pi)[0]!==this.x||u(this,Pi)[1]!==this.y)}get _hasBeenResized(){return!!u(this,Pi)&&(u(this,Pi)[2]!==this.width||u(this,Pi)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=It,s=n/t,a=n/e;switch(this.rotation){case 90:return[-s,a];case 180:return[s,a];case 270:return[s,-a];default:return[-s,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,s]}=this;let{x:a,y:l,width:d,height:h}=this;if(d*=n,h*=s,a*=n,l*=s,this._mustFixPosition)switch(t){case 0:a=Ln(a,0,n-d),l=Ln(l,0,s-h);break;case 90:a=Ln(a,0,n-h),l=Ln(l,d,s);break;case 180:a=Ln(a,d,n),l=Ln(l,h,s);break;case 270:a=Ln(a,h,n),l=Ln(l,0,s-d);break}this.x=a/=n,this.y=l/=s;const[f,m]=this.getBaseTranslation();a+=f,l+=m,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return N(n=It,im,lE).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return N(n=It,im,lE).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=u(this,De))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||u(this,mc))return this._editToolbar;this._editToolbar=new Zb(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=u(this,De))==null||e.destroy()}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return u(this,De)||(tv.initialize(It._l10n),T(this,De,new tv(this)),u(this,hc)&&(u(this,De).data=u(this,hc),T(this,hc,null))),u(this,De)}get altTextData(){var t;return(t=u(this,De))==null?void 0:t.data}set altTextData(t){u(this,De)&&(u(this,De).data=t)}get guessedAltText(){var t;return(t=u(this,De))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=u(this,De))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=u(this,De))==null?void 0:e.serialize(t)}hasAltText(){return!!u(this,De)&&!u(this,De).isEmpty()}hasAltTextData(){var t;return((t=u(this,De))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=u(this,ce))==null||t.focusButton()}addCommentButton(){return this.canAddComment?u(this,ce)||T(this,ce,new jy(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(u(this,yr)){this._uiManager.isEditingMode()&&u(this,yr).classList.remove("hidden");return}this.hasComment&&(T(this,yr,u(this,ce).renderForStandalone()),this.div.append(u(this,yr)))}}removeStandaloneCommentButton(){u(this,ce).removeStandaloneCommentButton(),T(this,yr,null)}hideStandaloneCommentButton(){var t;(t=u(this,yr))==null||t.classList.add("hidden")}get comment(){if(!u(this,ce))return null;const{data:{richText:t,text:e,date:n,deleted:s}}=u(this,ce);return{text:e,richText:t,date:n,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){u(this,ce)||T(this,ce,new jy(this)),typeof t=="object"&&t!==null?u(this,ce).restoreData(t):u(this,ce).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(u(this,ce)||T(this,ce,new jy(this)),u(this,ce).setInitialText(t,n),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var t;return(t=u(this,ce))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=u(this,ce))==null?void 0:t.isDeleted()}get hasComment(){return!!u(this,ce)&&!u(this,ce).isEmpty()&&!u(this,ce).isDeleted()}async editComment(t){u(this,ce)||T(this,ce,new jy(this)),u(this,ce).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){u(this,ce).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,s]=t.rect,[a]=this.pageDimensions,[l]=this.pageTranslation,d=l+a+1,h=s-100,f=d+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[d,h,f,s]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){u(this,ce).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var l;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=u(this,Gd)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),N(this,_t,hE).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[s,a]=this.getInitialTranslation();return this.translate(s,a),kN(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,gc)||T(this,gc,new ev({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:N(this,_t,ZN).bind(this),onPinching:N(this,_t,jN).bind(this),onPinchEnd:N(this,_t,tI).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(l=this._uiManager._editorUndoBar)==null||l.hide(),t}pointerdown(t){const{isMac:e}=hn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(T(this,pc,!0),this._isDraggable){N(this,_t,eI).call(this,t);return}N(this,_t,dE).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,So)&&clearTimeout(u(this,So)),T(this,So,setTimeout(()=>{var t;T(this,So,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const s=this.parentScale,[a,l]=this.pageDimensions,[d,h]=this.pageTranslation,f=t/s,m=e/s,v=this.x*a,A=this.y*l,E=this.width*a,_=this.height*l;switch(n){case 0:return[v+f+d,l-A-m-_+h,v+f+E+d,l-A-m+h];case 90:return[v+m+d,l-A+f+h,v+m+_+d,l-A+f+E+h];case 180:return[v-f-E+d,l-A+m+h,v-f+d,l-A+m+_+h];case 270:return[v-m-_+d,l-A-f-E+h,v-m+d,l-A-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,a,l]=t,d=a-n,h=l-s;switch(this.rotation){case 0:return[n,e-l,d,h];case 90:return[n,e-s,h,d];case 180:return[a,e-s,d,h];case 270:return[a,e-l,h,d];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&It._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=u(this,ce))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:s,deleted:a,richText:l},uid:d,pageIndex:h,creationDate:f,modificationDate:m}=this;return{id:d,pageIndex:h,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:n||m,popupRef:!a,color:e,opacity:s}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),T(this,mc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),T(this,mc,!1),!0):!1}isInEditMode(){return u(this,mc)}shouldGetKeyboardEvents(){return u(this,Ar)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:a,innerWidth:l}=window;return e<l&&s>0&&t<a&&n>0}rebuild(){N(this,_t,hE).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});s.rotation=t.rotation,T(s,hc,t.accessibilityData),s._isCopy=t.isCopy||!1;const[a,l]=s.pageDimensions,[d,h,f,m]=s.getRectInCurrentCoords(t.rect,l);return s.x=d/a,s.y=h/l,s.width=f/a,s.height=m/l,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e,n;if((t=u(this,Ka))==null||t.abort(),T(this,Ka,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),u(this,So)&&(clearTimeout(u(this,So)),T(this,So,null)),N(this,_t,lp).call(this),this.removeEditToolbar(),u(this,Cs)){for(const s of u(this,Cs).values())clearTimeout(s);T(this,Cs,null)}this.parent=null,(e=u(this,gc))==null||e.destroy(),T(this,gc,null),(n=u(this,_s))==null||n.remove(),T(this,_s,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(N(this,_t,WN).call(this),u(this,Nn).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,s,a,l]=this.getPDFRect();return[It._round(n+(a-n)*t),It._round(s+(l-s)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return u(this,ce).commentPopupPositionInLayer}set commentPopupPosition(t){u(this,ce).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return u(this,ce).hasDefaultPopupPosition()}get commentButtonWidth(){return u(this,ce).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){var e;(e=u(this,ce))==null||e.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),T(this,vr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=u(this,Nn).children;if(!u(this,Vs)){T(this,Vs,Array.from(e));const l=N(this,_t,nI).bind(this),d=N(this,_t,iI).bind(this),h=this._uiManager._signal;for(const f of u(this,Vs)){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:h}),f.addEventListener("blur",d,{signal:h}),f.addEventListener("focus",N(this,_t,sI).bind(this,m),{signal:h}),f.setAttribute("data-l10n-id",It._l10nResizer[m])}}const n=u(this,Vs)[0];let s=0;for(const l of e){if(l===n)break;s++}const a=(360-this.rotation+this.parentRotation)%360/90*(u(this,Vs).length/4);if(a!==s){if(a<s)for(let d=0;d<s-a;d++)u(this,Nn).append(u(this,Nn).firstElementChild);else if(a>s)for(let d=0;d<a-s;d++)u(this,Nn).firstElementChild.before(u(this,Nn).lastElementChild);let l=0;for(const d of e){const f=u(this,Vs)[l++].getAttribute("data-resizer-name");d.setAttribute("data-l10n-id",It._l10nResizer[f])}}N(this,_t,fE).call(this,0),T(this,Ar,!0),u(this,Nn).firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){u(this,Ar)&&N(this,_t,uE).call(this,u(this,tm),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){N(this,_t,lp).call(this),this.div.focus()}select(){var t,e,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,a;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(e=this._editToolbar)==null||e.show(),(n=u(this,De))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,s,a;this.isSelected&&(this.isSelected=!1,(t=u(this,Nn))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(a=u(this,De))==null||a.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,em)}set isEditing(t){T(this,em,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){u(this,Cs)||T(this,Cs,new Map);const{action:n}=t;let s=u(this,Cs).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),u(this,Cs).delete(n),u(this,Cs).size===0&&T(this,Cs,null)},It._telemetryTimeout),u(this,Cs).set(n,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),T(this,Gd,!1)}disable(){this.div&&(this.div.tabIndex=-1),T(this,Gd,!0)}updateFakeAnnotationElement(t){if(!u(this,_s)&&!this.deleted){T(this,_s,t.addFakeAnnotation(this));return}if(this.deleted){u(this,_s).remove(),T(this,_s,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&u(this,_s).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};hc=new WeakMap,Vs=new WeakMap,De=new WeakMap,ce=new WeakMap,yr=new WeakMap,Gd=new WeakMap,Ja=new WeakMap,jp=new WeakMap,Nn=new WeakMap,fc=new WeakMap,vr=new WeakMap,_s=new WeakMap,Ka=new WeakMap,tm=new WeakMap,pc=new WeakMap,Pi=new WeakMap,em=new WeakMap,mc=new WeakMap,Ar=new WeakMap,So=new WeakMap,zd=new WeakMap,Vd=new WeakMap,Cs=new WeakMap,gc=new WeakMap,nm=new WeakMap,gv=new WeakMap,_t=new WeakSet,aE=function([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},im=new WeakSet,lE=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},m0=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},WN=function(){if(u(this,Nn))return;T(this,Nn,document.createElement("div")),u(this,Nn).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");u(this,Nn).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",N(this,_t,QN).bind(this,n),{signal:e}),s.addEventListener("contextmenu",Ls,{signal:e}),s.tabIndex=-1}this.div.prepend(u(this,Nn))},QN=function(t,e){var m;e.preventDefault();const{isMac:n}=hn.platform;if(e.button!==0||e.ctrlKey&&n)return;(m=u(this,De))==null||m.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,T(this,fc,[e.screenX,e.screenY]);const a=new AbortController,l=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",N(this,_t,uE).bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",qe,{passive:!1,signal:l}),window.addEventListener("contextmenu",Ls,{signal:l}),T(this,vr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const d=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{var v;a.abort(),this.parent.togglePointerEvents(!0),(v=u(this,De))==null||v.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=d,this.div.style.cursor=h,N(this,_t,g0).call(this)};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})},cE=function(t,e,n,s){this.width=n,this.height=s,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},g0=function(){if(!u(this,vr))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=u(this,vr);T(this,vr,null);const a=this.x,l=this.y,d=this.width,h=this.height;a===t&&l===e&&d===n&&h===s||this.addCommands({cmd:N(this,_t,cE).bind(this,a,l,d,h),undo:N(this,_t,cE).bind(this,t,e,n,s),mustExec:!0})},uE=function(t,e){const[n,s]=this.parentDimensions,a=this.x,l=this.y,d=this.width,h=this.height,f=It.MIN_SIZE/n,m=It.MIN_SIZE/s,v=N(this,_t,m0).call(this,this.rotation),A=(z,Q)=>[v[0]*z+v[2]*Q,v[1]*z+v[3]*Q],E=N(this,_t,m0).call(this,360-this.rotation),_=(z,Q)=>[E[0]*z+E[2]*Q,E[1]*z+E[3]*Q];let C,M,R=!1,L=!1;switch(t){case"topLeft":R=!0,C=(z,Q)=>[0,0],M=(z,Q)=>[z,Q];break;case"topMiddle":C=(z,Q)=>[z/2,0],M=(z,Q)=>[z/2,Q];break;case"topRight":R=!0,C=(z,Q)=>[z,0],M=(z,Q)=>[0,Q];break;case"middleRight":L=!0,C=(z,Q)=>[z,Q/2],M=(z,Q)=>[0,Q/2];break;case"bottomRight":R=!0,C=(z,Q)=>[z,Q],M=(z,Q)=>[0,0];break;case"bottomMiddle":C=(z,Q)=>[z/2,Q],M=(z,Q)=>[z/2,0];break;case"bottomLeft":R=!0,C=(z,Q)=>[0,Q],M=(z,Q)=>[z,0];break;case"middleLeft":L=!0,C=(z,Q)=>[0,Q/2],M=(z,Q)=>[z,Q/2];break}const I=C(d,h),U=M(d,h);let P=A(...U);const O=It._round(a+P[0]),F=It._round(l+P[1]);let Z=1,X=1,nt,it;if(e.fromKeyboard)({deltaX:nt,deltaY:it}=e);else{const{screenX:z,screenY:Q}=e,[ot,Ct]=u(this,fc);[nt,it]=this.screenToPageTranslation(z-ot,Q-Ct),u(this,fc)[0]=z,u(this,fc)[1]=Q}if([nt,it]=_(nt/n,it/s),R){const z=Math.hypot(d,h);Z=X=Math.max(Math.min(Math.hypot(U[0]-I[0]-nt,U[1]-I[1]-it)/z,1/d,1/h),f/d,m/h)}else L?Z=Ln(Math.abs(U[0]-I[0]-nt),f,1)/d:X=Ln(Math.abs(U[1]-I[1]-it),m,1)/h;const dt=It._round(d*Z),gt=It._round(h*X);P=A(...M(dt,gt));const ct=O-P[0],At=F-P[1];u(this,Pi)||T(this,Pi,[this.x,this.y,this.width,this.height]),this.width=dt,this.height=gt,this.x=ct,this.y=At,this.setDims(),this.fixAndSetPosition(),this._onResizing()},ZN=function(){var t;T(this,vr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=u(this,De))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},jN=function(t,e,n){let a=.7*(n/e)+1-.7;if(a===1)return;const l=N(this,_t,m0).call(this,this.rotation),d=(O,F)=>[l[0]*O+l[2]*F,l[1]*O+l[3]*F],[h,f]=this.parentDimensions,m=this.x,v=this.y,A=this.width,E=this.height,_=It.MIN_SIZE/h,C=It.MIN_SIZE/f;a=Math.max(Math.min(a,1/A,1/E),_/A,C/E);const M=It._round(A*a),R=It._round(E*a);if(M===A&&R===E)return;u(this,Pi)||T(this,Pi,[m,v,A,E]);const L=d(A/2,E/2),I=It._round(m+L[0]),U=It._round(v+L[1]),P=d(M/2,R/2);this.x=I-P[0],this.y=U-P[1],this.width=M,this.height=R,this.setDims(),this.fixAndSetPosition(),this._onResizing()},tI=function(){var t;(t=u(this,De))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),N(this,_t,g0).call(this)},dE=function(t){const{isMac:e}=hn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},eI=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,a=this._uiManager.combinedSignal(s),l={capture:!0,passive:!1,signal:a},d=f=>{s.abort(),T(this,Ja,null),T(this,pc,!1),this._uiManager.endDragSession()||N(this,_t,dE).call(this,f),n&&this._onStopDragging()};e&&(T(this,zd,t.clientX),T(this,Vd,t.clientY),T(this,Ja,t.pointerId),T(this,jp,t.pointerType),window.addEventListener("pointermove",f=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:v,pointerId:A}=f;if(A!==u(this,Ja)){qe(f);return}const[E,_]=this.screenToPageTranslation(m-u(this,zd),v-u(this,Vd));T(this,zd,m),T(this,Vd,v),this._uiManager.dragSelectedEditors(E,_)},l),window.addEventListener("touchmove",qe,l),window.addEventListener("pointerdown",f=>{f.pointerType===u(this,jp)&&(u(this,gc)||f.isPrimary)&&d(f),qe(f)},l));const h=f=>{if(!u(this,Ja)||u(this,Ja)===f.pointerId){d(f);return}qe(f)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})},hE=function(){if(u(this,Ka)||!this.div)return;T(this,Ka,new AbortController);const t=this._uiManager.combinedSignal(u(this,Ka));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},nI=function(t){It._resizerKeyboardManager.exec(this,t)},iI=function(t){var e;u(this,Ar)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==u(this,Nn)&&N(this,_t,lp).call(this)},sI=function(t){T(this,tm,u(this,Ar)?t:"")},fE=function(t){if(u(this,Vs))for(const e of u(this,Vs))e.tabIndex=t},lp=function(){T(this,Ar,!1),N(this,_t,fE).call(this,-1),N(this,_t,g0).call(this)},x(It,im),W(It,"_l10n",null),W(It,"_l10nResizer",null),W(It,"_borderLineWidth",-1),W(It,"_colorManager",new eE),W(It,"_zIndex",1),W(It,"_telemetryTimeout",1e3);let Ce=It;class B4 extends Ce{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const JM=3285377520,ps=4294901760,co=65535;class oI{constructor(t){this.h1=t?t&4294967295:JM,this.h2=t?t&4294967295:JM}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let C=0,M=t.length;C<M;C++){const R=t.charCodeAt(C);R<=255?e[n++]=R:(e[n++]=R>>>8,e[n++]=R&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,a=n-s*4,l=new Uint32Array(e.buffer,0,s);let d=0,h=0,f=this.h1,m=this.h2;const v=3432918353,A=461845907,E=v&co,_=A&co;for(let C=0;C<s;C++)C&1?(d=l[C],d=d*v&ps|d*E&co,d=d<<15|d>>>17,d=d*A&ps|d*_&co,f^=d,f=f<<13|f>>>19,f=f*5+3864292196):(h=l[C],h=h*v&ps|h*E&co,h=h<<15|h>>>17,h=h*A&ps|h*_&co,m^=h,m=m<<13|m>>>19,m=m*5+3864292196);switch(d=0,a){case 3:d^=e[s*4+2]<<16;case 2:d^=e[s*4+1]<<8;case 1:d^=e[s*4],d=d*v&ps|d*E&co,d=d<<15|d>>>17,d=d*A&ps|d*_&co,s&1?f^=d:m^=d}this.h1=f,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ps|t*36045&co,e=e*4283543511&ps|((e<<16|t>>>16)*2950163797&ps)>>>16,t^=e>>>1,t=t*444984403&ps|t*60499&co,e=e*3301882366&ps|((e<<16|t>>>16)*3120437893&ps)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const pE=Object.freeze({map:null,hash:"",transfer:void 0});var yc,vc,Sr,In,yv,rI;class OT{constructor(){x(this,yv);x(this,yc,!1);x(this,vc,null);x(this,Sr,null);x(this,In,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=u(this,In).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return u(this,In).get(t)}remove(t){const e=u(this,In).get(t);if(e!==void 0&&(e instanceof Ce&&u(this,Sr).delete(e.annotationElementId),u(this,In).delete(t),u(this,In).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of u(this,In).values())if(n instanceof Ce)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=u(this,In).get(t);let s=!1;if(n!==void 0)for(const[a,l]of Object.entries(e))n[a]!==l&&(s=!0,n[a]=l);else s=!0,u(this,In).set(t,e);s&&N(this,yv,rI).call(this),e instanceof Ce&&((u(this,Sr)||T(this,Sr,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return u(this,In).has(t)}get size(){return u(this,In).size}resetModified(){u(this,yc)&&(T(this,yc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new aI(this)}get serializable(){if(u(this,In).size===0)return pE;const t=new Map,e=new oI,n=[],s=Object.create(null);let a=!1;for(const[l,d]of u(this,In)){const h=d instanceof Ce?d.serialize(!1,s):d;d.page&&(d.pageIndex=d.page._pageIndex,delete d.page),h&&(t.set(l,h),e.update(`${l}:${JSON.stringify(h)}`),a||(a=!!h.bitmap))}if(a)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:pE}get editorStats(){let t=null;const e=new Map;let n=0,s=0;for(const a of u(this,In).values()){if(!(a instanceof Ce)){a.popup&&(a.popup.deleted?s+=1:n+=1);continue}a.isCommentDeleted?s+=1:a.hasEditedComment&&(n+=1);const l=a.telemetryFinalData;if(!l)continue;const{type:d}=l;e.has(d)||e.set(d,Object.getPrototypeOf(a).constructor),t||(t=Object.create(null));const h=t[d]||(t[d]=new Map);for(const[f,m]of Object.entries(l)){if(f==="type")continue;let v=h.get(f);v||(v=new Map,h.set(f,v));const A=v.get(m)??0;v.set(m,A+1)}}if((s>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:s,edited:n}),!t)return null;for(const[a,l]of e)t[a]=l.computeTelemetryFinalData(t[a]);return t}resetModifiedIds(){T(this,vc,null)}updateEditor(t,e){var s;const n=(s=u(this,Sr))==null?void 0:s.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=u(this,Sr))==null?void 0:e.get(t))||null}get modifiedIds(){if(u(this,vc))return u(this,vc);const t=[];if(u(this,Sr))for(const e of u(this,Sr).values())e.serialize()&&t.push(e.annotationElementId);return T(this,vc,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return u(this,In).entries()}}yc=new WeakMap,vc=new WeakMap,Sr=new WeakMap,In=new WeakMap,yv=new WeakSet,rI=function(){u(this,yc)||(T(this,yc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var sm;class aI extends OT{constructor(e){super();x(this,sm);const{map:n,hash:s,transfer:a}=e.serializable,l=structuredClone(n,a?{transfer:a}:null);T(this,sm,{map:l,hash:s,transfer:a})}get print(){se("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,sm)}get modifiedIds(){return Mt(this,"modifiedIds",{ids:new Set,hash:""})}}sm=new WeakMap;var qd;class F4{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){x(this,qd,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),u(this,qd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||u(this,qd).has(t.loadedName))){if(ie(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:a,style:l}=t,d=new FontFace(s,a,l);this.addNativeFontFace(d);try{await d.load(),u(this,qd).add(s),n==null||n(t)}catch{xt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(d)}return}se("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw xt(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Mt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Mt(this,"isSyncFontLoadingSupported",ti||hn.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ie(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Mt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(U,P){return U.charCodeAt(P)<<24|U.charCodeAt(P+1)<<16|U.charCodeAt(P+2)<<8|U.charCodeAt(P+3)&255}function s(U,P,O,F){const Z=U.substring(0,P),X=U.substring(P+O);return Z+F+X}let a,l;const d=this._document.createElement("canvas");d.width=1,d.height=1;const h=d.getContext("2d");let f=0;function m(U,P){if(++f>30){xt("Load test font never loaded."),P();return}if(h.font="30px "+U,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(m.bind(null,U,P))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let A=this._loadTestFont;A=s(A,976,v.length,v);const _=16,C=1482184792;let M=n(A,_);for(a=0,l=v.length-3;a<l;a+=4)M=M-C+n(v,a)|0;a<v.length&&(M=M-C+n(v+"XXX",a)|0),A=s(A,_,4,S4(M));const R=`url(data:font/opentype;base64,${btoa(A)});`,L=`@font-face {font-family:"${v}";src:${R}}`;this.insertRule(L);const I=this._document.createElement("div");I.style.visibility="hidden",I.style.width=I.style.height="10px",I.style.position="absolute",I.style.top=I.style.left="0px";for(const U of[t.loadedName,v]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=U,I.append(P)}this._document.body.append(I),m(v,()=>{I.remove(),e.complete()})}}qd=new WeakMap;var me;class H4{constructor(t,e=null,n,s){x(this,me);this.compiledGlyphs=Object.create(null),T(this,me,t),this._inspectFont=e,n&&Object.assign(this,n),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let s;try{s=t.get(n)}catch(l){xt(`getPathGenerator - ignoring character: "${l}".`)}const a=CN(s==null?void 0:s.path);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=a}get black(){return u(this,me).black}get bold(){return u(this,me).bold}get disableFontFace(){return u(this,me).disableFontFace??!1}set disableFontFace(t){Mt(this,"disableFontFace",!!t)}get fontExtraProperties(){return u(this,me).fontExtraProperties??!1}get isInvalidPDFjsFont(){return u(this,me).isInvalidPDFjsFont}get isType3Font(){return u(this,me).isType3Font}get italic(){return u(this,me).italic}get missingFile(){return u(this,me).missingFile}get remeasure(){return u(this,me).remeasure}get vertical(){return u(this,me).vertical}get ascent(){return u(this,me).ascent}get defaultWidth(){return u(this,me).defaultWidth}get descent(){return u(this,me).descent}get bbox(){return u(this,me).bbox}set bbox(t){Mt(this,"bbox",t)}get fontMatrix(){return u(this,me).fontMatrix}get fallbackName(){return u(this,me).fallbackName}get loadedName(){return u(this,me).loadedName}get mimetype(){return u(this,me).mimetype}get name(){return u(this,me).name}get data(){return u(this,me).data}clearData(){u(this,me).clearData()}get cssFontInfo(){return u(this,me).cssFontInfo}get systemFontInfo(){return u(this,me).systemFontInfo}get defaultVMetrics(){return u(this,me).defaultVMetrics}}me=new WeakMap;var Yd,$d,om,Xd,y0;const gd=class gd{constructor(t){x(this,Xd);x(this,Yd);x(this,$d);x(this,om);T(this,Yd,t),T(this,$d,new DataView(u(this,Yd))),T(this,om,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let s=0;for(const f of gd.strings){const m=e.encode(t[f]);n[f]=m,s+=4+m.length}const a=new ArrayBuffer(s),l=new Uint8Array(a),d=new DataView(a);let h=0;for(const f of gd.strings){const m=n[f],v=m.length;d.setUint32(h,v),l.set(m,h+4),h+=4+v}return ie(h===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}get fontFamily(){return N(this,Xd,y0).call(this,0)}get fontWeight(){return N(this,Xd,y0).call(this,1)}get italicAngle(){return N(this,Xd,y0).call(this,2)}};Yd=new WeakMap,$d=new WeakMap,om=new WeakMap,Xd=new WeakSet,y0=function(t){ie(t<gd.strings.length,"Invalid string index");let e=0;for(let s=0;s<t;s++)e+=u(this,$d).getUint32(e)+4;const n=u(this,$d).getUint32(e);return u(this,om).decode(new Uint8Array(u(this,Yd),e+4,n))},W(gd,"strings",["fontFamily","fontWeight","italicAngle"]);let nv=gd;var Wa,bo,Ac,Sc,cp;const yd=class yd{constructor(t){x(this,Sc);x(this,Wa);x(this,bo);x(this,Ac);T(this,Wa,t),T(this,bo,new DataView(u(this,Wa))),T(this,Ac,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let s=0;for(const A of yd.strings){const E=e.encode(t[A]);n[A]=E,s+=4+E.length}s+=4;let a,l,d=1+s;t.style&&(a=e.encode(t.style.style),l=e.encode(t.style.weight),d+=4+a.length+4+l.length);const h=new ArrayBuffer(d),f=new Uint8Array(h),m=new DataView(h);let v=0;m.setUint8(v++,t.guessFallback?1:0),m.setUint32(v,0),v+=4,s=0;for(const A of yd.strings){const E=n[A],_=E.length;s+=4+_,m.setUint32(v,_),f.set(E,v+4),v+=4+_}return m.setUint32(v-s-4,s),t.style&&(m.setUint32(v,a.length),f.set(a,v+4),v+=4+a.length,m.setUint32(v,l.length),f.set(l,v+4),v+=4+l.length),ie(v<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(v)}get guessFallback(){return u(this,bo).getUint8(0)!==0}get css(){return N(this,Sc,cp).call(this,0)}get loadedName(){return N(this,Sc,cp).call(this,1)}get baseFontName(){return N(this,Sc,cp).call(this,2)}get src(){return N(this,Sc,cp).call(this,3)}get style(){let t=1;t+=4+u(this,bo).getUint32(t);const e=u(this,bo).getUint32(t),n=u(this,Ac).decode(new Uint8Array(u(this,Wa),t+4,e));t+=4+e;const s=u(this,bo).getUint32(t),a=u(this,Ac).decode(new Uint8Array(u(this,Wa),t+4,s));return{style:n,weight:a}}};Wa=new WeakMap,bo=new WeakMap,Ac=new WeakMap,Sc=new WeakSet,cp=function(t){ie(t<yd.strings.length,"Invalid string index");let e=5;for(let s=0;s<t;s++)e+=u(this,bo).getUint32(e)+4;const n=u(this,bo).getUint32(e);return u(this,Ac).decode(new Uint8Array(u(this,Wa),e+4,n))},W(yd,"strings",["css","loadedName","baseFontName","src"]);let iv=yd;var Jd,Kd,Wd,Qd,Ui,Eo,rm,ge,Ve,Fs,v0,up;const Lt=class Lt{constructor({data:t,extra:e}){x(this,Ve);x(this,Eo);x(this,rm);x(this,ge);T(this,Eo,t),T(this,rm,new TextDecoder),T(this,ge,new DataView(u(this,Eo))),e&&Object.assign(this,e)}get black(){return N(this,Ve,Fs).call(this,0)}get bold(){return N(this,Ve,Fs).call(this,1)}get disableFontFace(){return N(this,Ve,Fs).call(this,2)}get fontExtraProperties(){return N(this,Ve,Fs).call(this,3)}get isInvalidPDFjsFont(){return N(this,Ve,Fs).call(this,4)}get isType3Font(){return N(this,Ve,Fs).call(this,5)}get italic(){return N(this,Ve,Fs).call(this,6)}get missingFile(){return N(this,Ve,Fs).call(this,7)}get remeasure(){return N(this,Ve,Fs).call(this,8)}get vertical(){return N(this,Ve,Fs).call(this,9)}get ascent(){return N(this,Ve,v0).call(this,0)}get defaultWidth(){return N(this,Ve,v0).call(this,1)}get descent(){return N(this,Ve,v0).call(this,2)}get bbox(){let t=u(Lt,Kd);if(u(this,ge).getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<4;s++)n.push(u(this,ge).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=u(Lt,Wd);if(u(this,ge).getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<6;s++)n.push(u(this,ge).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=u(Lt,Qd);if(u(this,ge).getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<3;s++)n.push(u(this,ge).getInt16(t,!0)),t+=2;return n}get fallbackName(){return N(this,Ve,up).call(this,0)}get loadedName(){return N(this,Ve,up).call(this,1)}get mimetype(){return N(this,Ve,up).call(this,2)}get name(){return N(this,Ve,up).call(this,3)}get data(){let t=u(Lt,Ui);const e=u(this,ge).getUint32(t);t+=4+e;const n=u(this,ge).getUint32(t);t+=4+n;const s=u(this,ge).getUint32(t);t+=4+s;const a=u(this,ge).getUint32(t);if(a!==0)return new Uint8Array(u(this,Eo),t+4,a)}clearData(){let t=u(Lt,Ui);const e=u(this,ge).getUint32(t);t+=4+e;const n=u(this,ge).getUint32(t);t+=4+n;const s=u(this,ge).getUint32(t);t+=4+s;const a=u(this,ge).getUint32(t);new Uint8Array(u(this,Eo),t+4,a).fill(0),u(this,ge).setUint32(t,0)}get cssFontInfo(){let t=u(Lt,Ui);const e=u(this,ge).getUint32(t);t+=4+e;const n=u(this,ge).getUint32(t);t+=4+n;const s=u(this,ge).getUint32(t);if(s===0)return null;const a=new Uint8Array(s);return a.set(new Uint8Array(u(this,Eo),t+4,s)),new nv(a.buffer)}get systemFontInfo(){let t=u(Lt,Ui);const e=u(this,ge).getUint32(t);t+=4+e;const n=u(this,ge).getUint32(t);if(n===0)return null;const s=new Uint8Array(n);return s.set(new Uint8Array(u(this,Eo),t+4,n)),new iv(s.buffer)}static write(t){const e=t.systemFontInfo?iv.write(t.systemFontInfo):null,n=t.cssFontInfo?nv.write(t.cssFontInfo):null,s=new TextEncoder,a={};let l=0;for(const C of Lt.strings)a[C]=s.encode(t[C]),l+=4+a[C].length;const d=u(Lt,Ui)+4+l+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(d),f=new Uint8Array(h),m=new DataView(h);let v=0;const A=Lt.bools.length;let E=0,_=0;for(let C=0;C<A;C++){const M=t[Lt.bools[C]];E|=(M===void 0?0:M?2:1)<<_,_+=2,(_===8||C===A-1)&&(m.setUint8(v++,E),E=0,_=0)}ie(v===u(Lt,Jd),"FontInfo.write: Boolean properties offset mismatch");for(const C of Lt.numbers)m.setFloat64(v,t[C]),v+=8;if(ie(v===u(Lt,Kd),"FontInfo.write: Number properties offset mismatch"),t.bbox){m.setUint8(v++,4);for(const C of t.bbox)m.setInt16(v,C,!0),v+=2}else m.setUint8(v++,0),v+=8;if(ie(v===u(Lt,Wd),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){m.setUint8(v++,6);for(const C of t.fontMatrix)m.setFloat64(v,C,!0),v+=8}else m.setUint8(v++,0),v+=48;if(ie(v===u(Lt,Qd),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){m.setUint8(v++,1);for(const C of t.defaultVMetrics)m.setInt16(v,C,!0),v+=2}else m.setUint8(v++,0),v+=6;ie(v===u(Lt,Ui),"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(u(Lt,Ui),0),v+=4;for(const C of Lt.strings){const M=a[C],R=M.length;m.setUint32(v,R),f.set(M,v+4),v+=4+R}if(m.setUint32(u(Lt,Ui),v-u(Lt,Ui)-4),!e)m.setUint32(v,0),v+=4;else{const C=e.byteLength;m.setUint32(v,C),ie(v+4+C<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),v+4),v+=4+C}if(!n)m.setUint32(v,0),v+=4;else{const C=n.byteLength;m.setUint32(v,C),ie(v+4+C<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(n),v+4),v+=4+C}return t.data===void 0?(m.setUint32(v,0),v+=4):(m.setUint32(v,t.data.length),f.set(t.data,v+4),v+=4+t.data.length),ie(v<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(v)}};Jd=new WeakMap,Kd=new WeakMap,Wd=new WeakMap,Qd=new WeakMap,Ui=new WeakMap,Eo=new WeakMap,rm=new WeakMap,ge=new WeakMap,Ve=new WeakSet,Fs=function(t){ie(t<Lt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,s=u(this,ge).getUint8(e)>>n&3;return s===0?void 0:s===2},v0=function(t){return ie(t<Lt.numbers.length,"Invalid number index"),u(this,ge).getFloat64(u(Lt,Jd)+t*8)},up=function(t){ie(t<Lt.strings.length,"Invalid string index");let e=u(Lt,Ui)+4;for(let a=0;a<t;a++)e+=u(this,ge).getUint32(e)+4;const n=u(this,ge).getUint32(e),s=new Uint8Array(n);return s.set(new Uint8Array(u(this,Eo),e+4,n)),u(this,rm).decode(s)},W(Lt,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),W(Lt,"numbers",["ascent","defaultWidth","descent"]),W(Lt,"strings",["fallbackName","loadedName","mimetype","name"]),x(Lt,Jd,Math.ceil(Lt.bools.length*2/8)),x(Lt,Kd,u(Lt,Jd)+Lt.numbers.length*8),x(Lt,Wd,u(Lt,Kd)+1+8),x(Lt,Qd,u(Lt,Wd)+1+48),x(Lt,Ui,u(Lt,Qd)+1+6);let mE=Lt;var am,lm,cm,um,dm,hm,fm,pm;const Te=class Te{constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,s=[],a=[],l=[],d=[],h=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],l=t[3],e===1?s.push(...t[4],...t[5]):s.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,h=t[1],s=t[2],a=t[3],d=t[4]||[],n=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const m=Math.floor(s.length/2),v=Math.floor(a.length/3),A=l.length,E=d.length;let _=0;for(const P of d)_+=1,_=Math.ceil(_/4)*4,_+=4+P.coords.length*4,_+=4+P.colors.length*4,P.verticesPerRow!==void 0&&(_+=4);const C=20+m*8+v*3+A*8+(n?16:0)+(f?3:0)+_,M=new ArrayBuffer(C),R=new DataView(M),L=new Uint8Array(M);R.setUint8(u(Te,am),e),R.setUint8(u(Te,lm),n?1:0),R.setUint8(u(Te,cm),f?1:0),R.setUint8(u(Te,um),h),R.setUint32(u(Te,dm),m,!0),R.setUint32(u(Te,hm),v,!0),R.setUint32(u(Te,fm),A,!0),R.setUint32(u(Te,pm),E,!0);let I=20;new Float32Array(M,I,m*2).set(s),I+=m*8,L.set(a,I),I+=v*3;for(const[P,O]of l)R.setFloat32(I,P,!0),I+=4,R.setUint32(I,parseInt(O.slice(1),16),!0),I+=4;if(n)for(const P of n)R.setFloat32(I,P,!0),I+=4;f&&(L.set(f,I),I+=3);for(let P=0;P<d.length;P++){const O=d[P];R.setUint8(I,O.type),I+=1,I=Math.ceil(I/4)*4,R.setUint32(I,O.coords.length,!0),I+=4,new Int32Array(M,I,O.coords.length).set(O.coords),I+=O.coords.length*4,R.setUint32(I,O.colors.length,!0),I+=4,new Int32Array(M,I,O.colors.length).set(O.colors),I+=O.colors.length*4,O.verticesPerRow!==void 0&&(R.setUint32(I,O.verticesPerRow,!0),I+=4)}return M}getIR(){const t=this.view,e=this.data[u(Te,am)],n=!!this.data[u(Te,lm)],s=!!this.data[u(Te,cm)],a=t.getUint32(u(Te,dm),!0),l=t.getUint32(u(Te,hm),!0),d=t.getUint32(u(Te,fm),!0),h=t.getUint32(u(Te,pm),!0);let f=20;const m=new Float32Array(this.buffer,f,a*2);f+=a*8;const v=new Uint8Array(this.buffer,f,l*3);f+=l*3;const A=[];for(let M=0;M<d;++M){const R=t.getFloat32(f,!0);f+=4;const L=t.getUint32(f,!0);f+=4,A.push([R,`#${L.toString(16).padStart(6,"0")}`])}let E=null;if(n){E=[];for(let M=0;M<4;++M)E.push(t.getFloat32(f,!0)),f+=4}let _=null;s&&(_=new Uint8Array(this.buffer,f,3),f+=3);const C=[];for(let M=0;M<h;++M){const R=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const L=t.getUint32(f,!0);f+=4;const I=new Int32Array(this.buffer,f,L);f+=L*4;const U=t.getUint32(f,!0);f+=4;const P=new Int32Array(this.buffer,f,U);f+=U*4;const O={type:R,coords:I,colors:P};R===Xb.LATTICE&&(O.verticesPerRow=t.getUint32(f,!0),f+=4),C.push(O)}if(e===1)return["RadialAxial","axial",E,A,Array.from(m.slice(0,2)),Array.from(m.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",E,A,[m[0],m[1]],[m[3],m[4]],m[2],m[5]];if(e===3){const M=this.data[u(Te,um)];let R=null;if(m.length>0){let L=m[0],I=m[0],U=m[1],P=m[1];for(let O=0;O<m.length;O+=2){const F=m[O],Z=m[O+1];L=L>F?F:L,U=U>Z?Z:U,I=I<F?F:I,P=P<Z?Z:P}R=[L,U,I,P]}return["Mesh",M,m,v,C,R,E,_]}throw new Error(`Unsupported pattern kind: ${e}`)}};am=new WeakMap,lm=new WeakMap,cm=new WeakMap,um=new WeakMap,dm=new WeakMap,hm=new WeakMap,fm=new WeakMap,pm=new WeakMap,x(Te,am,0),x(Te,lm,1),x(Te,cm,2),x(Te,um,3),x(Te,dm,4),x(Te,hm,8),x(Te,fm,12),x(Te,pm,16);let gE=Te;var Zd;class G4{constructor(t){x(this,Zd);T(this,Zd,t)}static write(t){let e,n;return hn.isFloat16ArraySupported?(n=new ArrayBuffer(t.length*2),e=new Float16Array(n)):(n=new ArrayBuffer(t.length*4),e=new Float32Array(n)),e.set(t),n}get path(){return hn.isFloat16ArraySupported?new Float16Array(u(this,Zd)):new Float32Array(u(this,Zd))}}Zd=new WeakMap;function z4(o){if(o instanceof URL)return o.href;if(typeof o=="string"){if(ti)return o;const t=URL.parse(o,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function V4(o){if(ti&&typeof Buffer<"u"&&o instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength)return o;if(typeof o=="string")return Fv(o);if(o instanceof ArrayBuffer||ArrayBuffer.isView(o)||typeof o=="object"&&!isNaN(o==null?void 0:o.length))return new Uint8Array(o);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function t0(o){if(typeof o!="string")return null;if(o.endsWith("/"))return o;throw new Error(`Invalid factory url: "${o}" must include trailing slash.`)}const yE=o=>typeof o=="object"&&Number.isInteger(o==null?void 0:o.num)&&o.num>=0&&Number.isInteger(o==null?void 0:o.gen)&&o.gen>=0,q4=o=>typeof o=="object"&&typeof(o==null?void 0:o.name)=="string",Y4=C4.bind(null,yE,q4);var br,vv;class $4{constructor(){x(this,br,new Map);x(this,vv,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};u(this,vv).then(()=>{for(const[s]of u(this,br))s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:a}=n;if(a.aborted){xt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);s=()=>a.removeEventListener("abort",l),a.addEventListener("abort",l)}u(this,br).set(e,s)}removeEventListener(t,e){const n=u(this,br).get(e);n==null||n(),u(this,br).delete(e)}terminate(){for(const[,t]of u(this,br))t==null||t();u(this,br).clear()}}br=new WeakMap,vv=new WeakMap;const e0={DATA:1,ERROR:2},tn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function KM(){}function di(o){if(o instanceof Tl||o instanceof Jb||o instanceof GM||o instanceof Z0||o instanceof Eb)return o;switch(o instanceof Error||typeof o=="object"&&o!==null||se('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),o.name){case"AbortException":return new Tl(o.message);case"InvalidPDFException":return new Jb(o.message);case"PasswordException":return new GM(o.message,o.code);case"ResponseException":return new Z0(o.message,o.status,o.missing);case"UnknownErrorException":return new Eb(o.message,o.details)}return new Eb(o.message,o.toString())}var jd,Ds,lI,cI,uI,A0;class dp{constructor(t,e,n){x(this,Ds);x(this,jd,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",N(this,Ds,lI).bind(this),{signal:u(this,jd).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[s]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(l){a.reject(l)}return a.promise}sendWithStream(t,e,n,s){const a=this.streamId++,l=this.sourceName,d=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[a]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:d,action:t,streamId:a,data:e,desiredSize:f.desiredSize},s),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[a].pullCall=m,h.postMessage({sourceName:l,targetName:d,stream:tn.PULL,streamId:a,desiredSize:f.desiredSize}),m.promise},cancel:f=>{ie(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[a].cancelCall=m,this.streamControllers[a].isClosed=!0,h.postMessage({sourceName:l,targetName:d,stream:tn.CANCEL,streamId:a,reason:di(f)}),m.promise}},n)}destroy(){var t;(t=u(this,jd))==null||t.abort(),T(this,jd,null)}}jd=new WeakMap,Ds=new WeakSet,lI=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){N(this,Ds,uI).call(this,t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===e0.DATA)s.resolve(t.data);else if(t.callback===e0.ERROR)s.reject(di(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(l){a.postMessage({sourceName:n,targetName:s,callback:e0.DATA,callbackId:t.callbackId,data:l})},function(l){a.postMessage({sourceName:n,targetName:s,callback:e0.ERROR,callbackId:t.callbackId,reason:di(l)})});return}if(t.streamId){N(this,Ds,cI).call(this,t);return}e(t.data)},cI=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,a=this.comObj,l=this,d=this.actionHandler[t.action],h={enqueue(f,m=1,v){if(this.isCancelled)return;const A=this.desiredSize;this.desiredSize-=m,A>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:s,stream:tn.ENQUEUE,streamId:e,chunk:f},v)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:tn.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){ie(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:tn.ERROR,streamId:e,reason:di(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(d,t.data,h).then(function(){a.postMessage({sourceName:n,targetName:s,stream:tn.START_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:s,stream:tn.START_COMPLETE,streamId:e,reason:di(f)})})},uI=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,a=this.comObj,l=this.streamControllers[e],d=this.streamSinks[e];switch(t.stream){case tn.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(di(t.reason));break;case tn.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(di(t.reason));break;case tn.PULL:if(!d){a.postMessage({sourceName:n,targetName:s,stream:tn.PULL_COMPLETE,streamId:e,success:!0});break}d.desiredSize<=0&&t.desiredSize>0&&d.sinkCapability.resolve(),d.desiredSize=t.desiredSize,Promise.try(d.onPull||KM).then(function(){a.postMessage({sourceName:n,targetName:s,stream:tn.PULL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:s,stream:tn.PULL_COMPLETE,streamId:e,reason:di(f)})});break;case tn.ENQUEUE:if(ie(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case tn.CLOSE:if(ie(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),N(this,Ds,A0).call(this,l,e);break;case tn.ERROR:ie(l,"error should have stream controller"),l.controller.error(di(t.reason)),N(this,Ds,A0).call(this,l,e);break;case tn.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(di(t.reason)),N(this,Ds,A0).call(this,l,e);break;case tn.CANCEL:if(!d)break;const h=di(t.reason);Promise.try(d.onCancel||KM,h).then(function(){a.postMessage({sourceName:n,targetName:s,stream:tn.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:s,stream:tn.CANCEL_COMPLETE,streamId:e,reason:di(f)})}),d.sinkCapability.reject(h),d.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},A0=async function(t,e){var n,s,a;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(s=t.pullCall)==null?void 0:s.promise,(a=t.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[e]};var mm;class dI{constructor({enableHWA:t=!1}){x(this,mm,!1);T(this,mm,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!u(this,mm)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){se("Abstract method `_createCanvas` called.")}}mm=new WeakMap;class X4 extends dI{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class hI{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){se("Abstract method `_fetch` called.")}}class WM extends hI{async _fetch(t){const e=await wg(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Fv(e)}}class fI{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,a){return"none"}destroy(t=!1){}}var bc,th,Er,Tr,Vn,Ec,Tc,ht,Fn,hp,od,S0,rd,pI,vE,ad,fp,pp,AE,mp;class J4 extends fI{constructor({docId:e,ownerDocument:n=globalThis.document}){super();x(this,ht);x(this,bc);x(this,th);x(this,Er);x(this,Tr);x(this,Vn);x(this,Ec);x(this,Tc,0);T(this,Tr,e),T(this,Vn,n)}addFilter(e){if(!e)return"none";let n=u(this,ht,Fn).get(e);if(n)return n;const[s,a,l]=N(this,ht,S0).call(this,e),d=e.length===1?s:`${s}${a}${l}`;if(n=u(this,ht,Fn).get(d),n)return u(this,ht,Fn).set(e,n),n;const h=`g_${u(this,Tr)}_transfer_map_${an(this,Tc)._++}`,f=N(this,ht,rd).call(this,h);u(this,ht,Fn).set(e,f),u(this,ht,Fn).set(d,f);const m=N(this,ht,ad).call(this,h);return N(this,ht,pp).call(this,s,a,l,m),f}addHCMFilter(e,n){var _;const s=`${e}-${n}`,a="base";let l=u(this,ht,hp).get(a);if((l==null?void 0:l.key)===s||(l?((_=l.filter)==null||_.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},u(this,ht,hp).set(a,l)),!e||!n))return l.url;const d=N(this,ht,mp).call(this,e);e=ut.makeHexColor(...d);const h=N(this,ht,mp).call(this,n);if(n=ut.makeHexColor(...h),u(this,ht,od).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return l.url;const f=new Array(256);for(let C=0;C<=255;C++){const M=C/255;f[C]=M<=.03928?M/12.92:((M+.055)/1.055)**2.4}const m=f.join(","),v=`g_${u(this,Tr)}_hcm_filter`,A=l.filter=N(this,ht,ad).call(this,v);N(this,ht,pp).call(this,m,m,m,A),N(this,ht,vE).call(this,A);const E=(C,M)=>{const R=d[C]/255,L=h[C]/255,I=new Array(M+1);for(let U=0;U<=M;U++)I[U]=R+U/M*(L-R);return I.join(",")};return N(this,ht,pp).call(this,E(0,5),E(1,5),E(2,5),A),l.url=N(this,ht,rd).call(this,v),l.url}addAlphaFilter(e){let n=u(this,ht,Fn).get(e);if(n)return n;const[s]=N(this,ht,S0).call(this,[e]),a=`alpha_${s}`;if(n=u(this,ht,Fn).get(a),n)return u(this,ht,Fn).set(e,n),n;const l=`g_${u(this,Tr)}_alpha_map_${an(this,Tc)._++}`,d=N(this,ht,rd).call(this,l);u(this,ht,Fn).set(e,d),u(this,ht,Fn).set(a,d);const h=N(this,ht,ad).call(this,l);return N(this,ht,AE).call(this,s,h),d}addLuminosityFilter(e){let n=u(this,ht,Fn).get(e||"luminosity");if(n)return n;let s,a;if(e?([s]=N(this,ht,S0).call(this,[e]),a=`luminosity_${s}`):a="luminosity",n=u(this,ht,Fn).get(a),n)return u(this,ht,Fn).set(e,n),n;const l=`g_${u(this,Tr)}_luminosity_map_${an(this,Tc)._++}`,d=N(this,ht,rd).call(this,l);u(this,ht,Fn).set(e,d),u(this,ht,Fn).set(a,d);const h=N(this,ht,ad).call(this,l);return N(this,ht,pI).call(this,h),e&&N(this,ht,AE).call(this,s,h),d}addHighlightHCMFilter(e,n,s,a,l){var L;const d=`${n}-${s}-${a}-${l}`;let h=u(this,ht,hp).get(e);if((h==null?void 0:h.key)===d||(h?((L=h.filter)==null||L.remove(),h.key=d,h.url="none",h.filter=null):(h={key:d,url:"none",filter:null},u(this,ht,hp).set(e,h)),!n||!s))return h.url;const[f,m]=[n,s].map(N(this,ht,mp).bind(this));let v=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),A=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[E,_]=[a,l].map(N(this,ht,mp).bind(this));A<v&&([v,A,E,_]=[A,v,_,E]),u(this,ht,od).style.color="";const C=(I,U,P)=>{const O=new Array(256),F=(A-v)/P,Z=I/255,X=(U-I)/(255*P);let nt=0;for(let it=0;it<=P;it++){const dt=Math.round(v+it*F),gt=Z+it*X;for(let ct=nt;ct<=dt;ct++)O[ct]=gt;nt=dt+1}for(let it=nt;it<256;it++)O[it]=O[nt-1];return O.join(",")},M=`g_${u(this,Tr)}_hcm_${e}_filter`,R=h.filter=N(this,ht,ad).call(this,M);return N(this,ht,vE).call(this,R),N(this,ht,pp).call(this,C(E[0],_[0],5),C(E[1],_[1],5),C(E[2],_[2],5),R),h.url=N(this,ht,rd).call(this,M),h.url}destroy(e=!1){var n,s,a,l;e&&((n=u(this,Ec))!=null&&n.size)||((s=u(this,Er))==null||s.parentNode.parentNode.remove(),T(this,Er,null),(a=u(this,th))==null||a.clear(),T(this,th,null),(l=u(this,Ec))==null||l.clear(),T(this,Ec,null),T(this,Tc,0))}}bc=new WeakMap,th=new WeakMap,Er=new WeakMap,Tr=new WeakMap,Vn=new WeakMap,Ec=new WeakMap,Tc=new WeakMap,ht=new WeakSet,Fn=function(){return u(this,th)||T(this,th,new Map)},hp=function(){return u(this,Ec)||T(this,Ec,new Map)},od=function(){if(!u(this,Er)){const e=u(this,Vn).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=u(this,Vn).createElementNS(sr,"svg");s.setAttribute("width",0),s.setAttribute("height",0),T(this,Er,u(this,Vn).createElementNS(sr,"defs")),e.append(s),s.append(u(this,Er)),u(this,Vn).body.append(e)}return u(this,Er)},S0=function(e){if(e.length===1){const f=e[0],m=new Array(256);for(let A=0;A<256;A++)m[A]=f[A]/255;const v=m.join(",");return[v,v,v]}const[n,s,a]=e,l=new Array(256),d=new Array(256),h=new Array(256);for(let f=0;f<256;f++)l[f]=n[f]/255,d[f]=s[f]/255,h[f]=a[f]/255;return[l.join(","),d.join(","),h.join(",")]},rd=function(e){if(u(this,bc)===void 0){T(this,bc,"");const n=u(this,Vn).URL;n!==u(this,Vn).baseURI&&(Hv(n)?xt('#createUrl: ignore "data:"-URL for performance reasons.'):T(this,bc,bN(n,"")))}return`url(${u(this,bc)}#${e})`},pI=function(e){const n=u(this,Vn).createElementNS(sr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},vE=function(e){const n=u(this,Vn).createElementNS(sr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},ad=function(e){const n=u(this,Vn).createElementNS(sr,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),u(this,ht,od).append(n),n},fp=function(e,n,s){const a=u(this,Vn).createElementNS(sr,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),e.append(a)},pp=function(e,n,s,a){const l=u(this,Vn).createElementNS(sr,"feComponentTransfer");a.append(l),N(this,ht,fp).call(this,l,"feFuncR",e),N(this,ht,fp).call(this,l,"feFuncG",n),N(this,ht,fp).call(this,l,"feFuncB",s)},AE=function(e,n){const s=u(this,Vn).createElementNS(sr,"feComponentTransfer");n.append(s),N(this,ht,fp).call(this,s,"feFuncA",e)},mp=function(e){return u(this,ht,od).style.color=e,Mg(getComputedStyle(u(this,ht,od)).getPropertyValue("color"))};class mI{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){se("Abstract method `_fetch` called.")}}class QM extends mI{async _fetch(t){const e=await wg(t,"arraybuffer");return new Uint8Array(e)}}class gI{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){se("Abstract method `_fetch` called.")}}class ZM extends gI{async _fetch(t){const e=await wg(t,"arraybuffer");return new Uint8Array(e)}}ti&&xt("Please use the `legacy` build in Node.js environments.");async function BT(o){const e=await process.getBuiltinModule("fs").promises.readFile(o);return new Uint8Array(e)}class K4 extends fI{}class W4 extends dI{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class Q4 extends hI{async _fetch(t){return BT(t)}}class Z4 extends mI{async _fetch(t){return BT(t)}}class j4 extends gI{async _fetch(t){return BT(t)}}const ed="__forcedDependency",{floor:jM,ceil:tR}=Math;function n0(o,t,e,n,s,a){o[t*4+0]=Math.min(o[t*4+0],e),o[t*4+1]=Math.min(o[t*4+1],n),o[t*4+2]=Math.max(o[t*4+2],s),o[t*4+3]=Math.max(o[t*4+3],a)}const SE=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var eh,Qa;class tz{constructor(t,e){x(this,eh);x(this,Qa);T(this,eh,t),T(this,Qa,e)}get length(){return u(this,eh).length}isEmpty(t){return u(this,eh)[t]===SE}minX(t){return u(this,Qa)[t*4+0]/256}minY(t){return u(this,Qa)[t*4+1]/256}maxX(t){return(u(this,Qa)[t*4+2]+1)/256}maxY(t){return(u(this,Qa)[t*4+3]+1)/256}}eh=new WeakMap,Qa=new WeakMap;const i0=(o,t)=>{if(!o)return;let e=o.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},o.set(t,e)),e};var pi,mi,_c,qs,Cc,_r,ue,ye,Cr,gi,gm,nh,wc,xc,wr,qn,To,ym,bE;class ez{constructor(t,e,n=!1){x(this,ym);x(this,pi,{__proto__:null});x(this,mi,{__proto__:null,transform:[],moveText:[],sameLineText:[],[ed]:[]});x(this,_c,new Map);x(this,qs,[]);x(this,Cc,[]);x(this,_r,[[1,0,0,1,0,0]]);x(this,ue,[-1/0,-1/0,1/0,1/0]);x(this,ye,new Float64Array([1/0,1/0,-1/0,-1/0]));x(this,Cr,-1);x(this,gi,new Set);x(this,gm,new Map);x(this,nh,new Map);x(this,wc);x(this,xc);x(this,wr);x(this,qn);x(this,To);T(this,wc,t.width),T(this,xc,t.height),N(this,ym,bE).call(this,e),n&&T(this,To,new Map)}growOperationsCount(t){t>=u(this,qn).length&&N(this,ym,bE).call(this,t,u(this,qn))}save(t){return T(this,pi,{__proto__:u(this,pi)}),T(this,mi,{__proto__:u(this,mi),transform:{__proto__:u(this,mi).transform},moveText:{__proto__:u(this,mi).moveText},sameLineText:{__proto__:u(this,mi).sameLineText},[ed]:{__proto__:u(this,mi)[ed]}}),T(this,ue,{__proto__:u(this,ue)}),u(this,qs).push(t),this}restore(t){var s;const e=Object.getPrototypeOf(u(this,pi));if(e===null)return this;T(this,pi,e),T(this,mi,Object.getPrototypeOf(u(this,mi))),T(this,ue,Object.getPrototypeOf(u(this,ue)));const n=u(this,qs).pop();return n!==void 0&&((s=i0(u(this,To),t))==null||s.dependencies.add(n),u(this,qn)[t]=u(this,qn)[n]),this}recordOpenMarker(t){return u(this,qs).push(t),this}getOpenMarker(){return u(this,qs).length===0?null:u(this,qs).at(-1)}recordCloseMarker(t){var n;const e=u(this,qs).pop();return e!==void 0&&((n=i0(u(this,To),t))==null||n.dependencies.add(e),u(this,qn)[t]=u(this,qn)[e]),this}beginMarkedContent(t){return u(this,Cc).push(t),this}endMarkedContent(t){var n;const e=u(this,Cc).pop();return e!==void 0&&((n=i0(u(this,To),t))==null||n.dependencies.add(e),u(this,qn)[t]=u(this,qn)[e]),this}pushBaseTransform(t){return u(this,_r).push(ut.multiplyByDOMMatrix(u(this,_r).at(-1),t.getTransform())),this}popBaseTransform(){return u(this,_r).length>1&&u(this,_r).pop(),this}recordSimpleData(t,e){return u(this,pi)[t]=e,this}recordIncrementalData(t,e){return u(this,mi)[t].push(e),this}resetIncrementalData(t,e){return u(this,mi)[t].length=0,this}recordNamedData(t,e){return u(this,_c).set(t,e),this}recordSimpleDataFromNamed(t,e,n){u(this,pi)[t]=u(this,_c).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(ed,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in u(this,pi)&&this.recordFutureForcedDependency(e,u(this,pi)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of u(this,gi))this.recordFutureForcedDependency(ed,t);return this}resetBBox(t){return u(this,Cr)!==t&&(T(this,Cr,t),u(this,ye)[0]=1/0,u(this,ye)[1]=1/0,u(this,ye)[2]=-1/0,u(this,ye)[3]=-1/0),this}recordClipBox(t,e,n,s,a,l){const d=ut.multiplyByDOMMatrix(u(this,_r).at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];ut.axialAlignedBoundingBox([n,a,s,l],d,h);const f=ut.intersect(u(this,ue),h);return f?(u(this,ue)[0]=f[0],u(this,ue)[1]=f[1],u(this,ue)[2]=f[2],u(this,ue)[3]=f[3]):(u(this,ue)[0]=u(this,ue)[1]=1/0,u(this,ue)[2]=u(this,ue)[3]=-1/0),this}recordBBox(t,e,n,s,a,l){const d=u(this,ue);if(d[0]===1/0)return this;const h=ut.multiplyByDOMMatrix(u(this,_r).at(-1),e.getTransform());if(d[0]===-1/0)return ut.axialAlignedBoundingBox([n,a,s,l],h,u(this,ye)),this;const f=[1/0,1/0,-1/0,-1/0];return ut.axialAlignedBoundingBox([n,a,s,l],h,f),u(this,ye)[0]=Math.min(u(this,ye)[0],Math.max(f[0],d[0])),u(this,ye)[1]=Math.min(u(this,ye)[1],Math.max(f[1],d[1])),u(this,ye)[2]=Math.max(u(this,ye)[2],Math.min(f[2],d[2])),u(this,ye)[3]=Math.max(u(this,ye)[3],Math.min(f[3],d[3])),this}recordCharacterBBox(t,e,n,s=1,a=0,l=0,d){const h=n.bbox;let f,m;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&u(this,nh).get(n),f!==!1&&(m=[0,0,0,0],ut.axialAlignedBoundingBox(h,n.fontMatrix,m),(s!==1||a!==0||l!==0)&&ut.scaleMinMax([s,0,0,-s,a,l],m),f)))return this.recordBBox(t,e,m[0],m[2],m[1],m[3]);if(!d)return this.recordFullPageBBox(t);const v=d();return h&&m&&f===void 0&&(f=m[0]<=a-v.actualBoundingBoxLeft&&m[2]>=a+v.actualBoundingBoxRight&&m[1]<=l-v.actualBoundingBoxAscent&&m[3]>=l+v.actualBoundingBoxDescent,u(this,nh).set(n,f),f)?this.recordBBox(t,e,m[0],m[2],m[1],m[3]):this.recordBBox(t,e,a-v.actualBoundingBoxLeft,a+v.actualBoundingBoxRight,l-v.actualBoundingBoxAscent,l+v.actualBoundingBoxDescent)}recordFullPageBBox(t){return u(this,ye)[0]=Math.max(0,u(this,ue)[0]),u(this,ye)[1]=Math.max(0,u(this,ue)[1]),u(this,ye)[2]=Math.min(u(this,wc),u(this,ue)[2]),u(this,ye)[3]=Math.min(u(this,xc),u(this,ue)[3]),this}getSimpleIndex(t){return u(this,pi)[t]}recordDependencies(t,e){const n=u(this,gi),s=u(this,pi),a=u(this,mi);for(const l of e)l in u(this,pi)?n.add(s[l]):l in a&&a[l].forEach(n.add,n);return this}recordNamedDependency(t,e){return u(this,_c).has(e)&&u(this,gi).add(u(this,_c).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[ed]),u(this,To)){const n=i0(u(this,To),t),{dependencies:s}=n;u(this,gi).forEach(s.add,s),u(this,qs).forEach(s.add,s),u(this,Cc).forEach(s.add,s),s.delete(t),n.isRenderingOperation=!0}if(u(this,Cr)===t){const n=jM(u(this,ye)[0]*256/u(this,wc)),s=jM(u(this,ye)[1]*256/u(this,xc)),a=tR(u(this,ye)[2]*256/u(this,wc)),l=tR(u(this,ye)[3]*256/u(this,xc));n0(u(this,wr),t,n,s,a,l);for(const d of u(this,gi))d!==t&&n0(u(this,wr),d,n,s,a,l);for(const d of u(this,qs))d!==t&&n0(u(this,wr),d,n,s,a,l);for(const d of u(this,Cc))d!==t&&n0(u(this,wr),d,n,s,a,l);e||(u(this,gi).clear(),T(this,Cr,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(u(this,gi));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const s of n)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(t,e=!1){return u(this,Cr)===t&&(T(this,Cr,-1),u(this,ue)[0]=Math.max(u(this,ue)[0],u(this,ye)[0]),u(this,ue)[1]=Math.max(u(this,ue)[1],u(this,ye)[1]),u(this,ue)[2]=Math.min(u(this,ue)[2],u(this,ye)[2]),u(this,ue)[3]=Math.min(u(this,ue)[3],u(this,ye)[3]),e||u(this,gi).clear()),this}_takePendingDependencies(){const t=u(this,gi);return T(this,gi,new Set),t}_extractOperation(t){const e=u(this,gm).get(t);return u(this,gm).delete(t),e}_pushPendingDependencies(t){for(const e of t)u(this,gi).add(e)}take(){return u(this,nh).clear(),new tz(u(this,qn),u(this,wr))}takeDebugMetadata(){return u(this,To)}}pi=new WeakMap,mi=new WeakMap,_c=new WeakMap,qs=new WeakMap,Cc=new WeakMap,_r=new WeakMap,ue=new WeakMap,ye=new WeakMap,Cr=new WeakMap,gi=new WeakMap,gm=new WeakMap,nh=new WeakMap,wc=new WeakMap,xc=new WeakMap,wr=new WeakMap,qn=new WeakMap,To=new WeakMap,ym=new WeakSet,bE=function(t,e){const n=new ArrayBuffer(t*4);T(this,wr,new Uint8ClampedArray(n)),T(this,qn,new Uint32Array(n)),e&&e.length>0?(u(this,qn).set(e),u(this,qn).fill(SE,e.length)):u(this,qn).fill(SE)};var be,He,Ys,ih,sh;const $T=class $T{constructor(t,e,n){x(this,be);x(this,He);x(this,Ys);x(this,ih,0);x(this,sh,0);if(t instanceof $T&&u(t,Ys)===!!n)return t;T(this,be,t),T(this,He,e),T(this,Ys,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){return an(this,sh)._++,u(this,be).save(u(this,He)),this}restore(t){return u(this,sh)>0&&(u(this,be).restore(u(this,He)),an(this,sh)._--),this}recordOpenMarker(t){return an(this,ih)._++,this}getOpenMarker(){return u(this,ih)>0?u(this,He):u(this,be).getOpenMarker()}recordCloseMarker(t){return an(this,ih)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return u(this,be).pushBaseTransform(t),this}popBaseTransform(){return u(this,be).popBaseTransform(),this}recordSimpleData(t,e){return u(this,be).recordSimpleData(t,u(this,He)),this}recordIncrementalData(t,e){return u(this,be).recordIncrementalData(t,u(this,He)),this}resetIncrementalData(t,e){return u(this,be).resetIncrementalData(t,u(this,He)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return u(this,be).recordSimpleDataFromNamed(t,e,u(this,He)),this}recordFutureForcedDependency(t,e){return u(this,be).recordFutureForcedDependency(t,u(this,He)),this}inheritSimpleDataAsFutureForcedDependencies(t){return u(this,be).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return u(this,be).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return u(this,Ys)||u(this,be).resetBBox(u(this,He)),this}recordClipBox(t,e,n,s,a,l){return u(this,Ys)||u(this,be).recordClipBox(u(this,He),e,n,s,a,l),this}recordBBox(t,e,n,s,a,l){return u(this,Ys)||u(this,be).recordBBox(u(this,He),e,n,s,a,l),this}recordCharacterBBox(t,e,n,s,a,l,d){return u(this,Ys)||u(this,be).recordCharacterBBox(u(this,He),e,n,s,a,l,d),this}recordFullPageBBox(t){return u(this,Ys)||u(this,be).recordFullPageBBox(u(this,He)),this}getSimpleIndex(t){return u(this,be).getSimpleIndex(t)}recordDependencies(t,e){return u(this,be).recordDependencies(u(this,He),e),this}recordNamedDependency(t,e){return u(this,be).recordNamedDependency(u(this,He),e),this}recordOperation(t){return u(this,be).recordOperation(u(this,He),!0),this}recordShowTextOperation(t){return u(this,be).recordShowTextOperation(u(this,He),!0),this}bboxToClipBoxDropOperation(t){return u(this,Ys)||u(this,be).bboxToClipBoxDropOperation(u(this,He),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};be=new WeakMap,He=new WeakMap,Ys=new WeakMap,ih=new WeakMap,sh=new WeakMap;let sv=$T;const ms={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Pn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function EE(o,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),o.clip(s)}class FT{isModifyingCurrentTransform(){return!1}getPattern(){se("Abstract method `getPattern` called.")}}class nz extends FT{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let n,s=this._p0,a=this._p1;if(e&&(s=s.slice(),a=a.slice(),ut.applyTransform(s,e),ut.applyTransform(a,e)),this._type==="axial")n=t.createLinearGradient(s[0],s[1],a[0],a[1]);else if(this._type==="radial"){let l=this._r0,d=this._r1;if(e){const h=new Float32Array(2);ut.singularValueDecompose2dScale(e,h),l*=h[0],d*=h[0]}n=t.createRadialGradient(s[0],s[1],l,a[0],a[1],d)}for(const l of this._colorStops)n.addColorStop(l[0],l[1]);return n}getPattern(t,e,n,s){let a;if(s===Pn.STROKE||s===Pn.FILL){if(this.isOriginBased()){let A=ut.transform(n,e.baseTransform);this.matrix&&(A=ut.transform(A,this.matrix));const E=.001,_=Math.hypot(A[0],A[1]),C=Math.hypot(A[2],A[3]),M=(A[0]*A[2]+A[1]*A[3])/(_*C);if(Math.abs(M)<E)if(this.isRadial()){if(Math.abs(_-C)<E)return this._createGradient(t,A)}else return this._createGradient(t,A)}const l=e.current.getClippedPathBoundingBox(s,Ue(t))||[0,0,0,0],d=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",d,h),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-l[0],-l[1]),n=ut.transform(n,[1,0,0,1,l[0],l[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),EE(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),a=t.createPattern(f.canvas,"no-repeat");const v=new DOMMatrix(n);a.setTransform(v)}else EE(t,this._bbox),a=this._createGradient(t);return a}}function Cb(o,t,e,n,s,a,l,d){const h=t.coords,f=t.colors,m=o.data,v=o.width*4;let A;h[e+1]>h[n+1]&&(A=e,e=n,n=A,A=a,a=l,l=A),h[n+1]>h[s+1]&&(A=n,n=s,s=A,A=l,l=d,d=A),h[e+1]>h[n+1]&&(A=e,e=n,n=A,A=a,a=l,l=A);const E=(h[e]+t.offsetX)*t.scaleX,_=(h[e+1]+t.offsetY)*t.scaleY,C=(h[n]+t.offsetX)*t.scaleX,M=(h[n+1]+t.offsetY)*t.scaleY,R=(h[s]+t.offsetX)*t.scaleX,L=(h[s+1]+t.offsetY)*t.scaleY;if(_>=L)return;const I=f[a],U=f[a+1],P=f[a+2],O=f[l],F=f[l+1],Z=f[l+2],X=f[d],nt=f[d+1],it=f[d+2],dt=Math.round(_),gt=Math.round(L);let ct,At,z,Q,ot,Ct,Rt,H;for(let K=dt;K<=gt;K++){if(K<M){const Et=K<_?0:(_-K)/(_-M);ct=E-(E-C)*Et,At=I-(I-O)*Et,z=U-(U-F)*Et,Q=P-(P-Z)*Et}else{let Et;K>L?Et=1:M===L?Et=0:Et=(M-K)/(M-L),ct=C-(C-R)*Et,At=O-(O-X)*Et,z=F-(F-nt)*Et,Q=Z-(Z-it)*Et}let st;K<_?st=0:K>L?st=1:st=(_-K)/(_-L),ot=E-(E-R)*st,Ct=I-(I-X)*st,Rt=U-(U-nt)*st,H=P-(P-it)*st;const at=Math.round(Math.min(ct,ot)),pt=Math.round(Math.max(ct,ot));let bt=v*K+at*4;for(let Et=at;Et<=pt;Et++)st=(ct-Et)/(ct-ot),st<0?st=0:st>1&&(st=1),m[bt++]=At-(At-Ct)*st|0,m[bt++]=z-(z-Rt)*st|0,m[bt++]=Q-(Q-H)*st|0,m[bt++]=255}}function iz(o,t,e){const n=t.coords,s=t.colors;let a,l;switch(t.type){case Xb.LATTICE:const d=t.verticesPerRow,h=Math.floor(n.length/d)-1,f=d-1;for(a=0;a<h;a++){let m=a*d;for(let v=0;v<f;v++,m++)Cb(o,e,n[m],n[m+1],n[m+d],s[m],s[m+1],s[m+d]),Cb(o,e,n[m+d+1],n[m+1],n[m+d],s[m+d+1],s[m+1],s[m+d])}break;case Xb.TRIANGLES:for(a=0,l=n.length;a<l;a+=3)Cb(o,e,n[a],n[a+1],n[a+2],s[a],s[a+1],s[a+2]);break;default:throw new Error("illegal figure")}}class sz extends FT{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const d=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-d,m=Math.ceil(this._bounds[3])-h,v=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),A=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),E=f/v,_=m/A,C={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-h,scaleX:1/E,scaleY:1/_},M=v+4,R=A+4,L=n.getCanvas("mesh",M,R),I=L.context,U=I.createImageData(v,A);if(e){const O=U.data;for(let F=0,Z=O.length;F<Z;F+=4)O[F]=e[0],O[F+1]=e[1],O[F+2]=e[2],O[F+3]=255}for(const O of this._figures)iz(U,O,C);return I.putImageData(U,2,2),{canvas:L.canvas,offsetX:d-2*E,offsetY:h-2*_,scaleX:E,scaleY:_}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,s){EE(t,this._bbox);const a=new Float32Array(2);if(s===Pn.SHADING)ut.singularValueDecompose2dScale(Ue(t),a);else if(this.matrix){ut.singularValueDecompose2dScale(this.matrix,a);const[d,h]=a;ut.singularValueDecompose2dScale(e.baseTransform,a),a[0]*=d,a[1]*=h}else ut.singularValueDecompose2dScale(e.baseTransform,a);const l=this._createMeshCanvas(a,s===Pn.SHADING?null:this._background,e.cachedCanvases);return s!==Pn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class oz extends FT{getPattern(){return"hotpink"}}function rz(o){switch(o[0]){case"RadialAxial":return new nz(o);case"Mesh":return new sz(o);case"Dummy":return new oz}throw new Error(`Unknown IR type: ${o[0]}`)}const eR={COLORED:1,UNCOLORED:2},Av=class Av{constructor(t,e,n,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(t,e){var Ct,Rt;const{bbox:n,operatorList:s,paintType:a,tilingType:l,color:d,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:m}=this;f=Math.abs(f),m=Math.abs(m),Bv("TilingType: "+l);const v=n[0],A=n[1],E=n[2],_=n[3],C=E-v,M=_-A,R=new Float32Array(2);ut.singularValueDecompose2dScale(this.matrix,R);const[L,I]=R;ut.singularValueDecompose2dScale(this.baseTransform,R);const U=L*R[0],P=I*R[1];let O=C,F=M,Z=!1,X=!1;const nt=Math.ceil(f*U),it=Math.ceil(m*P),dt=Math.ceil(C*U),gt=Math.ceil(M*P);nt>=dt?O=f:Z=!0,it>=gt?F=m:X=!0;const ct=this.getSizeAndScale(O,this.ctx.canvas.width,U),At=this.getSizeAndScale(F,this.ctx.canvas.height,P),z=t.cachedCanvases.getCanvas("pattern",ct.size,At.size),Q=z.context,ot=h.createCanvasGraphics(Q,e);if(ot.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(ot,a,d),Q.translate(-ct.scale*v,-At.scale*A),ot.transform(0,ct.scale,0,0,At.scale,0,0),Q.save(),(Ct=ot.dependencyTracker)==null||Ct.save(),this.clipBbox(ot,v,A,E,_),ot.baseTransform=Ue(ot.ctx),ot.executeOperatorList(s),ot.endDrawing(),(Rt=ot.dependencyTracker)==null||Rt.restore(),Q.restore(),Z||X){const H=z.canvas;Z&&(O=f),X&&(F=m);const K=this.getSizeAndScale(O,this.ctx.canvas.width,U),st=this.getSizeAndScale(F,this.ctx.canvas.height,P),at=K.size,pt=st.size,bt=t.cachedCanvases.getCanvas("pattern-workaround",at,pt),Et=bt.context,on=Z?Math.floor(C/f):0,we=X?Math.floor(M/m):0;for(let Ps=0;Ps<=on;Ps++)for(let is=0;is<=we;is++)Et.drawImage(H,at*Ps,pt*is,at,pt,0,0,at,pt);return{canvas:bt.canvas,scaleX:K.scale,scaleY:st.scale,offsetX:v,offsetY:A}}return{canvas:z.canvas,scaleX:ct.scale,scaleY:At.scale,offsetX:v,offsetY:A}}getSizeAndScale(t,e,n){const s=Math.max(Av.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*n);return a>=s?a=s:n=a/t,{scale:n,size:a}}clipBbox(t,e,n,s,a){const l=s-e,d=a-n;t.ctx.rect(e,n,l,d),ut.axialAlignedBoundingBox([e,n,s,a],Ue(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,a=t.current;switch(e){case eR.COLORED:const{fillStyle:l,strokeStyle:d}=this.ctx;s.fillStyle=a.fillColor=l,s.strokeStyle=a.strokeColor=d;break;case eR.UNCOLORED:s.fillStyle=s.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new v4(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,s,a){let l=n;s!==Pn.SHADING&&(l=ut.transform(l,e.baseTransform),this.matrix&&(l=ut.transform(l,this.matrix)));const d=this.createPatternCanvas(e,a);let h=new DOMMatrix(l);h=h.translate(d.offsetX,d.offsetY),h=h.scale(1/d.scaleX,1/d.scaleY);const f=t.createPattern(d.canvas,"repeat");return f.setTransform(h),f}};W(Av,"MAX_PATTERN_SIZE",3e3);let TE=Av;function az({src:o,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:a=4294967295,inverseDecode:l=!1}){const d=hn.isLittleEndian?4278190080:255,[h,f]=l?[a,d]:[d,a],m=n>>3,v=n&7,A=o.length;e=new Uint32Array(e.buffer);let E=0;for(let _=0;_<s;_++){for(const M=t+m;t<M;t++){const R=t<A?o[t]:255;e[E++]=R&128?f:h,e[E++]=R&64?f:h,e[E++]=R&32?f:h,e[E++]=R&16?f:h,e[E++]=R&8?f:h,e[E++]=R&4?f:h,e[E++]=R&2?f:h,e[E++]=R&1?f:h}if(v===0)continue;const C=t<A?o[t++]:255;for(let M=0;M<v;M++)e[E++]=C&1<<7-M?f:h}return{srcPos:t,destPos:E}}const nR=16,iR=100,lz=15,sR=10,bi=16,wb=new DOMMatrix,ji=new Float32Array(2),pd=new Float32Array([1/0,1/0,-1/0,-1/0]);function cz(o,t){if(o._removeMirroring)throw new Error("Context is already forwarding operations.");o.__originalSave=o.save,o.__originalRestore=o.restore,o.__originalRotate=o.rotate,o.__originalScale=o.scale,o.__originalTranslate=o.translate,o.__originalTransform=o.transform,o.__originalSetTransform=o.setTransform,o.__originalResetTransform=o.resetTransform,o.__originalClip=o.clip,o.__originalMoveTo=o.moveTo,o.__originalLineTo=o.lineTo,o.__originalBezierCurveTo=o.bezierCurveTo,o.__originalRect=o.rect,o.__originalClosePath=o.closePath,o.__originalBeginPath=o.beginPath,o._removeMirroring=()=>{o.save=o.__originalSave,o.restore=o.__originalRestore,o.rotate=o.__originalRotate,o.scale=o.__originalScale,o.translate=o.__originalTranslate,o.transform=o.__originalTransform,o.setTransform=o.__originalSetTransform,o.resetTransform=o.__originalResetTransform,o.clip=o.__originalClip,o.moveTo=o.__originalMoveTo,o.lineTo=o.__originalLineTo,o.bezierCurveTo=o.__originalBezierCurveTo,o.rect=o.__originalRect,o.closePath=o.__originalClosePath,o.beginPath=o.__originalBeginPath,delete o._removeMirroring},o.save=function(){t.save(),this.__originalSave()},o.restore=function(){t.restore(),this.__originalRestore()},o.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},o.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},o.transform=function(e,n,s,a,l,d){t.transform(e,n,s,a,l,d),this.__originalTransform(e,n,s,a,l,d)},o.setTransform=function(e,n,s,a,l,d){t.setTransform(e,n,s,a,l,d),this.__originalSetTransform(e,n,s,a,l,d)},o.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},o.rotate=function(e){t.rotate(e),this.__originalRotate(e)},o.clip=function(e){t.clip(e),this.__originalClip(e)},o.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},o.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},o.bezierCurveTo=function(e,n,s,a,l,d){t.bezierCurveTo(e,n,s,a,l,d),this.__originalBezierCurveTo(e,n,s,a,l,d)},o.rect=function(e,n,s,a){t.rect(e,n,s,a),this.__originalRect(e,n,s,a)},o.closePath=function(){t.closePath(),this.__originalClosePath()},o.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class uz{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function s0(o,t,e,n,s,a,l,d,h,f){const[m,v,A,E,_,C]=Ue(o);if(v===0&&A===0){const L=l*m+_,I=Math.round(L),U=d*E+C,P=Math.round(U),O=(l+h)*m+_,F=Math.abs(Math.round(O)-I)||1,Z=(d+f)*E+C,X=Math.abs(Math.round(Z)-P)||1;return o.setTransform(Math.sign(m),0,0,Math.sign(E),I,P),o.drawImage(t,e,n,s,a,0,0,F,X),o.setTransform(m,v,A,E,_,C),[F,X]}if(m===0&&E===0){const L=d*A+_,I=Math.round(L),U=l*v+C,P=Math.round(U),O=(d+f)*A+_,F=Math.abs(Math.round(O)-I)||1,Z=(l+h)*v+C,X=Math.abs(Math.round(Z)-P)||1;return o.setTransform(0,Math.sign(v),Math.sign(A),0,I,P),o.drawImage(t,e,n,s,a,0,0,X,F),o.setTransform(m,v,A,E,_,C),[X,F]}o.drawImage(t,e,n,s,a,l,d,h,f);const M=Math.hypot(m,v),R=Math.hypot(A,E);return[M*h,R*f]}class oR{constructor(t,e,n){W(this,"alphaIsShape",!1);W(this,"fontSize",0);W(this,"fontSizeScale",1);W(this,"textMatrix",null);W(this,"textMatrixScale",1);W(this,"fontMatrix",$b);W(this,"leading",0);W(this,"x",0);W(this,"y",0);W(this,"lineX",0);W(this,"lineY",0);W(this,"charSpacing",0);W(this,"wordSpacing",0);W(this,"textHScale",1);W(this,"textRenderingMode",ln.FILL);W(this,"textRise",0);W(this,"fillColor","#000000");W(this,"strokeColor","#000000");W(this,"patternFill",!1);W(this,"patternStroke",!1);W(this,"fillAlpha",1);W(this,"strokeAlpha",1);W(this,"lineWidth",1);W(this,"activeSMask",null);W(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=pd.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Pn.FILL,e=null){const n=this.minMax.slice();if(t===Pn.STROKE){e||se("Stroke bounding box must include transform."),ut.singularValueDecompose2dScale(e,ji);const s=ji[0]*this.lineWidth/2,a=ji[1]*this.lineWidth/2;n[0]-=s,n[1]-=a,n[2]+=s,n[3]+=a}return n}updateClipFromPath(){const t=ut.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(pd,0)}getClippedPathBoundingBox(t=Pn.FILL,e=null){return ut.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function rR(o,t){if(t instanceof ImageData){o.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%bi,a=(e-s)/bi,l=s===0?a:a+1,d=o.createImageData(n,bi);let h=0,f;const m=t.data,v=d.data;let A,E,_,C;if(t.kind===u0.GRAYSCALE_1BPP){const M=m.byteLength,R=new Uint32Array(v.buffer,0,v.byteLength>>2),L=R.length,I=n+7>>3,U=4294967295,P=hn.isLittleEndian?4278190080:255;for(A=0;A<l;A++){for(_=A<a?bi:s,f=0,E=0;E<_;E++){const O=M-h;let F=0;const Z=O>I?n:O*8-7,X=Z&-8;let nt=0,it=0;for(;F<X;F+=8)it=m[h++],R[f++]=it&128?U:P,R[f++]=it&64?U:P,R[f++]=it&32?U:P,R[f++]=it&16?U:P,R[f++]=it&8?U:P,R[f++]=it&4?U:P,R[f++]=it&2?U:P,R[f++]=it&1?U:P;for(;F<Z;F++)nt===0&&(it=m[h++],nt=128),R[f++]=it&nt?U:P,nt>>=1}for(;f<L;)R[f++]=0;o.putImageData(d,0,A*bi)}}else if(t.kind===u0.RGBA_32BPP){for(E=0,C=n*bi*4,A=0;A<a;A++)v.set(m.subarray(h,h+C)),h+=C,o.putImageData(d,0,E),E+=bi;A<l&&(C=n*s*4,v.set(m.subarray(h,h+C)),o.putImageData(d,0,E))}else if(t.kind===u0.RGB_24BPP)for(_=bi,C=n*_,A=0;A<l;A++){for(A>=a&&(_=s,C=n*_),f=0,E=C;E--;)v[f++]=m[h++],v[f++]=m[h++],v[f++]=m[h++],v[f++]=255;o.putImageData(d,0,A*bi)}else throw new Error(`bad image kind: ${t.kind}`)}function aR(o,t){if(t.bitmap){o.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%bi,a=(e-s)/bi,l=s===0?a:a+1,d=o.createImageData(n,bi);let h=0;const f=t.data,m=d.data;for(let v=0;v<l;v++){const A=v<a?bi:s;({srcPos:h}=az({src:f,srcPos:h,dest:m,width:n,height:A,nonBlackColor:0})),o.putImageData(d,0,v*bi)}}function Zf(o,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)o[n]!==void 0&&(t[n]=o[n]);o.setLineDash!==void 0&&(t.setLineDash(o.getLineDash()),t.lineDashOffset=o.lineDashOffset)}function o0(o){o.strokeStyle=o.fillStyle="#000000",o.fillRule="nonzero",o.globalAlpha=1,o.lineWidth=1,o.lineCap="butt",o.lineJoin="miter",o.miterLimit=10,o.globalCompositeOperation="source-over",o.font="10px sans-serif",o.setLineDash!==void 0&&(o.setLineDash([]),o.lineDashOffset=0);const{filter:t}=o;t!=="none"&&t!==""&&(o.filter="none")}function lR(o,t){if(t)return!0;ut.singularValueDecompose2dScale(o,ji);const e=Math.fround(Po.pixelRatio*_l.PDF_TO_CSS_UNITS);return ji[0]<=e&&ji[1]<=e}const dz=["butt","round","square"],hz=["miter","round","bevel"],fz={},cR={};var no,_E,CE,wE;const XT=class XT{constructor(t,e,n,s,a,{optionalContentConfig:l,markedContentStack:d=null},h,f,m){x(this,no);this.ctx=t,this.current=new oR(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=l,this.cachedCanvases=new uz(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(t,e,n=null){var s;return typeof e=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const a=this.ctx.canvas.width,l=this.ctx.canvas.height,d=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,l),this.ctx.fillStyle=d,n){const h=this.cachedCanvases.getCanvas("transparent",a,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Ue(this.compositeCtx))}this.ctx.save(),o0(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ue(this.ctx)}executeOperatorList(t,e,n,s,a){var R;const l=t.argsArray,d=t.fnArray;let h=e||0;const f=l.length;if(f===h)return h;const m=f-h>sR&&typeof n=="function",v=m?Date.now()+lz:0;let A=0;const E=this.commonObjs,_=this.objs;let C,M;for(;;){if(s!==void 0&&h===s.nextBreakPoint)return s.breakIt(h,n),h;if(!a||a(h))if(C=d[h],M=l[h]??null,C!==wp.dependency)M===null?this[C](h):this[C](h,...M);else for(const L of M){(R=this.dependencyTracker)==null||R.recordNamedData(L,h);const I=L.startsWith("g_")?E:_;if(!I.has(L))return I.get(L,n),h}if(h++,h===f)return h;if(m&&++A>sR){if(Date.now()>v)return n(),h;A=0}}}endDrawing(){N(this,no,_E).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),N(this,no,CE).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),d=n,h=s,f="prescale1",m,v;for(;a>2&&d>1||l>2&&h>1;){let A=d,E=h;a>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),a/=d/A),l>2&&h>1&&(E=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/E),m=this.cachedCanvases.getCanvas(f,A,E),v=m.context,v.clearRect(0,0,A,E),v.drawImage(t,0,0,d,h,0,0,A,E),t=m.canvas,d=A,h=E,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:d,paintHeight:h}}_createMaskCanvas(t,e){var nt,it;const n=this.ctx,{width:s,height:a}=e,l=this.current.fillColor,d=this.current.patternFill,h=Ue(n);let f,m,v,A;if((e.bitmap||e.data)&&e.count>1){const dt=e.bitmap||e.data.buffer;m=JSON.stringify(d?h:[h.slice(0,4),l]),f=this._cachedBitmapsMap.get(dt),f||(f=new Map,this._cachedBitmapsMap.set(dt,f));const gt=f.get(m);if(gt&&!d){const ct=Math.round(Math.min(h[0],h[2])+h[4]),At=Math.round(Math.min(h[1],h[3])+h[5]);return(nt=this.dependencyTracker)==null||nt.recordDependencies(t,ms.transformAndFill),{canvas:gt,offsetX:ct,offsetY:At}}v=gt}v||(A=this.cachedCanvases.getCanvas("maskCanvas",s,a),aR(A.context,e));let E=ut.transform(h,[1/s,0,0,-1/a,0,0]);E=ut.transform(E,[1,0,0,1,0,-a]);const _=pd.slice();ut.axialAlignedBoundingBox([0,0,s,a],E,_);const[C,M,R,L]=_,I=Math.round(R-C)||1,U=Math.round(L-M)||1,P=this.cachedCanvases.getCanvas("fillCanvas",I,U),O=P.context,F=C,Z=M;O.translate(-F,-Z),O.transform(...E),v||(v=this._scaleImage(A.canvas,lo(O)),v=v.img,f&&d&&f.set(m,v)),O.imageSmoothingEnabled=lR(Ue(O),e.interpolate),s0(O,v,0,0,v.width,v.height,0,0,s,a),O.globalCompositeOperation="source-in";const X=ut.transform(lo(O),[1,0,0,1,-F,-Z]);return O.fillStyle=d?l.getPattern(n,this,X,Pn.FILL,t):l,O.fillRect(0,0,s,a),f&&!d&&(this.cachedCanvases.delete("fillCanvas"),f.set(m,P.canvas)),(it=this.dependencyTracker)==null||it.recordDependencies(t,ms.transformAndFill),{canvas:P.canvas,offsetX:Math.round(F),offsetY:Math.round(Z)}}setLineWidth(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",t),this.ctx.lineCap=dz[e]}setLineJoin(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=hz[e]}setMiterLimit(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("dash",t);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,s,a,l,d;for(const[h,f]of e)switch(h){case"LW":this.setLineWidth(t,f);break;case"LC":this.setLineCap(t,f);break;case"LJ":this.setLineJoin(t,f);break;case"ML":this.setMiterLimit(t,f);break;case"D":this.setDash(t,f[0],f[1]);break;case"RI":this.setRenderingIntent(t,f);break;case"FL":this.setFlatness(t,f);break;case"Font":this.setFont(t,f[0],f[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=f;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=f;break;case"BM":(a=this.dependencyTracker)==null||a.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=f;break;case"SMask":(l=this.dependencyTracker)==null||l.recordSimpleData("SMask",t),this.current.activeSMask=f?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(d=this.dependencyTracker)==null||d.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(f);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(s,e,n);this.suspendedCtx=this.ctx;const l=this.ctx=a.context;l.setTransform(this.suspendedCtx.getTransform()),Zf(this.suspendedCtx,l),cz(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Zf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const a=s[0],l=s[1],d=s[2]-a,h=s[3]-l;d===0||h===0||(this.genericComposeSMask(e.context,n,d,h,e.subtype,e.backdrop,e.transferMap,a,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,a,l,d,h,f,m,v){let A=t.canvas,E=h-m,_=f-v;if(l)if(E<0||_<0||E+n>A.width||_+s>A.height){const M=this.cachedCanvases.getCanvas("maskExtension",n,s),R=M.context;R.drawImage(A,-E,-_),R.globalCompositeOperation="destination-atop",R.fillStyle=l,R.fillRect(0,0,n,s),R.globalCompositeOperation="source-over",A=M.canvas,E=_=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const M=new Path2D;M.rect(E,_,n,s),t.clip(M),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(E,_,n,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&d?e.filter=this.filterFactory.addAlphaFilter(d):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(d));const C=new Path2D;C.rect(h,f,n,s),e.clip(C),e.globalCompositeOperation="destination-in",e.drawImage(A,E,_,n,s,h,f,n,s),e.restore()}save(t){var n;this.inSMaskMode&&Zf(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(n=this.dependencyTracker)==null||n.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Zf(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,s,a,l,d){var h;(h=this.dependencyTracker)==null||h.recordIncrementalData("transform",t),this.ctx.transform(e,n,s,a,l,d),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,s){let[a]=n;if(!s){a||(a=n[0]=new Path2D),this[e](t,a);return}if(this.dependencyTracker!==null){const l=e===wp.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,s[0]-l,s[2]+l,s[1]-l,s[3]+l).recordDependencies(t,["transform"])}a instanceof Path2D||(a=n[0]=CN(a)),ut.axialAlignedBoundingBox(s,Ue(this.ctx),this.current.minMax),this[e](t,a),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){var l;const s=this.ctx,a=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&(a!=null&&a.getPattern)){const d=a.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=a.getPattern(s,this,lo(s),Pn.STROKE,t),d){const h=new Path2D;h.addPath(e,s.getTransform().invertSelf().multiplySelf(d)),e=h}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);(l=this.dependencyTracker)==null||l.recordDependencies(t,ms.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Pn.STROKE,Ue(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){var f,m,v;const s=this.ctx,a=this.current.fillColor,l=this.current.patternFill;let d=!1;if(l){const A=a.isModifyingCurrentTransform()?s.getTransform():null;if((f=this.dependencyTracker)==null||f.save(t),s.save(),s.fillStyle=a.getPattern(s,this,lo(s),Pn.FILL,t),A){const E=new Path2D;E.addPath(e,s.getTransform().invertSelf().multiplySelf(A)),e=E}d=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),(m=this.dependencyTracker)==null||m.recordDependencies(t,ms.fill),d&&(s.restore(),(v=this.dependencyTracker)==null||v.restore(t)),n&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),(n=this.dependencyTracker)==null||n.recordDependencies(t,ms.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=fz}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=cR}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;e!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",t),s.recordCloseMarker(t)}if(e!==void 0){const s=new Path2D,a=n.getTransform().invertSelf();for(const{transform:l,x:d,y:h,fontSize:f,path:m}of e)m&&s.addPath(m,new DOMMatrix(l).preMultiplySelf(a).translate(d,h).scale(f,-f));n.clip(s)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var v,A;(v=this.dependencyTracker)==null||v.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const s=this.commonObjs.get(e),a=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(a.fontMatrix=s.fontMatrix||$b,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&xt("Invalid font matrix for font "+e),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const l=s.loadedName||"sans-serif",d=((A=s.systemFontInfo)==null?void 0:A.css)||`"${l}", ${s.fallbackName}`;let h="normal";s.black?h="900":s.bold&&(h="bold");const f=s.italic?"italic":"normal";let m=n;n<nR?m=nR:n>iR&&(m=iR),this.current.fontSizeScale=n/m,this.ctx.font=`${f} ${h} ${m}px ${d}`}setTextRenderingMode(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,s,a,l){var R,L,I,U;const d=this.ctx,h=this.current,f=h.font,m=h.textRenderingMode,v=h.fontSize/h.fontSizeScale,A=m&ln.FILL_STROKE_MASK,E=!!(m&ln.ADD_TO_PATH_FLAG),_=h.patternFill&&!f.missingFile,C=h.patternStroke&&!f.missingFile;let M;if((f.disableFontFace||E||_||C)&&!f.missingFile&&(M=f.getPathGenerator(this.commonObjs,e)),M&&(f.disableFontFace||_||C)){d.save(),d.translate(n,s),d.scale(v,-v),(R=this.dependencyTracker)==null||R.recordCharacterBBox(t,d,f);let P;if(A===ln.FILL||A===ln.FILL_STROKE)if(a){P=d.getTransform(),d.setTransform(...a);const O=N(this,no,wE).call(this,M,P,a);d.fill(O)}else d.fill(M);if(A===ln.STROKE||A===ln.FILL_STROKE)if(l){P||(P=d.getTransform()),d.setTransform(...l);const{a:O,b:F,c:Z,d:X}=P,nt=ut.inverseTransform(l),it=ut.transform([O,F,Z,X,0,0],nt);ut.singularValueDecompose2dScale(it,ji),d.lineWidth*=Math.max(ji[0],ji[1])/v,d.stroke(N(this,no,wE).call(this,M,P,l))}else d.lineWidth/=v,d.stroke(M);d.restore()}else(A===ln.FILL||A===ln.FILL_STROKE)&&(d.fillText(e,n,s),(L=this.dependencyTracker)==null||L.recordCharacterBBox(t,d,f,v,n,s,()=>d.measureText(e))),(A===ln.STROKE||A===ln.FILL_STROKE)&&(this.dependencyTracker&&((I=this.dependencyTracker)==null||I.recordCharacterBBox(t,d,f,v,n,s,()=>d.measureText(e)).recordDependencies(t,ms.stroke)),d.strokeText(e,n,s));E&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ue(d),x:n,y:s,fontSize:v,path:M}),(U=this.dependencyTracker)==null||U.recordCharacterBBox(t,d,f,v,n,s))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return Mt(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var it,dt,gt,ct;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,ms.showText).resetBBox(t),this.current.textRenderingMode&ln.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,s=n.font;if(s.isType3Font){this.showType3Text(t,e),(it=this.dependencyTracker)==null||it.recordShowTextOperation(t);return}const a=n.fontSize;if(a===0){(dt=this.dependencyTracker)==null||dt.recordOperation(t);return}const l=this.ctx,d=n.fontSizeScale,h=n.charSpacing,f=n.wordSpacing,m=n.fontDirection,v=n.textHScale*m,A=e.length,E=s.vertical,_=E?1:-1,C=s.defaultVMetrics,M=a*n.fontMatrix[0],R=n.textRenderingMode===ln.FILL&&!s.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),m>0?l.scale(v,-1):l.scale(v,1);let L,I;const U=n.textRenderingMode&ln.FILL_STROKE_MASK,P=U===ln.FILL||U===ln.FILL_STROKE,O=U===ln.STROKE||U===ln.FILL_STROKE;if(P&&n.patternFill){l.save();const At=n.fillColor.getPattern(l,this,lo(l),Pn.FILL,t);L=Ue(l),l.restore(),l.fillStyle=At}if(O&&n.patternStroke){l.save();const At=n.strokeColor.getPattern(l,this,lo(l),Pn.STROKE,t);I=Ue(l),l.restore(),l.strokeStyle=At}let F=n.lineWidth;const Z=n.textMatrixScale;if(Z===0||F===0?O&&(F=this.getSinglePixelWidth()):F/=Z,d!==1&&(l.scale(d,d),F/=d),l.lineWidth=F,s.isInvalidPDFjsFont){const At=[];let z=0;for(const ot of e)At.push(ot.unicode),z+=ot.width;const Q=At.join("");if(l.fillText(Q,0,0),this.dependencyTracker!==null){const ot=l.measureText(Q);this.dependencyTracker.recordBBox(t,this.ctx,-ot.actualBoundingBoxLeft,ot.actualBoundingBoxRight,-ot.actualBoundingBoxAscent,ot.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=z*M*v,l.restore(),this.compose();return}let X=0,nt;for(nt=0;nt<A;++nt){const At=e[nt];if(typeof At=="number"){X+=_*At*a/1e3;continue}let z=!1;const Q=(At.isSpace?f:0)+h,ot=At.fontChar,Ct=At.accent;let Rt,H,K=At.width;if(E){const pt=At.vmetric||C,bt=-(At.vmetric?pt[1]:K*.5)*M,Et=pt[2]*M;K=pt?-pt[0]:K,Rt=bt/d,H=(X+Et)/d}else Rt=X/d,H=0;let st;if(s.remeasure&&K>0){st=l.measureText(ot);const pt=st.width*1e3/a*d;if(K<pt&&this.isFontSubpixelAAEnabled){const bt=K/pt;z=!0,l.save(),l.scale(bt,1),Rt/=bt}else K!==pt&&(Rt+=(K-pt)/2e3*a/d)}if(this.contentVisible&&(At.isInFont||s.missingFile)){if(R&&!Ct)l.fillText(ot,Rt,H),(gt=this.dependencyTracker)==null||gt.recordCharacterBBox(t,l,st?{bbox:null}:s,a/d,Rt,H,()=>st??l.measureText(ot));else if(this.paintChar(t,ot,Rt,H,L,I),Ct){const pt=Rt+a*Ct.offset.x/d,bt=H-a*Ct.offset.y/d;this.paintChar(t,Ct.fontChar,pt,bt,L,I)}}const at=E?K*M-Q*m:K*M+Q*m;X+=at,z&&l.restore()}E?n.y-=X:n.x+=X*v,l.restore(),this.compose(),(ct=this.dependencyTracker)==null||ct.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,s=this.current,a=s.font,l=s.fontSize,d=s.fontDirection,h=a.vertical?1:-1,f=s.charSpacing,m=s.wordSpacing,v=s.textHScale*d,A=s.fontMatrix||$b,E=e.length,_=s.textRenderingMode===ln.INVISIBLE;let C,M,R,L;if(_||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),s.textMatrix&&n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(v,d);const I=this.dependencyTracker;for(this.dependencyTracker=I?new sv(I,t):null,C=0;C<E;++C){if(M=e[C],typeof M=="number"){L=h*M*l/1e3,this.ctx.translate(L,0),s.x+=L*v;continue}const U=(M.isSpace?m:0)+f,P=a.charProcOperatorList[M.operatorListId];P?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...A),this.executeOperatorList(P),this.restore()):xt(`Type3 character "${M.operatorListId}" is not available.`);const O=[M.width,0];ut.applyTransform(O,A),R=O[0]*l+U,n.translate(R,0),s.x+=R*v}n.restore(),I&&(this.dependencyTracker=I)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,s,a,l,d){var f;const h=new Path2D;h.rect(s,a,l-s,d-a),this.ctx.clip(h),(f=this.dependencyTracker)==null||f.recordBBox(t,this.ctx,s,l,a,d).recordClipBox(t,this.ctx,s,l,a,d),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const s=this.baseTransform||Ue(this.ctx),a={createCanvasGraphics:(l,d)=>new XT(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new sv(this.dependencyTracker,d,!0):null)};n=new TE(e,this.ctx,a,s)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=rz(this.getObject(t,e)),this.cachedPatterns.set(e,s)),n&&(s.matrix=n),s}shadingFill(t,e){var l;if(!this.contentVisible)return;const n=this.ctx;this.save(t);const s=this._getPattern(t,e);n.fillStyle=s.getPattern(n,this,lo(n),Pn.SHADING,t);const a=lo(n);if(a){const{width:d,height:h}=n.canvas,f=pd.slice();ut.axialAlignedBoundingBox([0,0,d,h],a,f);const[m,v,A,E]=f;this.ctx.fillRect(m,v,A-m,E-v)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(l=this.dependencyTracker)==null||l.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,ms.transform).recordDependencies(t,ms.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){se("Should not call beginInlineImage")}beginImageData(){se("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){var s;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Ue(this.ctx),n)){ut.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[a,l,d,h]=n,f=new Path2D;f.rect(a,l,d-a,h-l),this.ctx.clip(f),(s=this.dependencyTracker)==null||s.recordClipBox(t,this.ctx,a,d,l,h),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var I;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||Bv("TODO: Support non-isolated groups."),e.knockout&&xt("Knockout groups not supported.");const s=Ue(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let a=pd.slice();ut.axialAlignedBoundingBox(e.bbox,Ue(n),a);const l=[0,0,n.canvas.width,n.canvas.height];a=ut.intersect(a,l)||[0,0,0,0];const d=Math.floor(a[0]),h=Math.floor(a[1]),f=Math.max(Math.ceil(a[2])-d,1),m=Math.max(Math.ceil(a[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,m]);let v="groupAt"+this.groupLevel;e.smask&&(v+="_smask_"+this.smaskCounter++%2);const A=this.cachedCanvases.getCanvas(v,f,m),E=A.context;E.translate(-d,-h),E.transform(...s);let _=new Path2D;const[C,M,R,L]=e.bbox;if(_.rect(C,M,R-C,L-M),e.matrix){const U=new Path2D;U.addPath(_,new DOMMatrix(e.matrix)),_=U}E.clip(_),e.smask&&this.smaskStack.push({canvas:A.canvas,context:E,offsetX:d,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(d,h),n.save()),Zf(n,E),this.ctx=E,(I=this.dependencyTracker)==null||I.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){var a;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(a=this.dependencyTracker)==null||a.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const l=Ue(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...l);const d=pd.slice();ut.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],l,d),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(d)}}beginAnnotation(t,e,n,s,a,l){if(N(this,no,_E).call(this),o0(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const d=n[2]-n[0],h=n[3]-n[1];if(l&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=d,n[3]=h,ut.singularValueDecompose2dScale(Ue(this.ctx),ji);const{viewportScale:f}=this,m=Math.ceil(d*this.outputScaleX*f),v=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(m,v);const{canvas:A,context:E}=this.annotationCanvas;this.annotationCanvasMap.set(e,A),this.annotationCanvas.savedCtx=this.ctx,this.ctx=E,this.ctx.save(),this.ctx.setTransform(ji[0],0,0,-ji[1],0,h*ji[1]),o0(this.ctx)}else{o0(this.ctx),this.endPath(t);const f=new Path2D;f.rect(n[0],n[1],d,h),this.ctx.clip(f)}}this.current=new oR(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...s),this.transform(t,...a)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),N(this,no,CE).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var d;if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const s=this.ctx,a=this._createMaskCanvas(t,e),l=a.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(l,a.offsetX,a.offsetY),(d=this.dependencyTracker)==null||d.resetBBox(t).recordBBox(t,this.ctx,a.offsetX,a.offsetX+l.width,a.offsetY,a.offsetY+l.height).recordOperation(t),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,s=0,a=0,l,d){var v,A,E;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const f=Ue(h);h.transform(n,s,a,l,0,0);const m=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,m.offsetX-f[4],m.offsetY-f[5]),(v=this.dependencyTracker)==null||v.resetBBox(t);for(let _=0,C=d.length;_<C;_+=2){const M=ut.transform(f,[n,s,a,l,d[_],d[_+1]]);h.drawImage(m.canvas,M[4],M[5]),(A=this.dependencyTracker)==null||A.recordBBox(t,this.ctx,M[4],M[4]+m.canvas.width,M[5],M[5]+m.canvas.height)}h.restore(),this.compose(),(E=this.dependencyTracker)==null||E.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var l,d,h;if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,a=this.current.patternFill;(l=this.dependencyTracker)==null||l.resetBBox(t).recordDependencies(t,ms.transformAndFill);for(const f of e){const{data:m,width:v,height:A,transform:E}=f,_=this.cachedCanvases.getCanvas("maskCanvas",v,A),C=_.context;C.save();const M=this.getObject(t,m,f);aR(C,M),C.globalCompositeOperation="source-in",C.fillStyle=a?s.getPattern(C,this,lo(n),Pn.FILL,t):s,C.fillRect(0,0,v,A),C.restore(),n.save(),n.transform(...E),n.scale(1,-1),s0(n,_.canvas,0,0,v,A,0,-1,1,1),(d=this.dependencyTracker)==null||d.recordBBox(t,n,0,v,0,A),n.restore()}this.compose(),(h=this.dependencyTracker)==null||h.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){xt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,s,a){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){xt("Dependent image isn't ready yet");return}const d=l.width,h=l.height,f=[];for(let m=0,v=a.length;m<v;m+=2)f.push({transform:[n,0,0,s,a[m],a[m+1]],x:0,y:0,w:d,h});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,a=this.cachedCanvases.getCanvas("inlineImage",n,s),l=a.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",a.canvas}paintInlineImageXObject(t,e){var f;if(!this.contentVisible)return;const n=e.width,s=e.height,a=this.ctx;this.save(t);const{filter:l}=a;l!=="none"&&l!==""&&(a.filter="none"),a.scale(1/n,-1/s);let d;if(e.bitmap)d=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)d=e;else{const v=this.cachedCanvases.getCanvas("inlineImage",n,s).context;rR(v,e),d=this.applyTransferMapsToCanvas(v)}const h=this._scaleImage(d,lo(a));a.imageSmoothingEnabled=lR(Ue(a),e.interpolate),(f=this.dependencyTracker)==null||f.resetBBox(t).recordBBox(t,a,0,n,-s,0).recordDependencies(t,ms.imageXObject).recordOperation(t),s0(a,h.img,0,0,h.paintWidth,h.paintHeight,0,-s,n,s),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var l,d,h;if(!this.contentVisible)return;const s=this.ctx;let a;if(e.bitmap)a=e.bitmap;else{const f=e.width,m=e.height,A=this.cachedCanvases.getCanvas("inlineImage",f,m).context;rR(A,e),a=this.applyTransferMapsToCanvas(A)}(l=this.dependencyTracker)==null||l.resetBBox(t);for(const f of n)s.save(),s.transform(...f.transform),s.scale(1,-1),s0(s,a,f.x,f.y,f.w,f.h,0,-1,1,1),(d=this.dependencyTracker)==null||d.recordBBox(t,s,0,1,-1,0),s.restore();(h=this.dependencyTracker)==null||h.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,ms.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){var l,d;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const a=this.ctx;this.pendingClip?(s||(this.pendingClip===cR?a.clip(e,"evenodd"):a.clip(e)),this.pendingClip=null,(l=this.dependencyTracker)==null||l.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(d=this.dependencyTracker)==null||d.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ue(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:a}=this.ctx.getTransform();let l,d;if(n===0&&s===0){const h=Math.abs(e),f=Math.abs(a);if(h===f)if(t===0)l=d=1/h;else{const m=h*t;l=d=m<1?1/m:1}else if(t===0)l=1/h,d=1/f;else{const m=h*t,v=f*t;l=m<1?1/m:1,d=v<1?1/v:1}}else{const h=Math.abs(e*a-n*s),f=Math.hypot(e,n),m=Math.hypot(s,a);if(t===0)l=m/h,d=f/h;else{const v=t*h;l=m>v?m/v:1,d=f>v?f/v:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=d}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:s}}=this,[a,l]=this.getScaleForStroking();if(a===l){n.lineWidth=(s||1)*a,n.stroke(t);return}const d=n.getLineDash();e&&n.save(),n.scale(a,l),wb.a=1/a,wb.d=1/l;const h=new Path2D;if(h.addPath(t,wb),d.length>0){const f=Math.max(a,l);n.setLineDash(d.map(m=>m/f)),n.lineDashOffset/=f}n.lineWidth=s||1,n.stroke(h),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};no=new WeakSet,_E=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},CE=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},wE=function(t,e,n){const s=new Path2D;return s.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),s};let bd=XT;for(const o in wp)bd.prototype[o]!==void 0&&(bd.prototype[wp[o]]=bd.prototype[o]);var vm,Am;class Lo{static get workerPort(){return u(this,vm)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");T(this,vm,t)}static get workerSrc(){return u(this,Am)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");T(this,Am,t)}}vm=new WeakMap,Am=new WeakMap,x(Lo,vm,null),x(Lo,Am,"");var oh,Sm;class pz{constructor({parsedData:t,rawData:e}){x(this,oh);x(this,Sm);T(this,oh,t),T(this,Sm,e)}getRaw(){return u(this,Sm)}get(t){return u(this,oh).get(t)??null}[Symbol.iterator](){return u(this,oh).entries()}}oh=new WeakMap,Sm=new WeakMap;const ld=Symbol("INTERNAL");var bm,Em,Tm,rh;class mz{constructor(t,{name:e,intent:n,usage:s,rbGroups:a}){x(this,bm,!1);x(this,Em,!1);x(this,Tm,!1);x(this,rh,!0);T(this,bm,!!(t&Zi.DISPLAY)),T(this,Em,!!(t&Zi.PRINT)),this.name=e,this.intent=n,this.usage=s,this.rbGroups=a}get visible(){if(u(this,Tm))return u(this,rh);if(!u(this,rh))return!1;const{print:t,view:e}=this.usage;return u(this,bm)?(e==null?void 0:e.viewState)!=="OFF":u(this,Em)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==ld&&se("Internal method `_setVisible` called."),T(this,Tm,n),T(this,rh,e)}}bm=new WeakMap,Em=new WeakMap,Tm=new WeakMap,rh=new WeakMap;var Za,ve,ah,lh,_m,xE;class gz{constructor(t,e=Zi.DISPLAY){x(this,_m);x(this,Za,null);x(this,ve,new Map);x(this,ah,null);x(this,lh,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,T(this,lh,t.order);for(const n of t.groups)u(this,ve).set(n.id,new mz(e,n));if(t.baseState==="OFF")for(const n of u(this,ve).values())n._setVisible(ld,!1);for(const n of t.on)u(this,ve).get(n)._setVisible(ld,!0);for(const n of t.off)u(this,ve).get(n)._setVisible(ld,!1);T(this,ah,this.getHash())}}isVisible(t){if(u(this,ve).size===0)return!0;if(!t)return Bv("Optional content group not defined."),!0;if(t.type==="OCG")return u(this,ve).has(t.id)?u(this,ve).get(t.id).visible:(xt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return N(this,_m,xE).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!u(this,ve).has(e))return xt(`Optional content group not found: ${e}`),!0;if(u(this,ve).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!u(this,ve).has(e))return xt(`Optional content group not found: ${e}`),!0;if(!u(this,ve).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!u(this,ve).has(e))return xt(`Optional content group not found: ${e}`),!0;if(!u(this,ve).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!u(this,ve).has(e))return xt(`Optional content group not found: ${e}`),!0;if(u(this,ve).get(e).visible)return!1}return!0}return xt(`Unknown optional content policy ${t.policy}.`),!0}return xt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var a;const s=u(this,ve).get(t);if(!s){xt(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const l of s.rbGroups)for(const d of l)d!==t&&((a=u(this,ve).get(d))==null||a._setVisible(ld,!1,!0));s._setVisible(ld,!!e,!0),T(this,Za,null)}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const a=u(this,ve).get(s);if(a)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!a.visible,e);break}}T(this,Za,null)}get hasInitialVisibility(){return u(this,ah)===null||this.getHash()===u(this,ah)}getOrder(){return u(this,ve).size?u(this,lh)?u(this,lh).slice():[...u(this,ve).keys()]:null}getGroup(t){return u(this,ve).get(t)||null}getHash(){if(u(this,Za)!==null)return u(this,Za);const t=new oI;for(const[e,n]of u(this,ve))t.update(`${e}:${n.visible}`);return T(this,Za,t.hexdigest())}[Symbol.iterator](){return u(this,ve).entries()}}Za=new WeakMap,ve=new WeakMap,ah=new WeakMap,lh=new WeakMap,_m=new WeakSet,xE=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const a=t[s];let l;if(Array.isArray(a))l=N(this,_m,xE).call(this,a);else if(u(this,ve).has(a))l=u(this,ve).get(a).visible;else return xt(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"};var Cm,wm;class Gv{constructor(t,e,n){x(this,Cm,null);x(this,wm,null);W(this,"_fullReader",null);W(this,"_rangeReaders",new Set);W(this,"_source",null);this._source=t,T(this,Cm,e),T(this,wm,n)}get _progressiveDataLength(){var t;return((t=this._fullReader)==null?void 0:t._loaded)??0}getFullReader(){return ie(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new(u(this,Cm))(this)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new(u(this,wm))(this,t,e);return this._rangeReaders.add(n),n}cancelAllRequests(t){var e;(e=this._fullReader)==null||e.cancel(t);for(const n of new Set(this._rangeReaders))n.cancel(t)}}Cm=new WeakMap,wm=new WeakMap;class zv{constructor(t){W(this,"onProgress",null);W(this,"_contentLength",0);W(this,"_filename",null);W(this,"_headersCapability",Promise.withResolvers());W(this,"_isRangeSupported",!1);W(this,"_isStreamingSupported",!1);W(this,"_loaded",0);W(this,"_stream",null);this._stream=t}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){se("Abstract method `read` called")}cancel(t){se("Abstract method `cancel` called")}}class Vv{constructor(t,e,n){W(this,"_stream",null);this._stream=t}async read(){se("Abstract method `read` called")}cancel(t){se("Abstract method `cancel` called")}}function uR(o){return o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer}var xm,ME;class yz extends Gv{constructor(e){super(e,vz,Az);x(this,xm);W(this,"_progressiveDone",!1);W(this,"_queuedChunks",[]);const{pdfDataRangeTransport:n}=e,{initialData:s,progressiveDone:a}=n;if((s==null?void 0:s.length)>0){const l=uR(s);this._queuedChunks.push(l)}this._progressiveDone=a,n.addRangeListener((l,d)=>{N(this,xm,ME).call(this,l,d)}),n.addProgressListener((l,d)=>{var h,f;d!==void 0&&((f=(h=this._fullReader)==null?void 0:h.onProgress)==null||f.call(h,{loaded:l,total:d}))}),n.addProgressiveReadListener(l=>{N(this,xm,ME).call(this,void 0,l)}),n.addProgressiveDoneListener(()=>{var l;(l=this._fullReader)==null||l.progressiveDone(),this._progressiveDone=!0}),n.transportReady()}getFullReader(){const e=super.getFullReader();return this._queuedChunks=null,e}getRangeReader(e,n){const s=super.getRangeReader(e,n);return s&&(s.onDone=()=>this._rangeReaders.delete(s),this._source.pdfDataRangeTransport.requestDataRange(e,n)),s}cancelAllRequests(e){super.cancelAllRequests(e),this._source.pdfDataRangeTransport.abort()}}xm=new WeakSet,ME=function(e,n){const s=uR(n);if(e===void 0)this._fullReader?this._fullReader._enqueue(s):this._queuedChunks.push(s);else{const a=this._rangeReaders.keys().find(l=>l._begin===e);ie(a,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),a._enqueue(s)}};class vz extends zv{constructor(e){super(e);W(this,"_done",!1);W(this,"_queuedChunks",null);W(this,"_requests",[]);const{pdfDataRangeTransport:n,disableRange:s,disableStream:a}=e._source,{length:l,contentDispositionFilename:d}=n;this._queuedChunks=e._queuedChunks||[];for(const h of this._queuedChunks)this._loaded+=h.byteLength;this._done=e._progressiveDone,this._contentLength=l,this._isStreamingSupported=!a,this._isRangeSupported=!s,UT(d)&&(this._filename=d),this._headersCapability.resolve()}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Az extends Vv{constructor(e,n,s){super(e,n,s);W(this,"onDone",null);W(this,"_begin",-1);W(this,"_done",!1);W(this,"_queuedChunk",null);W(this,"_requests",[]);this._begin=n}_enqueue(e){var n;if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,(n=this.onDone)==null||n.call(this)}}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){var n;this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onDone)==null||n.call(this)}}function Sz(o){let t=!0,e=n("filename\\*","i").exec(o);if(e){e=e[1];let m=d(e);return m=unescape(m),m=h(m),m=f(m),a(m)}if(e=l(o),e){const m=f(e);return a(m)}if(e=n("filename","i").exec(o),e){e=e[1];let m=d(e);return m=f(m),a(m)}function n(m,v){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function s(m,v){if(m){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const A=new TextDecoder(m,{fatal:!0}),E=Fv(v);v=A.decode(E),t=!1}catch{}}return v}function a(m){return t&&/[\x80-\xff]/.test(m)&&(m=s("utf-8",m),t&&(m=s("iso-8859-1",m))),m}function l(m){const v=[];let A;const E=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(A=E.exec(m))!==null;){let[,C,M,R]=A;if(C=parseInt(C,10),C in v){if(C===0)break;continue}v[C]=[M,R]}const _=[];for(let C=0;C<v.length&&C in v;++C){let[M,R]=v[C];R=d(R),M&&(R=unescape(R),C===0&&(R=h(R))),_.push(R)}return _.join("")}function d(m){if(m.startsWith('"')){const v=m.slice(1).split('\\"');for(let A=0;A<v.length;++A){const E=v[A].indexOf('"');E!==-1&&(v[A]=v[A].slice(0,E),v.length=A+1),v[A]=v[A].replaceAll(/\\(.)/g,"$1")}m=v.join('"')}return m}function h(m){const v=m.indexOf("'");if(v===-1)return m;const A=m.slice(0,v),_=m.slice(v+1).replace(/^[^']*'/,"");return s(A,_)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,A,E,_){if(E==="q"||E==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,M){return String.fromCharCode(parseInt(M,16))}),s(A,_);try{_=atob(_)}catch{}return s(A,_)})}return""}function yI(o,t){const e=new Headers;if(!o||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function qv(o){var t;return((t=URL.parse(o))==null?void 0:t.origin)??null}function vI({responseHeaders:o,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(o.get("Content-Length"),10);return!Number.isInteger(a)||(s.suggestedLength=a,a<=2*e)||n||!t||o.get("Accept-Ranges")!=="bytes"||(o.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function AI(o){const t=o.get("Content-Disposition");if(t){let e=Sz(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(UT(e))return e}return null}function Yv(o,t){return new Z0(`Unexpected server response (${o}) while retrieving PDF "${t}".`,o,o===404||o===0&&t.startsWith("file:"))}function SI(o,t){if(o!==t)throw new Error(`Expected range response-origin "${o}" to match "${t}".`)}function bI(o,t,e,n){return fetch(o,{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"})}function EI(o,t){if(o!==200&&o!==206)throw Yv(o,t)}function TI(o){return o instanceof Uint8Array?o.buffer:o instanceof ArrayBuffer?o:(xt(`getArrayBuffer - unexpected data format: ${o}`),new Uint8Array(o).buffer)}class bz extends Gv{constructor(e){super(e,Ez,Tz);W(this,"_responseOrigin",null);this.isHttp=/^https?:/i.test(e.url),this.headers=yI(this.isHttp,e.httpHeaders)}}class Ez extends zv{constructor(e){super(e);W(this,"_abortController",new AbortController);W(this,"_reader",null);const{disableRange:n,disableStream:s,length:a,rangeChunkSize:l,url:d,withCredentials:h}=e._source;this._contentLength=a,this._isStreamingSupported=!s,this._isRangeSupported=!n;const f=new Headers(e.headers);bI(d,f,h,this._abortController).then(m=>{e._responseOrigin=qv(m.url),EI(m.status,d),this._reader=m.body.getReader();const v=m.headers,{allowRangeRequests:A,suggestedLength:E}=vI({responseHeaders:v,isHttp:e.isHttp,rangeChunkSize:l,disableRange:n});this._isRangeSupported=A,this._contentLength=E||this._contentLength,this._filename=AI(v),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Tl("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){var s;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:TI(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}class Tz extends Vv{constructor(e,n,s){super(e,n,s);W(this,"_abortController",new AbortController);W(this,"_readCapability",Promise.withResolvers());W(this,"_reader",null);const{url:a,withCredentials:l}=e._source,d=new Headers(e.headers);d.append("Range",`bytes=${n}-${s-1}`),bI(a,d,l,this._abortController).then(h=>{const f=qv(h.url);SI(f,e._responseOrigin),EI(h.status,a),this._reader=h.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:{value:TI(e),done:!1}}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}const xb=200,dR=206;function _z(o){return typeof o!="string"?o:Fv(o).buffer}var _o,Kh,_I,CI;class Cz extends Gv{constructor(e){super(e,wz,xz);x(this,Kh);x(this,_o,new WeakMap);W(this,"_responseOrigin",null);this.url=e.url,this.isHttp=/^https?:/i.test(this.url),this.headers=yI(this.isHttp,e.httpHeaders)}_request(e){const n=new XMLHttpRequest,s={validateStatus:null,onHeadersReceived:e.onHeadersReceived,onDone:e.onDone,onError:e.onError,onProgress:e.onProgress};u(this,_o).set(n,s),n.open("GET",this.url),n.withCredentials=this._source.withCredentials;for(const[a,l]of this.headers)n.setRequestHeader(a,l);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.validateStatus=a=>a===dR||a===xb):s.validateStatus=a=>a===xb,n.responseType="arraybuffer",ie(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>e.onError(n.status),n.onreadystatechange=N(this,Kh,CI).bind(this,n),n.onprogress=N(this,Kh,_I).bind(this,n),n.send(null),n}_abortRequest(e){u(this,_o).has(e)&&(u(this,_o).delete(e),e.abort())}getRangeReader(e,n){const s=super.getRangeReader(e,n);return s&&(s.onClosed=()=>this._rangeReaders.delete(s)),s}}_o=new WeakMap,Kh=new WeakSet,_I=function(e,n){var a;const s=u(this,_o).get(e);(a=s==null?void 0:s.onProgress)==null||a.call(s,n)},CI=function(e,n){const s=u(this,_o).get(e);if(!s||(e.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),e.readyState!==4)||!u(this,_o).has(e))return;if(u(this,_o).delete(e),e.status===0&&this.isHttp){s.onError(e.status);return}const a=e.status||xb;if(!s.validateStatus(a)){s.onError(e.status);return}const l=_z(e.response);if(a===dR){const d=e.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(d)?s.onDone(l):(xt('Missing or invalid "Content-Range" header.'),s.onError(0))}else l?s.onDone(l):s.onError(e.status)};var Uo,wI,xI,MI,RI;class wz extends zv{constructor(e){super(e);x(this,Uo);W(this,"_cachedChunks",[]);W(this,"_done",!1);W(this,"_requests",[]);W(this,"_storedError",null);const{length:n}=e._source;this._contentLength=n,this._fullRequestXhr=e._request({onHeadersReceived:N(this,Uo,wI).bind(this),onDone:N(this,Uo,xI).bind(this),onError:N(this,Uo,MI).bind(this),onProgress:N(this,Uo,RI).bind(this)})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}Uo=new WeakSet,wI=function(){const e=this._stream,{disableRange:n,rangeChunkSize:s}=e._source,a=this._fullRequestXhr;e._responseOrigin=qv(a.responseURL);const l=a.getAllResponseHeaders(),d=new Headers(l?l.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(m=>{const[v,...A]=m.split(": ");return[v,A.join(": ")]}):[]),{allowRangeRequests:h,suggestedLength:f}=vI({responseHeaders:d,isHttp:e.isHttp,rangeChunkSize:s,disableRange:n});h&&(this._isRangeSupported=!0),this._contentLength=f||this._contentLength,this._filename=AI(d),this._isRangeSupported&&e._abortRequest(a),this._headersCapability.resolve()},xI=function(e){if(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._cachedChunks.push(e),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}},MI=function(e){this._storedError=Yv(e,this._stream.url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0},RI=function(e){var n;(n=this.onProgress)==null||n.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})};var Qr,NI,II,RE;class xz extends Vv{constructor(e,n,s){super(e,n,s);x(this,Qr);W(this,"onClosed",null);W(this,"_done",!1);W(this,"_queuedChunk",null);W(this,"_requests",[]);W(this,"_storedError",null);this._requestXhr=e._request({begin:n,end:s,onHeadersReceived:N(this,Qr,NI).bind(this),onDone:N(this,Qr,II).bind(this),onError:N(this,Qr,RE).bind(this),onProgress:null})}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){var n;this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),(n=this.onClosed)==null||n.call(this)}}Qr=new WeakSet,NI=function(){var n;const e=qv((n=this._requestXhr)==null?void 0:n.responseURL);try{SI(e,this._stream._responseOrigin)}catch(s){this._storedError=s,N(this,Qr,RE).call(this,0)}},II=function(e){var n;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onClosed)==null||n.call(this)},RE=function(e){this._storedError??(this._storedError=Yv(e,this._stream.url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null};const Mz=/^[a-z][a-z0-9\-+.]+:/i;function Rz(o){if(Mz.test(o))return new URL(o);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(o))}function DI(o){const{Readable:t}=process.getBuiltinModule("stream");return typeof t.toWeb=="function"?t.toWeb(o):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(o)}function kI(o){return o instanceof Uint8Array?o.buffer:o instanceof ArrayBuffer?o:(xt(`getArrayBuffer - unexpected data format: ${o}`),new Uint8Array(o).buffer)}class Nz extends Gv{constructor(t){super(t,Iz,Dz),this.url=Rz(t.url),ie(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class Iz extends zv{constructor(e){super(e);W(this,"_reader",null);const{disableRange:n,disableStream:s,length:a,rangeChunkSize:l}=e._source;this._contentLength=a,this._isStreamingSupported=!s,this._isRangeSupported=!n;const d=e.url,h=process.getBuiltinModule("fs");h.promises.lstat(d).then(f=>{const m=h.createReadStream(d),v=DI(m);this._reader=v.getReader();const{size:A}=f;A<=2*l&&(this._isRangeSupported=!1),this._contentLength=A,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Tl("Streaming is disabled.")),this._headersCapability.resolve()}).catch(f=>{f.code==="ENOENT"&&(f=Yv(0,d.href)),this._headersCapability.reject(f)})}async read(){var s;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:kI(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e)}}class Dz extends Vv{constructor(e,n,s){super(e,n,s);W(this,"_readCapability",Promise.withResolvers());W(this,"_reader",null);const a=e.url,l=process.getBuiltinModule("fs");try{const d=l.createReadStream(a,{start:n,end:s-1}),h=DI(d);this._reader=h.getReader(),this._readCapability.resolve()}catch(d){this._readCapability.reject(d)}}async read(){await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:{value:kI(e),done:!1}}cancel(e){var n;(n=this._reader)==null||n.cancel(e)}}const jf=Symbol("INITIAL_DATA");var Oi,Mm,NE;class LI{constructor(){x(this,Mm);x(this,Oi,Object.create(null))}get(t,e=null){if(e){const s=N(this,Mm,NE).call(this,t);return s.promise.then(()=>e(s.data)),null}const n=u(this,Oi)[t];if(!n||n.data===jf)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=u(this,Oi)[t];return!!e&&e.data!==jf}delete(t){const e=u(this,Oi)[t];return!e||e.data===jf?!1:(delete u(this,Oi)[t],!0)}resolve(t,e=null){const n=N(this,Mm,NE).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in u(this,Oi)){const{data:n}=u(this,Oi)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}T(this,Oi,Object.create(null))}*[Symbol.iterator](){for(const t in u(this,Oi)){const{data:e}=u(this,Oi)[t];e!==jf&&(yield[t,e])}}}Oi=new WeakMap,Mm=new WeakSet,NE=function(t){var e;return(e=u(this,Oi))[t]||(e[t]={...Promise.withResolvers(),data:jf})};const kz=1e5,hR=30;var mR,ja,yi,Rm,Nm,Mc,xr,Im,Dm,Rc,km,ch,tl,uh,Lm,dh,Nc,Pm,Um,hh,Ic,Om,fh,ph,Zr,PI,UI,IE,ns,b0,DE,OI,BI;const Mn=class Mn{constructor({textContentSource:t,container:e,viewport:n}){x(this,Zr);x(this,ja,Promise.withResolvers());x(this,yi,null);x(this,Rm,!1);x(this,Nm,!!((mR=globalThis.FontInspector)!=null&&mR.enabled));x(this,Mc,null);x(this,xr,null);x(this,Im,0);x(this,Dm,0);x(this,Rc,null);x(this,km,null);x(this,ch,0);x(this,tl,0);x(this,uh,Object.create(null));x(this,Lm,[]);x(this,dh,null);x(this,Nc,[]);x(this,Pm,new WeakMap);x(this,Um,null);var h;if(t instanceof ReadableStream)T(this,dh,t);else if(typeof t=="object")T(this,dh,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');T(this,yi,T(this,km,e)),T(this,tl,n.scale*Po.pixelRatio),T(this,ch,n.rotation),T(this,xr,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:a,pageX:l,pageY:d}=n.rawDims;T(this,Um,[1,0,0,-1,-l,d+a]),T(this,Dm,s),T(this,Im,a),N(h=Mn,ns,OI).call(h),e.style.setProperty("--min-font-size",u(Mn,fh)),du(e,n),u(this,ja).promise.finally(()=>{u(Mn,ph).delete(this),T(this,xr,null),T(this,uh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=hn.platform;return Mt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{u(this,Rc).read().then(({value:e,done:n})=>{if(n){u(this,ja).resolve();return}u(this,Mc)??T(this,Mc,e.lang),Object.assign(u(this,uh),e.styles),N(this,Zr,PI).call(this,e.items),t()},u(this,ja).reject)};return T(this,Rc,u(this,dh).getReader()),u(Mn,ph).add(this),t(),u(this,ja).promise}update({viewport:t,onBefore:e=null}){var a;const n=t.scale*Po.pixelRatio,s=t.rotation;if(s!==u(this,ch)&&(e==null||e(),T(this,ch,s),du(u(this,km),{rotation:s})),n!==u(this,tl)){e==null||e(),T(this,tl,n);const l={div:null,properties:null,ctx:N(a=Mn,ns,b0).call(a,u(this,Mc))};for(const d of u(this,Nc))l.properties=u(this,Pm).get(d),l.div=d,N(this,Zr,IE).call(this,l)}}cancel(){var e;const t=new Tl("TextLayer task cancelled.");(e=u(this,Rc))==null||e.cancel(t).catch(()=>{}),T(this,Rc,null),u(this,ja).reject(t)}get textDivs(){return u(this,Nc)}get textContentItemsStr(){return u(this,Lm)}static cleanup(){if(!(u(this,ph).size>0)){u(this,hh).clear();for(const{canvas:t}of u(this,Ic).values())t.remove();u(this,Ic).clear()}}};ja=new WeakMap,yi=new WeakMap,Rm=new WeakMap,Nm=new WeakMap,Mc=new WeakMap,xr=new WeakMap,Im=new WeakMap,Dm=new WeakMap,Rc=new WeakMap,km=new WeakMap,ch=new WeakMap,tl=new WeakMap,uh=new WeakMap,Lm=new WeakMap,dh=new WeakMap,Nc=new WeakMap,Pm=new WeakMap,Um=new WeakMap,hh=new WeakMap,Ic=new WeakMap,Om=new WeakMap,fh=new WeakMap,ph=new WeakMap,Zr=new WeakSet,PI=function(t){var s,a;if(u(this,Rm))return;(a=u(this,xr)).ctx??(a.ctx=N(s=Mn,ns,b0).call(s,u(this,Mc)));const e=u(this,Nc),n=u(this,Lm);for(const l of t){if(e.length>kz){xt("Ignoring additional textDivs for performance reasons."),T(this,Rm,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const d=u(this,yi);T(this,yi,document.createElement("span")),u(this,yi).classList.add("markedContent"),l.id&&u(this,yi).setAttribute("id",`${l.id}`),l.tag==="Artifact"&&(u(this,yi).ariaHidden=!0),d.append(u(this,yi))}else l.type==="endMarkedContent"&&T(this,yi,u(this,yi).parentNode);continue}n.push(l.str),N(this,Zr,UI).call(this,l)}},UI=function(t){var _;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};u(this,Nc).push(e);const s=ut.transform(u(this,Um),t.transform);let a=Math.atan2(s[1],s[0]);const l=u(this,uh)[t.fontName];l.vertical&&(a+=Math.PI/2);let d=u(this,Nm)&&l.fontSubstitution||l.fontFamily;d=Mn.fontFamilyMap.get(d)||d;const h=Math.hypot(s[2],s[3]),f=h*N(_=Mn,ns,BI).call(_,d,l,u(this,Mc));let m,v;a===0?(m=s[4],v=s[5]-f):(m=s[4]+f*Math.sin(a),v=s[5]-f*Math.cos(a));const A=e.style;A.left=`${(100*m/u(this,Dm)).toFixed(2)}%`,A.top=`${(100*v/u(this,Im)).toFixed(2)}%`,A.setProperty("--font-height",`${h.toFixed(2)}px`),A.fontFamily=d,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,u(this,Nm)&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),a!==0&&(n.angle=a*(180/Math.PI));let E=!1;if(t.str.length>1)E=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const C=Math.abs(t.transform[0]),M=Math.abs(t.transform[3]);C!==M&&Math.max(C,M)/Math.min(C,M)>1.5&&(E=!0)}if(E&&(n.canvasWidth=l.vertical?t.height:t.width),u(this,Pm).set(e,n),u(this,xr).div=e,u(this,xr).properties=n,N(this,Zr,IE).call(this,u(this,xr)),n.hasText&&u(this,yi).append(e),n.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),u(this,yi).append(C)}},IE=function(t){var l;const{div:e,properties:n,ctx:s}=t,{style:a}=e;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:d}=a,{canvasWidth:h,fontSize:f}=n;N(l=Mn,ns,DE).call(l,s,f*u(this,tl),d);const{width:m}=s.measureText(e.textContent);m>0&&a.setProperty("--scale-x",h*u(this,tl)/m)}n.angle!==0&&a.setProperty("--rotate",`${n.angle}deg`)},ns=new WeakSet,b0=function(t=null){let e=u(this,Ic).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,Ic).set(t,e),u(this,Om).set(e,{size:0,family:""})}return e},DE=function(t,e,n){const s=u(this,Om).get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)},OI=function(){if(u(this,fh)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),T(this,fh,t.getBoundingClientRect().height),t.remove()},BI=function(t,e,n){const s=u(this,hh).get(t);if(s)return s;const a=N(this,ns,b0).call(this,n);a.canvas.width=a.canvas.height=hR,N(this,ns,DE).call(this,a,hR,t);const l=a.measureText(""),d=l.fontBoundingBoxAscent,h=Math.abs(l.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let f=.8;return d?f=d/(d+h):(hn.platform.isFirefox&&xt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),u(this,hh).set(t,f),f},x(Mn,ns),x(Mn,hh,new Map),x(Mn,Ic,new Map),x(Mn,Om,new WeakMap),x(Mn,fh,null),x(Mn,ph,new Set);let Rp=Mn;const Lz=100;function FI(o={}){typeof o=="string"||o instanceof URL?o={url:o}:(o instanceof ArrayBuffer||ArrayBuffer.isView(o))&&(o={data:o});const t=new kE,{docId:e}=t,n=o.url?z4(o.url):null,s=o.data?V4(o.data):null,a=o.httpHeaders||null,l=o.withCredentials===!0,d=o.password??null,h=o.range instanceof HI?o.range:null,f=Number.isInteger(o.rangeChunkSize)&&o.rangeChunkSize>0?o.rangeChunkSize:2**16;let m=o.worker instanceof Np?o.worker:null;const v=o.verbosity,A=typeof o.docBaseUrl=="string"&&!Hv(o.docBaseUrl)?o.docBaseUrl:null,E=t0(o.cMapUrl),_=o.cMapPacked!==!1,C=o.CMapReaderFactory||(ti?Q4:WM),M=t0(o.iccUrl),R=t0(o.standardFontDataUrl),L=o.StandardFontDataFactory||(ti?Z4:QM),I=t0(o.wasmUrl),U=o.WasmFactory||(ti?j4:ZM),P=o.stopAtErrors!==!0,O=Number.isInteger(o.maxImageSize)&&o.maxImageSize>-1?o.maxImageSize:-1,F=o.isEvalSupported!==!1,Z=typeof o.isOffscreenCanvasSupported=="boolean"?o.isOffscreenCanvasSupported:!ti,X=typeof o.isImageDecoderSupported=="boolean"?o.isImageDecoderSupported:!ti&&(hn.platform.isFirefox||!globalThis.chrome),nt=Number.isInteger(o.canvasMaxAreaInBytes)?o.canvasMaxAreaInBytes:-1,it=typeof o.disableFontFace=="boolean"?o.disableFontFace:ti,dt=o.fontExtraProperties===!0,gt=o.enableXfa===!0,ct=o.ownerDocument||globalThis.document,At=o.disableRange===!0,z=o.disableStream===!0,Q=o.disableAutoFetch===!0,ot=o.pdfBug===!0,Ct=o.CanvasFactory||(ti?W4:X4),Rt=o.FilterFactory||(ti?K4:J4),H=o.enableHWA===!0,K=o.useWasm!==!1,st=h?h.length:o.length??NaN,at=typeof o.useSystemFonts=="boolean"?o.useSystemFonts:!ti&&!it,pt=typeof o.useWorkerFetch=="boolean"?o.useWorkerFetch:!!(C===WM&&L===QM&&U===ZM&&E&&R&&I&&ip(E,document.baseURI)&&ip(R,document.baseURI)&&ip(I,document.baseURI)),bt=null;m4(v);const Et={canvasFactory:new Ct({ownerDocument:ct,enableHWA:H}),filterFactory:new Rt({docId:e,ownerDocument:ct}),cMapReaderFactory:pt?null:new C({baseUrl:E,isCompressed:_}),standardFontDataFactory:pt?null:new L({baseUrl:R}),wasmFactory:pt?null:new U({baseUrl:I})};m||(m=Np.create({verbosity:v,port:Lo.workerPort}),t._worker=m);const on={docId:e,apiVersion:"5.4.624",data:s,password:d,disableAutoFetch:Q,rangeChunkSize:f,length:st,docBaseUrl:A,enableXfa:gt,evaluatorOptions:{maxImageSize:O,disableFontFace:it,ignoreErrors:P,isEvalSupported:F,isOffscreenCanvasSupported:Z,isImageDecoderSupported:X,canvasMaxAreaInBytes:nt,fontExtraProperties:dt,useSystemFonts:at,useWasm:K,useWorkerFetch:pt,cMapUrl:E,iccUrl:M,standardFontDataUrl:R,wasmUrl:I}},we={ownerDocument:ct,pdfBug:ot,styleElement:bt,enableHWA:H,loadingParams:{disableAutoFetch:Q,enableXfa:gt}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Ps=m.messageHandler.sendWithPromise("GetDocRequest",on,s?[s.buffer]:null);let is;if(h)is=new yz({pdfDataRangeTransport:h,disableRange:At,disableStream:z});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");const xl=ip(n)?bz:ti?Nz:Cz;is=new xl({url:n,length:st,httpHeaders:a,withCredentials:l,rangeChunkSize:f,disableRange:At,disableStream:z})}return Ps.then(xl=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const jh=new dp(e,xl,m.port),Fo=new Oz(jh,t,is,we,Et);t._transport=Fo,jh.send("Ready",null)})}).catch(t._capability.reject),t}var Sv;const bv=class bv{constructor(){W(this,"_capability",Promise.withResolvers());W(this,"_transport",null);W(this,"_worker",null);W(this,"docId",`d${an(bv,Sv)._++}`);W(this,"destroyed",!1);W(this,"onPassword",null);W(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(a){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,a}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Sv=new WeakMap,x(bv,Sv,0);let kE=bv;var Dc,Bm,Fm,Hm,Gm;class HI{constructor(t,e,n=!1,s=null){x(this,Dc,Promise.withResolvers());x(this,Bm,[]);x(this,Fm,[]);x(this,Hm,[]);x(this,Gm,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(t){u(this,Gm).push(t)}addProgressListener(t){u(this,Hm).push(t)}addProgressiveReadListener(t){u(this,Fm).push(t)}addProgressiveDoneListener(t){u(this,Bm).push(t)}onDataRange(t,e){for(const n of u(this,Gm))n(t,e)}onDataProgress(t,e){u(this,Dc).promise.then(()=>{for(const n of u(this,Hm))n(t,e)})}onDataProgressiveRead(t){u(this,Dc).promise.then(()=>{for(const e of u(this,Fm))e(t)})}onDataProgressiveDone(){u(this,Dc).promise.then(()=>{for(const t of u(this,Bm))t()})}transportReady(){u(this,Dc).resolve()}requestDataRange(t,e){se("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Dc=new WeakMap,Bm=new WeakMap,Fm=new WeakMap,Hm=new WeakMap,Gm=new WeakMap;class Pz{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Mt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Mr,zm,kc,gp;class Uz{constructor(t,e,n,s=!1){x(this,kc);x(this,Mr,!1);x(this,zm,Mp.instance);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new VM:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new LI,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(t){this._pageIndex=t-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:a=!1}={}){return new xg({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Mt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:s="display",annotationMode:a=xa.ENABLE,transform:l=null,background:d=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:m=null,printAnnotationStorage:v=null,isEditing:A=!1,recordOperations:E=!1,operationsFilter:_=null}){var X,nt,it;(X=this._stats)==null||X.time("Overall");const C=this._transport.getRenderingIntent(s,a,v,A),{renderingIntent:M,cacheKey:R}=C;T(this,Mr,!1),h||(h=this._transport.getOptionalContentConfig(M));let L=this._intentStates.get(R);L||(L=Object.create(null),this._intentStates.set(R,L)),L.streamReaderCancelTimeout&&(clearTimeout(L.streamReaderCancelTimeout),L.streamReaderCancelTimeout=null);const I=!!(M&Zi.PRINT);L.displayReadyCapability||(L.displayReadyCapability=Promise.withResolvers(),L.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(nt=this._stats)==null||nt.time("Page Request"),this._pumpOperatorList(C));const U=!!(this._pdfBug&&((it=globalThis.StepperManager)!=null&&it.enabled)),P=!this.recordedBBoxes&&(E||U),O=dt=>{var gt,ct;if(L.renderTasks.delete(F),P){const At=(gt=F.gfx)==null?void 0:gt.dependencyTracker.take();At&&(F.stepper&&F.stepper.setOperatorBBoxes(At,F.gfx.dependencyTracker.takeDebugMetadata()),E&&(this.recordedBBoxes=At))}I&&T(this,Mr,!0),N(this,kc,gp).call(this),dt?(F.capability.reject(dt),this._abortOperatorList({intentState:L,reason:dt instanceof Error?dt:new Error(dt)})):F.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(ct=globalThis.Stats)!=null&&ct.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},F=new LE({callback:O,params:{canvas:e,canvasContext:t,dependencyTracker:P?new ez(e,L.operatorList.length,U):null,viewport:n,transform:l,background:d},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:L.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!I,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:_});(L.renderTasks||(L.renderTasks=new Set)).add(F);const Z=F.task;return Promise.all([L.displayReadyCapability.promise,h]).then(([dt,gt])=>{var ct;if(this.destroyed){O();return}if((ct=this._stats)==null||ct.time("Rendering"),!(gt.renderingIntent&M))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");F.initializeGraphics({transparency:dt,optionalContentConfig:gt}),F.operatorListChanged()}).catch(O),Z}getOperatorList({intent:t="display",annotationMode:e=xa.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var f;function a(){d.operatorList.lastChunk&&(d.opListReadCapability.resolve(d.operatorList),d.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(t,e,n,s,!0);let d=this._intentStates.get(l.cacheKey);d||(d=Object.create(null),this._intentStates.set(l.cacheKey,d));let h;return d.opListReadCapability||(h=Object.create(null),h.operatorListChanged=a,d.opListReadCapability=Promise.withResolvers(),(d.renderTasks||(d.renderTasks=new Set)).add(h),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(l)),d.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:u(this,zm).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>xp.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function a(){l.read().then(function({value:h,done:f}){if(f){n(d);return}d.lang??(d.lang=h.lang),Object.assign(d.styles,h.styles),d.items.push(...h.items),a()},s)}const l=e.getReader(),d={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),T(this,Mr,!1),Promise.all(t)}cleanup(t=!1){T(this,Mr,!0);const e=N(this,kc,gp).call(this);return t&&e&&this._stats&&(this._stats=new VM),e}_startRenderPage(t,e){var s,a;const n=this._intentStates.get(e);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(a=n.displayReadyCapability)==null||a.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&N(this,kc,gp).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:a,transfer:l}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:u(this,zm).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:s},l).getReader(),f=this._intentStates.get(e);f.streamReader=h;const m=()=>{h.read().then(({value:v,done:A})=>{if(A){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(v,f),m())},v=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const A of f.renderTasks)A.operatorListChanged();N(this,kc,gp).call(this)}if(f.displayReadyCapability)f.displayReadyCapability.reject(v);else if(f.opListReadCapability)f.opListReadCapability.reject(v);else throw v}})};m()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof PT){let s=Lz;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Tl(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,a]of this._intentStates)if(a===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Mr=new WeakMap,zm=new WeakMap,kc=new WeakSet,gp=function(){if(!u(this,Mr)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),T(this,Mr,!1),!0};var el,$s,Rr,Lc,Ev,Pc,Uc,ei,E0,GI,zI,yp,mh,T0;const Ie=class Ie{constructor({name:t=null,port:e=null,verbosity:n=g4()}={}){x(this,ei);x(this,el,Promise.withResolvers());x(this,$s,null);x(this,Rr,null);x(this,Lc,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(u(Ie,Uc).has(e))throw new Error("Cannot use more than one PDFWorker per port.");u(Ie,Uc).set(e,this),N(this,ei,GI).call(this,e)}else N(this,ei,zI).call(this)}get promise(){return u(this,el).promise}get port(){return u(this,Rr)}get messageHandler(){return u(this,$s)}destroy(){var t,e;this.destroyed=!0,(t=u(this,Lc))==null||t.terminate(),T(this,Lc,null),u(Ie,Uc).delete(u(this,Rr)),T(this,Rr,null),(e=u(this,$s))==null||e.destroy(),T(this,$s,null)}static create(t){const e=u(this,Uc).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ie(t)}static get workerSrc(){if(Lo.workerSrc)return Lo.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Mt(this,"_setupFakeWorkerGlobal",(async()=>u(this,mh,T0)?u(this,mh,T0):(await import(this.workerSrc)).WorkerMessageHandler)())}};el=new WeakMap,$s=new WeakMap,Rr=new WeakMap,Lc=new WeakMap,Ev=new WeakMap,Pc=new WeakMap,Uc=new WeakMap,ei=new WeakSet,E0=function(){u(this,el).resolve(),u(this,$s).send("configure",{verbosity:this.verbosity})},GI=function(t){T(this,Rr,t),T(this,$s,new dp("main","worker",t)),u(this,$s).on("ready",()=>{}),N(this,ei,E0).call(this)},zI=function(){if(u(Ie,Pc)||u(Ie,mh,T0)){N(this,ei,yp).call(this);return}let{workerSrc:t}=Ie;try{Ie._isSameOrigin(window.location,t)||(t=Ie._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new dp("main","worker",e),s=()=>{a.abort(),n.destroy(),e.terminate(),this.destroyed?u(this,el).reject(new Error("Worker was destroyed")):N(this,ei,yp).call(this)},a=new AbortController;e.addEventListener("error",()=>{u(this,Lc)||s()},{signal:a.signal}),n.on("test",d=>{if(a.abort(),this.destroyed||!d){s();return}T(this,$s,n),T(this,Rr,e),T(this,Lc,e),N(this,ei,E0).call(this)}),n.on("ready",d=>{if(a.abort(),this.destroyed){s();return}try{l()}catch{N(this,ei,yp).call(this)}});const l=()=>{const d=new Uint8Array;n.send("test",d,[d.buffer])};l();return}catch{Bv("The worker has been disabled.")}N(this,ei,yp).call(this)},yp=function(){u(Ie,Pc)||(xt("Setting up fake worker."),T(Ie,Pc,!0)),Ie._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){u(this,el).reject(new Error("Worker was destroyed"));return}const e=new $4;T(this,Rr,e);const n=`fake${an(Ie,Ev)._++}`,s=new dp(n+"_worker",n,e);t.setup(s,e),T(this,$s,new dp(n,n+"_worker",e)),N(this,ei,E0).call(this)}).catch(t=>{u(this,el).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},mh=new WeakSet,T0=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},x(Ie,mh),x(Ie,Ev,0),x(Ie,Pc,!1),x(Ie,Uc,new WeakMap),ti&&(T(Ie,Pc,!0),Lo.workerSrc||(Lo.workerSrc="./pdf.worker.mjs")),Ie._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const s=new URL(e,n);return n.origin===s.origin},Ie._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Ie.fromPort=t=>{if(M4("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ie.create(t)};let Np=Ie;var Bi,Nr,Ir,ws,nl,gh,Dr,vi,es,VI,vp,_0;class Oz{constructor(t,e,n,s,a){x(this,es);W(this,"downloadInfoCapability",Promise.withResolvers());x(this,Bi,null);x(this,Nr,new Map);x(this,Ir,null);x(this,ws,new Map);x(this,nl,new Map);x(this,gh,new Map);x(this,Dr,null);x(this,vi,Mp.instance);this.messageHandler=t,this.loadingTask=e,T(this,Ir,n),this.commonObjs=new LI,this.fontLoader=new F4({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.enableHWA=s.enableHWA,this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),u(this,vi).addListener(N(this,es,VI).bind(this))}get annotationStorage(){return Mt(this,"annotationStorage",new OT)}getRenderingIntent(t,e=xa.ENABLE,n=null,s=!1,a=!1){let l=Zi.DISPLAY,d=pE;switch(t){case"any":l=Zi.ANY;break;case"display":break;case"print":l=Zi.PRINT;break;default:xt(`getRenderingIntent - invalid intent: ${t}`)}const h=l&Zi.PRINT&&n instanceof aI?n:this.annotationStorage;switch(e){case xa.DISABLE:l+=Zi.ANNOTATIONS_DISABLE;break;case xa.ENABLE:break;case xa.ENABLE_FORMS:l+=Zi.ANNOTATIONS_FORMS;break;case xa.ENABLE_STORAGE:l+=Zi.ANNOTATIONS_STORAGE,d=h.serializable;break;default:xt(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(l+=Zi.IS_EDITING),a&&(l+=Zi.OPLIST);const{ids:f,hash:m}=h.modifiedIds,v=[l,d.hash,m];return{renderingIntent:l,cacheKey:v.join("_"),annotationStorageSerializable:d,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=u(this,Dr))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of u(this,ws).values())t.push(s._destroy());u(this,ws).clear(),u(this,nl).clear(),u(this,gh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,a;this.commonObjs.clear(),this.fontLoader.clear(),u(this,Nr).clear(),this.filterFactory.destroy(),Rp.cleanup(),(s=u(this,Ir))==null||s.cancelAllRequests(new Tl("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{ie(u(this,Ir),"GetReader - no `BasePDFStream` instance available."),T(this,Bi,u(this,Ir).getFullReader()),u(this,Bi).onProgress=a=>N(this,es,_0).call(this,a),s.onPull=()=>{u(this,Bi).read().then(function({value:a,done:l}){if(l){s.close();return}ie(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{u(this,Bi).cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{await u(this,Bi).headersReady;const{isStreamingSupported:s,isRangeSupported:a,contentLength:l}=u(this,Bi);return s&&a&&(u(this,Bi).onProgress=null),{isStreamingSupported:s,isRangeSupported:a,contentLength:l}}),t.on("GetRangeReader",(n,s)=>{ie(u(this,Ir),"GetRangeReader - no `BasePDFStream` instance available.");const a=u(this,Ir).getRangeReader(n.begin,n.end);if(!a){s.close();return}s.onPull=()=>{a.read().then(function({value:l,done:d}){if(d){s.close();return}ie(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{s.error(l)})},s.onCancel=l=>{a.cancel(l),s.ready.catch(d=>{if(!this.destroyed)throw d})}}),t.on("GetDoc",({pdfInfo:n})=>{u(this,vi).pagesNumber=n.numPages,this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new Pz(n,this))}),t.on("DocException",n=>{e._capability.reject(di(n))}),t.on("PasswordRequest",n=>{T(this,Dr,Promise.withResolvers());try{if(!e.onPassword)throw di(n);const s=a=>{a instanceof Error?u(this,Dr).reject(a):u(this,Dr).resolve({password:a})};e.onPassword(s,n.code)}catch(s){u(this,Dr).reject(s)}return u(this,Dr).promise}),t.on("DataLoaded",n=>{N(this,es,_0).call(this,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;u(this,ws).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,a])=>{var l;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":if("error"in a){const A=a.error;xt(`Error during font loading: ${A}`),this.commonObjs.resolve(n,A);break}const d=new mE(a),h=this._params.pdfBug&&((l=globalThis.FontInspector)!=null&&l.enabled)?(A,E)=>globalThis.FontInspector.fontAdded(A,E):null,f=new H4(d,h,a.extra,a.charProcOperatorList);this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!f.fontExtraProperties&&f.data&&f.clearData(),this.commonObjs.resolve(n,f)});break;case"CopyLocalImage":const{imageRef:m}=a;ie(m,"The imageRef must be defined.");for(const A of u(this,ws).values())for(const[,E]of A.objs)if((E==null?void 0:E.ref)===m)return E.dataLen?(this.commonObjs.resolve(n,structuredClone(E)),E.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new G4(a));break;case"Image":this.commonObjs.resolve(n,a);break;case"Pattern":const v=new gE(a);this.commonObjs.resolve(n,v.getIR());break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,a,l])=>{var h;if(this.destroyed)return;const d=u(this,ws).get(s);if(!d.objs.has(n)){if(d._intentStates.size===0){(h=l==null?void 0:l.bitmap)==null||h.close();return}switch(a){case"Image":case"Pattern":d.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",n=>{this.destroyed||N(this,es,_0).call(this,n)}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[n.type];if(!s)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&xt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=u(this,Bi))==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>u(this,vi).pagesNumber)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=u(this,vi).getPageId(t)-1,s=u(this,nl).get(e);if(s)return s;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&u(this,gh).set(l.refStr,n);const d=new Uz(e,l,this,this._params.pdfBug);return u(this,ws).set(e,d),d});return u(this,nl).set(e,a),a}async getPageIndex(t){if(!yE(t))throw new Error("Invalid pageIndex request.");const e=await this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen});return u(this,vi).getPageNumber(e+1)-1}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:u(this,vi).getPageId(t+1)-1,intent:e})}getFieldObjects(){return N(this,es,vp).call(this,"GetFieldObjects")}hasJSActions(){return N(this,es,vp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return N(this,es,vp).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:u(this,vi).getPageId(t+1)-1})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:u(this,vi).getPageId(t+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return N(this,es,vp).call(this,"GetOptionalContentConfig").then(e=>new gz(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=u(this,Nr).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>{var a,l;return{info:s[0],metadata:s[1]?new pz(s[1]):null,contentDispositionFilename:((a=u(this,Bi))==null?void 0:a.filename)??null,contentLength:((l=u(this,Bi))==null?void 0:l.contentLength)??null,hasStructTree:s[2]}});return u(this,Nr).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of u(this,ws).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),u(this,Nr).clear(),this.filterFactory.destroy(!0),Rp.cleanup()}}cachedPageNumber(t){if(!yE(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`,n=u(this,gh).get(e);return n>=0?u(this,vi).getPageNumber(n+1):null}}Bi=new WeakMap,Nr=new WeakMap,Ir=new WeakMap,ws=new WeakMap,nl=new WeakMap,gh=new WeakMap,Dr=new WeakMap,vi=new WeakMap,es=new WeakSet,VI=function(){const t=new Map,e=new Map;for(let n=0,s=u(this,vi).pagesNumber;n<s;n++){const a=u(this,vi).getPrevPageNumber(n+1)-1,l=u(this,ws).get(a);l&&t.set(n,l);const d=u(this,nl).get(a);d&&e.set(n,d)}T(this,ws,t),T(this,nl,e)},vp=function(t,e=null){const n=u(this,Nr).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return u(this,Nr).set(t,s),s},_0=function({loaded:t,total:e}){var n,s;(s=(n=this.loadingTask).onProgress)==null||s.call(n,{loaded:t,total:e,percent:Ln(Math.round(t/e*100),0,100)})};class Bz{constructor(t){W(this,"_internalRenderTask",null);W(this,"onContinue",null);W(this,"onError",null);this._internalRenderTask=t}get promise(){return this._internalRenderTask.capability.promise}cancel(t=0){this._internalRenderTask.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this._internalRenderTask.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this._internalRenderTask;return t.form||t.canvas&&(e==null?void 0:e.size)>0}}var il,Oc;const Ql=class Ql{constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:a,operatorList:l,pageIndex:d,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:v=!1,pageColors:A=null,enableHWA:E=!1,operationsFilter:_=null}){x(this,il,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=d,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=v,this.pageColors=A,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Bz(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=E,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=_}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var h,f;if(this.cancelled)return;if(this._canvas){if(u(Ql,Oc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(Ql,Oc).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:s,background:a,dependencyTracker:l}=this.params,d=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new bd(d,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:s,viewport:n,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var n,s,a;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),u(this,il)&&(window.cancelAnimationFrame(u(this,il)),T(this,il,null)),u(Ql,Oc).delete(this._canvas),t||(t=new PT(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(a=(s=this.task).onError)==null||a.call(s,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?T(this,il,window.requestAnimationFrame(()=>{T(this,il,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(Ql,Oc).delete(this._canvas),this.callback())))}};il=new WeakMap,Oc=new WeakMap,x(Ql,Oc,new WeakSet);let LE=Ql;const Fz="5.4.624",Hz="384c6208b";var Fi,Bc,yh,un,Vm,vh,kr,qm,sl,Xs,Ym,Ae,PE,UE,OE,Xl,qI,wa;const hi=class hi{constructor({editor:t=null,uiManager:e=null}){x(this,Ae);x(this,Fi,null);x(this,Bc,null);x(this,yh);x(this,un,null);x(this,Vm,!1);x(this,vh,!1);x(this,kr,null);x(this,qm);x(this,sl,null);x(this,Xs,null);var n,s;t?(T(this,vh,!1),T(this,kr,t)):T(this,vh,!0),T(this,Xs,(t==null?void 0:t._uiManager)||e),T(this,qm,u(this,Xs)._eventBus),T(this,yh,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((s=u(this,Xs))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),u(hi,Ym)||T(hi,Ym,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Mt(this,"_keyboardManager",new Rg([[["Escape","mac+Escape"],hi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],hi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],hi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],hi.prototype._moveToPrevious],[["Home","mac+Home"],hi.prototype._moveToBeginning],[["End","mac+End"],hi.prototype._moveToEnd]]))}renderButton(){const t=T(this,Fi,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",u(this,kr)&&(t.ariaControls=`${u(this,kr).id}_colorpicker_dropdown`);const e=u(this,Xs)._signal;t.addEventListener("click",N(this,Ae,Xl).bind(this),{signal:e}),t.addEventListener("keydown",N(this,Ae,OE).bind(this),{signal:e});const n=T(this,Bc,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=u(this,yh),t.append(n),t}renderMainDropdown(){const t=T(this,un,N(this,Ae,PE).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===u(this,Fi)){N(this,Ae,Xl).call(this,t);return}const e=t.target.getAttribute("data-color");e&&N(this,Ae,UE).call(this,e,t)}_moveToNext(t){var e,n;if(!u(this,Ae,wa)){N(this,Ae,Xl).call(this,t);return}if(t.target===u(this,Fi)){(e=u(this,un).firstElementChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=u(this,un))==null?void 0:e.firstElementChild)||t.target===u(this,Fi)){u(this,Ae,wa)&&this._hideDropdownFromKeyboard();return}u(this,Ae,wa)||N(this,Ae,Xl).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!u(this,Ae,wa)){N(this,Ae,Xl).call(this,t);return}(e=u(this,un).firstElementChild)==null||e.focus()}_moveToEnd(t){var e;if(!u(this,Ae,wa)){N(this,Ae,Xl).call(this,t);return}(e=u(this,un).lastElementChild)==null||e.focus()}hideDropdown(){var t,e;(t=u(this,un))==null||t.classList.add("hidden"),u(this,Fi).ariaExpanded="false",(e=u(this,sl))==null||e.abort(),T(this,sl,null)}_hideDropdownFromKeyboard(){var t;if(!u(this,vh)){if(!u(this,Ae,wa)){(t=u(this,kr))==null||t.unselect();return}this.hideDropdown(),u(this,Fi).focus({preventScroll:!0,focusVisible:u(this,Vm)})}}updateColor(t){if(u(this,Bc)&&(u(this,Bc).style.backgroundColor=t),!u(this,un))return;const e=u(this,Xs).highlightColors.values();for(const n of u(this,un).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=u(this,Fi))==null||t.remove(),T(this,Fi,null),T(this,Bc,null),(e=u(this,un))==null||e.remove(),T(this,un,null)}};Fi=new WeakMap,Bc=new WeakMap,yh=new WeakMap,un=new WeakMap,Vm=new WeakMap,vh=new WeakMap,kr=new WeakMap,qm=new WeakMap,sl=new WeakMap,Xs=new WeakMap,Ym=new WeakMap,Ae=new WeakSet,PE=function(){const t=document.createElement("div"),e=u(this,Xs)._signal;t.addEventListener("contextmenu",Ls,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),u(this,kr)&&(t.id=`${u(this,kr).id}_colorpicker_dropdown`);for(const[n,s]of u(this,Xs).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",s),a.title=n,a.setAttribute("data-l10n-id",u(hi,Ym)[n]);const l=document.createElement("span");a.append(l),l.className="swatch",l.style.backgroundColor=s,a.ariaSelected=s===u(this,yh),a.addEventListener("click",N(this,Ae,UE).bind(this,s),{signal:e}),t.append(a)}return t.addEventListener("keydown",N(this,Ae,OE).bind(this),{signal:e}),t},UE=function(t,e){e.stopPropagation(),u(this,qm).dispatch("switchannotationeditorparams",{source:this,type:Yt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},OE=function(t){hi._keyboardManager.exec(this,t)},Xl=function(t){if(u(this,Ae,wa)){this.hideDropdown();return}if(T(this,Vm,t.detail===0),u(this,sl)||(T(this,sl,new AbortController),window.addEventListener("pointerdown",N(this,Ae,qI).bind(this),{signal:u(this,Xs).combinedSignal(u(this,sl))})),u(this,Fi).ariaExpanded="true",u(this,un)){u(this,un).classList.remove("hidden");return}const e=T(this,un,N(this,Ae,PE).call(this));u(this,Fi).append(e)},qI=function(t){var e;(e=u(this,un))!=null&&e.contains(t.target)||this.hideDropdown()},wa=function(){return u(this,un)&&!u(this,un).classList.contains("hidden")},x(hi,Ym,null);let ov=hi;var Co,$m,Ah,Xm;const Zl=class Zl{constructor(t){x(this,Co,null);x(this,$m,null);x(this,Ah,null);T(this,$m,t),T(this,Ah,t._uiManager),u(Zl,Xm)||T(Zl,Xm,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(u(this,Co))return u(this,Co);const{editorType:t,colorType:e,color:n}=u(this,$m),s=T(this,Co,document.createElement("input"));return s.type="color",s.value=n||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",u(Zl,Xm)[t]),s.addEventListener("input",()=>{u(this,Ah).updateParams(e,s.value)},{signal:u(this,Ah)._signal}),s}update(t){u(this,Co)&&(u(this,Co).value=t)}destroy(){var t;(t=u(this,Co))==null||t.remove(),T(this,Co,null)}hideDropdown(){}};Co=new WeakMap,$m=new WeakMap,Ah=new WeakMap,Xm=new WeakMap,x(Zl,Xm,null);let rv=Zl;function fR(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}function tp(o){return Math.max(0,Math.min(255,255*o))}class pR{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=tp(t),[t,t,t]}static G_HTML([t]){const e=fR(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(tp)}static RGB_HTML(t){return`#${t.map(fR).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[tp(1-Math.min(1,t+s)),tp(1-Math.min(1,n+s)),tp(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,a=1-e,l=1-n,d=Math.min(s,a,l);return["CMYK",s,a,l,d]}}class Gz{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){se("Abstract method `_createSVG` called.")}}class av extends Gz{_createSVG(t){return document.createElementNS(sr,t)}}const zz=9,fu=new WeakSet,Vz=new Date().getTimezoneOffset()*60*1e3;class Mb{static create(t){switch(t.data.annotationType){case en.LINK:return new HT(t);case en.TEXT:return new Yz(t);case en.WIDGET:switch(t.data.fieldType){case"Tx":return new $z(t);case"Btn":return t.data.radioButton?new XI(t):t.data.checkBox?new Jz(t):new Kz(t);case"Ch":return new Wz(t);case"Sig":return new Xz(t)}return new gu(t);case en.POPUP:return new FE(t);case en.FREETEXT:return new ZI(t);case en.LINE:return new Zz(t);case en.SQUARE:return new jz(t);case en.CIRCLE:return new tV(t);case en.POLYLINE:return new jI(t);case en.CARET:return new nV(t);case en.INK:return new GT(t);case en.POLYGON:return new eV(t);case en.HIGHLIGHT:return new tD(t);case en.UNDERLINE:return new iV(t);case en.SQUIGGLY:return new sV(t);case en.STRIKEOUT:return new oV(t);case en.STAMP:return new eD(t);case en.FILEATTACHMENT:return new rV(t);default:return new Oe(t)}}}var Fc,Sh,xs,Jm,BE;const JT=class JT{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){x(this,Jm);x(this,Fc,null);x(this,Sh,!1);x(this,xs,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return JT._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:t}=this,e=(n=this.annotationStorage)==null?void 0:n.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var d;const t=(d=this.annotationStorage)==null?void 0:d.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:s}=this.data;let a=-1/0,l=-1/0;if((e==null?void 0:e.length)>=8){for(let h=0;h<e.length;h+=8)e[h+1]>l?(l=e[h+1],a=e[h+2]):e[h+1]===l&&(a=Math.max(a,e[h+2]));return[a,l]}if((n==null?void 0:n.length)>=1){for(const h of n)for(let f=0,m=h.length;f<m;f+=2)h[f+1]>l?(l=h[f+1],a=h[f]):h[f+1]===l&&(a=Math.max(a,h[f]));if(a!==1/0)return[a,l]}return s?[s[2],s[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-a)/n,t[1]=100*(t[1]-l)/s,t}get commentText(){var e,n,s;const{data:t}=this;return((n=(e=this.annotationStorage.getRawValue(`${Cp}${t.id}`))==null?void 0:e.popup)==null?void 0:n.contents)||((s=t.contentsObj)==null?void 0:s.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${Cp}${e.id}`,{id:e.id,annotationType:e.annotationType,page:this.parent.page,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=u(this,xs))==null?void 0:t.popup)||this.popup)==null||e.remove(),T(this,xs,this.popup=null)}updateEdited(t){var a;if(!this.container)return;t.rect&&(u(this,Fc)||T(this,Fc,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&N(this,Jm,BE).call(this,e);let s=((a=u(this,xs))==null?void 0:a.popup)||this.popup;!s&&(n!=null&&n.text)&&(this._createPopup(n),s=u(this,xs).popup),s&&(s.updateEdited(t),n!=null&&n.deleted&&(s.remove(),T(this,xs,null),this.popup=null))}resetEdited(){var t;u(this,Fc)&&(N(this,Jm,BE).call(this,u(this,Fc).rect),(t=u(this,xs))==null||t.popup.resetEdited(),T(this,Fc,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),!(this instanceof gu)&&!(this instanceof HT)&&(a.tabIndex=0);const{style:l}=a;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof FE){const{rotation:C}=e;return!e.hasOwnCanvas&&C!==0&&this.setRotation(C,a),a}const{width:d,height:h}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const C=e.borderStyle.horizontalCornerRadius,M=e.borderStyle.verticalCornerRadius;if(C>0||M>0){const L=`calc(${C}px * var(--total-scale-factor)) / calc(${M}px * var(--total-scale-factor))`;l.borderRadius=L}else if(this instanceof XI){const L=`calc(${d}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;l.borderRadius=L}switch(e.borderStyle.style){case id.SOLID:l.borderStyle="solid";break;case id.DASHED:l.borderStyle="dashed";break;case id.BEVELED:xt("Unimplemented border style: beveled");break;case id.INSET:xt("Unimplemented border style: inset");break;case id.UNDERLINE:l.borderBottomStyle="solid";break}const R=e.borderColor||null;R?(T(this,Sh,!0),l.borderColor=ut.makeHexColor(R[0]|0,R[1]|0,R[2]|0)):l.borderWidth=0}const f=ut.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:v,pageX:A,pageY:E}=s.rawDims;l.left=`${100*(f[0]-A)/m}%`,l.top=`${100*(f[1]-E)/v}%`;const{rotation:_}=e;return e.hasOwnCanvas||_===0?(l.width=`${100*d/m}%`,l.height=`${100*h/v}%`):this.setRotation(_,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:a,height:l}=this;t%180!==0&&([a,l]=[l,a]),e.style.width=`${100*a/n}%`,e.style.height=`${100*l/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const a=s.detail[e],l=a[0],d=a.slice(1);s.target.style[n]=pR[`${l}_HTML`](d),this.annotationStorage.setValue(this.data.id,{[n]:pR[`${l}_rgb`](d)})};return Mt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail)){const a=t[s]||n[s];a==null||a(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,a]of Object.entries(e)){const l=n[s];if(l){const d={detail:{[s]:a},target:t};l(d),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,a]=this.data.rect.map(C=>Math.fround(C));if(t.length===8){const[C,M,R,L]=t.subarray(2,6);if(s===C&&a===M&&e===R&&n===L)return}const{style:l}=this.container;let d;if(u(this,Sh)){const{borderColor:C,borderWidth:M}=l;l.borderWidth=0,d=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${M}">`],this.container.classList.add("hasBorder")}const h=s-e,f=a-n,{svgFactory:m}=this,v=m.createElement("svg");v.classList.add("quadrilateralsContainer"),v.setAttribute("width",0),v.setAttribute("height",0),v.role="none";const A=m.createElement("defs");v.append(A);const E=m.createElement("clipPath"),_=`clippath_${this.data.id}`;E.setAttribute("id",_),E.setAttribute("clipPathUnits","objectBoundingBox"),A.append(E);for(let C=2,M=t.length;C<M;C+=8){const R=t[C],L=t[C+1],I=t[C+2],U=t[C+3],P=m.createElement("rect"),O=(I-e)/h,F=(a-L)/f,Z=(R-I)/h,X=(L-U)/f;P.setAttribute("x",O),P.setAttribute("y",F),P.setAttribute("width",Z),P.setAttribute("height",X),E.append(P),d==null||d.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${F}" width="${Z}" height="${X}"/>`)}u(this,Sh)&&(d.push("</g></svg>')"),l.backgroundImage=d.join("")),this.container.append(v),this.container.style.clipPath=`url(#${_})`}_createPopup(t=null){const{data:e}=this;let n,s;t?(n={str:t.text},s=t.date):(n=e.contentsObj,s=e.modificationDate),T(this,xs,new FE({data:{color:e.color,titleObj:e.titleObj,modificationDate:s,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(u(this,xs)||this.popup||this.data.popupRef)}get extraPopupElement(){return u(this,xs)}render(){se("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:a,id:l,exportValues:d}of s){if(a===-1||l===e)continue;const h=typeof d=="string"?d:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!fu.has(f)){xt(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:h,domElement:f})}return n}for(const s of document.getElementsByName(t)){const{exportValue:a}=s,l=s.getAttribute("data-element-id");l!==e&&fu.has(s)&&n.push({id:l,exportValue:a,domElement:s})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Fc=new WeakMap,Sh=new WeakMap,xs=new WeakMap,Jm=new WeakSet,BE=function(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:l,pageX:d,pageY:h}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-d)/a}%`,e.top=`${100*(l-t[3]+h)/l}%`,s===0?(e.width=`${100*(t[2]-t[0])/a}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(s)};let Oe=JT;class qz extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var ts,Jl,YI,$I;class HT extends Oe{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});x(this,ts);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let a=!1;return e.url?(n.addLinkAttributes(s,e.url,e.newWindow),a=!0):e.action?(this._bindNamedAction(s,e.action,e.overlaidText),a=!0):e.attachment?(N(this,ts,YI).call(this,s,e.attachment,e.overlaidText,e.attachmentDest),a=!0):e.setOCGState?(N(this,ts,$I).call(this,s,e.setOCGState,e.overlaidText),a=!0):e.dest?(this._bindLink(s,e.dest,e.overlaidText),a=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),a=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&(this.contentElement=s,this.container.append(s)),this.container}_bindLink(e,n,s=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&N(this,ts,Jl).call(this),s&&(e.title=s)}_bindNamedAction(e,n,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),s&&(e.title=s),N(this,ts,Jl).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const l=s.get(a);l&&(e[l]=()=>{var d;return(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),N(this,ts,Jl).call(this)}_bindResetFormAction(e,n){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),N(this,ts,Jl).call(this),!this._fieldObjects){xt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var v;s==null||s();const{fields:a,refs:l,include:d}=n,h=[];if(a.length!==0||l.length!==0){const A=new Set(l);for(const E of a){const _=this._fieldObjects[E]||[];for(const{id:C}of _)A.add(C)}for(const E of Object.values(this._fieldObjects))for(const _ of E)A.has(_.id)===d&&h.push(_)}else for(const A of Object.values(this._fieldObjects))h.push(...A);const f=this.annotationStorage,m=[];for(const A of h){const{id:E}=A;switch(m.push(E),A.type){case"text":{const C=A.defaultValue||"";f.setValue(E,{value:C});break}case"checkbox":case"radiobutton":{const C=A.defaultValue===A.exportValues;f.setValue(E,{value:C});break}case"combobox":case"listbox":{const C=A.defaultValue||"";f.setValue(E,{value:C});break}default:continue}const _=document.querySelector(`[data-element-id="${E}"]`);if(_){if(!fu.has(_)){xt(`_bindResetFormAction - element not allowed: ${E}`);continue}}else continue;_.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}ts=new WeakSet,Jl=function(){this.container.setAttribute("data-internal-link","")},YI=function(e,n,s="",a=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:s&&(e.title=s),e.onclick=()=>{var l;return(l=this.downloadManager)==null||l.openOrDownloadData(n.content,n.filename,a),!1},N(this,ts,Jl).call(this)},$I=function(e,n,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),s&&(e.title=s),N(this,ts,Jl).call(this)};class Yz extends Oe{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class gu extends Oe{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return hn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,a){n.includes("mouse")?t.addEventListener(n,l=>{var d;(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{var d;if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}a&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(l)}}))})}_setEventListeners(t,e,n,s){var a,l,d;for(const[h,f]of n)(f==="Action"||(a=this.data.actions)!=null&&a[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,h,f,s),f==="Focus"&&!((l=this.data.actions)!=null&&l.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((d=this.data.actions)!=null&&d.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ut.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||zz,a=t.style;let l;const d=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-d),m=Math.round(f/(bb*s))||1,v=f/m;l=Math.min(s,h(v/bb))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-d);l=Math.min(s,h(f/bb))}a.fontSize=`calc(${l}px * var(--total-scale-factor))`,a.color=ut.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class $z extends gu{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const a=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),a.setValue(l.id,{[s]:n})}render(){var s,a;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const l=t.getValue(e,{value:this.data.fieldValue});let d=l.value||"";const h=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;h&&d.length>h&&(d=d.slice(0,h));let f=l.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const m={userValue:d,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??d,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",f??d),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),fu.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:v,datetimeType:A,timeStep:E}=this.data,_=!!A&&this.enableScripting;v&&(n.title=v),this._setRequired(n,this.data.required),h&&(n.maxLength=h),n.addEventListener("input",M=>{t.setValue(e,{value:M.target.value}),this.setPropertyOnSiblings(n,"value",M.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",M=>{const R=this.data.defaultFieldValue??"";n.value=m.userValue=R,m.formattedValue=null});let C=M=>{const{formattedValue:R}=m;R!=null&&(M.target.value=R),M.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",R=>{var I;if(m.focused)return;const{target:L}=R;if(_&&(L.type=A,E&&(L.step=E)),m.userValue){const U=m.userValue;if(_)if(A==="time"){const P=new Date(U),O=[P.getHours(),P.getMinutes(),P.getSeconds()];L.value=O.map(F=>F.toString().padStart(2,"0")).join(":")}else L.value=new Date(U-Vz).toISOString().split(A==="date"?"T":".",1)[0];else L.value=U}m.lastCommittedValue=L.value,m.commitKey=1,(I=this.data.actions)!=null&&I.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",R=>{this.showElementAndHideCanvas(R.target);const L={value(I){m.userValue=I.detail.value??"",_||t.setValue(e,{value:m.userValue.toString()}),I.target.value=m.userValue},formattedValue(I){const{formattedValue:U}=I.detail;m.formattedValue=U,U!=null&&I.target!==document.activeElement&&(I.target.value=U);const P={formattedValue:U};_&&(P.value=U),t.setValue(e,P)},selRange(I){I.target.setSelectionRange(...I.detail.selRange)},charLimit:I=>{var F;const{charLimit:U}=I.detail,{target:P}=I;if(U===0){P.removeAttribute("maxLength");return}P.setAttribute("maxLength",U);let O=m.userValue;!O||O.length<=U||(O=O.slice(0,U),P.value=m.userValue=O,t.setValue(e,{value:O}),(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:P.selectionStart,selEnd:P.selectionEnd}}))}};this._dispatchEventFromSandbox(L,R)}),n.addEventListener("keydown",R=>{var U;m.commitKey=1;let L=-1;if(R.key==="Escape"?L=0:R.key==="Enter"&&!this.data.multiLine?L=2:R.key==="Tab"&&(m.commitKey=3),L===-1)return;const{value:I}=R.target;m.lastCommittedValue!==I&&(m.lastCommittedValue=I,m.userValue=I,(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:I,willCommit:!0,commitKey:L,selStart:R.target.selectionStart,selEnd:R.target.selectionEnd}}))});const M=C;C=null,n.addEventListener("blur",R=>{var U,P;if(!m.focused||!R.relatedTarget)return;(U=this.data.actions)!=null&&U.Blur||(m.focused=!1);const{target:L}=R;let{value:I}=L;if(_){if(I&&A==="time"){const O=I.split(":").map(F=>parseInt(F,10));I=new Date(2e3,0,1,O[0],O[1],O[2]||0).valueOf(),L.step=""}else I.includes("T")||(I=`${I}T00:00`),I=new Date(I).valueOf();L.type="text"}m.userValue=I,m.lastCommittedValue!==I&&((P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:I,willCommit:!0,commitKey:m.commitKey,selStart:R.target.selectionStart,selEnd:R.target.selectionEnd}})),M(R)}),(a=this.data.actions)!=null&&a.Keystroke&&n.addEventListener("beforeinput",R=>{var X;m.lastCommittedValue=null;const{data:L,target:I}=R,{value:U,selectionStart:P,selectionEnd:O}=I;let F=P,Z=O;switch(R.inputType){case"deleteWordBackward":{const nt=U.substring(0,P).match(/\w*[^\w]*$/);nt&&(F-=nt[0].length);break}case"deleteWordForward":{const nt=U.substring(P).match(/^[^\w]*\w*/);nt&&(Z+=nt[0].length);break}case"deleteContentBackward":P===O&&(F-=1);break;case"deleteContentForward":P===O&&(Z+=1);break}R.preventDefault(),(X=this.linkService.eventBus)==null||X.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:U,change:L||"",willCommit:!1,selStart:F,selEnd:Z}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],R=>R.target.value)}if(C&&n.addEventListener("blur",C),this.data.comb){const R=(this.data.rect[2]-this.data.rect[0])/h;n.classList.add("comb"),n.style.letterSpacing=`calc(${R}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Xz extends gu{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Jz extends gu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return fu.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,s&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=0,a.addEventListener("change",l=>{const{name:d,checked:h}=l.target;for(const f of this._getElementsByName(d,n)){const m=h&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=m),t.setValue(f.id,{value:m})}t.setValue(n,{value:h})}),a.addEventListener("resetform",l=>{const d=e.defaultFieldValue||"Off";l.target.checked=d===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",l=>{const d={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(d,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class XI extends gu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const a=document.createElement("input");if(fu.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,s&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",l=>{const{name:d,checked:h}=l.target;for(const f of this._getElementsByName(d,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:h})}),a.addEventListener("resetform",l=>{const d=e.defaultFieldValue;l.target.checked=d!=null&&d===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;a.addEventListener("updatefromsandbox",d=>{const h={value:f=>{const m=l===f.detail.value;for(const v of this._getElementsByName(f.target.name)){const A=m&&v.id===n;v.domElement&&(v.domElement.checked=A),t.setValue(v.id,{value:A})}}};this._dispatchEventFromSandbox(h,d)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Kz extends HT{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class Wz extends gu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");fu.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",m=>{const v=this.data.defaultFieldValue;for(const A of s.options)A.selected=A.value===v});for(const m of this.data.options){const v=document.createElement("option");v.textContent=m.displayValue,v.value=m.exportValue,n.value.includes(m.exportValue)&&(v.setAttribute("selected",!0),a=!1),s.append(v)}let l=null;if(a){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),s.prepend(m),l=()=>{m.remove(),s.removeEventListener("input",l),l=null},s.addEventListener("input",l)}const d=m=>{const v=m?"value":"textContent",{options:A,multiple:E}=s;return E?Array.prototype.filter.call(A,_=>_.selected).map(_=>_[v]):A.selectedIndex===-1?null:A[A.selectedIndex][v]};let h=d(!1);const f=m=>{const v=m.target.options;return Array.prototype.map.call(v,A=>({displayValue:A.textContent,exportValue:A.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",m=>{const v={value(A){l==null||l();const E=A.detail.value,_=new Set(Array.isArray(E)?E:[E]);for(const C of s.options)C.selected=_.has(C.value);t.setValue(e,{value:d(!0)}),h=d(!1)},multipleSelection(A){s.multiple=!0},remove(A){const E=s.options,_=A.detail.remove;E[_].selected=!1,s.remove(_),E.length>0&&Array.prototype.findIndex.call(E,M=>M.selected)===-1&&(E[0].selected=!0),t.setValue(e,{value:d(!0),items:f(A)}),h=d(!1)},clear(A){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),h=d(!1)},insert(A){const{index:E,displayValue:_,exportValue:C}=A.detail.insert,M=s.children[E],R=document.createElement("option");R.textContent=_,R.value=C,M?M.before(R):s.append(R),t.setValue(e,{value:d(!0),items:f(A)}),h=d(!1)},items(A){const{items:E}=A.detail;for(;s.length!==0;)s.remove(0);for(const _ of E){const{displayValue:C,exportValue:M}=_,R=document.createElement("option");R.textContent=C,R.value=M,s.append(R)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:d(!0),items:f(A)}),h=d(!1)},indices(A){const E=new Set(A.detail.indices);for(const _ of A.target.options)_.selected=E.has(_.index);t.setValue(e,{value:d(!0)}),h=d(!1)},editable(A){A.target.disabled=!A.detail.editable}};this._dispatchEventFromSandbox(v,m)}),s.addEventListener("input",m=>{var E;const v=d(!0),A=d(!1);t.setValue(e,{value:v}),m.preventDefault(),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:A,changeEx:v,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):s.addEventListener("input",function(m){t.setValue(e,{value:d(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var Km,HE;class FE extends Oe{constructor(e){const{data:n,elements:s,parent:a}=e,l=!!a._commentManager;super(e,{isRenderable:!l&&Oe._hasPopupData(n)});x(this,Km);if(this.elements=s,l&&Oe._hasPopupData(n)){const d=this.popup=N(this,Km,HE).call(this);for(const h of s)h.popup=d}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=N(this,Km,HE).call(this),s=[];for(const a of this.elements)a.popup=n,a.container.ariaHasPopup="dialog",s.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(a=>`${fd}${a}`).join(",")),this.container}}Km=new WeakSet,HE=function(){return new Qz({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Hi,ol,Tv,_v,bh,Eh,Ge,wo,rl,Hc,Th,_h,xo,Gi,Lr,Pr,ze,Ur,al,Wm,Or,Ch,Gc,ll,gn,cl,Ot,C0,GE,zE,VE,w0,qE,JI,KI,WI,QI,x0,M0,YE;class Qz{constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:a,contentsObj:l,richText:d,parent:h,rect:f,parentRect:m,open:v,commentManager:A=null}){x(this,Ot);x(this,Hi,null);x(this,ol,N(this,Ot,WI).bind(this));x(this,Tv,N(this,Ot,YE).bind(this));x(this,_v,N(this,Ot,M0).bind(this));x(this,bh,N(this,Ot,x0).bind(this));x(this,Eh,null);x(this,Ge,null);x(this,wo,null);x(this,rl,null);x(this,Hc,null);x(this,Th,null);x(this,_h,null);x(this,xo,!1);x(this,Gi,null);x(this,Lr,null);x(this,Pr,null);x(this,ze,null);x(this,Ur,null);x(this,al,null);x(this,Wm,null);x(this,Or,null);x(this,Ch,null);x(this,Gc,null);x(this,ll,!1);x(this,gn,null);x(this,cl,null);T(this,Ge,t),T(this,Ch,s),T(this,wo,l),T(this,Or,d),T(this,Th,h),T(this,Eh,e),T(this,Wm,f),T(this,_h,m),T(this,Hc,n),T(this,Hi,A),T(this,gn,n[0]),T(this,rl,j0.toDateObject(a)),this.trigger=n.flatMap(E=>E.getElementsToTriggerPopup()),A||(N(this,Ot,C0).call(this),u(this,Ge).hidden=!0,v&&N(this,Ot,x0).call(this))}renderCommentButton(){if(u(this,ze)){u(this,ze).parentNode||u(this,gn).container.after(u(this,ze));return}if(u(this,Ur)||N(this,Ot,GE).call(this),!u(this,Ur))return;const{signal:t}=T(this,Lr,new AbortController),e=u(this,gn).hasOwnCommentButton,n=()=>{u(this,Hi).toggleCommentPopup(this,!0,void 0,!e)},s=()=>{u(this,Hi).toggleCommentPopup(this,!1,!0,!e)},a=()=>{u(this,Hi).toggleCommentPopup(this,!1,!1)};if(e){T(this,ze,u(this,gn).container);for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",u(this,ol),{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",s,{signal:t}),l.addEventListener("pointerleave",a,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=T(this,ze,document.createElement("button"));l.className="annotationCommentButton";const d=u(this,gn).container;l.style.zIndex=d.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),N(this,Ot,VE).call(this),N(this,Ot,zE).call(this),l.addEventListener("keydown",u(this,ol),{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",s,{signal:t}),l.addEventListener("pointerleave",a,{signal:t}),d.after(l)}}get commentButtonColor(){const{color:t,opacity:e}=u(this,gn).commentData;return t?u(this,Th)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=u(this,ze))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:s,modificationDate:a}=u(this,gn).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:s,modificationDate:a}}get elementBeforePopup(){return u(this,ze)}get comment(){return u(this,cl)||T(this,cl,u(this,gn).commentText),u(this,cl)}set comment(t){t!==this.comment&&(u(this,gn).commentText=T(this,cl,t))}focus(){var t;(t=u(this,gn).container)==null||t.focus()}get parentBoundingClientRect(){return u(this,gn).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){u(this,ze)&&(u(this,ze).classList.toggle("selected",t),u(this,ze).ariaExpanded=e)}setSelectedCommentButton(t){u(this,ze).classList.toggle("selected",t)}get commentPopupPosition(){if(u(this,al))return u(this,al);const{x:t,y:e,height:n}=u(this,ze).getBoundingClientRect(),{x:s,y:a,width:l,height:d}=u(this,gn).layer.getBoundingClientRect();return[(t-s)/l,(e+n-a)/d]}set commentPopupPosition(t){T(this,al,t)}hasDefaultPopupPosition(){return u(this,al)===null}get commentButtonPosition(){return u(this,Ur)}get commentButtonWidth(){return u(this,ze).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=u(this,al)||this.commentButtonPosition.map(f=>f/100),s=this.parentBoundingClientRect,{x:a,y:l,width:d,height:h}=s;u(this,Hi).showDialog(null,this,a+e*d,l+n*h,{...t,parentDimensions:s})}render(){var n,s;if(u(this,Gi))return;const t=T(this,Gi,document.createElement("div"));if(t.className="popup",u(this,Eh)){const a=t.style.outlineColor=ut.makeHexColor(...u(this,Eh));t.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`}const e=document.createElement("span");if(e.className="header",(n=u(this,Ch))!=null&&n.str){const a=document.createElement("span");a.className="title",e.append(a),{dir:a.dir,str:a.textContent}=u(this,Ch)}if(t.append(e),u(this,rl)){const a=document.createElement("time");a.className="popupDate",a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,rl).valueOf()})),a.dateTime=u(this,rl).toISOString(),e.append(a)}_N({html:u(this,Ot,w0)||u(this,wo).str,dir:(s=u(this,wo))==null?void 0:s.dir,className:"popupContent"},t),u(this,Ge).append(t)}updateEdited({rect:t,popup:e,deleted:n}){var s;if(u(this,Hi)){n?(this.remove(),T(this,cl,null)):e&&(e.deleted?this.remove():(N(this,Ot,VE).call(this),T(this,cl,e.text))),t&&(T(this,Ur,null),N(this,Ot,GE).call(this),N(this,Ot,zE).call(this));return}if(n||e!=null&&e.deleted){this.remove();return}N(this,Ot,C0).call(this),u(this,Gc)||T(this,Gc,{contentsObj:u(this,wo),richText:u(this,Or)}),t&&T(this,Pr,null),e&&e.text&&(T(this,Or,N(this,Ot,KI).call(this,e.text)),T(this,rl,j0.toDateObject(e.date)),T(this,wo,null)),(s=u(this,Gi))==null||s.remove(),T(this,Gi,null)}resetEdited(){var t;u(this,Gc)&&({contentsObj:an(this,wo)._,richText:an(this,Or)._}=u(this,Gc),T(this,Gc,null),(t=u(this,Gi))==null||t.remove(),T(this,Gi,null),T(this,Pr,null))}remove(){var t,e,n;if((t=u(this,Lr))==null||t.abort(),T(this,Lr,null),(e=u(this,Gi))==null||e.remove(),T(this,Gi,null),T(this,ll,!1),T(this,xo,!1),(n=u(this,ze))==null||n.remove(),T(this,ze,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){T(this,ll,this.isVisible),u(this,ll)&&(u(this,Ge).hidden=!0)}maybeShow(){u(this,Hi)||(N(this,Ot,C0).call(this),u(this,ll)&&(u(this,Gi)||N(this,Ot,M0).call(this),T(this,ll,!1),u(this,Ge).hidden=!1))}get isVisible(){return u(this,Hi)?!1:u(this,Ge).hidden===!1}}Hi=new WeakMap,ol=new WeakMap,Tv=new WeakMap,_v=new WeakMap,bh=new WeakMap,Eh=new WeakMap,Ge=new WeakMap,wo=new WeakMap,rl=new WeakMap,Hc=new WeakMap,Th=new WeakMap,_h=new WeakMap,xo=new WeakMap,Gi=new WeakMap,Lr=new WeakMap,Pr=new WeakMap,ze=new WeakMap,Ur=new WeakMap,al=new WeakMap,Wm=new WeakMap,Or=new WeakMap,Ch=new WeakMap,Gc=new WeakMap,ll=new WeakMap,gn=new WeakMap,cl=new WeakMap,Ot=new WeakSet,C0=function(){var e;if(u(this,Lr))return;T(this,Lr,new AbortController);const{signal:t}=u(this,Lr);for(const n of this.trigger)n.addEventListener("click",u(this,bh),{signal:t}),n.addEventListener("pointerenter",u(this,_v),{signal:t}),n.addEventListener("pointerleave",u(this,Tv),{signal:t}),n.classList.add("popupTriggerArea");for(const n of u(this,Hc))(e=n.container)==null||e.addEventListener("keydown",u(this,ol),{signal:t})},GE=function(){const t=u(this,Hc).find(e=>e.hasCommentButton);t&&T(this,Ur,t._normalizePoint(t.commentButtonPosition))},zE=function(){if(u(this,gn).extraPopupElement&&!u(this,gn).editor)return;u(this,ze)||this.renderCommentButton();const[t,e]=u(this,Ur),{style:n}=u(this,ze);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},VE=function(){u(this,gn).extraPopupElement||(u(this,ze)||this.renderCommentButton(),u(this,ze).style.backgroundColor=this.commentButtonColor||"")},w0=function(){const t=u(this,Or),e=u(this,wo);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&u(this,Or).html||null},qE=function(){var t,e,n;return((n=(e=(t=u(this,Ot,w0))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},JI=function(){var t,e,n;return((n=(e=(t=u(this,Ot,w0))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},KI=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:u(this,Ot,JI),fontSize:u(this,Ot,qE)?`calc(${u(this,Ot,qE)}px * var(--total-scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:s});return n},WI=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&u(this,xo))&&N(this,Ot,x0).call(this)},QI=function(){if(u(this,Pr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:a}}}=u(this,Th);let l=!!u(this,_h),d=l?u(this,_h):u(this,Wm);for(const _ of u(this,Hc))if(!d||ut.intersect(_.data.rect,d)!==null){d=_.data.rect,l=!0;break}const h=ut.normalizeRect([d[0],t[3]-d[1]+t[1],d[2],t[3]-d[3]+t[1]]),m=l?d[2]-d[0]+5:0,v=h[0]+m,A=h[1];T(this,Pr,[100*(v-s)/e,100*(A-a)/n]);const{style:E}=u(this,Ge);E.left=`${u(this,Pr)[0]}%`,E.top=`${u(this,Pr)[1]}%`},x0=function(){if(u(this,Hi)){u(this,Hi).toggleCommentPopup(this,!1);return}T(this,xo,!u(this,xo)),u(this,xo)?(N(this,Ot,M0).call(this),u(this,Ge).addEventListener("click",u(this,bh)),u(this,Ge).addEventListener("keydown",u(this,ol))):(N(this,Ot,YE).call(this),u(this,Ge).removeEventListener("click",u(this,bh)),u(this,Ge).removeEventListener("keydown",u(this,ol)))},M0=function(){u(this,Gi)||this.render(),this.isVisible?u(this,xo)&&u(this,Ge).classList.add("focused"):(N(this,Ot,QI).call(this),u(this,Ge).hidden=!1,u(this,Ge).style.zIndex=parseInt(u(this,Ge).style.zIndex)+1e3)},YE=function(){u(this,Ge).classList.remove("focused"),!(u(this,xo)||!this.isVisible)&&(u(this,Ge).hidden=!0,u(this,Ge).style.zIndex=parseInt(u(this,Ge).style.zIndex)-1e3)};class ZI extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Dt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Qm;class Zz extends Oe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,Qm,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:s}=this,a=this.svgFactory.create(n,s,!0),l=T(this,Qm,this.svgFactory.createElement("svg:line"));return l.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),l.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),l.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),l.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),l.setAttribute("stroke-width",e.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Qm)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qm=new WeakMap;var Zm;class jz extends Oe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,Zm,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:s}=this,a=this.svgFactory.create(n,s,!0),l=e.borderStyle.width,d=T(this,Zm,this.svgFactory.createElement("svg:rect"));return d.setAttribute("x",l/2),d.setAttribute("y",l/2),d.setAttribute("width",n-l),d.setAttribute("height",s-l),d.setAttribute("stroke-width",l||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),a.append(d),this.container.append(a),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Zm)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zm=new WeakMap;var jm;class tV extends Oe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,jm,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:s}=this,a=this.svgFactory.create(n,s,!0),l=e.borderStyle.width,d=T(this,jm,this.svgFactory.createElement("svg:ellipse"));return d.setAttribute("cx",n/2),d.setAttribute("cy",s/2),d.setAttribute("rx",n/2-l/2),d.setAttribute("ry",s/2-l/2),d.setAttribute("stroke-width",l||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),a.append(d),this.container.append(a),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,jm)}addHighlightArea(){this.container.classList.add("highlightArea")}}jm=new WeakMap;var tg;class jI extends Oe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,tg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:s,popupRef:a},width:l,height:d}=this;if(!n)return this.container;const h=this.svgFactory.create(l,d,!0);let f=[];for(let v=0,A=n.length;v<A;v+=2){const E=n[v]-e[0],_=e[3]-n[v+1];f.push(`${E},${_}`)}f=f.join(" ");const m=T(this,tg,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",f),m.setAttribute("stroke-width",s.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),h.append(m),this.container.append(h),!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,tg)}addHighlightArea(){this.container.classList.add("highlightArea")}}tg=new WeakMap;class eV extends jI{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class nV extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var eg,zc,ng,$E;class GT extends Oe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,ng);x(this,eg,null);x(this,zc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Dt.HIGHLIGHT:Dt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:s,borderStyle:a,popupRef:l}}=this,{transform:d,width:h,height:f}=N(this,ng,$E).call(this,n,e),m=this.svgFactory.create(h,f,!0),v=T(this,eg,this.svgFactory.createElement("svg:g"));m.append(v),v.setAttribute("stroke-width",a.width||1),v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-linejoin","round"),v.setAttribute("stroke-miterlimit",10),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),v.setAttribute("transform",d);for(let A=0,E=s.length;A<E;A++){const _=this.svgFactory.createElement(this.svgElementName);u(this,zc).push(_),_.setAttribute("points",s[A].join(",")),v.append(_)}return!l&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:s,rect:a}=e,l=u(this,eg);if(n>=0&&l.setAttribute("stroke-width",n||1),s)for(let d=0,h=u(this,zc).length;d<h;d++)u(this,zc)[d].setAttribute("points",s[d].join(","));if(a){const{transform:d,width:h,height:f}=N(this,ng,$E).call(this,this.data.rotation,a);l.parentElement.setAttribute("viewBox",`0 0 ${h} ${f}`),l.setAttribute("transform",d)}}getElementsToTriggerPopup(){return u(this,zc)}addHighlightArea(){this.container.classList.add("highlightArea")}}eg=new WeakMap,zc=new WeakMap,ng=new WeakSet,$E=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class tD extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Dt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class iV extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class sV extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class oV extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class eD extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Dt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var ig,sg,XE;class rV extends Oe{constructor(e){var s;super(e,{isRenderable:!0});x(this,sg);x(this,ig,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",N(this,sg,XE).bind(this)),T(this,ig,s);const{isMac:a}=hn.platform;return e.addEventListener("keydown",l=>{l.key==="Enter"&&(a?l.metaKey:l.ctrlKey)&&N(this,sg,XE).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return u(this,ig)}addHighlightArea(){this.container.classList.add("highlightArea")}}ig=new WeakMap,sg=new WeakSet,XE=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Vc,qc,wh,ul,og,Yc,zi,rg,Xr,R0,KE;const KT=class KT{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:a,viewport:l,structTreeLayer:d,commentManager:h,linkService:f,annotationStorage:m}){x(this,Xr);x(this,Vc,null);x(this,qc,null);x(this,wh,null);x(this,ul,new Map);x(this,og,null);x(this,Yc,null);x(this,zi,[]);x(this,rg,!1);this.div=t,T(this,Vc,e),T(this,qc,n),T(this,og,d||null),T(this,Yc,f||null),T(this,wh,m||new OT),this.page=a,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=h||null}hasEditableAnnotations(){return u(this,ul).size>0}async render(t){var d;const{annotations:e}=t,n=this.div;du(n,this.viewport);const s=new Map,a=[],l={data:null,layer:n,linkService:u(this,Yc),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new av,annotationStorage:u(this,wh),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const h of e){if(h.noHTML)continue;const f=h.annotationType===en.POPUP;if(f){const A=s.get(h.id);if(!A)continue;if(!this._commentManager){a.push(h);continue}l.elements=A}else if(h.rect[2]===h.rect[0]||h.rect[3]===h.rect[1])continue;l.data=h;const m=Mb.create(l);if(!m.isRenderable)continue;if(!f&&(u(this,zi).push(m),h.popupRef)){const A=s.get(h.popupRef);A?A.push(m):s.set(h.popupRef,[m])}const v=m.render();h.hidden&&(v.style.visibility="hidden"),m._isEditable&&(u(this,ul).set(m.data.id,m),(d=this._annotationEditorUIManager)==null||d.renderAnnotationElement(m))}await N(this,Xr,R0).call(this);for(const h of a){const f=l.elements=s.get(h.id);l.data=h;const m=Mb.create(l);if(!m.isRenderable)continue;const v=m.render();m.contentElement.id=`${fd}${h.id}`,h.hidden&&(v.style.visibility="hidden"),f.at(-1).container.after(v)}N(this,Xr,KE).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:u(this,Yc),svgFactory:new av,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=KT._defaultBorderStyle),e.data=n;const s=Mb.create(e);s.isRenderable&&(s.render(),s.contentElement.id=`${fd}${n.id}`,u(this,zi).push(s))}await N(this,Xr,R0).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,du(e,{rotation:t.rotation}),N(this,Xr,KE).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(u(this,ul).values())}getEditableAnnotation(t){return u(this,ul).get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:s}=t,a=new qz({data:{id:n,rect:t.getPDFRect(),rotation:s},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:u(this,Yc),annotationStorage:u(this,wh)});return a.render(),a.contentElement.id=`${fd}${n}`,a.createOrUpdatePopup(),u(this,zi).push(a),a}removeAnnotation(t){var s;const e=u(this,zi).findIndex(a=>a.data.id===t);if(e<0)return;const[n]=u(this,zi).splice(e,1);(s=u(this,Vc))==null||s.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);N(this,Xr,R0).call(this)}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Mt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:id.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Vc=new WeakMap,qc=new WeakMap,wh=new WeakMap,ul=new WeakMap,og=new WeakMap,Yc=new WeakMap,zi=new WeakMap,rg=new WeakMap,Xr=new WeakSet,R0=async function(){var n,s,a;if(u(this,zi).length===0)return;this.div.replaceChildren();const t=[];if(!u(this,rg)){T(this,rg,!0);for(const{contentElement:l,data:{id:d}}of u(this,zi)){const h=l.id=`${fd}${d}`;t.push((n=u(this,og))==null?void 0:n.getAriaAttributes(h).then(f=>{if(f)for(const[m,v]of f)l.setAttribute(m,v)}))}}u(this,zi).sort(({data:{rect:[l,d,h,f]}},{data:{rect:[m,v,A,E]}})=>{if(l===h&&d===f)return 1;if(m===A&&v===E)return-1;const _=f,C=d,M=(d+f)/2,R=E,L=v,I=(v+E)/2;if(M>=R&&I<=C)return-1;if(I>=_&&M<=L)return 1;const U=(l+h)/2,P=(m+A)/2;return U-P});const e=document.createDocumentFragment();for(const l of u(this,zi))e.append(l.container),this._commentManager?(a=((s=l.extraPopupElement)==null?void 0:s.popup)||l.popup)==null||a.renderCommentButton():l.extraPopupElement&&e.append(l.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),u(this,Vc))for(const l of u(this,zi))u(this,Vc).addPointerInTextLayer(l.contentElement,!1)},KE=function(){var e;if(!u(this,qc))return;const t=this.div;for(const[n,s]of u(this,qc)){const a=t.querySelector(`[data-annotation-id="${n}"]`);if(!a)continue;s.className="annotationContent";const{firstChild:l}=a;l?l.nodeName==="CANVAS"?l.replaceWith(s):l.classList.contains("annotationContent")?l.after(s):l.before(s):a.append(s);const d=u(this,ul).get(n);d&&(d._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,a.id,s),d._hasNoCanvas=!1):d.canvas=s)}u(this,qc).clear()};let JE=KT;const r0=/\r\n?|\n/g;var Vi,ag,$c,qi,sn,nD,iD,sD,N0,Jr,I0,D0,oD,QE,rD;const Re=class Re extends Ce{constructor(e){super({...e,name:"freeTextEditor"});x(this,sn);x(this,Vi,"");x(this,ag,`${this.id}-editor`);x(this,$c,null);x(this,qi);W(this,"_colorPicker",null);this.color=e.color||Re._defaultColor||Ce._defaultLineColor,T(this,qi,e.fontSize||Re._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const e=Re.prototype,n=l=>l.isEmpty(),s=hu.TRANSLATE_SMALL,a=hu.TRANSLATE_BIG;return Mt(this,"_keyboardManager",new Rg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}]]))}static initialize(e,n){Ce.initialize(e,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Yt.FREETEXT_SIZE:Re._defaultFontSize=n;break;case Yt.FREETEXT_COLOR:Re._defaultColor=n;break}}updateParams(e,n){switch(e){case Yt.FREETEXT_SIZE:N(this,sn,nD).call(this,n);break;case Yt.FREETEXT_COLOR:N(this,sn,iD).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Yt.FREETEXT_SIZE,Re._defaultFontSize],[Yt.FREETEXT_COLOR,Re._defaultColor||Ce._defaultLineColor]]}get propertiesToUpdate(){return[[Yt.FREETEXT_SIZE,u(this,qi)],[Yt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new rv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Yt.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Re._internalPadding*e,-(Re._internalPadding+u(this,qi))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),T(this,$c,new AbortController);const e=this._uiManager.combinedSignal(u(this,$c));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,ag)),this._isDraggable=!0,(e=u(this,$c))==null||e.abort(),T(this,$c,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=u(this,Vi),n=T(this,Vi,N(this,sn,sD).call(this).trimEnd());if(e===n)return;const s=a=>{if(T(this,Vi,a),!a){this.remove();return}N(this,sn,D0).call(this),this._uiManager.rebuild(this),N(this,sn,N0).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(e)},mustExec:!1}),N(this,sn,N0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Re._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,ag)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${u(this,qi)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,l]=this.parentDimensions;if(this.annotationElementId){const{position:d}=this._initialData;let[h,f]=this.getInitialTranslation();[h,f]=this.pageTranslationToScreen(h,f);const[m,v]=this.pageDimensions,[A,E]=this.pageTranslation;let _,C;switch(this.rotation){case 0:_=e+(d[0]-A)/m,C=n+this.height-(d[1]-E)/v;break;case 90:_=e+(d[0]-A)/m,C=n-(d[1]-E)/v,[h,f]=[f,-h];break;case 180:_=e-this.width+(d[0]-A)/m,C=n-(d[1]-E)/v,[h,f]=[-h,-f];break;case 270:_=e+(d[0]-A-this.height*v)/m,C=n+(d[1]-E-this.width*m)/v,[h,f]=[-f,h];break}this.setAt(_*a,C*l,h,f)}else this._moveAfterPaste(e,n);N(this,sn,D0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var _,C,M;const n=e.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const a=N(_=Re,Jr,QE).call(_,n.getData("text")||"").replaceAll(r0,`
`);if(!a)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const d=l.getRangeAt(0);if(!a.includes(`
`)){d.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:h,startOffset:f}=d,m=[],v=[];if(h.nodeType===Node.TEXT_NODE){const R=h.parentElement;if(v.push(h.nodeValue.slice(f).replaceAll(r0,"")),R!==this.editorDiv){let L=m;for(const I of this.editorDiv.childNodes){if(I===R){L=v;continue}L.push(N(C=Re,Jr,I0).call(C,I))}}m.push(h.nodeValue.slice(0,f).replaceAll(r0,""))}else if(h===this.editorDiv){let R=m,L=0;for(const I of this.editorDiv.childNodes)L++===f&&(R=v),R.push(N(M=Re,Jr,I0).call(M,I))}T(this,Vi,`${m.join(`
`)}${a}${v.join(`
`)}`),N(this,sn,D0).call(this);const A=new Range;let E=Math.sumPrecise(m.map(R=>R.length));for(const{firstChild:R}of this.editorDiv.childNodes)if(R.nodeType===Node.TEXT_NODE){const L=R.nodeValue.length;if(E<=L){A.setStart(R,E),A.setEnd(R,E);break}E-=L}l.removeAllRanges(),l.addRange(A)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Re._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,s){var d;let a=null;if(e instanceof ZI){const{data:{defaultAppearanceData:{fontSize:h,fontColor:f},rect:m,rotation:v,id:A,popupRef:E,richText:_,contentsObj:C,creationDate:M,modificationDate:R},textContent:L,textPosition:I,parent:{page:{pageNumber:U}}}=e;if(!L||L.length===0)return null;a=e={annotationType:Dt.FREETEXT,color:Array.from(f),fontSize:h,value:L.join(`
`),position:I,pageIndex:U-1,rect:m.slice(0),rotation:v,annotationElementId:A,id:A,deleted:!1,popupRef:E,comment:(C==null?void 0:C.str)||null,richText:_,creationDate:M,modificationDate:R}}const l=await super.deserialize(e,n,s);return T(l,qi,e.fontSize),l.color=ut.makeHexColor(...e.color),T(l,Vi,N(d=Re,Jr,QE).call(d,e.value)),l._initialData=a,e.comment&&l.setCommentData(e),l}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Ce._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(e),{color:n,fontSize:u(this,qi),value:N(this,sn,oD).call(this)});return this.addComment(s),e?(s.isCopy=!0,s):this.annotationElementId&&!N(this,sn,rD).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:s}=n;s.fontSize=`calc(${u(this,qi)}px * var(--total-scale-factor))`,s.color=this.color,n.replaceChildren();for(const a of u(this,Vi).split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),n.append(l)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:u(this,Vi)}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Vi=new WeakMap,ag=new WeakMap,$c=new WeakMap,qi=new WeakMap,sn=new WeakSet,nD=function(e){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-u(this,qi))*this.parentScale),T(this,qi,a),N(this,sn,N0).call(this)},s=u(this,qi);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Yt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},iD=function(e){const n=a=>{this.color=a,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Yt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},sD=function(){var s;const e=[];this.editorDiv.normalize();let n=null;for(const a of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(e.push(N(s=Re,Jr,I0).call(s,a)),n=a);return e.join(`
`)},N0=function(){const[e,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:l}=this,d=l.style.display,h=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",a.div.append(this.div),s=l.getBoundingClientRect(),l.remove(),l.style.display=d,l.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/n):(this.width=s.height/e,this.height=s.width/n),this.fixAndSetPosition()},Jr=new WeakSet,I0=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(r0,"")},D0=function(){if(this.editorDiv.replaceChildren(),!!u(this,Vi))for(const e of u(this,Vi).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},oD=function(){return u(this,Vi).replaceAll(""," ")},QE=function(e){return e.replaceAll(" ","")},rD=function(e){const{value:n,fontSize:s,color:a,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==s||e.color.some((d,h)=>d!==a[h])||e.pageIndex!==l},x(Re,Jr),W(Re,"_freeTextDefaultContent",""),W(Re,"_internalPadding",0),W(Re,"_defaultColor",null),W(Re,"_defaultFontSize",10),W(Re,"_type","freetext"),W(Re,"_editorType",Dt.FREETEXT);let WE=Re;class ft{toSVGPath(){se("Abstract method `toSVGPath` must be implemented.")}get box(){se("Abstract getter `box` must be implemented.")}serialize(t,e){se("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,s,a,l){l||(l=new Float32Array(t.length));for(let d=0,h=t.length;d<h;d+=2)l[d]=e+t[d]*s,l[d+1]=n+t[d+1]*a;return l}static _rescaleAndSwap(t,e,n,s,a,l){l||(l=new Float32Array(t.length));for(let d=0,h=t.length;d<h;d+=2)l[d]=e+t[d+1]*s,l[d+1]=n+t[d]*a;return l}static _translate(t,e,n,s){s||(s=new Float32Array(t.length));for(let a=0,l=t.length;a<l;a+=2)s[a]=e+t[a],s[a+1]=n+t[a+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,s,a){switch(a){case 90:return[1-e/n,t/s];case 180:return[1-t/n,1-e/s];case 270:return[e/n,1-t/s];default:return[t/n,e/s]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,s,a,l){return[(t+5*n)/6,(e+5*s)/6,(5*n+a)/6,(5*s+l)/6,(n+a)/2,(s+l)/2]}}W(ft,"PRECISION",1e-4);var Yi,Js,xh,Mh,Mo,Bt,Xc,Jc,lg,cg,Rh,Nh,dl,ug,Cv,wv,dn,Ap,aD,lD,cD,uD,dD,hD;const lr=class lr{constructor({x:t,y:e},n,s,a,l,d=0){x(this,dn);x(this,Yi);x(this,Js,[]);x(this,xh);x(this,Mh);x(this,Mo,[]);x(this,Bt,new Float32Array(18));x(this,Xc);x(this,Jc);x(this,lg);x(this,cg);x(this,Rh);x(this,Nh);x(this,dl,[]);T(this,Yi,n),T(this,Nh,a*s),T(this,Mh,l),u(this,Bt).set([NaN,NaN,NaN,NaN,t,e],6),T(this,xh,d),T(this,cg,u(lr,ug)*s),T(this,lg,u(lr,wv)*s),T(this,Rh,s),u(this,dl).push(t,e)}isEmpty(){return isNaN(u(this,Bt)[8])}add({x:t,y:e}){var X;T(this,Xc,t),T(this,Jc,e);const[n,s,a,l]=u(this,Yi);let[d,h,f,m]=u(this,Bt).subarray(8,12);const v=t-f,A=e-m,E=Math.hypot(v,A);if(E<u(this,lg))return!1;const _=E-u(this,cg),C=_/E,M=C*v,R=C*A;let L=d,I=h;d=f,h=m,f+=M,m+=R,(X=u(this,dl))==null||X.push(t,e);const U=-R/_,P=M/_,O=U*u(this,Nh),F=P*u(this,Nh);return u(this,Bt).set(u(this,Bt).subarray(2,8),0),u(this,Bt).set([f+O,m+F],4),u(this,Bt).set(u(this,Bt).subarray(14,18),12),u(this,Bt).set([f-O,m-F],16),isNaN(u(this,Bt)[6])?(u(this,Mo).length===0&&(u(this,Bt).set([d+O,h+F],2),u(this,Mo).push(NaN,NaN,NaN,NaN,(d+O-n)/a,(h+F-s)/l),u(this,Bt).set([d-O,h-F],14),u(this,Js).push(NaN,NaN,NaN,NaN,(d-O-n)/a,(h-F-s)/l)),u(this,Bt).set([L,I,d,h,f,m],6),!this.isEmpty()):(u(this,Bt).set([L,I,d,h,f,m],6),Math.abs(Math.atan2(I-h,L-d)-Math.atan2(R,M))<Math.PI/2?([d,h,f,m]=u(this,Bt).subarray(2,6),u(this,Mo).push(NaN,NaN,NaN,NaN,((d+f)/2-n)/a,((h+m)/2-s)/l),[d,h,L,I]=u(this,Bt).subarray(14,18),u(this,Js).push(NaN,NaN,NaN,NaN,((L+d)/2-n)/a,((I+h)/2-s)/l),!0):([L,I,d,h,f,m]=u(this,Bt).subarray(0,6),u(this,Mo).push(((L+5*d)/6-n)/a,((I+5*h)/6-s)/l,((5*d+f)/6-n)/a,((5*h+m)/6-s)/l,((d+f)/2-n)/a,((h+m)/2-s)/l),[f,m,d,h,L,I]=u(this,Bt).subarray(12,18),u(this,Js).push(((L+5*d)/6-n)/a,((I+5*h)/6-s)/l,((5*d+f)/6-n)/a,((5*h+m)/6-s)/l,((d+f)/2-n)/a,((h+m)/2-s)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=u(this,Mo),e=u(this,Js);if(isNaN(u(this,Bt)[6])&&!this.isEmpty())return N(this,dn,aD).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);N(this,dn,cD).call(this,n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return N(this,dn,lD).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,s,a,l){return new fD(t,e,n,s,a,l)}getOutlines(){var v;const t=u(this,Mo),e=u(this,Js),n=u(this,Bt),[s,a,l,d]=u(this,Yi),h=new Float32Array((((v=u(this,dl))==null?void 0:v.length)??0)+2);for(let A=0,E=h.length-2;A<E;A+=2)h[A]=(u(this,dl)[A]-s)/l,h[A+1]=(u(this,dl)[A+1]-a)/d;if(h[h.length-2]=(u(this,Xc)-s)/l,h[h.length-1]=(u(this,Jc)-a)/d,isNaN(n[6])&&!this.isEmpty())return N(this,dn,uD).call(this,h);const f=new Float32Array(u(this,Mo).length+24+u(this,Js).length);let m=t.length;for(let A=0;A<m;A+=2){if(isNaN(t[A])){f[A]=f[A+1]=NaN;continue}f[A]=t[A],f[A+1]=t[A+1]}m=N(this,dn,hD).call(this,f,m);for(let A=e.length-6;A>=6;A-=6)for(let E=0;E<6;E+=2){if(isNaN(e[A+E])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=e[A+E],f[m+1]=e[A+E+1],m+=2}return N(this,dn,dD).call(this,f,m),this.newFreeDrawOutline(f,h,u(this,Yi),u(this,Rh),u(this,xh),u(this,Mh))}};Yi=new WeakMap,Js=new WeakMap,xh=new WeakMap,Mh=new WeakMap,Mo=new WeakMap,Bt=new WeakMap,Xc=new WeakMap,Jc=new WeakMap,lg=new WeakMap,cg=new WeakMap,Rh=new WeakMap,Nh=new WeakMap,dl=new WeakMap,ug=new WeakMap,Cv=new WeakMap,wv=new WeakMap,dn=new WeakSet,Ap=function(){const t=u(this,Bt).subarray(4,6),e=u(this,Bt).subarray(16,18),[n,s,a,l]=u(this,Yi);return[(u(this,Xc)+(t[0]-e[0])/2-n)/a,(u(this,Jc)+(t[1]-e[1])/2-s)/l,(u(this,Xc)+(e[0]-t[0])/2-n)/a,(u(this,Jc)+(e[1]-t[1])/2-s)/l]},aD=function(){const[t,e,n,s]=u(this,Yi),[a,l,d,h]=N(this,dn,Ap).call(this);return`M${(u(this,Bt)[2]-t)/n} ${(u(this,Bt)[3]-e)/s} L${(u(this,Bt)[4]-t)/n} ${(u(this,Bt)[5]-e)/s} L${a} ${l} L${d} ${h} L${(u(this,Bt)[16]-t)/n} ${(u(this,Bt)[17]-e)/s} L${(u(this,Bt)[14]-t)/n} ${(u(this,Bt)[15]-e)/s} Z`},lD=function(t){const e=u(this,Js);t.push(`L${e[4]} ${e[5]} Z`)},cD=function(t){const[e,n,s,a]=u(this,Yi),l=u(this,Bt).subarray(4,6),d=u(this,Bt).subarray(16,18),[h,f,m,v]=N(this,dn,Ap).call(this);t.push(`L${(l[0]-e)/s} ${(l[1]-n)/a} L${h} ${f} L${m} ${v} L${(d[0]-e)/s} ${(d[1]-n)/a}`)},uD=function(t){const e=u(this,Bt),[n,s,a,l]=u(this,Yi),[d,h,f,m]=N(this,dn,Ap).call(this),v=new Float32Array(36);return v.set([NaN,NaN,NaN,NaN,(e[2]-n)/a,(e[3]-s)/l,NaN,NaN,NaN,NaN,(e[4]-n)/a,(e[5]-s)/l,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(e[16]-n)/a,(e[17]-s)/l,NaN,NaN,NaN,NaN,(e[14]-n)/a,(e[15]-s)/l],0),this.newFreeDrawOutline(v,t,u(this,Yi),u(this,Rh),u(this,xh),u(this,Mh))},dD=function(t,e){const n=u(this,Js);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},hD=function(t,e){const n=u(this,Bt).subarray(4,6),s=u(this,Bt).subarray(16,18),[a,l,d,h]=u(this,Yi),[f,m,v,A]=N(this,dn,Ap).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-a)/d,(n[1]-l)/h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,v,A,NaN,NaN,NaN,NaN,(s[0]-a)/d,(s[1]-l)/h],e),e+=24},x(lr,ug,8),x(lr,Cv,2),x(lr,wv,u(lr,ug)+u(lr,Cv));let lv=lr;var Ih,Kc,Br,dg,$i,hg,Ke,xv,pD;class fD extends ft{constructor(e,n,s,a,l,d){super();x(this,xv);x(this,Ih);x(this,Kc,new Float32Array(4));x(this,Br);x(this,dg);x(this,$i);x(this,hg);x(this,Ke);T(this,Ke,e),T(this,$i,n),T(this,Ih,s),T(this,hg,a),T(this,Br,l),T(this,dg,d),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],N(this,xv,pD).call(this,d);const[h,f,m,v]=u(this,Kc);for(let A=0,E=e.length;A<E;A+=2)e[A]=(e[A]-h)/m,e[A+1]=(e[A+1]-f)/v;for(let A=0,E=n.length;A<E;A+=2)n[A]=(n[A]-h)/m,n[A+1]=(n[A+1]-f)/v}toSVGPath(){const e=[`M${u(this,Ke)[4]} ${u(this,Ke)[5]}`];for(let n=6,s=u(this,Ke).length;n<s;n+=6){if(isNaN(u(this,Ke)[n])){e.push(`L${u(this,Ke)[n+4]} ${u(this,Ke)[n+5]}`);continue}e.push(`C${u(this,Ke)[n]} ${u(this,Ke)[n+1]} ${u(this,Ke)[n+2]} ${u(this,Ke)[n+3]} ${u(this,Ke)[n+4]} ${u(this,Ke)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,s,a],l){const d=s-e,h=a-n;let f,m;switch(l){case 0:f=ft._rescale(u(this,Ke),e,a,d,-h),m=ft._rescale(u(this,$i),e,a,d,-h);break;case 90:f=ft._rescaleAndSwap(u(this,Ke),e,n,d,h),m=ft._rescaleAndSwap(u(this,$i),e,n,d,h);break;case 180:f=ft._rescale(u(this,Ke),s,n,-d,h),m=ft._rescale(u(this,$i),s,n,-d,h);break;case 270:f=ft._rescaleAndSwap(u(this,Ke),s,a,-d,-h),m=ft._rescaleAndSwap(u(this,$i),s,a,-d,-h);break}return{outline:Array.from(f),points:[Array.from(m)]}}get box(){return u(this,Kc)}newOutliner(e,n,s,a,l,d=0){return new lv(e,n,s,a,l,d)}getNewOutline(e,n){const[s,a,l,d]=u(this,Kc),[h,f,m,v]=u(this,Ih),A=l*m,E=d*v,_=s*m+h,C=a*v+f,M=this.newOutliner({x:u(this,$i)[0]*A+_,y:u(this,$i)[1]*E+C},u(this,Ih),u(this,hg),e,u(this,dg),n??u(this,Br));for(let R=2;R<u(this,$i).length;R+=2)M.add({x:u(this,$i)[R]*A+_,y:u(this,$i)[R+1]*E+C});return M.getOutlines()}}Ih=new WeakMap,Kc=new WeakMap,Br=new WeakMap,dg=new WeakMap,$i=new WeakMap,hg=new WeakMap,Ke=new WeakMap,xv=new WeakSet,pD=function(e){const n=u(this,Ke);let s=n[4],a=n[5];const l=[s,a,s,a];let d=s,h=a,f=s,m=a;const v=e?Math.max:Math.min,A=new Float32Array(4);for(let _=6,C=n.length;_<C;_+=6){const M=n[_+4],R=n[_+5];isNaN(n[_])?(ut.pointBoundingBox(M,R,l),h>R?(d=M,h=R):h===R&&(d=v(d,M)),m<R?(f=M,m=R):m===R&&(f=v(f,M))):(A[0]=A[1]=1/0,A[2]=A[3]=-1/0,ut.bezierBoundingBox(s,a,...n.slice(_,_+6),A),ut.rectBoundingBox(A[0],A[1],A[2],A[3],l),h>A[1]?(d=A[0],h=A[1]):h===A[1]&&(d=v(d,A[0])),m<A[3]?(f=A[2],m=A[3]):m===A[3]&&(f=v(f,A[2]))),s=M,a=R}const E=u(this,Kc);E[0]=l[0]-u(this,Br),E[1]=l[1]-u(this,Br),E[2]=l[2]-l[0]+2*u(this,Br),E[3]=l[3]-l[1]+2*u(this,Br),this.firstPoint=[d,h],this.lastPoint=[f,m]};var fg,pg,mg,hl,Ks,ni,mD,k0,gD,yD,jE;class ZE{constructor(t,e=0,n=0,s=!0){x(this,ni);x(this,fg);x(this,pg);x(this,mg);x(this,hl,[]);x(this,Ks,[]);const a=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:C,y:M,width:R,height:L}of t){const I=Math.floor((C-e)/l)*l,U=Math.ceil((C+R+e)/l)*l,P=Math.floor((M-e)/l)*l,O=Math.ceil((M+L+e)/l)*l,F=[I,P,O,!0],Z=[U,P,O,!1];u(this,hl).push(F,Z),ut.rectBoundingBox(I,P,U,O,a)}const d=a[2]-a[0]+2*n,h=a[3]-a[1]+2*n,f=a[0]-n,m=a[1]-n;let v=s?-1/0:1/0,A=1/0;const E=u(this,hl).at(s?-1:-2),_=[E[0],E[2]];for(const C of u(this,hl)){const[M,R,L,I]=C;!I&&s?R<A?(A=R,v=M):R===A&&(v=Math.max(v,M)):I&&!s&&(R<A?(A=R,v=M):R===A&&(v=Math.min(v,M))),C[0]=(M-f)/d,C[1]=(R-m)/h,C[2]=(L-m)/h}T(this,fg,new Float32Array([f,m,d,h])),T(this,pg,[v,A]),T(this,mg,_)}getOutlines(){u(this,hl).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of u(this,hl))e[3]?(t.push(...N(this,ni,jE).call(this,e)),N(this,ni,gD).call(this,e)):(N(this,ni,yD).call(this,e),t.push(...N(this,ni,jE).call(this,e)));return N(this,ni,mD).call(this,t)}}fg=new WeakMap,pg=new WeakMap,mg=new WeakMap,hl=new WeakMap,Ks=new WeakMap,ni=new WeakSet,mD=function(t){const e=[],n=new Set;for(const l of t){const[d,h,f]=l;e.push([d,h,l],[d,f,l])}e.sort((l,d)=>l[1]-d[1]||l[0]-d[0]);for(let l=0,d=e.length;l<d;l+=2){const h=e[l][2],f=e[l+1][2];h.push(f),f.push(h),n.add(h),n.add(f)}const s=[];let a;for(;n.size>0;){const l=n.values().next().value;let[d,h,f,m,v]=l;n.delete(l);let A=d,E=h;for(a=[d,f],s.push(a);;){let _;if(n.has(m))_=m;else if(n.has(v))_=v;else break;n.delete(_),[d,h,f,m,v]=_,A!==d&&(a.push(A,E,d,E===h?h:f),A=d),E=E===h?f:h}a.push(A,E)}return new aV(s,u(this,fg),u(this,pg),u(this,mg))},k0=function(t){const e=u(this,Ks);let n=0,s=e.length-1;for(;n<=s;){const a=n+s>>1,l=e[a][0];if(l===t)return a;l<t?n=a+1:s=a-1}return s+1},gD=function([,t,e]){const n=N(this,ni,k0).call(this,t);u(this,Ks).splice(n,0,[t,e])},yD=function([,t,e]){const n=N(this,ni,k0).call(this,t);for(let s=n;s<u(this,Ks).length;s++){const[a,l]=u(this,Ks)[s];if(a!==t)break;if(a===t&&l===e){u(this,Ks).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[a,l]=u(this,Ks)[s];if(a!==t)break;if(a===t&&l===e){u(this,Ks).splice(s,1);return}}},jE=function(t){const[e,n,s]=t,a=[[e,n,s]],l=N(this,ni,k0).call(this,s);for(let d=0;d<l;d++){const[h,f]=u(this,Ks)[d];for(let m=0,v=a.length;m<v;m++){const[,A,E]=a[m];if(!(f<=A||E<=h)){if(A>=h){if(E>f)a[m][1]=f;else{if(v===1)return[];a.splice(m,1),m--,v--}continue}a[m][2]=h,E>f&&a.push([e,f,E])}}}return a};var gg,Dh;class aV extends ft{constructor(e,n,s,a){super();x(this,gg);x(this,Dh);T(this,Dh,e),T(this,gg,n),this.firstPoint=s,this.lastPoint=a}toSVGPath(){const e=[];for(const n of u(this,Dh)){let[s,a]=n;e.push(`M${s} ${a}`);for(let l=2;l<n.length;l+=2){const d=n[l],h=n[l+1];d===s?(e.push(`V${h}`),a=h):h===a&&(e.push(`H${d}`),s=d)}e.push("Z")}return e.join(" ")}serialize([e,n,s,a],l){const d=[],h=s-e,f=a-n;for(const m of u(this,Dh)){const v=new Array(m.length);for(let A=0;A<m.length;A+=2)v[A]=e+m[A]*h,v[A+1]=a-m[A+1]*f;d.push(v)}return d}get box(){return u(this,gg)}get classNamesForOutlining(){return["highlightOutline"]}}gg=new WeakMap,Dh=new WeakMap;class tT extends lv{newFreeDrawOutline(t,e,n,s,a,l){return new lV(t,e,n,s,a,l)}}class lV extends fD{newOutliner(t,e,n,s,a,l=0){return new tT(t,e,n,s,a,l)}}var kh,yg,Fr,Wc,vg,Ai,Ag,Sg,Qc,Xi,Ji,Dn,Lh,Ph,Yn,Uh,Ms,bg,Ut,eT,L0,vD,AD,SD,nT,Kl,Ns,cd,bD,P0,U0,ED,TD,_D,CD,wD;const ne=class ne extends Ce{constructor(e){super({...e,name:"highlightEditor"});x(this,Ut);x(this,kh,null);x(this,yg,0);x(this,Fr);x(this,Wc,null);x(this,vg,null);x(this,Ai,null);x(this,Ag,null);x(this,Sg,0);x(this,Qc,null);x(this,Xi,null);x(this,Ji,null);x(this,Dn,!1);x(this,Lh,null);x(this,Ph,null);x(this,Yn,null);x(this,Uh,"");x(this,Ms);x(this,bg,"");this.color=e.color||ne._defaultColor,T(this,Ms,e.thickness||ne._defaultThickness),this.opacity=e.opacity||ne._defaultOpacity,T(this,Fr,e.boxes||null),T(this,bg,e.methodOfCreation||""),T(this,Uh,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(T(this,Dn,!0),N(this,Ut,L0).call(this,e),N(this,Ut,Kl).call(this)):u(this,Fr)&&(T(this,kh,e.anchorNode),T(this,yg,e.anchorOffset),T(this,Ag,e.focusNode),T(this,Sg,e.focusOffset),N(this,Ut,eT).call(this),N(this,Ut,Kl).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=ne.prototype;return Mt(this,"_keyboardManager",new Rg([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,Dn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:u(this,Ms),methodOfCreation:u(this,bg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var s;Ce.initialize(e,n),ne._defaultColor||(ne._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Yt.HIGHLIGHT_COLOR:ne._defaultColor=n;break;case Yt.HIGHLIGHT_THICKNESS:ne._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return u(this,Ph)}get commentButtonPosition(){return u(this,Lh)}updateParams(e,n){switch(e){case Yt.HIGHLIGHT_COLOR:N(this,Ut,vD).call(this,n);break;case Yt.HIGHLIGHT_THICKNESS:N(this,Ut,AD).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Yt.HIGHLIGHT_COLOR,ne._defaultColor],[Yt.HIGHLIGHT_THICKNESS,ne._defaultThickness]]}get propertiesToUpdate(){return[[Yt.HIGHLIGHT_COLOR,this.color||ne._defaultColor],[Yt.HIGHLIGHT_THICKNESS,u(this,Ms)||ne._defaultThickness],[Yt.HIGHLIGHT_FREE,u(this,Dn)]]}onUpdatedColor(){var e,n;(e=this.parent)==null||e.drawLayer.updateProperties(u(this,Ji),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=u(this,vg))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",T(this,vg,new ov({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(N(this,Ut,U0).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,N(this,Ut,U0).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){N(this,Ut,nT).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(N(this,Ut,Kl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?N(this,Ut,nT).call(this):e&&(N(this,Ut,Kl).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var a,l,d;const{drawLayer:n}=this.parent;let s;u(this,Dn)?(e=(e-this.rotation+360)%360,s=N(a=ne,Ns,cd).call(a,u(this,Xi).box,e)):s=N(l=ne,Ns,cd).call(l,[this.x,this.y,this.width,this.height],e),n.updateProperties(u(this,Ji),{bbox:s,root:{"data-main-rotation":e}}),n.updateProperties(u(this,Yn),{bbox:N(d=ne,Ns,cd).call(d,u(this,Ai).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();u(this,Uh)&&(e.setAttribute("aria-label",u(this,Uh)),e.setAttribute("role","mark")),u(this,Dn)?e.classList.add("free"):this.div.addEventListener("keydown",N(this,Ut,bD).bind(this),{signal:this._uiManager._signal});const n=T(this,Qc,document.createElement("div"));return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=u(this,Wc),this.setDims(),kN(this,u(this,Qc),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(u(this,Yn),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(u(this,Yn),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:N(this,Ut,P0).call(this,!0);break;case 1:case 3:N(this,Ut,P0).call(this,!1);break}}select(){var e;super.select(),u(this,Yn)&&((e=this.parent)==null||e.drawLayer.updateProperties(u(this,Yn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),u(this,Yn)&&((e=this.parent)==null||e.drawLayer.updateProperties(u(this,Yn),{rootClass:{selected:!1}}),u(this,Dn)||N(this,Ut,P0).call(this,!1))}get _mustFixPosition(){return!u(this,Dn)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(u(this,Ji),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(u(this,Yn),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:s,x:a,y:l}){const{x:d,y:h,width:f,height:m}=s.getBoundingClientRect(),v=new AbortController,A=e.combinedSignal(v),E=_=>{v.abort(),N(this,Ns,CD).call(this,e,_)};window.addEventListener("blur",E,{signal:A}),window.addEventListener("pointerup",E,{signal:A}),window.addEventListener("pointerdown",qe,{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",Ls,{signal:A}),s.addEventListener("pointermove",N(this,Ns,_D).bind(this,e),{signal:A}),this._freeHighlight=new tT({x:a,y:l},[d,h,f,m],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,s){var C,M,R,L;let a=null;if(e instanceof tD){const{data:{quadPoints:I,rect:U,rotation:P,id:O,color:F,opacity:Z,popupRef:X,richText:nt,contentsObj:it,creationDate:dt,modificationDate:gt},parent:{page:{pageNumber:ct}}}=e;a=e={annotationType:Dt.HIGHLIGHT,color:Array.from(F),opacity:Z,quadPoints:I,boxes:null,pageIndex:ct-1,rect:U.slice(0),rotation:P,annotationElementId:O,id:O,deleted:!1,popupRef:X,richText:nt,comment:(it==null?void 0:it.str)||null,creationDate:dt,modificationDate:gt}}else if(e instanceof GT){const{data:{inkLists:I,rect:U,rotation:P,id:O,color:F,borderStyle:{rawWidth:Z},popupRef:X,richText:nt,contentsObj:it,creationDate:dt,modificationDate:gt},parent:{page:{pageNumber:ct}}}=e;a=e={annotationType:Dt.HIGHLIGHT,color:Array.from(F),thickness:Z,inkLists:I,boxes:null,pageIndex:ct-1,rect:U.slice(0),rotation:P,annotationElementId:O,id:O,deleted:!1,popupRef:X,richText:nt,comment:(it==null?void 0:it.str)||null,creationDate:dt,modificationDate:gt}}const{color:l,quadPoints:d,inkLists:h,opacity:f}=e,m=await super.deserialize(e,n,s);m.color=ut.makeHexColor(...l),m.opacity=f||1,h&&T(m,Ms,e.thickness),m._initialData=a,e.comment&&m.setCommentData(e);const[v,A]=m.pageDimensions,[E,_]=m.pageTranslation;if(d){const I=T(m,Fr,[]);for(let U=0;U<d.length;U+=8)I.push({x:(d[U]-E)/v,y:1-(d[U+1]-_)/A,width:(d[U+2]-d[U])/v,height:(d[U+1]-d[U+5])/A});N(C=m,Ut,eT).call(C),N(M=m,Ut,Kl).call(M),m.rotate(m.rotation)}else if(h){T(m,Dn,!0);const I=h[0],U={x:I[0]-E,y:A-(I[1]-_)},P=new tT(U,[0,0,v,A],1,u(m,Ms)/2,!0,.001);for(let Z=0,X=I.length;Z<X;Z+=2)U.x=I[Z]-E,U.y=A-(I[Z+1]-_),P.add(U);const{id:O,clipPathId:F}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:P.toSVGPath()}},!0,!0);N(R=m,Ut,L0).call(R,{highlightOutlines:P.getOutlines(),highlightId:O,clipPathId:F}),N(L=m,Ut,Kl).call(L),m.rotate(m.parentRotation)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=Ce._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(e);return Object.assign(s,{color:n,opacity:this.opacity,thickness:u(this,Ms),quadPoints:N(this,Ut,ED).call(this),outlines:N(this,Ut,TD).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!N(this,Ut,wD).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};kh=new WeakMap,yg=new WeakMap,Fr=new WeakMap,Wc=new WeakMap,vg=new WeakMap,Ai=new WeakMap,Ag=new WeakMap,Sg=new WeakMap,Qc=new WeakMap,Xi=new WeakMap,Ji=new WeakMap,Dn=new WeakMap,Lh=new WeakMap,Ph=new WeakMap,Yn=new WeakMap,Uh=new WeakMap,Ms=new WeakMap,bg=new WeakMap,Ut=new WeakSet,eT=function(){const e=new ZE(u(this,Fr),.001);T(this,Xi,e.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,Xi).box;const n=new ZE(u(this,Fr),.0025,.001,this._uiManager.direction==="ltr");T(this,Ai,n.getOutlines());const{firstPoint:s}=u(this,Xi);T(this,Lh,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:a}=u(this,Ai);T(this,Ph,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height])},L0=function({highlightOutlines:e,highlightId:n,clipPathId:s}){var A,E;if(T(this,Xi,e),T(this,Ai,e.getNewOutline(u(this,Ms)/2+1.5,.0025)),n>=0)T(this,Ji,n),T(this,Wc,s),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),T(this,Yn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,Ai).box,path:{d:u(this,Ai).toSVGPath()}},!0));else if(this.parent){const _=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,Ji),{bbox:N(A=ne,Ns,cd).call(A,u(this,Xi).box,(_-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,Yn),{bbox:N(E=ne,Ns,cd).call(E,u(this,Ai).box,_),path:{d:u(this,Ai).toSVGPath()}})}const[l,d,h,f]=e.box;switch(this.rotation){case 0:this.x=l,this.y=d,this.width=h,this.height=f;break;case 90:{const[_,C]=this.parentDimensions;this.x=d,this.y=1-l,this.width=h*C/_,this.height=f*_/C;break}case 180:this.x=1-l,this.y=1-d,this.width=h,this.height=f;break;case 270:{const[_,C]=this.parentDimensions;this.x=1-d,this.y=l,this.width=h*C/_,this.height=f*_/C;break}}const{firstPoint:m}=e;T(this,Lh,[(m[0]-l)/h,(m[1]-d)/f]);const{lastPoint:v}=u(this,Ai);T(this,Ph,[(v[0]-l)/h,(v[1]-d)/f])},vD=function(e){const n=(l,d)=>{this.color=l,this.opacity=d,this.onUpdatedColor()},s=this.color,a=this.opacity;this.addCommands({cmd:n.bind(this,e,ne._defaultOpacity),undo:n.bind(this,s,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Yt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},AD=function(e){const n=u(this,Ms),s=a=>{T(this,Ms,a),N(this,Ut,SD).call(this,a)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Yt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},SD=function(e){u(this,Dn)&&(N(this,Ut,L0).call(this,{highlightOutlines:u(this,Xi).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())},nT=function(){u(this,Ji)===null||!this.parent||(this.parent.drawLayer.remove(u(this,Ji)),T(this,Ji,null),this.parent.drawLayer.remove(u(this,Yn)),T(this,Yn,null))},Kl=function(e=this.parent){u(this,Ji)===null&&({id:an(this,Ji)._,clipPathId:an(this,Wc)._}=e.drawLayer.draw({bbox:u(this,Xi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:u(this,Dn)},path:{d:u(this,Xi).toSVGPath()}},!1,!0),T(this,Yn,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,Dn)},bbox:u(this,Ai).box,path:{d:u(this,Ai).toSVGPath()}},u(this,Dn))),u(this,Qc)&&(u(this,Qc).style.clipPath=u(this,Wc)))},Ns=new WeakSet,cd=function([e,n,s,a],l){switch(l){case 90:return[1-n-a,e,a,s];case 180:return[1-e-s,1-n-a,s,a];case 270:return[n,1-e-s,a,s]}return[e,n,s,a]},bD=function(e){ne._keyboardManager.exec(this,e)},P0=function(e){if(!u(this,kh))return;const n=window.getSelection();e?n.setPosition(u(this,kh),u(this,yg)):n.setPosition(u(this,Ag),u(this,Sg))},U0=function(){return u(this,Dn)?this.rotation:0},ED=function(){if(u(this,Dn))return null;const[e,n]=this.pageDimensions,[s,a]=this.pageTranslation,l=u(this,Fr),d=new Float32Array(l.length*8);let h=0;for(const{x:f,y:m,width:v,height:A}of l){const E=f*e+s,_=(1-m)*n+a;d[h]=d[h+4]=E,d[h+1]=d[h+3]=_,d[h+2]=d[h+6]=E+v*e,d[h+5]=d[h+7]=_-A*n,h+=8}return d},TD=function(e){return u(this,Xi).serialize(e,N(this,Ut,U0).call(this))},_D=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},CD=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},wD=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((s,a)=>s!==n[a])},x(ne,Ns),W(ne,"_defaultColor",null),W(ne,"_defaultOpacity",1),W(ne,"_defaultThickness",12),W(ne,"_type","highlight"),W(ne,"_editorType",Dt.HIGHLIGHT),W(ne,"_freeHighlightId",-1),W(ne,"_freeHighlight",null),W(ne,"_freeHighlightClipId","");let cv=ne;var Zc;class xD{constructor(){x(this,Zc,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){u(this,Zc)[t]=e}toSVGProperties(){const t=u(this,Zc);return T(this,Zc,Object.create(null)),{root:t}}reset(){T(this,Zc,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){se("Not implemented")}}Zc=new WeakMap;var Ki,Oh,yn,jc,tu,Kt,iT,sT,oT,Sp,MD,O0,bp,ud;const Vt=class Vt extends Ce{constructor(e){super(e);x(this,Kt);x(this,Ki,null);x(this,Oh);W(this,"_colorPicker",null);W(this,"_drawId",null);T(this,Oh,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(N(this,Kt,iT).call(this,e),N(this,Kt,Sp).call(this))}static _mergeSVGProperties(e,n){const s=new Set(Object.keys(e));for(const[a,l]of Object.entries(n))s.has(a)?Object.assign(e[a],l):e[a]=l;return e}static getDefaultDrawingOptions(e){se("Not implemented")}static get typesMap(){se("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(u(Vt,yn).updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[s,a]of this.typesMap)e.push([s,n[a]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[s,a]of this.constructor.typesMap)e.push([s,n[a]]);return e}_updateProperty(e,n,s){const a=this._drawingOptions,l=a[n],d=h=>{var m;a.updateProperty(n,h);const f=u(this,Ki).updateProperty(n,h);f&&N(this,Kt,bp).call(this,f),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:d.bind(this,s),undo:d.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Vt._mergeSVGProperties(u(this,Ki).getPathResizingSVGProperties(N(this,Kt,O0).call(this)),{bbox:N(this,Kt,ud).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Vt._mergeSVGProperties(u(this,Ki).getPathResizedSVGProperties(N(this,Kt,O0).call(this)),{bbox:N(this,Kt,ud).call(this)}))}_onTranslating(e,n){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:N(this,Kt,ud).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Vt._mergeSVGProperties(u(this,Ki).getPathTranslatedSVGProperties(N(this,Kt,O0).call(this),this.parentDimensions),{bbox:N(this,Kt,ud).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,Oh)&&(T(this,Oh,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){N(this,Kt,oT).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(N(this,Kt,Sp).call(this),N(this,Kt,bp).call(this,u(this,Ki).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),N(this,Kt,oT).call(this)):e&&(this._uiManager.addShouldRescale(this),N(this,Kt,Sp).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Vt._mergeSVGProperties({bbox:N(this,Kt,ud).call(this)},u(this,Ki).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&N(this,Kt,bp).call(this,u(this,Ki).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const s=super.render();s.classList.add("draw");const a=document.createElement("div");return s.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),s}static createDrawerInstance(e,n,s,a,l){se("Not implemented")}static startDrawing(e,n,s,a){var M;const{target:l,offsetX:d,offsetY:h,pointerId:f,pointerType:m}=a;if(Hn.isInitializedAndDifferentPointerType(m))return;const{viewport:{rotation:v}}=e,{width:A,height:E}=l.getBoundingClientRect(),_=T(Vt,jc,new AbortController),C=e.combinedSignal(_);if(Hn.setPointer(m,f),window.addEventListener("pointerup",R=>{Hn.isSamePointerIdOrRemove(R.pointerId)&&this._endDraw(R)},{signal:C}),window.addEventListener("pointercancel",R=>{Hn.isSamePointerIdOrRemove(R.pointerId)&&this._currentParent.endDrawingSession()},{signal:C}),window.addEventListener("pointerdown",R=>{Hn.isSamePointerType(R.pointerType)&&(Hn.initializeAndAddPointerId(R.pointerId),u(Vt,yn).isCancellable()&&(u(Vt,yn).removeLastElement(),u(Vt,yn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",Ls,{signal:C}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),l.addEventListener("touchmove",R=>{Hn.isSameTimeStamp(R.timeStamp)&&qe(R)},{signal:C}),e.toggleDrawing(),(M=n._editorUndoBar)==null||M.hide(),u(Vt,yn)){e.drawLayer.updateProperties(this._currentDrawId,u(Vt,yn).startNew(d,h,A,E,v));return}n.updateUIForDefaultProperties(this),T(Vt,yn,this.createDrawerInstance(d,h,A,E,v)),T(Vt,tu,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(u(Vt,tu).toSVGProperties(),u(Vt,yn).defaultSVGProperties),!0,!1)}static _drawMove(e){if(Hn.isSameTimeStamp(e.timeStamp),!u(Vt,yn))return;const{offsetX:n,offsetY:s,pointerId:a}=e;if(Hn.isSamePointerId(a)){if(Hn.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(Vt,yn).add(n,s)),Hn.setTimeStamp(e.timeStamp),qe(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,T(Vt,yn,null),T(Vt,tu,null),Hn.clearTimeStamp()),u(Vt,jc)&&(u(Vt,jc).abort(),T(Vt,jc,null),Hn.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,u(Vt,yn).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=u(Vt,yn),a=this._currentDrawId,l=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,s.setLastElement(l))},undo:()=>{n.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:Yt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Yt.DRAW_STEP),!u(Vt,yn).isEmpty()){const{pageDimensions:[s,a],scale:l}=n,d=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(Vt,yn).getOutlines(s*l,a*l,l,this._INNER_MARGIN),drawingOptions:u(Vt,tu),mustBeCommitted:!e});return this._cleanup(!0),d}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,s,a,l,d){se("Not implemented")}static async deserialize(e,n,s){var v,A;const{rawDims:{pageWidth:a,pageHeight:l,pageX:d,pageY:h}}=n.viewport,f=this.deserializeDraw(d,h,a,l,this._INNER_MARGIN,e),m=await super.deserialize(e,n,s);return m.createDrawingOptions(e),N(v=m,Kt,iT).call(v,{drawOutlines:f}),N(A=m,Kt,Sp).call(A),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[n,s]=this.pageTranslation,[a,l]=this.pageDimensions;return u(this,Ki).serialize([n,s,a,l],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Ki=new WeakMap,Oh=new WeakMap,yn=new WeakMap,jc=new WeakMap,tu=new WeakMap,Kt=new WeakSet,iT=function({drawOutlines:e,drawId:n,drawingOptions:s}){T(this,Ki,e),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=N(this,Kt,sT).call(this,e,this.parent),N(this,Kt,bp).call(this,e.box)},sT=function(e,n){const{id:s}=n.drawLayer.draw(Vt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},oT=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Sp=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=N(this,Kt,sT).call(this,u(this,Ki),e)}},MD=function([e,n,s,a]){const{parentDimensions:[l,d],rotation:h}=this;switch(h){case 90:return[n,1-e,s*(d/l),a*(l/d)];case 180:return[1-e,1-n,s,a];case 270:return[1-n,e,s*(d/l),a*(l/d)];default:return[e,n,s,a]}},O0=function(){const{x:e,y:n,width:s,height:a,parentDimensions:[l,d],rotation:h}=this;switch(h){case 90:return[1-n,e,s*(l/d),a*(d/l)];case 180:return[1-e,1-n,s,a];case 270:return[n,1-e,s*(l/d),a*(d/l)];default:return[e,n,s,a]}},bp=function(e){[this.x,this.y,this.width,this.height]=N(this,Kt,MD).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},ud=function(){const{x:e,y:n,width:s,height:a,rotation:l,parentRotation:d,parentDimensions:[h,f]}=this;switch((l*4+d)/90){case 1:return[1-n-a,e,a,s];case 2:return[1-e-s,1-n-a,s,a];case 3:return[n,1-e-s,a,s];case 4:return[e,n-s*(h/f),a*(f/h),s*(h/f)];case 5:return[1-n,e,s*(h/f),a*(f/h)];case 6:return[1-e-a*(f/h),1-n,a*(f/h),s*(h/f)];case 7:return[n-s*(h/f),1-e-a*(f/h),s*(h/f),a*(f/h)];case 8:return[e-s,n-a,s,a];case 9:return[1-n,e-s,a,s];case 10:return[1-e,1-n,s,a];case 11:return[n-a,1-e,a,s];case 12:return[e-a*(f/h),n,a*(f/h),s*(h/f)];case 13:return[1-n-s*(h/f),e-a*(f/h),s*(h/f),a*(f/h)];case 14:return[1-e,1-n-s*(h/f),a*(f/h),s*(h/f)];case 15:return[n,1-e,s*(h/f),a*(f/h)];default:return[e,n,s,a]}},W(Vt,"_currentDrawId",-1),W(Vt,"_currentParent",null),x(Vt,yn,null),x(Vt,jc,null),x(Vt,tu,null),W(Vt,"_INNER_MARGIN",3);let uv=Vt;var Ro,vn,An,eu,Bh,Wn,kn,Rs,nu,iu,su,Fh,B0;class cV{constructor(t,e,n,s,a,l){x(this,Fh);x(this,Ro,new Float64Array(6));x(this,vn);x(this,An);x(this,eu);x(this,Bh);x(this,Wn);x(this,kn,"");x(this,Rs,0);x(this,nu,new Ng);x(this,iu);x(this,su);T(this,iu,n),T(this,su,s),T(this,eu,a),T(this,Bh,l),[t,e]=N(this,Fh,B0).call(this,t,e);const d=T(this,vn,[NaN,NaN,NaN,NaN,t,e]);T(this,Wn,[t,e]),T(this,An,[{line:d,points:u(this,Wn)}]),u(this,Ro).set(d,0)}updateProperty(t,e){t==="stroke-width"&&T(this,Bh,e)}isEmpty(){return!u(this,An)||u(this,An).length===0}isCancellable(){return u(this,Wn).length<=10}add(t,e){[t,e]=N(this,Fh,B0).call(this,t,e);const[n,s,a,l]=u(this,Ro).subarray(2,6),d=t-a,h=e-l;return Math.hypot(u(this,iu)*d,u(this,su)*h)<=2?null:(u(this,Wn).push(t,e),isNaN(n)?(u(this,Ro).set([a,l,t,e],2),u(this,vn).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(u(this,Ro)[0])&&u(this,vn).splice(6,6),u(this,Ro).set([n,s,a,l,t,e],0),u(this,vn).push(...ft.createBezierPoints(n,s,a,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(u(this,Wn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,s,a){T(this,iu,n),T(this,su,s),T(this,eu,a),[t,e]=N(this,Fh,B0).call(this,t,e);const l=T(this,vn,[NaN,NaN,NaN,NaN,t,e]);T(this,Wn,[t,e]);const d=u(this,An).at(-1);return d&&(d.line=new Float32Array(d.line),d.points=new Float32Array(d.points)),u(this,An).push({line:l,points:u(this,Wn)}),u(this,Ro).set(l,0),T(this,Rs,0),this.toSVGPath(),null}getLastElement(){return u(this,An).at(-1)}setLastElement(t){return u(this,An)?(u(this,An).push(t),T(this,vn,t.line),T(this,Wn,t.points),T(this,Rs,0),{path:{d:this.toSVGPath()}}):u(this,nu).setLastElement(t)}removeLastElement(){if(!u(this,An))return u(this,nu).removeLastElement();u(this,An).pop(),T(this,kn,"");for(let t=0,e=u(this,An).length;t<e;t++){const{line:n,points:s}=u(this,An)[t];T(this,vn,n),T(this,Wn,s),T(this,Rs,0),this.toSVGPath()}return{path:{d:u(this,kn)}}}toSVGPath(){const t=ft.svgRound(u(this,vn)[4]),e=ft.svgRound(u(this,vn)[5]);if(u(this,Wn).length===2)return T(this,kn,`${u(this,kn)} M ${t} ${e} Z`),u(this,kn);if(u(this,Wn).length<=6){const s=u(this,kn).lastIndexOf("M");T(this,kn,`${u(this,kn).slice(0,s)} M ${t} ${e}`),T(this,Rs,6)}if(u(this,Wn).length===4){const s=ft.svgRound(u(this,vn)[10]),a=ft.svgRound(u(this,vn)[11]);return T(this,kn,`${u(this,kn)} L ${s} ${a}`),T(this,Rs,12),u(this,kn)}const n=[];u(this,Rs)===0&&(n.push(`M ${t} ${e}`),T(this,Rs,6));for(let s=u(this,Rs),a=u(this,vn).length;s<a;s+=6){const[l,d,h,f,m,v]=u(this,vn).slice(s,s+6).map(ft.svgRound);n.push(`C${l} ${d} ${h} ${f} ${m} ${v}`)}return T(this,kn,u(this,kn)+n.join(" ")),T(this,Rs,u(this,vn).length),u(this,kn)}getOutlines(t,e,n,s){const a=u(this,An).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),u(this,nu).build(u(this,An),t,e,n,u(this,eu),u(this,Bh),s),T(this,Ro,null),T(this,vn,null),T(this,An,null),T(this,kn,null),u(this,nu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ro=new WeakMap,vn=new WeakMap,An=new WeakMap,eu=new WeakMap,Bh=new WeakMap,Wn=new WeakMap,kn=new WeakMap,Rs=new WeakMap,nu=new WeakMap,iu=new WeakMap,su=new WeakMap,Fh=new WeakSet,B0=function(t,e){return ft._normalizePoint(t,e,u(this,iu),u(this,su),u(this,eu))};var Qn,Eg,Tg,Wi,No,Io,Hh,Gh,ou,Un,rr,RD,ND,ID;class Ng extends ft{constructor(){super(...arguments);x(this,Un);x(this,Qn);x(this,Eg,0);x(this,Tg);x(this,Wi);x(this,No);x(this,Io);x(this,Hh);x(this,Gh);x(this,ou)}build(e,n,s,a,l,d,h){T(this,No,n),T(this,Io,s),T(this,Hh,a),T(this,Gh,l),T(this,ou,d),T(this,Tg,h??0),T(this,Wi,e),N(this,Un,ND).call(this)}get thickness(){return u(this,ou)}setLastElement(e){return u(this,Wi).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,Wi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of u(this,Wi)){if(e.push(`M${ft.svgRound(n[4])} ${ft.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${ft.svgRound(n[10])} ${ft.svgRound(n[11])}`);continue}for(let s=6,a=n.length;s<a;s+=6){const[l,d,h,f,m,v]=n.subarray(s,s+6).map(ft.svgRound);e.push(`C${l} ${d} ${h} ${f} ${m} ${v}`)}}return e.join("")}serialize([e,n,s,a],l){const d=[],h=[],[f,m,v,A]=N(this,Un,RD).call(this);let E,_,C,M,R,L,I,U,P;switch(u(this,Gh)){case 0:P=ft._rescale,E=e,_=n+a,C=s,M=-a,R=e+f*s,L=n+(1-m-A)*a,I=e+(f+v)*s,U=n+(1-m)*a;break;case 90:P=ft._rescaleAndSwap,E=e,_=n,C=s,M=a,R=e+m*s,L=n+f*a,I=e+(m+A)*s,U=n+(f+v)*a;break;case 180:P=ft._rescale,E=e+s,_=n,C=-s,M=a,R=e+(1-f-v)*s,L=n+m*a,I=e+(1-f)*s,U=n+(m+A)*a;break;case 270:P=ft._rescaleAndSwap,E=e+s,_=n+a,C=-s,M=-a,R=e+(1-m-A)*s,L=n+(1-f-v)*a,I=e+(1-m)*s,U=n+(1-f)*a;break}for(const{line:O,points:F}of u(this,Wi))d.push(P(O,E,_,C,M,l?new Array(O.length):null)),h.push(P(F,E,_,C,M,l?new Array(F.length):null));return{lines:d,points:h,rect:[R,L,I,U]}}static deserialize(e,n,s,a,l,{paths:{lines:d,points:h},rotation:f,thickness:m}){const v=[];let A,E,_,C,M;switch(f){case 0:M=ft._rescale,A=-e/s,E=n/a+1,_=1/s,C=-1/a;break;case 90:M=ft._rescaleAndSwap,A=-n/a,E=-e/s,_=1/a,C=1/s;break;case 180:M=ft._rescale,A=e/s+1,E=-n/a,_=-1/s,C=1/a;break;case 270:M=ft._rescaleAndSwap,A=n/a+1,E=e/s+1,_=-1/a,C=-1/s;break}if(!d){d=[];for(const L of h){const I=L.length;if(I===2){d.push(new Float32Array([NaN,NaN,NaN,NaN,L[0],L[1]]));continue}if(I===4){d.push(new Float32Array([NaN,NaN,NaN,NaN,L[0],L[1],NaN,NaN,NaN,NaN,L[2],L[3]]));continue}const U=new Float32Array(3*(I-2));d.push(U);let[P,O,F,Z]=L.subarray(0,4);U.set([NaN,NaN,NaN,NaN,P,O],0);for(let X=4;X<I;X+=2){const nt=L[X],it=L[X+1];U.set(ft.createBezierPoints(P,O,F,Z,nt,it),(X-2)*3),[P,O,F,Z]=[F,Z,nt,it]}}}for(let L=0,I=d.length;L<I;L++)v.push({line:M(d[L].map(U=>U??NaN),A,E,_,C),points:M(h[L].map(U=>U??NaN),A,E,_,C)});const R=new this.prototype.constructor;return R.build(v,s,a,1,f,m,l),R}get box(){return u(this,Qn)}updateProperty(e,n){return e==="stroke-width"?N(this,Un,ID).call(this,n):null}updateParentDimensions([e,n],s){const[a,l]=N(this,Un,rr).call(this);T(this,No,e),T(this,Io,n),T(this,Hh,s);const[d,h]=N(this,Un,rr).call(this),f=d-a,m=h-l,v=u(this,Qn);return v[0]-=f,v[1]-=m,v[2]+=2*f,v[3]+=2*m,v}updateRotation(e){return T(this,Eg,e),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,Qn).map(ft.svgRound).join(" ")}get defaultProperties(){const[e,n]=u(this,Qn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ft.svgRound(e)} ${ft.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=u(this,Qn);let s=0,a=0,l=0,d=0,h=0,f=0;switch(u(this,Eg)){case 90:a=n/e,l=-e/n,h=e;break;case 180:s=-1,d=-1,h=e,f=n;break;case 270:a=-n/e,l=e/n,f=n;break;default:return""}return`matrix(${s} ${a} ${l} ${d} ${ft.svgRound(h)} ${ft.svgRound(f)})`}getPathResizingSVGProperties([e,n,s,a]){const[l,d]=N(this,Un,rr).call(this),[h,f,m,v]=u(this,Qn);if(Math.abs(m-l)<=ft.PRECISION||Math.abs(v-d)<=ft.PRECISION){const M=e+s/2-(h+m/2),R=n+a/2-(f+v/2);return{path:{"transform-origin":`${ft.svgRound(e)} ${ft.svgRound(n)}`,transform:`${this.rotationTransform} translate(${M} ${R})`}}}const A=(s-2*l)/(m-2*l),E=(a-2*d)/(v-2*d),_=m/s,C=v/a;return{path:{"transform-origin":`${ft.svgRound(h)} ${ft.svgRound(f)}`,transform:`${this.rotationTransform} scale(${_} ${C}) translate(${ft.svgRound(l)} ${ft.svgRound(d)}) scale(${A} ${E}) translate(${ft.svgRound(-l)} ${ft.svgRound(-d)})`}}}getPathResizedSVGProperties([e,n,s,a]){const[l,d]=N(this,Un,rr).call(this),h=u(this,Qn),[f,m,v,A]=h;if(h[0]=e,h[1]=n,h[2]=s,h[3]=a,Math.abs(v-l)<=ft.PRECISION||Math.abs(A-d)<=ft.PRECISION){const R=e+s/2-(f+v/2),L=n+a/2-(m+A/2);for(const{line:I,points:U}of u(this,Wi))ft._translate(I,R,L,I),ft._translate(U,R,L,U);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ft.svgRound(e)} ${ft.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const E=(s-2*l)/(v-2*l),_=(a-2*d)/(A-2*d),C=-E*(f+l)+e+l,M=-_*(m+d)+n+d;if(E!==1||_!==1||C!==0||M!==0)for(const{line:R,points:L}of u(this,Wi))ft._rescale(R,C,M,E,_,R),ft._rescale(L,C,M,E,_,L);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ft.svgRound(e)} ${ft.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],s){const[a,l]=s,d=u(this,Qn),h=e-d[0],f=n-d[1];if(u(this,No)===a&&u(this,Io)===l)for(const{line:m,points:v}of u(this,Wi))ft._translate(m,h,f,m),ft._translate(v,h,f,v);else{const m=u(this,No)/a,v=u(this,Io)/l;T(this,No,a),T(this,Io,l);for(const{line:A,points:E}of u(this,Wi))ft._rescale(A,h,f,m,v,A),ft._rescale(E,h,f,m,v,E);d[2]*=m,d[3]*=v}return d[0]=e,d[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ft.svgRound(e)} ${ft.svgRound(n)}`}}}get defaultSVGProperties(){const e=u(this,Qn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ft.svgRound(e[0])} ${ft.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}Qn=new WeakMap,Eg=new WeakMap,Tg=new WeakMap,Wi=new WeakMap,No=new WeakMap,Io=new WeakMap,Hh=new WeakMap,Gh=new WeakMap,ou=new WeakMap,Un=new WeakSet,rr=function(e=u(this,ou)){const n=u(this,Tg)+e/2*u(this,Hh);return u(this,Gh)%180===0?[n/u(this,No),n/u(this,Io)]:[n/u(this,Io),n/u(this,No)]},RD=function(){const[e,n,s,a]=u(this,Qn),[l,d]=N(this,Un,rr).call(this,0);return[e+l,n+d,s-2*l,a-2*d]},ND=function(){const e=T(this,Qn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of u(this,Wi)){if(a.length<=12){for(let h=4,f=a.length;h<f;h+=6)ut.pointBoundingBox(a[h],a[h+1],e);continue}let l=a[4],d=a[5];for(let h=6,f=a.length;h<f;h+=6){const[m,v,A,E,_,C]=a.subarray(h,h+6);ut.bezierBoundingBox(l,d,m,v,A,E,_,C,e),l=_,d=C}}const[n,s]=N(this,Un,rr).call(this);e[0]=Ln(e[0]-n,0,1),e[1]=Ln(e[1]-s,0,1),e[2]=Ln(e[2]+n,0,1),e[3]=Ln(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]},ID=function(e){const[n,s]=N(this,Un,rr).call(this);T(this,ou,e);const[a,l]=N(this,Un,rr).call(this),[d,h]=[a-n,l-s],f=u(this,Qn);return f[0]-=d,f[1]-=h,f[2]+=2*d,f[3]+=2*h,f};class $v extends xD{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Ce._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new $v(this._viewParameters);return t.updateAll(this),t}}var Mv,DD;const vd=class vd extends uv{constructor(e){super({...e,name:"inkEditor"});x(this,Mv);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){Ce.initialize(e,n),this._defaultDrawingOptions=new $v(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Mt(this,"typesMap",new Map([[Yt.INK_THICKNESS,"stroke-width"],[Yt.INK_COLOR,"stroke"],[Yt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,s,a,l){return new cV(e,n,s,a,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,s,a,l,d){return Ng.deserialize(e,n,s,a,l,d)}static async deserialize(e,n,s){let a=null;if(e instanceof GT){const{data:{inkLists:d,rect:h,rotation:f,id:m,color:v,opacity:A,borderStyle:{rawWidth:E},popupRef:_,richText:C,contentsObj:M,creationDate:R,modificationDate:L},parent:{page:{pageNumber:I}}}=e;a=e={annotationType:Dt.INK,color:Array.from(v),thickness:E,opacity:A,paths:{points:d},boxes:null,pageIndex:I-1,rect:h.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:_,richText:C,comment:(M==null?void 0:M.str)||null,creationDate:R,modificationDate:L}}const l=await super.deserialize(e,n,s);return l._initialData=a,e.comment&&l.setCommentData(e),l}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new rv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Yt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:s}){this._drawingOptions=vd.getDefaultDrawingOptions({stroke:ut.makeHexColor(...e),"stroke-width":n,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s}=this.serializeDraw(e),{_drawingOptions:{stroke:a,"stroke-opacity":l,"stroke-width":d}}=this,h=Object.assign(super.serialize(e),{color:Ce._colorManager.convert(a),opacity:l,thickness:d,paths:{lines:n,points:s}});return this.addComment(h),e?(h.isCopy=!0,h):this.annotationElementId&&!N(this,Mv,DD).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};Mv=new WeakSet,DD=function(e){const{color:n,thickness:s,opacity:a,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((d,h)=>d!==n[h])||e.thickness!==s||e.opacity!==a||e.pageIndex!==l},W(vd,"_type","ink"),W(vd,"_editorType",Dt.INK),W(vd,"_defaultDrawingOptions",null);let rT=vd;class aT extends Ng{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const a0=8,ep=3;var ru,oe,lT,Ws,kD,LD,cT,F0,PD,UD,OD,uT,dT,BD;class Yr{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:s},a,l,d,h){let f=new OffscreenCanvas(1,1),m=f.getContext("2d",{alpha:!1});const v=200,A=m.font=`${n} ${s} ${v}px ${e}`,{actualBoundingBoxLeft:E,actualBoundingBoxRight:_,actualBoundingBoxAscent:C,actualBoundingBoxDescent:M,fontBoundingBoxAscent:R,fontBoundingBoxDescent:L,width:I}=m.measureText(t),U=1.5,P=Math.ceil(Math.max(Math.abs(E)+Math.abs(_)||0,I)*U),O=Math.ceil(Math.max(Math.abs(C)+Math.abs(M)||v,Math.abs(R)+Math.abs(L)||v)*U);f=new OffscreenCanvas(P,O),m=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=A,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,P,O),m.fillStyle="black",m.fillText(t,P*(U-1)/2,O*(3-U)/2);const F=N(this,oe,uT).call(this,m.getImageData(0,0,P,O).data),Z=N(this,oe,OD).call(this,F),X=N(this,oe,dT).call(this,Z),nt=N(this,oe,cT).call(this,F,P,O,X);return this.processDrawnLines({lines:{curves:nt,width:P,height:O},pageWidth:a,pageHeight:l,rotation:d,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,n,s,a){const[l,d,h]=N(this,oe,BD).call(this,t),[f,m]=N(this,oe,UD).call(this,l,d,h,Math.hypot(d,h)*u(this,ru).sigmaSFactor,u(this,ru).sigmaR,u(this,ru).kernelSize),v=N(this,oe,dT).call(this,m),A=N(this,oe,cT).call(this,f,d,h,v);return this.processDrawnLines({lines:{curves:A,width:d,height:h},pageWidth:e,pageHeight:n,rotation:s,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:s,innerMargin:a,mustSmooth:l,areContours:d}){s%180!==0&&([e,n]=[n,e]);const{curves:h,width:f,height:m}=t,v=t.thickness??0,A=[],E=Math.min(e/f,n/m),_=E/e,C=E/n,M=[];for(const{points:L}of h){const I=l?N(this,oe,PD).call(this,L):L;if(!I)continue;M.push(I);const U=I.length,P=new Float32Array(U),O=new Float32Array(3*(U===2?2:U-2));if(A.push({line:O,points:P}),U===2){P[0]=I[0]*_,P[1]=I[1]*C,O.set([NaN,NaN,NaN,NaN,P[0],P[1]],0);continue}let[F,Z,X,nt]=I;F*=_,Z*=C,X*=_,nt*=C,P.set([F,Z,X,nt],0),O.set([NaN,NaN,NaN,NaN,F,Z],0);for(let it=4;it<U;it+=2){const dt=P[it]=I[it]*_,gt=P[it+1]=I[it+1]*C;O.set(ft.createBezierPoints(F,Z,X,nt,dt,gt),(it-2)*3),[F,Z,X,nt]=[X,nt,dt,gt]}}if(A.length===0)return null;const R=d?new aT:new Ng;return R.build(A,e,n,1,s,d?0:v,a),{outline:R,newCurves:M,areContours:d,thickness:v,width:f,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:s,height:a}){let l=1/0,d=-1/0,h=0;for(const I of t){h+=I.length;for(let U=2,P=I.length;U<P;U++){const O=I[U]-I[U-2];l=Math.min(l,O),d=Math.max(d,O)}}let f;l>=-128&&d<=127?f=Int8Array:l>=-32768&&d<=32767?f=Int16Array:f=Int32Array;const m=t.length,v=a0+ep*m,A=new Uint32Array(v);let E=0;A[E++]=v*Uint32Array.BYTES_PER_ELEMENT+(h-2*m)*f.BYTES_PER_ELEMENT,A[E++]=0,A[E++]=s,A[E++]=a,A[E++]=e?0:1,A[E++]=Math.max(0,Math.floor(n??0)),A[E++]=m,A[E++]=f.BYTES_PER_ELEMENT;for(const I of t)A[E++]=I.length-2,A[E++]=I[0],A[E++]=I[1];const _=new CompressionStream("deflate-raw"),C=_.writable.getWriter();await C.ready,C.write(A);const M=f.prototype.constructor;for(const I of t){const U=new M(I.length-2);for(let P=2,O=I.length;P<O;P++)U[P-2]=I[P]-I[P-2];C.write(U)}C.close();const R=await new Response(_.readable).arrayBuffer();return new Uint8Array(R).toBase64()}static async decompressSignature(t){try{const e=Uint8Array.fromBase64(t),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),a=s.getWriter();await a.ready,a.write(e).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let l=null,d=0;for await(const I of n)l||(l=new Uint8Array(new Uint32Array(I.buffer,0,4)[0])),l.set(I,d),d+=I.length;const h=new Uint32Array(l.buffer,0,l.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const m=h[2],v=h[3],A=h[4]===0,E=h[5],_=h[6],C=h[7],M=[],R=(a0+ep*_)*Uint32Array.BYTES_PER_ELEMENT;let L;switch(C){case Int8Array.BYTES_PER_ELEMENT:L=new Int8Array(l.buffer,R);break;case Int16Array.BYTES_PER_ELEMENT:L=new Int16Array(l.buffer,R);break;case Int32Array.BYTES_PER_ELEMENT:L=new Int32Array(l.buffer,R);break}d=0;for(let I=0;I<_;I++){const U=h[ep*I+a0],P=new Float32Array(U+2);M.push(P);for(let O=0;O<ep-1;O++)P[O]=h[ep*I+a0+O+1];for(let O=0;O<U;O++)P[O+2]=P[O]+L[d++]}return{areContours:A,thickness:E,outlines:M,width:m,height:v}}catch(e){return xt(`decompressSignature: ${e}`),null}}}ru=new WeakMap,oe=new WeakSet,lT=function(t,e,n,s){return n-=t,s-=e,n===0?s>0?0:4:n===1?s+6:2-s},Ws=new WeakMap,kD=function(t,e,n,s,a,l,d){const h=N(this,oe,lT).call(this,n,s,a,l);for(let f=0;f<8;f++){const m=(-f+h-d+16)%8,v=u(this,Ws)[2*m],A=u(this,Ws)[2*m+1];if(t[(n+v)*e+(s+A)]!==0)return m}return-1},LD=function(t,e,n,s,a,l,d){const h=N(this,oe,lT).call(this,n,s,a,l);for(let f=0;f<8;f++){const m=(f+h+d+16)%8,v=u(this,Ws)[2*m],A=u(this,Ws)[2*m+1];if(t[(n+v)*e+(s+A)]!==0)return m}return-1},cT=function(t,e,n,s){const a=t.length,l=new Int32Array(a);for(let m=0;m<a;m++)l[m]=t[m]<=s?1:0;for(let m=1;m<n-1;m++)l[m*e]=l[m*e+e-1]=0;for(let m=0;m<e;m++)l[m]=l[e*n-1-m]=0;let d=1,h;const f=[];for(let m=1;m<n-1;m++){h=1;for(let v=1;v<e-1;v++){const A=m*e+v,E=l[A];if(E===0)continue;let _=m,C=v;if(E===1&&l[A-1]===0)d+=1,C-=1;else if(E>=1&&l[A+1]===0)d+=1,C+=1,E>1&&(h=E);else{E!==1&&(h=Math.abs(E));continue}const M=[v,m],R=C===v+1,L={isHole:R,points:M,id:d,parent:0};f.push(L);let I;for(const it of f)if(it.id===h){I=it;break}I?I.isHole?L.parent=R?I.parent:h:L.parent=R?h:I.parent:L.parent=R?h:0;const U=N(this,oe,kD).call(this,l,e,m,v,_,C,0);if(U===-1){l[A]=-d,l[A]!==1&&(h=Math.abs(l[A]));continue}let P=u(this,Ws)[2*U],O=u(this,Ws)[2*U+1];const F=m+P,Z=v+O;_=F,C=Z;let X=m,nt=v;for(;;){const it=N(this,oe,LD).call(this,l,e,X,nt,_,C,1);P=u(this,Ws)[2*it],O=u(this,Ws)[2*it+1];const dt=X+P,gt=nt+O;M.push(gt,dt);const ct=X*e+nt;if(l[ct+1]===0?l[ct]=-d:l[ct]===1&&(l[ct]=d),dt===m&&gt===v&&X===F&&nt===Z){l[A]!==1&&(h=Math.abs(l[A]));break}else _=X,C=nt,X=dt,nt=gt}}}return f},F0=function(t,e,n,s){if(n-e<=4){for(let F=e;F<n-2;F+=2)s.push(t[F],t[F+1]);return}const a=t[e],l=t[e+1],d=t[n-4]-a,h=t[n-3]-l,f=Math.hypot(d,h),m=d/f,v=h/f,A=m*l-v*a,E=h/d,_=1/f,C=Math.atan(E),M=Math.cos(C),R=Math.sin(C),L=_*(Math.abs(M)+Math.abs(R)),I=_*(1-L+L**2),U=Math.max(Math.atan(Math.abs(R+M)*I),Math.atan(Math.abs(R-M)*I));let P=0,O=e;for(let F=e+2;F<n-2;F+=2){const Z=Math.abs(A-m*t[F+1]+v*t[F]);Z>P&&(O=F,P=Z)}P>(f*U)**2?(N(this,oe,F0).call(this,t,e,O+2,s),N(this,oe,F0).call(this,t,O,n,s)):s.push(a,l)},PD=function(t){const e=[],n=t.length;return N(this,oe,F0).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},UD=function(t,e,n,s,a,l){const d=new Float32Array(l**2),h=-2*s**2,f=l>>1;for(let C=0;C<l;C++){const M=(C-f)**2;for(let R=0;R<l;R++)d[C*l+R]=Math.exp((M+(R-f)**2)/h)}const m=new Float32Array(256),v=-2*a**2;for(let C=0;C<256;C++)m[C]=Math.exp(C**2/v);const A=t.length,E=new Uint8Array(A),_=new Uint32Array(256);for(let C=0;C<n;C++)for(let M=0;M<e;M++){const R=C*e+M,L=t[R];let I=0,U=0;for(let O=0;O<l;O++){const F=C+O-f;if(!(F<0||F>=n))for(let Z=0;Z<l;Z++){const X=M+Z-f;if(X<0||X>=e)continue;const nt=t[F*e+X],it=d[O*l+Z]*m[Math.abs(nt-L)];I+=nt*it,U+=it}}const P=E[R]=Math.round(I/U);_[P]++}return[E,_]},OD=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},uT=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let s=-1/0,a=1/0;for(let d=0,h=n.length;d<h;d++){const f=n[d]=t[d<<2];s=Math.max(s,f),a=Math.min(a,f)}const l=255/(s-a);for(let d=0,h=n.length;d<h;d++)n[d]=(n[d]-a)*l;return n},dT=function(t){let e,n=-1/0,s=-1/0;const a=t.findIndex(h=>h!==0);let l=a,d=a;for(e=a;e<256;e++){const h=t[e];h>n&&(e-l>s&&(s=e-l,d=e-1),n=h,l=e)}for(e=d-1;e>=0&&!(t[e]>t[e+1]);e--);return e},BD=function(t){const e=t,{width:n,height:s}=t,{maxDim:a}=u(this,ru);let l=n,d=s;if(n>a||s>a){let A=n,E=s,_=Math.log2(Math.max(n,s)/a);const C=Math.floor(_);_=_===C?C-1:C;for(let R=0;R<_;R++){l=Math.ceil(A/2),d=Math.ceil(E/2);const L=new OffscreenCanvas(l,d);L.getContext("2d").drawImage(t,0,0,A,E,0,0,l,d),A=l,E=d,t!==e&&t.close(),t=L.transferToImageBitmap()}const M=Math.min(a/l,a/d);l=Math.round(l*M),d=Math.round(d*M)}const f=new OffscreenCanvas(l,d).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,d),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,d);const m=f.getImageData(0,0,l,d).data;return[N(this,oe,uT).call(this,m),l,d]},x(Yr,oe),x(Yr,ru,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),x(Yr,Ws,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class zT extends xD{constructor(){super(),super.updateProperties({fill:Ce._defaultLineColor,"stroke-width":0})}clone(){const t=new zT;return t.updateAll(this),t}}class VT extends $v{constructor(t){super(t),super.updateProperties({stroke:Ce._defaultLineColor,"stroke-width":1})}clone(){const t=new VT(this._viewParameters);return t.updateAll(this),t}}var fl,Do,pl,au;const Di=class Di extends uv{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});x(this,fl,!1);x(this,Do,null);x(this,pl,null);x(this,au,null);this._willKeepAspectRatio=!0,T(this,pl,e.signatureData||null),T(this,Do,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){Ce.initialize(e,n),this._defaultDrawingOptions=new zT,this._defaultDrawnSignatureOptions=new VT(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Mt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,Do)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(u(this,pl)){const{lines:a,mustSmooth:l,areContours:d,description:h,uuid:f,heightInPage:m}=u(this,pl),{rawDims:{pageWidth:v,pageHeight:A},rotation:E}=this.parent.viewport,_=Yr.processDrawnLines({lines:a,pageWidth:v,pageHeight:A,rotation:E,innerMargin:Di._INNER_MARGIN,mustSmooth:l,areContours:d});this.addSignature(_,m,h,f)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:u(this,Do)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){T(this,au,e),this.addEditToolbar()}getUuid(){return u(this,au)}get description(){return u(this,Do)}set description(e){T(this,Do,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:s,width:a,height:l}=u(this,pl),d=Math.max(a,l),h=Yr.processDrawnLines({lines:{curves:e.map(f=>({points:f})),thickness:s,width:a,height:l},pageWidth:d,pageHeight:d,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,s,a){const{x:l,y:d}=this,{outline:h}=T(this,pl,e);T(this,fl,h instanceof aT),this.description=s;let f;u(this,fl)?f=Di.getDefaultDrawingOptions():(f=Di._defaultDrawnSignatureOptions.clone(),f.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:f});const[,m]=this.pageDimensions;let v=n/m;v=v>=1?.5:v,this.width*=v/this.height,this.width>=1&&(v*=.9/this.width,this.width=.9),this.height=v,this.setDims(),this.x=l,this.y=d,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:s},rotation:a}=this.parent.viewport;return Yr.process(e,n,s,a,Di._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:s,pageHeight:a},rotation:l}=this.parent.viewport;return Yr.extractContoursFromText(e,n,s,a,l,Di._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:s},rotation:a}=this.parent.viewport;return Yr.processDrawnLines({lines:e,pageWidth:n,pageHeight:s,rotation:a,innerMargin:Di._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=Di.getDefaultDrawingOptions():(this._drawingOptions=Di._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":a}}=this,l=Object.assign(super.serialize(e),{isSignature:!0,areContours:u(this,fl),color:[0,0,0],thickness:u(this,fl)?0:a});return this.addComment(l),e?(l.paths={lines:n,points:s},l.uuid=u(this,au),l.isCopy=!0):l.lines=n,u(this,Do)&&(l.accessibilityData={type:"Figure",alt:u(this,Do)}),l}static deserializeDraw(e,n,s,a,l,d){return d.areContours?aT.deserialize(e,n,s,a,l,d):Ng.deserialize(e,n,s,a,l,d)}static async deserialize(e,n,s){var l;const a=await super.deserialize(e,n,s);return T(a,fl,e.areContours),a.description=((l=e.accessibilityData)==null?void 0:l.alt)||"",T(a,au,e.uuid),a}};fl=new WeakMap,Do=new WeakMap,pl=new WeakMap,au=new WeakMap,W(Di,"_type","signature"),W(Di,"_editorType",Dt.SIGNATURE),W(Di,"_defaultDrawingOptions",null);let hT=Di;var ke,Sn,ml,Hr,gl,zh,Gr,lu,ko,Qi,Vh,Wt,Ep,Tp,H0,G0,z0,pT,V0,FD;class fT extends Ce{constructor(e){super({...e,name:"stampEditor"});x(this,Wt);x(this,ke,null);x(this,Sn,null);x(this,ml,null);x(this,Hr,null);x(this,gl,null);x(this,zh,"");x(this,Gr,null);x(this,lu,!1);x(this,ko,null);x(this,Qi,!1);x(this,Vh,!1);T(this,Hr,e.bitmapUrl),T(this,gl,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){Ce.initialize(e,n)}static isHandlingMimeForPasting(e){return Wb.includes(e)}static paste(e,n){n.pasteEditor({mode:Dt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:l,height:d}=e||this.copyCanvas(null,null,!0).imageData,h=await s.guess({name:"altText",request:{data:a,width:l,height:d,channels:a.length/(l*d)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const f=h.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e;u(this,Sn)&&(T(this,ke,null),this._uiManager.imageManager.deleteId(u(this,Sn)),(e=u(this,Gr))==null||e.remove(),T(this,Gr,null),u(this,ko)&&(clearTimeout(u(this,ko)),T(this,ko,null))),super.remove()}rebuild(){if(!this.parent){u(this,Sn)&&N(this,Wt,H0).call(this);return}super.rebuild(),this.div!==null&&(u(this,Sn)&&u(this,Gr)===null&&N(this,Wt,H0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(u(this,ml)||u(this,ke)||u(this,Hr)||u(this,gl)||u(this,Sn)||u(this,lu))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),u(this,lu)||(u(this,ke)?N(this,Wt,G0).call(this):N(this,Wt,H0).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:s,bitmap:a}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(T(this,Sn,s),a&&T(this,ke,a),T(this,lu,!1),N(this,Wt,G0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,ko)!==null&&clearTimeout(u(this,ko)),T(this,ko,setTimeout(()=>{T(this,ko,null),N(this,Wt,pT).call(this)},200))}copyCanvas(e,n,s=!1){e||(e=224);const{width:a,height:l}=u(this,ke),d=new Po;let h=u(this,ke),f=a,m=l,v=null;if(n){if(a>n||l>n){const F=Math.min(n/a,n/l);f=Math.floor(a*F),m=Math.floor(l*F)}v=document.createElement("canvas");const E=v.width=Math.ceil(f*d.sx),_=v.height=Math.ceil(m*d.sy);u(this,Qi)||(h=N(this,Wt,z0).call(this,E,_));const C=v.getContext("2d");C.filter=this._uiManager.hcmFilter;let M="white",R="#cfcfd8";this._uiManager.hcmFilter!=="none"?R="black":I4.isDarkMode&&(M="#8f8f9d",R="#42414d");const L=15,I=L*d.sx,U=L*d.sy,P=new OffscreenCanvas(I*2,U*2),O=P.getContext("2d");O.fillStyle=M,O.fillRect(0,0,I*2,U*2),O.fillStyle=R,O.fillRect(0,0,I,U),O.fillRect(I,U,I,U),C.fillStyle=C.createPattern(P,"repeat"),C.fillRect(0,0,E,_),C.drawImage(h,0,0,h.width,h.height,0,0,E,_)}let A=null;if(s){let E,_;if(d.symmetric&&h.width<e&&h.height<e)E=h.width,_=h.height;else if(h=u(this,ke),a>e||l>e){const R=Math.min(e/a,e/l);E=Math.floor(a*R),_=Math.floor(l*R),u(this,Qi)||(h=N(this,Wt,z0).call(this,E,_))}const M=new OffscreenCanvas(E,_).getContext("2d",{willReadFrequently:!0});M.drawImage(h,0,0,h.width,h.height,0,0,E,_),A={width:E,height:_,data:M.getImageData(0,0,E,_).data}}return{canvas:v,width:f,height:m,imageData:A}}static async deserialize(e,n,s){var M;let a=null,l=!1;if(e instanceof eD){const{data:{rect:R,rotation:L,id:I,structParent:U,popupRef:P,richText:O,contentsObj:F,creationDate:Z,modificationDate:X},container:nt,parent:{page:{pageNumber:it}},canvas:dt}=e;let gt,ct;dt?(delete e.canvas,{id:gt,bitmap:ct}=s.imageManager.getFromCanvas(nt.id,dt),dt.remove()):(l=!0,e._hasNoCanvas=!0);const At=((M=await n._structTree.getAriaAttributes(`${fd}${I}`))==null?void 0:M.get("aria-label"))||"";a=e={annotationType:Dt.STAMP,bitmapId:gt,bitmap:ct,pageIndex:it-1,rect:R.slice(0),rotation:L,annotationElementId:I,id:I,deleted:!1,accessibilityData:{decorative:!1,altText:At},isSvg:!1,structParent:U,popupRef:P,richText:O,comment:(F==null?void 0:F.str)||null,creationDate:Z,modificationDate:X}}const d=await super.deserialize(e,n,s),{rect:h,bitmap:f,bitmapUrl:m,bitmapId:v,isSvg:A,accessibilityData:E}=e;l?(s.addMissingCanvas(e.id,d),T(d,lu,!0)):v&&s.imageManager.isValidId(v)?(T(d,Sn,v),f&&T(d,ke,f)):T(d,Hr,m),T(d,Qi,A);const[_,C]=d.pageDimensions;return d.width=(h[2]-h[0])/_,d.height=(h[3]-h[1])/C,E&&(d.altTextData=E),d._initialData=a,e.comment&&d.setCommentData(e),T(d,Vh,!!a),d}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(e),{bitmapId:u(this,Sn),isSvg:u(this,Qi)});if(this.addComment(s),e)return s.bitmapUrl=N(this,Wt,V0).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:a,altText:l}=this.serializeAltText(!1);if(!a&&l&&(s.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const h=N(this,Wt,FD).call(this,s);return h.isSame?null:(h.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(n===null)return s;n.stamps||(n.stamps=new Map);const d=u(this,Qi)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(u(this,Sn)))n.stamps.set(u(this,Sn),{area:d,serialized:s}),s.bitmap=N(this,Wt,V0).call(this,!1);else if(u(this,Qi)){const h=n.stamps.get(u(this,Sn));d>h.area&&(h.area=d,h.serialized.bitmap.close(),h.serialized.bitmap=N(this,Wt,V0).call(this,!1))}return s}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}ke=new WeakMap,Sn=new WeakMap,ml=new WeakMap,Hr=new WeakMap,gl=new WeakMap,zh=new WeakMap,Gr=new WeakMap,lu=new WeakMap,ko=new WeakMap,Qi=new WeakMap,Vh=new WeakMap,Wt=new WeakSet,Ep=function(e,n=!1){if(!e){this.remove();return}T(this,ke,e.bitmap),n||(T(this,Sn,e.id),T(this,Qi,e.isSvg)),e.file&&T(this,zh,e.file.name),N(this,Wt,G0).call(this)},Tp=function(){if(T(this,ml,null),this._uiManager.enableWaiting(!1),!!u(this,Gr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,ke)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,ke)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},H0=function(){if(u(this,Sn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,Sn)).then(s=>N(this,Wt,Ep).call(this,s,!0)).finally(()=>N(this,Wt,Tp).call(this));return}if(u(this,Hr)){const s=u(this,Hr);T(this,Hr,null),this._uiManager.enableWaiting(!0),T(this,ml,this._uiManager.imageManager.getFromUrl(s).then(a=>N(this,Wt,Ep).call(this,a)).finally(()=>N(this,Wt,Tp).call(this)));return}if(u(this,gl)){const s=u(this,gl);T(this,gl,null),this._uiManager.enableWaiting(!0),T(this,ml,this._uiManager.imageManager.getFromFile(s).then(a=>N(this,Wt,Ep).call(this,a)).finally(()=>N(this,Wt,Tp).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Wb.join(",");const n=this._uiManager._signal;T(this,ml,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),N(this,Wt,Ep).call(this,a)}s()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>N(this,Wt,Tp).call(this))),e.click()},G0=function(){var f;const{div:e}=this;let{width:n,height:s}=u(this,ke);const[a,l]=this.pageDimensions,d=.75;if(this.width)n=this.width*a,s=this.height*l;else if(n>d*a||s>d*l){const m=Math.min(d*a/n,d*l/s);n*=m,s*=m}this._uiManager.enableWaiting(!1);const h=T(this,Gr,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/a,this.height=s/l,this.setDims(),(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),N(this,Wt,pT).call(this),u(this,Vh)||(this.parent.addUndoableEditor(this),T(this,Vh,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,zh)&&this.div.setAttribute("aria-description",u(this,zh)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},z0=function(e,n){const{width:s,height:a}=u(this,ke);let l=s,d=a,h=u(this,ke);for(;l>2*e||d>2*n;){const f=l,m=d;l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),d>2*n&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const v=new OffscreenCanvas(l,d);v.getContext("2d").drawImage(h,0,0,f,m,0,0,l,d),h=v.transferToImageBitmap()}return h},pT=function(){const[e,n]=this.parentDimensions,{width:s,height:a}=this,l=new Po,d=Math.ceil(s*e*l.sx),h=Math.ceil(a*n*l.sy),f=u(this,Gr);if(!f||f.width===d&&f.height===h)return;f.width=d,f.height=h;const m=u(this,Qi)?u(this,ke):N(this,Wt,z0).call(this,d,h),v=f.getContext("2d");v.filter=this._uiManager.hcmFilter,v.drawImage(m,0,0,m.width,m.height,0,0,d,h)},V0=function(e){if(e){if(u(this,Qi)){const a=this._uiManager.imageManager.getSvgUrl(u(this,Sn));if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=u(this,ke),n.getContext("2d").drawImage(u(this,ke),0,0),n.toDataURL()}if(u(this,Qi)){const[n,s]=this.pageDimensions,a=Math.round(this.width*n*_l.PDF_TO_CSS_UNITS),l=Math.round(this.height*s*_l.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(a,l);return d.getContext("2d").drawImage(u(this,ke),0,0,u(this,ke).width,u(this,ke).height,0,0,a,l),d.transferToImageBitmap()}return structuredClone(u(this,ke))},FD=function(e){var d;const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,a=e.pageIndex===n,l=(((d=e.accessibilityData)==null?void 0:d.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&l,isSameAltText:l}},W(fT,"_type","stamp"),W(fT,"_editorType",Dt.STAMP);var cu,qh,yl,vl,zr,Si,Al,Yh,$h,Qs,Vr,bn,qr,Sl,Xh,vt,bl,Ee,gT,HD,uo,yT,vT,q0;const Hs=class Hs{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:a,annotationLayer:l,drawLayer:d,textLayer:h,viewport:f,l10n:m}){x(this,Ee);x(this,cu);x(this,qh,!1);x(this,yl,null);x(this,vl,null);x(this,zr,null);x(this,Si,new Map);x(this,Al,!1);x(this,Yh,!1);x(this,$h,!1);x(this,Qs,null);x(this,Vr,null);x(this,bn,null);x(this,qr,null);x(this,Sl,null);x(this,Xh,-1);x(this,vt);const v=[...u(Hs,bl).values()];if(!Hs._initialized){Hs._initialized=!0;for(const A of v)A.initialize(m,t)}t.registerEditorTypes(v),T(this,vt,t),this.pageIndex=e,this.div=n,T(this,cu,a),T(this,yl,l),this.viewport=f,T(this,bn,h),this.drawLayer=d,this._structTree=s,u(this,vt).addLayer(this)}updatePageIndex(t){this.pageIndex=t}get isEmpty(){return u(this,Si).size===0}get isInvisible(){return this.isEmpty&&u(this,vt).getMode()===Dt.NONE}updateToolbar(t){u(this,vt).updateToolbar(t)}updateMode(t=u(this,vt).getMode()){switch(N(this,Ee,q0).call(this),t){case Dt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Dt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Dt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Dt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of u(Hs,bl).values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=u(this,bn))==null?void 0:e.div)}setEditingState(t){u(this,vt).setEditingState(t)}addCommands(t){u(this,vt).addCommands(t)}cleanUndoStack(t){u(this,vt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=u(this,yl))==null||e.togglePointerEvents(t)}async enable(){var n;T(this,$h,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=u(this,Sl))==null||n.abort(),T(this,Sl,null);const t=new Set;for(const s of u(this,Ee,gT))s.enableEditing(),s.show(!0),s.annotationElementId&&(u(this,vt).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const e=u(this,yl);if(e)for(const s of e.getEditableAnnotations()){if(s.hide(),u(this,vt).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const a=await this.deserialize(s);a&&(this.addOrRebuild(a),a.enableEditing())}T(this,$h,!1),u(this,vt)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var s;if(T(this,Yh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),u(this,bn)&&!u(this,Sl)){T(this,Sl,new AbortController);const a=u(this,vt).combinedSignal(u(this,Sl));u(this,bn).div.addEventListener("pointerdown",l=>{const{clientX:h,clientY:f,timeStamp:m}=l,v=u(this,Xh);if(m-v>500){T(this,Xh,m);return}T(this,Xh,-1);const{classList:A}=this.div;A.toggle("getElements",!0);const E=document.elementsFromPoint(h,f);if(A.toggle("getElements",!1),!this.div.contains(E[0]))return;let _;const C=new RegExp(`^${Cp}[0-9]+$`);for(const R of E)if(C.test(R.id)){_=R.id;break}if(!_)return;const M=u(this,Si).get(_);(M==null?void 0:M.annotationElementId)===null&&(l.stopPropagation(),l.preventDefault(),M.dblclick(l))},{signal:a,capture:!0})}const t=u(this,yl),e=[];if(t){const a=new Map,l=new Map;for(const h of u(this,Ee,gT)){if(h.disableEditing(),!h.annotationElementId){e.push(h);continue}if(h.serialize()!==null){a.set(h.annotationElementId,h);continue}else l.set(h.annotationElementId,h);(s=this.getEditableAnnotation(h.annotationElementId))==null||s.show(),h.remove()}const d=t.getEditableAnnotations();for(const h of d){const{id:f}=h.data;if(u(this,vt).isDeletedAnnotationElement(f)){h.updateEdited({deleted:!0});continue}let m=l.get(f);if(m){m.resetAnnotationElement(h),m.show(!1),h.show();continue}m=a.get(f),m&&(u(this,vt).addChangedExistingAnnotation(m),m.renderAnnotationElement(h)&&m.show(!1)),h.show()}}N(this,Ee,q0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const a of u(Hs,bl).values())n.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t==null||t.updateFakeAnnotations(e),T(this,Yh,!1)}getEditableAnnotation(t){var e;return((e=u(this,yl))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){u(this,vt).getActive()!==t&&u(this,vt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=u(this,bn))!=null&&t.div&&!u(this,qr)){T(this,qr,new AbortController);const e=u(this,vt).combinedSignal(u(this,qr));u(this,bn).div.addEventListener("pointerdown",N(this,Ee,HD).bind(this),{signal:e}),u(this,bn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=u(this,bn))!=null&&t.div&&u(this,qr)&&(u(this,qr).abort(),T(this,qr,null),u(this,bn).div.classList.remove("highlighting"))}enableClick(){if(u(this,vl))return;T(this,vl,new AbortController);const t=u(this,vt).combinedSignal(u(this,vl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=u(this,vl))==null||t.abort(),T(this,vl,null)}attach(t){u(this,Si).set(t.id,t);const{annotationElementId:e}=t;e&&u(this,vt).isDeletedAnnotationElement(e)&&u(this,vt).removeDeletedAnnotationElement(t)}detach(t){var e;u(this,Si).delete(t.id),(e=u(this,cu))==null||e.removePointerInTextLayer(t.contentDiv),!u(this,Yh)&&t.annotationElementId&&u(this,vt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),u(this,vt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(u(this,vt).addDeletedAnnotationElement(t),Ce.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),u(this,vt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!u(this,$h)),u(this,vt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!u(this,zr)&&(t._focusEventsAllowed=!1,T(this,zr,setTimeout(()=>{T(this,zr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:u(this,vt)._signal}),e.focus())},0))),t._structTreeParentId=(n=u(this,cu))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of u(this,Si).values())if(e.uid===t)return e;return null}getNextId(){return u(this,vt).getId()}combinedSignal(t){return u(this,vt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=u(this,Ee,uo))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await u(this,vt).updateMode(t.mode);const{offsetX:n,offsetY:s}=N(this,Ee,vT).call(this),a=this.getNextId(),l=N(this,Ee,yT).call(this,{parent:this,id:a,x:n,y:s,uiManager:u(this,vt),isCentered:!0,...e});l&&this.add(l)}async deserialize(t){var e;return await((e=u(Hs,bl).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,u(this,vt)))||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),a=N(this,Ee,yT).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:u(this,vt),isCentered:e,...n});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(N(this,Ee,vT).call(this),!0,t)}setSelected(t){u(this,vt).setSelected(t)}toggleSelected(t){u(this,vt).toggleSelected(t)}unselect(t){u(this,vt).unselect(t)}pointerup(t){var s;const{isMac:e}=hn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!u(this,Al)||(T(this,Al,!1),(s=u(this,Ee,uo))!=null&&s.isDrawer&&u(this,Ee,uo).supportMultipleDrawings))return;if(!u(this,qh)){T(this,qh,!0);return}const n=u(this,vt).getMode();if(n===Dt.STAMP||n===Dt.SIGNATURE){u(this,vt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var s;if(u(this,vt).getMode()===Dt.HIGHLIGHT&&this.enableTextSelection(),u(this,Al)){T(this,Al,!1);return}const{isMac:e}=hn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(T(this,Al,!0),(s=u(this,Ee,uo))!=null&&s.isDrawer){this.startDrawingSession(t);return}const n=u(this,vt).getActive();T(this,qh,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),u(this,Qs)){u(this,Ee,uo).startDrawing(this,u(this,vt),!1,t);return}u(this,vt).setCurrentDrawingSession(this),T(this,Qs,new AbortController);const e=u(this,vt).combinedSignal(u(this,Qs));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(T(this,Vr,null),this.commitOrRemove())},{signal:e}),u(this,Ee,uo).startDrawing(this,u(this,vt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&T(this,Vr,e);return}u(this,Vr)&&setTimeout(()=>{var e;(e=u(this,Vr))==null||e.focus(),T(this,Vr,null)},0)}endDrawingSession(t=!1){return u(this,Qs)?(u(this,vt).setCurrentDrawingSession(null),u(this,Qs).abort(),T(this,Qs,null),T(this,Vr,null),u(this,Ee,uo).endDrawing(t)):null}findNewParent(t,e,n){const s=u(this,vt).findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return u(this,Qs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,Qs)&&u(this,Ee,uo).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=u(this,vt).getActive())==null?void 0:t.parent)===this&&(u(this,vt).commitOrRemove(),u(this,vt).setActiveEditor(null)),u(this,zr)&&(clearTimeout(u(this,zr)),T(this,zr,null));for(const n of u(this,Si).values())(e=u(this,cu))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,u(this,Si).clear(),u(this,vt).removeLayer(this)}render({viewport:t}){this.viewport=t,du(this.div,t);for(const e of u(this,vt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){u(this,vt).commitOrRemove(),N(this,Ee,q0).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,du(this.div,{rotation:n}),e!==n)for(const s of u(this,Si).values())s.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return u(this,vt).viewParameters.realScale}};cu=new WeakMap,qh=new WeakMap,yl=new WeakMap,vl=new WeakMap,zr=new WeakMap,Si=new WeakMap,Al=new WeakMap,Yh=new WeakMap,$h=new WeakMap,Qs=new WeakMap,Vr=new WeakMap,bn=new WeakMap,qr=new WeakMap,Sl=new WeakMap,Xh=new WeakMap,vt=new WeakMap,bl=new WeakMap,Ee=new WeakSet,gT=function(){return u(this,Si).size!==0?u(this,Si).values():u(this,vt).getEditors(this.pageIndex)},HD=function(t){u(this,vt).unselectAll();const{target:e}=t;if(e===u(this,bn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&u(this,bn).div.contains(e)){const{isMac:n}=hn.platform;if(t.button!==0||t.ctrlKey&&n)return;u(this,vt).showAllEditors("highlight",!0,!0),u(this,bn).div.classList.add("free"),this.toggleDrawing(),cv.startHighlighting(this,u(this,vt).direction==="ltr",{target:u(this,bn).div,x:t.x,y:t.y}),u(this,bn).div.addEventListener("pointerup",()=>{u(this,bn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,vt)._signal}),t.preventDefault()}},uo=function(){return u(Hs,bl).get(u(this,vt).getMode())},yT=function(t){const e=u(this,Ee,uo);return e?new e.prototype.constructor(t):null},vT=function(){const{x:t,y:e,width:n,height:s}=this.boundingClientRect,a=Math.max(0,t),l=Math.max(0,e),d=Math.min(window.innerWidth,t+n),h=Math.min(window.innerHeight,e+s),f=(a+d)/2-t,m=(l+h)/2-e,[v,A]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:v,offsetY:A}},q0=function(){for(const t of u(this,Si).values())t.isEmpty()&&t.remove()},W(Hs,"_initialized",!1),x(Hs,bl,new Map([WE,rT,fT,cv,hT].map(t=>[t._editorType,t])));let mT=Hs;var Zs,Zn,uu,_g,Rv,GD,Oo,ST,zD,bT;const cn=class cn{constructor(){x(this,Oo);x(this,Zs,null);x(this,Zn,new Map);x(this,uu,new Map)}setParent(t){if(!u(this,Zs)){T(this,Zs,t);return}if(u(this,Zs)!==t){if(u(this,Zn).size>0)for(const e of u(this,Zn).values())e.remove(),t.append(e);T(this,Zs,t)}}static get _svgFactory(){return Mt(this,"_svgFactory",new av)}draw(t,e=!1,n=!1){const s=an(cn,_g)._++,a=N(this,Oo,ST).call(this),l=cn._svgFactory.createElement("defs");a.append(l);const d=cn._svgFactory.createElement("path");l.append(d);const h=`path_${s}`;d.setAttribute("id",h),d.setAttribute("vector-effect","non-scaling-stroke"),e&&u(this,uu).set(s,d);const f=n?N(this,Oo,zD).call(this,l,h):null,m=cn._svgFactory.createElement("use");return a.append(m),m.setAttribute("href",`#${h}`),this.updateProperties(a,t),u(this,Zn).set(s,a),{id:s,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=an(cn,_g)._++,s=N(this,Oo,ST).call(this),a=cn._svgFactory.createElement("defs");s.append(a);const l=cn._svgFactory.createElement("path");a.append(l);const d=`path_${n}`;l.setAttribute("id",d),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const v=cn._svgFactory.createElement("mask");a.append(v),h=`mask_${n}`,v.setAttribute("id",h),v.setAttribute("maskUnits","objectBoundingBox");const A=cn._svgFactory.createElement("rect");v.append(A),A.setAttribute("width","1"),A.setAttribute("height","1"),A.setAttribute("fill","white");const E=cn._svgFactory.createElement("use");v.append(E),E.setAttribute("href",`#${d}`),E.setAttribute("stroke","none"),E.setAttribute("fill","black"),E.setAttribute("fill-rule","nonzero"),E.classList.add("mask")}const f=cn._svgFactory.createElement("use");s.append(f),f.setAttribute("href",`#${d}`),h&&f.setAttribute("mask",`url(#${h})`);const m=f.cloneNode();return s.append(m),f.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(s,t),u(this,Zn).set(n,s),n}finalizeDraw(t,e){u(this,uu).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var h;if(!e)return;const{root:n,bbox:s,rootClass:a,path:l}=e,d=typeof t=="number"?u(this,Zn).get(t):t;if(d){if(n&&N(this,Oo,bT).call(this,d,n),s&&N(h=cn,Rv,GD).call(h,d,s),a){const{classList:f}=d;for(const[m,v]of Object.entries(a))f.toggle(m,v)}if(l){const m=d.firstElementChild.firstElementChild;N(this,Oo,bT).call(this,m,l)}}}updateParent(t,e){if(e===this)return;const n=u(this,Zn).get(t);n&&(u(e,Zs).append(n),u(this,Zn).delete(t),u(e,Zn).set(t,n))}remove(t){u(this,uu).delete(t),u(this,Zs)!==null&&(u(this,Zn).get(t).remove(),u(this,Zn).delete(t))}destroy(){T(this,Zs,null);for(const t of u(this,Zn).values())t.remove();u(this,Zn).clear(),u(this,uu).clear()}};Zs=new WeakMap,Zn=new WeakMap,uu=new WeakMap,_g=new WeakMap,Rv=new WeakSet,GD=function(t,[e,n,s,a]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*s}%`,l.height=`${100*a}%`},Oo=new WeakSet,ST=function(){const t=cn._svgFactory.create(1,1,!0);return u(this,Zs).append(t),t.setAttribute("aria-hidden",!0),t},zD=function(t,e){const n=cn._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const a=cn._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),s},bT=function(t,e){for(const[n,s]of Object.entries(e))s===null?t.removeAttribute(n):t.setAttribute(n,s)},x(cn,Rv),x(cn,_g,0);let AT=cn;globalThis._pdfjsTestingUtils={HighlightOutliner:ZE};globalThis.pdfjsLib={AbortException:Tl,AnnotationEditorLayer:mT,AnnotationEditorParamsType:Yt,AnnotationEditorType:Dt,AnnotationEditorUIManager:hu,AnnotationLayer:JE,AnnotationMode:xa,AnnotationType:en,applyOpacity:k4,build:Hz,ColorPicker:ov,createValidAbsoluteUrl:SN,CSSConstants:D4,DOMSVGFactory:av,DrawLayer:AT,FeatureTest:hn,fetchData:wg,findContrastColor:L4,getDocument:FI,getFilenameFromUrl:w4,getPdfFilenameFromUrl:x4,getRGB:Mg,getUuid:EN,getXfaPageViewport:R4,GlobalWorkerOptions:Lo,ImageKind:u0,InvalidPDFException:Jb,isDataScheme:Hv,isPdfFile:UT,isValidExplicitDest:Y4,MathClamp:Ln,noContextMenu:Ls,normalizeUnicode:_4,OPS:wp,OutputScale:Po,PagesMapper:Mp,PasswordResponses:p4,PDFDataRangeTransport:HI,PDFDateString:j0,PDFWorker:Np,PermissionFlag:f4,PixelsPerInch:_l,RenderingCancelledException:PT,renderRichText:_N,ResponseException:Z0,setLayerDimensions:du,shadow:Mt,SignatureExtractor:Yr,stopEvent:qe,SupportedImageMimeTypes:Wb,TextLayer:Rp,TouchManager:ev,updateUrlHash:bN,Util:ut,VerbosityLevel:Uv,version:Fz,XfaLayer:TN};const uV="/assets/pdf.worker.min-wgc6bjNh.mjs";Lo.workerSrc=uV;const dV=({onClose:o,onUpload:t})=>{const[e,n]=jt.useState(!1),[s,a]=jt.useState(!1),[l,d]=jt.useState(null),h=jt.useRef(null),f=_=>{_.preventDefault(),n(!0)},m=_=>{_.preventDefault(),n(!1)},v=_=>{_.preventDefault(),n(!1),_.dataTransfer.files&&_.dataTransfer.files.length>0&&E(_.dataTransfer.files[0])},A=_=>{_.target.files&&_.target.files.length>0&&E(_.target.files[0])},E=async _=>{if(_.type!=="application/pdf"){d("Please upload a PDF file.");return}a(!0),d(null);try{const C=await _.arrayBuffer(),M=await FI({data:C}).promise;let R="";for(let L=1;L<=M.numPages;L++){const P=(await(await M.getPage(L)).getTextContent()).items.map(O=>O.str).join(" ");R+=P+`
`}await t(R),o()}catch(C){console.error("Error parsing PDF:",C),d("Failed to extract text from PDF. Please try a different file.")}finally{a(!1)}};return k.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:k.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden",children:[k.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-100",children:[k.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Import Resume"}),k.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:k.jsx(Cg,{size:24})})]}),k.jsxs("div",{className:"p-8",children:[k.jsxs("div",{className:`
              border-2 border-dashed rounded-xl p-10 text-center transition-all duration-200 cursor-pointer
              ${e?"border-accent bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}
            `,onDragOver:f,onDragLeave:m,onDrop:v,onClick:()=>{var _;return(_=h.current)==null?void 0:_.click()},children:[k.jsx("input",{type:"file",ref:h,className:"hidden",accept:".pdf",onChange:A}),s?k.jsxs("div",{className:"flex flex-col items-center py-4",children:[k.jsx(_R,{size:48,className:"text-accent animate-spin mb-4"}),k.jsx("p",{className:"text-gray-600 font-medium",children:"Analyzing resume data..."}),k.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"This is powered by AI and may take a moment"})]}):k.jsxs("div",{className:"flex flex-col items-center",children:[k.jsx("div",{className:"bg-blue-100 p-4 rounded-full mb-4",children:k.jsx(xR,{size:32,className:"text-accent"})}),k.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Click or Drag & Drop to Upload"}),k.jsx("p",{className:"text-gray-500 text-sm max-w-xs mx-auto mb-6",children:"Upload your existing resume (PDF) and we'll automatically update your portfolio data."}),k.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 bg-gray-100 px-3 py-1.5 rounded-full",children:[k.jsx(ER,{size:14}),k.jsx("span",{children:"PDF files only (max 10MB)"})]})]})]}),l&&k.jsxs("div",{className:"mt-4 p-3 bg-red-50 text-red-600 text-sm rounded-lg flex items-start gap-2",children:[k.jsx(SR,{size:16,className:"mt-0.5 flex-shrink-0"}),k.jsx("span",{children:l})]})]})]})})},hV=({onOpenBuilder:o,onOpenUploader:t})=>{const{language:e,setLanguage:n,labels:s,isBuilderMode:a,data:l,setCustomData:d}=Bo(),h=()=>{a?window.confirm("Exit Edit Mode? Your changes are saved to local storage, but reverting will switch back to demo data. Continue?")&&d(null):d(l)},f=()=>{const m=["en","de","jp"],A=(m.indexOf(e)+1)%m.length;n(m[A])};return k.jsx("nav",{className:"fixed w-full z-40 bg-white/80 backdrop-blur-md border-b border-gray-100",children:k.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"flex justify-between items-center h-16",children:[k.jsx("span",{className:"text-xl font-bold text-primary",children:"AM."}),k.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[k.jsx("a",{href:"#",className:"text-gray-600 hover:text-accent text-sm font-medium transition-colors",children:s.nav.home}),k.jsx("a",{href:"#experience",className:"text-gray-600 hover:text-accent text-sm font-medium transition-colors",children:s.nav.experience}),k.jsx("a",{href:"#skills",className:"text-gray-600 hover:text-accent text-sm font-medium transition-colors",children:s.nav.skills}),k.jsx("a",{href:"#achievements",className:"text-gray-600 hover:text-accent text-sm font-medium transition-colors",children:s.nav.achievements}),!a&&k.jsxs("div",{className:"relative group",children:[k.jsxs("button",{className:"flex items-center text-gray-600 hover:text-accent text-sm font-medium transition-colors",children:[k.jsx(_T,{size:16,className:"mr-1"}),k.jsx("span",{className:"uppercase",children:e})]}),k.jsxs("div",{className:"absolute right-0 mt-2 w-32 bg-white rounded-md shadow-lg border border-gray-100 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform",children:[k.jsx("button",{onClick:()=>n("en"),className:`block w-full text-left px-4 py-2 text-sm ${e==="en"?"bg-blue-50 text-accent font-medium":"text-gray-700 hover:bg-gray-50"}`,children:"English"}),k.jsx("button",{onClick:()=>n("de"),className:`block w-full text-left px-4 py-2 text-sm ${e==="de"?"bg-blue-50 text-accent font-medium":"text-gray-700 hover:bg-gray-50"}`,children:"Deutsch"}),k.jsx("button",{onClick:()=>n("jp"),className:`block w-full text-left px-4 py-2 text-sm ${e==="jp"?"bg-blue-50 text-accent font-medium":"text-gray-700 hover:bg-gray-50"}`,children:""})]})]})]}),k.jsxs("div",{className:"flex items-center gap-4",children:[k.jsx("div",{className:"md:hidden flex items-center mr-2",children:!a&&k.jsx("button",{onClick:f,className:"text-gray-600 hover:text-accent",children:k.jsx("span",{className:"uppercase font-bold text-xs border border-gray-300 rounded px-1 py-0.5",children:e})})}),k.jsxs("button",{onClick:h,className:`hidden sm:flex items-center gap-2 text-sm font-medium px-3 py-2 rounded-full transition-colors border ${a?"bg-green-50 text-green-700 border-green-200 hover:bg-green-100":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:[k.jsx(wR,{size:16,className:a?"fill-current":"text-gray-500"}),k.jsx("span",{children:a?"Editing On":"Enable Editing"})]}),k.jsxs("button",{onClick:o,className:"hidden sm:flex items-center gap-2 text-sm font-medium text-gray-700 border border-gray-300 bg-white px-3 py-2 rounded-full hover:bg-gray-50 transition-colors",children:[k.jsx(TT,{size:16,className:"text-accent"}),k.jsx("span",{children:"JSON"})]}),k.jsxs("a",{href:"Ayushman_Mishra_Frontend.pdf",download:`${l.basics.name.replace(" ","_")}_Resume.pdf`,className:"hidden sm:flex items-center gap-2 text-sm font-medium text-gray-700 border border-gray-300 bg-white px-3 py-2 rounded-full hover:bg-gray-50 transition-colors",children:[k.jsx(bR,{size:16,className:"text-accent"}),k.jsx("span",{children:s.hero.downloadCV})]}),k.jsx("a",{href:"mailto:ayushmishra.ui@gmail.com",className:"text-sm font-medium text-white bg-primary px-4 py-2 rounded-full hover:bg-slate-800 transition-colors",children:s.nav.hireMe})]})]})})})},fV=()=>{const{showApology:o,setShowApology:t}=Bo();return k.jsx(d4,{isVisible:o,onClose:()=>t(!1),message:"My natural language is English, so I apologize if there are any translation mistakes."})},pV=()=>{const[o,t]=jt.useState(!1),[e,n]=jt.useState(!1),{setCustomData:s,setShowApology:a}=Bo(),l=async d=>{try{const h=await c4(d);h&&(s(h),console.log("Resume parsed and data updated!"))}catch(h){console.error("Failed to parse resume:",h),alert("Failed to parse resume. Please check the console for details.")}};return k.jsxs("div",{className:"min-h-screen bg-white",children:[k.jsx(hV,{onOpenBuilder:()=>t(!0),onOpenUploader:()=>n(!0)}),k.jsxs("main",{children:[k.jsx(FP,{}),k.jsx(VP,{}),k.jsx(zP,{}),k.jsx(qP,{})]}),k.jsx(YP,{}),k.jsx(u4,{}),k.jsx(fV,{}),k.jsx("button",{onClick:()=>t(!0),className:"fixed bottom-6 left-6 bg-white text-gray-700 p-4 rounded-full shadow-lg border border-gray-200 z-50 sm:hidden","aria-label":"Edit Portfolio",children:k.jsx(TT,{size:20,className:"text-accent"})}),o&&k.jsx(h4,{onClose:()=>t(!1)}),e&&k.jsx(dV,{onClose:()=>n(!1),onUpload:l})]})};function mV(){return k.jsx(IL,{children:k.jsx(pV,{})})}const VD=document.getElementById("root");if(!VD)throw new Error("Could not find root element to mount to");const gV=wL.createRoot(VD);gV.render(k.jsx(vL.StrictMode,{children:k.jsx(mV,{})}));
